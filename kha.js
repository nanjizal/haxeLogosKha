// Generated by Haxe 4.0.0-preview.5
(function ($hx_exports, $global) { "use strict";
$hx_exports["kha"] = $hx_exports["kha"] || {};
$hx_exports["kha"]["input"] = $hx_exports["kha"]["input"] || {};
;$hx_exports["kha"]["_Color"] = $hx_exports["kha"]["_Color"] || {};
var $hxClasses = {},$estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = $hxEnums || {},$_;
function $extend(from, fields) {
	var proto = Object.create(from);
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}var App = function() {
	this.t2 = 0.;
	this.t1 = 0.;
	this.t0 = Math.PI;
	this.cols = 10;
	this.rows = 10;
	this.images = [];
	this.allTxt = [];
	kha_Assets.loadEverything($bind(this,this.loadAll));
};
$hxClasses["App"] = App;
App.__name__ = true;
App.prototype = {
	img: null
	,scalableImage: null
	,allTxt: null
	,images: null
	,rows: null
	,cols: null
	,hi: null
	,wid: null
	,mouseX: null
	,mouseY: null
	,loadAll: function() {
		var _gthis = this;
		haxe_Log.trace("loadAll",{ fileName : "App.hx", lineNumber : 36, className : "App", methodName : "loadAll"});
		Main.resize();
		this.setup();
		kha_System.notifyOnFrames(function(framebuffer) {
			_gthis.render(framebuffer[0]);
		});
		kha_Scheduler.addTimeTask($bind(this,this.update),0,0.0166666666666666664);
	}
	,setup: function() {
		this.createImages();
		var mouseAndKey1 = new mouseAndKey_MouseAndKey();
		mouseAndKey1.change = $bind(this,this.move);
	}
	,move: function(x,y) {
		this.mouseX = x;
		this.mouseY = y;
	}
	,createImages: function() {
		this.img = kha_Assets.images.haxe128x128;
		this.scalableImage = new simpleText_ScalableImage(this.img);
		var _g = 0;
		var _g1 = this.rows;
		while(_g < _g1) {
			var i = _g++;
			this.images[i] = [];
			var _g2 = 0;
			var _g11 = this.cols;
			while(_g2 < _g11) {
				var j = _g2++;
				this.images[i][j] = new simpleText_ScalableImage(this.img);
				this.images[i][j].scale = 0.3;
			}
		}
	}
	,update: function() {
	}
	,t0: null
	,t1: null
	,t2: null
	,render: function(framebuffer) {
		this.t0 += Math.PI / 1000;
		this.t1 += Math.PI / 130;
		this.t2 += Math.PI / 90;
		var g2 = framebuffer.get_g2();
		g2.begin();
		g2.clear(kha__$Color_Color_$Impl_$._new(-15198184));
		g2.set_color(-1);
		var border = 30;
		var w = this.scalableImage.img.get_width() * 0.2;
		var h = this.scalableImage.img.get_height() * 0.2;
		var m0__00 = 1;
		var m0__10 = 0;
		var m0__20 = this.mouseX;
		var m0__01 = 0;
		var m0__11 = 1;
		var m0__21 = this.mouseY;
		var m0__02 = 0;
		var m0__12 = 0;
		var m0__22 = 1;
		var scaleTransform = Main.scaleTransform;
		var v_x = w;
		var v_y = h;
		var w1 = scaleTransform._02 * v_x + scaleTransform._12 * v_y + scaleTransform._22;
		var x = (scaleTransform._00 * v_x + scaleTransform._10 * v_y + scaleTransform._20) / w1;
		var y = (scaleTransform._01 * v_x + scaleTransform._11 * v_y + scaleTransform._21) / w1;
		var sv_x = x;
		var sv_y = y;
		var wid = Main.wid;
		var hi = Main.hi;
		var scaleTransform1 = Main.scaleTransform;
		var a0;
		switch(simpleText_Alignment.TopLeft._hx_index) {
		case 2:case 7:
			var wid1 = Main.wid;
			var hi1 = Main.hi;
			var w2 = wid1 - border * 2;
			var h2 = hi1 - border * 2;
			var dw = w2 - w;
			var dh = h2 - h;
			var scale = dw < dh ? w2 / w : h2 / h;
			if(scale < 0) {
				scale = 0.;
			}
			var scaleTransform__00 = scale;
			var scaleTransform__10 = 0;
			var scaleTransform__20 = 0;
			var scaleTransform__01 = 0;
			var scaleTransform__11 = scale;
			var scaleTransform__21 = 0;
			var scaleTransform__02 = 0;
			var scaleTransform__12 = 0;
			var scaleTransform__22 = 1;
			var value_x = w;
			var value_y = h;
			var w3 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
			var x1 = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w3;
			var y1 = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w3;
			var sv_x1 = x1;
			var sv_y1 = y1;
			var _this__00 = 1;
			var _this__10 = 0;
			var _this__20 = wid1 - sv_x1 - border;
			var _this__01 = 0;
			var _this__11 = 1;
			var _this__21 = hi1 / 2 - sv_y1 / 2;
			var _this__02 = 0;
			var _this__12 = 0;
			var _this__22 = 1;
			a0 = new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
			break;
		case 0:case 5:
			var wid2 = Main.wid;
			var hi2 = Main.hi;
			var w21 = wid2 - border * 2;
			var h21 = hi2 - border * 2;
			var dw1 = w21 - w;
			var dh1 = h21 - h;
			var scale1 = dw1 < dh1 ? w21 / w : h21 / h;
			if(scale1 < 0) {
				scale1 = 0.;
			}
			var scaleTransform__001 = scale1;
			var scaleTransform__101 = 0;
			var scaleTransform__201 = 0;
			var scaleTransform__011 = 0;
			var scaleTransform__111 = scale1;
			var scaleTransform__211 = 0;
			var scaleTransform__021 = 0;
			var scaleTransform__121 = 0;
			var scaleTransform__221 = 1;
			var value_x1 = w;
			var value_y1 = h;
			var w4 = scaleTransform__021 * value_x1 + scaleTransform__121 * value_y1 + scaleTransform__221;
			var x2 = (scaleTransform__001 * value_x1 + scaleTransform__101 * value_y1 + scaleTransform__201) / w4;
			var y2 = (scaleTransform__011 * value_x1 + scaleTransform__111 * value_y1 + scaleTransform__211) / w4;
			var sv_x2 = x2;
			var sv_y2 = y2;
			var _this__001 = 1;
			var _this__101 = 0;
			var _this__201 = wid2 / 2 - sv_x2 / 2;
			var _this__011 = 0;
			var _this__111 = 1;
			var _this__211 = hi2 / 2 - sv_y2 / 2;
			var _this__021 = 0;
			var _this__121 = 0;
			var _this__221 = 1;
			a0 = new kha_math_FastMatrix3(_this__001 * scaleTransform__001 + _this__101 * scaleTransform__011 + _this__201 * scaleTransform__021,_this__001 * scaleTransform__101 + _this__101 * scaleTransform__111 + _this__201 * scaleTransform__121,_this__001 * scaleTransform__201 + _this__101 * scaleTransform__211 + _this__201 * scaleTransform__221,_this__011 * scaleTransform__001 + _this__111 * scaleTransform__011 + _this__211 * scaleTransform__021,_this__011 * scaleTransform__101 + _this__111 * scaleTransform__111 + _this__211 * scaleTransform__121,_this__011 * scaleTransform__201 + _this__111 * scaleTransform__211 + _this__211 * scaleTransform__221,_this__021 * scaleTransform__001 + _this__121 * scaleTransform__011 + _this__221 * scaleTransform__021,_this__021 * scaleTransform__101 + _this__121 * scaleTransform__111 + _this__221 * scaleTransform__121,_this__021 * scaleTransform__201 + _this__121 * scaleTransform__211 + _this__221 * scaleTransform__221);
			break;
		case 1:case 6:
			var wid3 = Main.wid;
			var hi3 = Main.hi;
			var w22 = wid3 - border * 2;
			var h22 = hi3 - border * 2;
			var dw2 = w22 - w;
			var dh2 = h22 - h;
			var scale2 = dw2 < dh2 ? w22 / w : h22 / h;
			if(scale2 < 0) {
				scale2 = 0.;
			}
			var scaleTransform__002 = scale2;
			var scaleTransform__102 = 0;
			var scaleTransform__202 = 0;
			var scaleTransform__012 = 0;
			var scaleTransform__112 = scale2;
			var scaleTransform__212 = 0;
			var scaleTransform__022 = 0;
			var scaleTransform__122 = 0;
			var scaleTransform__222 = 1;
			var value_x2 = w;
			var value_y2 = h;
			var w5 = scaleTransform__022 * value_x2 + scaleTransform__122 * value_y2 + scaleTransform__222;
			var x3 = (scaleTransform__002 * value_x2 + scaleTransform__102 * value_y2 + scaleTransform__202) / w5;
			var y3 = (scaleTransform__012 * value_x2 + scaleTransform__112 * value_y2 + scaleTransform__212) / w5;
			var sv_x3 = x3;
			var sv_y3 = y3;
			var _this__002 = 1;
			var _this__102 = 0;
			var _this__202 = border;
			var _this__012 = 0;
			var _this__112 = 1;
			var _this__212 = hi3 / 2 - sv_y3 / 2;
			var _this__022 = 0;
			var _this__122 = 0;
			var _this__222 = 1;
			a0 = new kha_math_FastMatrix3(_this__002 * scaleTransform__002 + _this__102 * scaleTransform__012 + _this__202 * scaleTransform__022,_this__002 * scaleTransform__102 + _this__102 * scaleTransform__112 + _this__202 * scaleTransform__122,_this__002 * scaleTransform__202 + _this__102 * scaleTransform__212 + _this__202 * scaleTransform__222,_this__012 * scaleTransform__002 + _this__112 * scaleTransform__012 + _this__212 * scaleTransform__022,_this__012 * scaleTransform__102 + _this__112 * scaleTransform__112 + _this__212 * scaleTransform__122,_this__012 * scaleTransform__202 + _this__112 * scaleTransform__212 + _this__212 * scaleTransform__222,_this__022 * scaleTransform__002 + _this__122 * scaleTransform__012 + _this__222 * scaleTransform__022,_this__022 * scaleTransform__102 + _this__122 * scaleTransform__112 + _this__222 * scaleTransform__122,_this__022 * scaleTransform__202 + _this__122 * scaleTransform__212 + _this__222 * scaleTransform__222);
			break;
		case 3:case 8:
			var wid4 = Main.wid;
			var hi4 = Main.hi;
			var w23 = wid4 - border * 2;
			var h23 = hi4 - border * 2;
			var dw3 = w23 - w;
			var dh3 = h23 - h;
			var scale3 = dw3 < dh3 ? w23 / w : h23 / h;
			if(scale3 < 0) {
				scale3 = 0.;
			}
			var scaleTransform__003 = scale3;
			var scaleTransform__103 = 0;
			var scaleTransform__203 = 0;
			var scaleTransform__013 = 0;
			var scaleTransform__113 = scale3;
			var scaleTransform__213 = 0;
			var scaleTransform__023 = 0;
			var scaleTransform__123 = 0;
			var scaleTransform__223 = 1;
			var value_x3 = w;
			var value_y3 = h;
			var w6 = scaleTransform__023 * value_x3 + scaleTransform__123 * value_y3 + scaleTransform__223;
			var x4 = (scaleTransform__003 * value_x3 + scaleTransform__103 * value_y3 + scaleTransform__203) / w6;
			var y4 = (scaleTransform__013 * value_x3 + scaleTransform__113 * value_y3 + scaleTransform__213) / w6;
			var sv_x4 = x4;
			var sv_y4 = y4;
			var _this__003 = 1;
			var _this__103 = 0;
			var _this__203 = wid4 / 2 - sv_x4 / 2;
			var _this__013 = 0;
			var _this__113 = 1;
			var _this__213 = border;
			var _this__023 = 0;
			var _this__123 = 0;
			var _this__223 = 1;
			a0 = new kha_math_FastMatrix3(_this__003 * scaleTransform__003 + _this__103 * scaleTransform__013 + _this__203 * scaleTransform__023,_this__003 * scaleTransform__103 + _this__103 * scaleTransform__113 + _this__203 * scaleTransform__123,_this__003 * scaleTransform__203 + _this__103 * scaleTransform__213 + _this__203 * scaleTransform__223,_this__013 * scaleTransform__003 + _this__113 * scaleTransform__013 + _this__213 * scaleTransform__023,_this__013 * scaleTransform__103 + _this__113 * scaleTransform__113 + _this__213 * scaleTransform__123,_this__013 * scaleTransform__203 + _this__113 * scaleTransform__213 + _this__213 * scaleTransform__223,_this__023 * scaleTransform__003 + _this__123 * scaleTransform__013 + _this__223 * scaleTransform__023,_this__023 * scaleTransform__103 + _this__123 * scaleTransform__113 + _this__223 * scaleTransform__123,_this__023 * scaleTransform__203 + _this__123 * scaleTransform__213 + _this__223 * scaleTransform__223);
			break;
		case 4:case 9:
			var wid5 = Main.wid;
			var hi5 = Main.hi;
			var w24 = wid5 - border * 2;
			var h24 = hi5 - border * 2;
			var dw4 = w24 - w;
			var dh4 = h24 - h;
			var scale4 = dw4 < dh4 ? w24 / w : h24 / h;
			if(scale4 < 0) {
				scale4 = 0.;
			}
			var scaleTransform__004 = scale4;
			var scaleTransform__104 = 0;
			var scaleTransform__204 = 0;
			var scaleTransform__014 = 0;
			var scaleTransform__114 = scale4;
			var scaleTransform__214 = 0;
			var scaleTransform__024 = 0;
			var scaleTransform__124 = 0;
			var scaleTransform__224 = 1;
			var value_x4 = w;
			var value_y4 = h;
			var w7 = scaleTransform__024 * value_x4 + scaleTransform__124 * value_y4 + scaleTransform__224;
			var x5 = (scaleTransform__004 * value_x4 + scaleTransform__104 * value_y4 + scaleTransform__204) / w7;
			var y5 = (scaleTransform__014 * value_x4 + scaleTransform__114 * value_y4 + scaleTransform__214) / w7;
			var sv_x5 = x5;
			var sv_y5 = y5;
			var _this__004 = 1;
			var _this__104 = 0;
			var _this__204 = wid5 / 2 - sv_x5 / 2;
			var _this__014 = 0;
			var _this__114 = 1;
			var _this__214 = hi5 - sv_y5 - border;
			var _this__024 = 0;
			var _this__124 = 0;
			var _this__224 = 1;
			a0 = new kha_math_FastMatrix3(_this__004 * scaleTransform__004 + _this__104 * scaleTransform__014 + _this__204 * scaleTransform__024,_this__004 * scaleTransform__104 + _this__104 * scaleTransform__114 + _this__204 * scaleTransform__124,_this__004 * scaleTransform__204 + _this__104 * scaleTransform__214 + _this__204 * scaleTransform__224,_this__014 * scaleTransform__004 + _this__114 * scaleTransform__014 + _this__214 * scaleTransform__024,_this__014 * scaleTransform__104 + _this__114 * scaleTransform__114 + _this__214 * scaleTransform__124,_this__014 * scaleTransform__204 + _this__114 * scaleTransform__214 + _this__214 * scaleTransform__224,_this__024 * scaleTransform__004 + _this__124 * scaleTransform__014 + _this__224 * scaleTransform__024,_this__024 * scaleTransform__104 + _this__124 * scaleTransform__114 + _this__224 * scaleTransform__124,_this__024 * scaleTransform__204 + _this__124 * scaleTransform__214 + _this__224 * scaleTransform__224);
			break;
		case 10:case 11:
			if(border * 2 + sv_x < wid) {
				var _this__005 = 1;
				var _this__105 = 0;
				var _this__205 = border;
				var _this__015 = 0;
				var _this__115 = 1;
				var _this__215 = border;
				var _this__025 = 0;
				var _this__125 = 0;
				var _this__225 = 1;
				a0 = new kha_math_FastMatrix3(_this__005 * scaleTransform1._00 + _this__105 * scaleTransform1._01 + _this__205 * scaleTransform1._02,_this__005 * scaleTransform1._10 + _this__105 * scaleTransform1._11 + _this__205 * scaleTransform1._12,_this__005 * scaleTransform1._20 + _this__105 * scaleTransform1._21 + _this__205 * scaleTransform1._22,_this__015 * scaleTransform1._00 + _this__115 * scaleTransform1._01 + _this__215 * scaleTransform1._02,_this__015 * scaleTransform1._10 + _this__115 * scaleTransform1._11 + _this__215 * scaleTransform1._12,_this__015 * scaleTransform1._20 + _this__115 * scaleTransform1._21 + _this__215 * scaleTransform1._22,_this__025 * scaleTransform1._00 + _this__125 * scaleTransform1._01 + _this__225 * scaleTransform1._02,_this__025 * scaleTransform1._10 + _this__125 * scaleTransform1._11 + _this__225 * scaleTransform1._12,_this__025 * scaleTransform1._20 + _this__125 * scaleTransform1._21 + _this__225 * scaleTransform1._22);
			} else {
				var wid6 = Main.wid;
				var hi6 = Main.hi;
				var scaleTransform2 = Main.scaleTransform;
				var _this__006 = 1;
				var _this__106 = 0;
				var _this__206 = border;
				var _this__016 = 0;
				var _this__116 = 1;
				var _this__216 = hi6 / 2 - sv_y / 2;
				var _this__026 = 0;
				var _this__126 = 0;
				var _this__226 = 1;
				a0 = new kha_math_FastMatrix3(_this__006 * scaleTransform2._00 + _this__106 * scaleTransform2._01 + _this__206 * scaleTransform2._02,_this__006 * scaleTransform2._10 + _this__106 * scaleTransform2._11 + _this__206 * scaleTransform2._12,_this__006 * scaleTransform2._20 + _this__106 * scaleTransform2._21 + _this__206 * scaleTransform2._22,_this__016 * scaleTransform2._00 + _this__116 * scaleTransform2._01 + _this__216 * scaleTransform2._02,_this__016 * scaleTransform2._10 + _this__116 * scaleTransform2._11 + _this__216 * scaleTransform2._12,_this__016 * scaleTransform2._20 + _this__116 * scaleTransform2._21 + _this__216 * scaleTransform2._22,_this__026 * scaleTransform2._00 + _this__126 * scaleTransform2._01 + _this__226 * scaleTransform2._02,_this__026 * scaleTransform2._10 + _this__126 * scaleTransform2._11 + _this__226 * scaleTransform2._12,_this__026 * scaleTransform2._20 + _this__126 * scaleTransform2._21 + _this__226 * scaleTransform2._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x < wid) {
				var _this__007 = 1;
				var _this__107 = 0;
				var _this__207 = wid - sv_x - border;
				var _this__017 = 0;
				var _this__117 = 1;
				var _this__217 = border;
				var _this__027 = 0;
				var _this__127 = 0;
				var _this__227 = 1;
				a0 = new kha_math_FastMatrix3(_this__007 * scaleTransform1._00 + _this__107 * scaleTransform1._01 + _this__207 * scaleTransform1._02,_this__007 * scaleTransform1._10 + _this__107 * scaleTransform1._11 + _this__207 * scaleTransform1._12,_this__007 * scaleTransform1._20 + _this__107 * scaleTransform1._21 + _this__207 * scaleTransform1._22,_this__017 * scaleTransform1._00 + _this__117 * scaleTransform1._01 + _this__217 * scaleTransform1._02,_this__017 * scaleTransform1._10 + _this__117 * scaleTransform1._11 + _this__217 * scaleTransform1._12,_this__017 * scaleTransform1._20 + _this__117 * scaleTransform1._21 + _this__217 * scaleTransform1._22,_this__027 * scaleTransform1._00 + _this__127 * scaleTransform1._01 + _this__227 * scaleTransform1._02,_this__027 * scaleTransform1._10 + _this__127 * scaleTransform1._11 + _this__227 * scaleTransform1._12,_this__027 * scaleTransform1._20 + _this__127 * scaleTransform1._21 + _this__227 * scaleTransform1._22);
			} else {
				var wid7 = Main.wid;
				var hi7 = Main.hi;
				var scaleTransform3 = Main.scaleTransform;
				var _this__008 = 1;
				var _this__108 = 0;
				var _this__208 = wid7 - sv_x - border;
				var _this__018 = 0;
				var _this__118 = 1;
				var _this__218 = hi7 / 2 - sv_y / 2;
				var _this__028 = 0;
				var _this__128 = 0;
				var _this__228 = 1;
				a0 = new kha_math_FastMatrix3(_this__008 * scaleTransform3._00 + _this__108 * scaleTransform3._01 + _this__208 * scaleTransform3._02,_this__008 * scaleTransform3._10 + _this__108 * scaleTransform3._11 + _this__208 * scaleTransform3._12,_this__008 * scaleTransform3._20 + _this__108 * scaleTransform3._21 + _this__208 * scaleTransform3._22,_this__018 * scaleTransform3._00 + _this__118 * scaleTransform3._01 + _this__218 * scaleTransform3._02,_this__018 * scaleTransform3._10 + _this__118 * scaleTransform3._11 + _this__218 * scaleTransform3._12,_this__018 * scaleTransform3._20 + _this__118 * scaleTransform3._21 + _this__218 * scaleTransform3._22,_this__028 * scaleTransform3._00 + _this__128 * scaleTransform3._01 + _this__228 * scaleTransform3._02,_this__028 * scaleTransform3._10 + _this__128 * scaleTransform3._11 + _this__228 * scaleTransform3._12,_this__028 * scaleTransform3._20 + _this__128 * scaleTransform3._21 + _this__228 * scaleTransform3._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y < hi) {
				var _this__009 = 1;
				var _this__109 = 0;
				var _this__209 = border;
				var _this__019 = 0;
				var _this__119 = 1;
				var _this__219 = hi - sv_y - border;
				var _this__029 = 0;
				var _this__129 = 0;
				var _this__229 = 1;
				a0 = new kha_math_FastMatrix3(_this__009 * scaleTransform1._00 + _this__109 * scaleTransform1._01 + _this__209 * scaleTransform1._02,_this__009 * scaleTransform1._10 + _this__109 * scaleTransform1._11 + _this__209 * scaleTransform1._12,_this__009 * scaleTransform1._20 + _this__109 * scaleTransform1._21 + _this__209 * scaleTransform1._22,_this__019 * scaleTransform1._00 + _this__119 * scaleTransform1._01 + _this__219 * scaleTransform1._02,_this__019 * scaleTransform1._10 + _this__119 * scaleTransform1._11 + _this__219 * scaleTransform1._12,_this__019 * scaleTransform1._20 + _this__119 * scaleTransform1._21 + _this__219 * scaleTransform1._22,_this__029 * scaleTransform1._00 + _this__129 * scaleTransform1._01 + _this__229 * scaleTransform1._02,_this__029 * scaleTransform1._10 + _this__129 * scaleTransform1._11 + _this__229 * scaleTransform1._12,_this__029 * scaleTransform1._20 + _this__129 * scaleTransform1._21 + _this__229 * scaleTransform1._22);
			} else {
				var wid8 = Main.wid;
				var hi8 = Main.hi;
				var scaleTransform4 = Main.scaleTransform;
				var _this__0010 = 1;
				var _this__1010 = 0;
				var _this__2010 = border;
				var _this__0110 = 0;
				var _this__1110 = 1;
				var _this__2110 = hi8 / 2 - sv_y / 2;
				var _this__0210 = 0;
				var _this__1210 = 0;
				var _this__2210 = 1;
				a0 = new kha_math_FastMatrix3(_this__0010 * scaleTransform4._00 + _this__1010 * scaleTransform4._01 + _this__2010 * scaleTransform4._02,_this__0010 * scaleTransform4._10 + _this__1010 * scaleTransform4._11 + _this__2010 * scaleTransform4._12,_this__0010 * scaleTransform4._20 + _this__1010 * scaleTransform4._21 + _this__2010 * scaleTransform4._22,_this__0110 * scaleTransform4._00 + _this__1110 * scaleTransform4._01 + _this__2110 * scaleTransform4._02,_this__0110 * scaleTransform4._10 + _this__1110 * scaleTransform4._11 + _this__2110 * scaleTransform4._12,_this__0110 * scaleTransform4._20 + _this__1110 * scaleTransform4._21 + _this__2110 * scaleTransform4._22,_this__0210 * scaleTransform4._00 + _this__1210 * scaleTransform4._01 + _this__2210 * scaleTransform4._02,_this__0210 * scaleTransform4._10 + _this__1210 * scaleTransform4._11 + _this__2210 * scaleTransform4._12,_this__0210 * scaleTransform4._20 + _this__1210 * scaleTransform4._21 + _this__2210 * scaleTransform4._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y < hi) {
				var _this__0011 = 1;
				var _this__1011 = 0;
				var _this__2011 = wid - sv_x - border;
				var _this__0111 = 0;
				var _this__1111 = 1;
				var _this__2111 = hi - sv_y - border;
				var _this__0211 = 0;
				var _this__1211 = 0;
				var _this__2211 = 1;
				a0 = new kha_math_FastMatrix3(_this__0011 * scaleTransform1._00 + _this__1011 * scaleTransform1._01 + _this__2011 * scaleTransform1._02,_this__0011 * scaleTransform1._10 + _this__1011 * scaleTransform1._11 + _this__2011 * scaleTransform1._12,_this__0011 * scaleTransform1._20 + _this__1011 * scaleTransform1._21 + _this__2011 * scaleTransform1._22,_this__0111 * scaleTransform1._00 + _this__1111 * scaleTransform1._01 + _this__2111 * scaleTransform1._02,_this__0111 * scaleTransform1._10 + _this__1111 * scaleTransform1._11 + _this__2111 * scaleTransform1._12,_this__0111 * scaleTransform1._20 + _this__1111 * scaleTransform1._21 + _this__2111 * scaleTransform1._22,_this__0211 * scaleTransform1._00 + _this__1211 * scaleTransform1._01 + _this__2211 * scaleTransform1._02,_this__0211 * scaleTransform1._10 + _this__1211 * scaleTransform1._11 + _this__2211 * scaleTransform1._12,_this__0211 * scaleTransform1._20 + _this__1211 * scaleTransform1._21 + _this__2211 * scaleTransform1._22);
			} else {
				var wid9 = Main.wid;
				var hi9 = Main.hi;
				var scaleTransform5 = Main.scaleTransform;
				var _this__0012 = 1;
				var _this__1012 = 0;
				var _this__2012 = wid9 - sv_x - border;
				var _this__0112 = 0;
				var _this__1112 = 1;
				var _this__2112 = hi9 / 2 - sv_y / 2;
				var _this__0212 = 0;
				var _this__1212 = 0;
				var _this__2212 = 1;
				a0 = new kha_math_FastMatrix3(_this__0012 * scaleTransform5._00 + _this__1012 * scaleTransform5._01 + _this__2012 * scaleTransform5._02,_this__0012 * scaleTransform5._10 + _this__1012 * scaleTransform5._11 + _this__2012 * scaleTransform5._12,_this__0012 * scaleTransform5._20 + _this__1012 * scaleTransform5._21 + _this__2012 * scaleTransform5._22,_this__0112 * scaleTransform5._00 + _this__1112 * scaleTransform5._01 + _this__2112 * scaleTransform5._02,_this__0112 * scaleTransform5._10 + _this__1112 * scaleTransform5._11 + _this__2112 * scaleTransform5._12,_this__0112 * scaleTransform5._20 + _this__1112 * scaleTransform5._21 + _this__2112 * scaleTransform5._22,_this__0212 * scaleTransform5._00 + _this__1212 * scaleTransform5._01 + _this__2212 * scaleTransform5._02,_this__0212 * scaleTransform5._10 + _this__1212 * scaleTransform5._11 + _this__2212 * scaleTransform5._12,_this__0212 * scaleTransform5._20 + _this__1212 * scaleTransform5._21 + _this__2212 * scaleTransform5._22);
			}
			break;
		case 18:
			var wid10 = Main.wid;
			var hi10 = Main.hi;
			var scaleTransform6 = Main.scaleTransform;
			var _this__0013 = 1;
			var _this__1013 = 0;
			var _this__2013 = wid10 / 2 - sv_x / 2;
			var _this__0113 = 0;
			var _this__1113 = 1;
			var _this__2113 = hi10 / 2 - sv_y / 2;
			var _this__0213 = 0;
			var _this__1213 = 0;
			var _this__2213 = 1;
			a0 = new kha_math_FastMatrix3(_this__0013 * scaleTransform6._00 + _this__1013 * scaleTransform6._01 + _this__2013 * scaleTransform6._02,_this__0013 * scaleTransform6._10 + _this__1013 * scaleTransform6._11 + _this__2013 * scaleTransform6._12,_this__0013 * scaleTransform6._20 + _this__1013 * scaleTransform6._21 + _this__2013 * scaleTransform6._22,_this__0113 * scaleTransform6._00 + _this__1113 * scaleTransform6._01 + _this__2113 * scaleTransform6._02,_this__0113 * scaleTransform6._10 + _this__1113 * scaleTransform6._11 + _this__2113 * scaleTransform6._12,_this__0113 * scaleTransform6._20 + _this__1113 * scaleTransform6._21 + _this__2113 * scaleTransform6._22,_this__0213 * scaleTransform6._00 + _this__1213 * scaleTransform6._01 + _this__2213 * scaleTransform6._02,_this__0213 * scaleTransform6._10 + _this__1213 * scaleTransform6._11 + _this__2213 * scaleTransform6._12,_this__0213 * scaleTransform6._20 + _this__1213 * scaleTransform6._21 + _this__2213 * scaleTransform6._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x < wid) {
				var wid11 = Main.wid;
				var hi11 = Main.hi;
				var scaleTransform7 = Main.scaleTransform;
				var _this__0014 = 1;
				var _this__1014 = 0;
				var _this__2014 = border;
				var _this__0114 = 0;
				var _this__1114 = 1;
				var _this__2114 = hi11 / 2 - sv_y / 2;
				var _this__0214 = 0;
				var _this__1214 = 0;
				var _this__2214 = 1;
				a0 = new kha_math_FastMatrix3(_this__0014 * scaleTransform7._00 + _this__1014 * scaleTransform7._01 + _this__2014 * scaleTransform7._02,_this__0014 * scaleTransform7._10 + _this__1014 * scaleTransform7._11 + _this__2014 * scaleTransform7._12,_this__0014 * scaleTransform7._20 + _this__1014 * scaleTransform7._21 + _this__2014 * scaleTransform7._22,_this__0114 * scaleTransform7._00 + _this__1114 * scaleTransform7._01 + _this__2114 * scaleTransform7._02,_this__0114 * scaleTransform7._10 + _this__1114 * scaleTransform7._11 + _this__2114 * scaleTransform7._12,_this__0114 * scaleTransform7._20 + _this__1114 * scaleTransform7._21 + _this__2114 * scaleTransform7._22,_this__0214 * scaleTransform7._00 + _this__1214 * scaleTransform7._01 + _this__2214 * scaleTransform7._02,_this__0214 * scaleTransform7._10 + _this__1214 * scaleTransform7._11 + _this__2214 * scaleTransform7._12,_this__0214 * scaleTransform7._20 + _this__1214 * scaleTransform7._21 + _this__2214 * scaleTransform7._22);
			} else {
				var wid12 = Main.wid;
				var hi12 = Main.hi;
				var scaleTransform8 = Main.scaleTransform;
				var _this__0015 = 1;
				var _this__1015 = 0;
				var _this__2015 = wid12 / 2 - sv_x / 2;
				var _this__0115 = 0;
				var _this__1115 = 1;
				var _this__2115 = hi12 / 2 - sv_y / 2;
				var _this__0215 = 0;
				var _this__1215 = 0;
				var _this__2215 = 1;
				a0 = new kha_math_FastMatrix3(_this__0015 * scaleTransform8._00 + _this__1015 * scaleTransform8._01 + _this__2015 * scaleTransform8._02,_this__0015 * scaleTransform8._10 + _this__1015 * scaleTransform8._11 + _this__2015 * scaleTransform8._12,_this__0015 * scaleTransform8._20 + _this__1015 * scaleTransform8._21 + _this__2015 * scaleTransform8._22,_this__0115 * scaleTransform8._00 + _this__1115 * scaleTransform8._01 + _this__2115 * scaleTransform8._02,_this__0115 * scaleTransform8._10 + _this__1115 * scaleTransform8._11 + _this__2115 * scaleTransform8._12,_this__0115 * scaleTransform8._20 + _this__1115 * scaleTransform8._21 + _this__2115 * scaleTransform8._22,_this__0215 * scaleTransform8._00 + _this__1215 * scaleTransform8._01 + _this__2215 * scaleTransform8._02,_this__0215 * scaleTransform8._10 + _this__1215 * scaleTransform8._11 + _this__2215 * scaleTransform8._12,_this__0215 * scaleTransform8._20 + _this__1215 * scaleTransform8._21 + _this__2215 * scaleTransform8._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x < wid) {
				var wid13 = Main.wid;
				var hi13 = Main.hi;
				var scaleTransform9 = Main.scaleTransform;
				var _this__0016 = 1;
				var _this__1016 = 0;
				var _this__2016 = wid13 - sv_x - border;
				var _this__0116 = 0;
				var _this__1116 = 1;
				var _this__2116 = hi13 / 2 - sv_y / 2;
				var _this__0216 = 0;
				var _this__1216 = 0;
				var _this__2216 = 1;
				a0 = new kha_math_FastMatrix3(_this__0016 * scaleTransform9._00 + _this__1016 * scaleTransform9._01 + _this__2016 * scaleTransform9._02,_this__0016 * scaleTransform9._10 + _this__1016 * scaleTransform9._11 + _this__2016 * scaleTransform9._12,_this__0016 * scaleTransform9._20 + _this__1016 * scaleTransform9._21 + _this__2016 * scaleTransform9._22,_this__0116 * scaleTransform9._00 + _this__1116 * scaleTransform9._01 + _this__2116 * scaleTransform9._02,_this__0116 * scaleTransform9._10 + _this__1116 * scaleTransform9._11 + _this__2116 * scaleTransform9._12,_this__0116 * scaleTransform9._20 + _this__1116 * scaleTransform9._21 + _this__2116 * scaleTransform9._22,_this__0216 * scaleTransform9._00 + _this__1216 * scaleTransform9._01 + _this__2216 * scaleTransform9._02,_this__0216 * scaleTransform9._10 + _this__1216 * scaleTransform9._11 + _this__2216 * scaleTransform9._12,_this__0216 * scaleTransform9._20 + _this__1216 * scaleTransform9._21 + _this__2216 * scaleTransform9._22);
			} else {
				var wid14 = Main.wid;
				var hi14 = Main.hi;
				var scaleTransform10 = Main.scaleTransform;
				var _this__0017 = 1;
				var _this__1017 = 0;
				var _this__2017 = wid14 / 2 - sv_x / 2;
				var _this__0117 = 0;
				var _this__1117 = 1;
				var _this__2117 = hi14 / 2 - sv_y / 2;
				var _this__0217 = 0;
				var _this__1217 = 0;
				var _this__2217 = 1;
				a0 = new kha_math_FastMatrix3(_this__0017 * scaleTransform10._00 + _this__1017 * scaleTransform10._01 + _this__2017 * scaleTransform10._02,_this__0017 * scaleTransform10._10 + _this__1017 * scaleTransform10._11 + _this__2017 * scaleTransform10._12,_this__0017 * scaleTransform10._20 + _this__1017 * scaleTransform10._21 + _this__2017 * scaleTransform10._22,_this__0117 * scaleTransform10._00 + _this__1117 * scaleTransform10._01 + _this__2117 * scaleTransform10._02,_this__0117 * scaleTransform10._10 + _this__1117 * scaleTransform10._11 + _this__2117 * scaleTransform10._12,_this__0117 * scaleTransform10._20 + _this__1117 * scaleTransform10._21 + _this__2117 * scaleTransform10._22,_this__0217 * scaleTransform10._00 + _this__1217 * scaleTransform10._01 + _this__2217 * scaleTransform10._02,_this__0217 * scaleTransform10._10 + _this__1217 * scaleTransform10._11 + _this__2217 * scaleTransform10._12,_this__0217 * scaleTransform10._20 + _this__1217 * scaleTransform10._21 + _this__2217 * scaleTransform10._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y < hi) {
				var _this__0018 = 1;
				var _this__1018 = 0;
				var _this__2018 = wid / 2 - sv_x / 2;
				var _this__0118 = 0;
				var _this__1118 = 1;
				var _this__2118 = hi - sv_y - border;
				var _this__0218 = 0;
				var _this__1218 = 0;
				var _this__2218 = 1;
				a0 = new kha_math_FastMatrix3(_this__0018 * scaleTransform1._00 + _this__1018 * scaleTransform1._01 + _this__2018 * scaleTransform1._02,_this__0018 * scaleTransform1._10 + _this__1018 * scaleTransform1._11 + _this__2018 * scaleTransform1._12,_this__0018 * scaleTransform1._20 + _this__1018 * scaleTransform1._21 + _this__2018 * scaleTransform1._22,_this__0118 * scaleTransform1._00 + _this__1118 * scaleTransform1._01 + _this__2118 * scaleTransform1._02,_this__0118 * scaleTransform1._10 + _this__1118 * scaleTransform1._11 + _this__2118 * scaleTransform1._12,_this__0118 * scaleTransform1._20 + _this__1118 * scaleTransform1._21 + _this__2118 * scaleTransform1._22,_this__0218 * scaleTransform1._00 + _this__1218 * scaleTransform1._01 + _this__2218 * scaleTransform1._02,_this__0218 * scaleTransform1._10 + _this__1218 * scaleTransform1._11 + _this__2218 * scaleTransform1._12,_this__0218 * scaleTransform1._20 + _this__1218 * scaleTransform1._21 + _this__2218 * scaleTransform1._22);
			} else {
				var wid15 = Main.wid;
				var hi15 = Main.hi;
				var scaleTransform11 = Main.scaleTransform;
				var _this__0019 = 1;
				var _this__1019 = 0;
				var _this__2019 = wid15 / 2 - sv_x / 2;
				var _this__0119 = 0;
				var _this__1119 = 1;
				var _this__2119 = hi15 / 2 - sv_y / 2;
				var _this__0219 = 0;
				var _this__1219 = 0;
				var _this__2219 = 1;
				a0 = new kha_math_FastMatrix3(_this__0019 * scaleTransform11._00 + _this__1019 * scaleTransform11._01 + _this__2019 * scaleTransform11._02,_this__0019 * scaleTransform11._10 + _this__1019 * scaleTransform11._11 + _this__2019 * scaleTransform11._12,_this__0019 * scaleTransform11._20 + _this__1019 * scaleTransform11._21 + _this__2019 * scaleTransform11._22,_this__0119 * scaleTransform11._00 + _this__1119 * scaleTransform11._01 + _this__2119 * scaleTransform11._02,_this__0119 * scaleTransform11._10 + _this__1119 * scaleTransform11._11 + _this__2119 * scaleTransform11._12,_this__0119 * scaleTransform11._20 + _this__1119 * scaleTransform11._21 + _this__2119 * scaleTransform11._22,_this__0219 * scaleTransform11._00 + _this__1219 * scaleTransform11._01 + _this__2219 * scaleTransform11._02,_this__0219 * scaleTransform11._10 + _this__1219 * scaleTransform11._11 + _this__2219 * scaleTransform11._12,_this__0219 * scaleTransform11._20 + _this__1219 * scaleTransform11._21 + _this__2219 * scaleTransform11._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y < hi) {
				var _this__0020 = 1;
				var _this__1020 = 0;
				var _this__2020 = wid / 2 - sv_x / 2;
				var _this__0120 = 0;
				var _this__1120 = 1;
				var _this__2120 = border;
				var _this__0220 = 0;
				var _this__1220 = 0;
				var _this__2220 = 1;
				a0 = new kha_math_FastMatrix3(_this__0020 * scaleTransform1._00 + _this__1020 * scaleTransform1._01 + _this__2020 * scaleTransform1._02,_this__0020 * scaleTransform1._10 + _this__1020 * scaleTransform1._11 + _this__2020 * scaleTransform1._12,_this__0020 * scaleTransform1._20 + _this__1020 * scaleTransform1._21 + _this__2020 * scaleTransform1._22,_this__0120 * scaleTransform1._00 + _this__1120 * scaleTransform1._01 + _this__2120 * scaleTransform1._02,_this__0120 * scaleTransform1._10 + _this__1120 * scaleTransform1._11 + _this__2120 * scaleTransform1._12,_this__0120 * scaleTransform1._20 + _this__1120 * scaleTransform1._21 + _this__2120 * scaleTransform1._22,_this__0220 * scaleTransform1._00 + _this__1220 * scaleTransform1._01 + _this__2220 * scaleTransform1._02,_this__0220 * scaleTransform1._10 + _this__1220 * scaleTransform1._11 + _this__2220 * scaleTransform1._12,_this__0220 * scaleTransform1._20 + _this__1220 * scaleTransform1._21 + _this__2220 * scaleTransform1._22);
			} else {
				var wid16 = Main.wid;
				var hi16 = Main.hi;
				var scaleTransform12 = Main.scaleTransform;
				var _this__0021 = 1;
				var _this__1021 = 0;
				var _this__2021 = wid16 / 2 - sv_x / 2;
				var _this__0121 = 0;
				var _this__1121 = 1;
				var _this__2121 = hi16 / 2 - sv_y / 2;
				var _this__0221 = 0;
				var _this__1221 = 0;
				var _this__2221 = 1;
				a0 = new kha_math_FastMatrix3(_this__0021 * scaleTransform12._00 + _this__1021 * scaleTransform12._01 + _this__2021 * scaleTransform12._02,_this__0021 * scaleTransform12._10 + _this__1021 * scaleTransform12._11 + _this__2021 * scaleTransform12._12,_this__0021 * scaleTransform12._20 + _this__1021 * scaleTransform12._21 + _this__2021 * scaleTransform12._22,_this__0121 * scaleTransform12._00 + _this__1121 * scaleTransform12._01 + _this__2121 * scaleTransform12._02,_this__0121 * scaleTransform12._10 + _this__1121 * scaleTransform12._11 + _this__2121 * scaleTransform12._12,_this__0121 * scaleTransform12._20 + _this__1121 * scaleTransform12._21 + _this__2121 * scaleTransform12._22,_this__0221 * scaleTransform12._00 + _this__1221 * scaleTransform12._01 + _this__2221 * scaleTransform12._02,_this__0221 * scaleTransform12._10 + _this__1221 * scaleTransform12._11 + _this__2221 * scaleTransform12._12,_this__0221 * scaleTransform12._20 + _this__1221 * scaleTransform12._21 + _this__2221 * scaleTransform12._22);
			}
			break;
		}
		var scaleTransform13 = Main.scaleTransform;
		var v_x1 = w;
		var v_y1 = h;
		var w8 = scaleTransform13._02 * v_x1 + scaleTransform13._12 * v_y1 + scaleTransform13._22;
		var x6 = (scaleTransform13._00 * v_x1 + scaleTransform13._10 * v_y1 + scaleTransform13._20) / w8;
		var y6 = (scaleTransform13._01 * v_x1 + scaleTransform13._11 * v_y1 + scaleTransform13._21) / w8;
		var sv_x6 = x6;
		var sv_y6 = y6;
		var wid17 = Main.wid;
		var hi17 = Main.hi;
		var scaleTransform14 = Main.scaleTransform;
		var b0;
		switch(simpleText_Alignment.TopRight._hx_index) {
		case 2:case 7:
			var wid18 = Main.wid;
			var hi18 = Main.hi;
			var w25 = wid18 - border * 2;
			var h25 = hi18 - border * 2;
			var dw5 = w25 - w;
			var dh5 = h25 - h;
			var scale5 = dw5 < dh5 ? w25 / w : h25 / h;
			if(scale5 < 0) {
				scale5 = 0.;
			}
			var scaleTransform__005 = scale5;
			var scaleTransform__105 = 0;
			var scaleTransform__205 = 0;
			var scaleTransform__015 = 0;
			var scaleTransform__115 = scale5;
			var scaleTransform__215 = 0;
			var scaleTransform__025 = 0;
			var scaleTransform__125 = 0;
			var scaleTransform__225 = 1;
			var value_x5 = w;
			var value_y5 = h;
			var w9 = scaleTransform__025 * value_x5 + scaleTransform__125 * value_y5 + scaleTransform__225;
			var x7 = (scaleTransform__005 * value_x5 + scaleTransform__105 * value_y5 + scaleTransform__205) / w9;
			var y7 = (scaleTransform__015 * value_x5 + scaleTransform__115 * value_y5 + scaleTransform__215) / w9;
			var sv_x7 = x7;
			var sv_y7 = y7;
			var _this__0022 = 1;
			var _this__1022 = 0;
			var _this__2022 = wid18 - sv_x7 - border;
			var _this__0122 = 0;
			var _this__1122 = 1;
			var _this__2122 = hi18 / 2 - sv_y7 / 2;
			var _this__0222 = 0;
			var _this__1222 = 0;
			var _this__2222 = 1;
			b0 = new kha_math_FastMatrix3(_this__0022 * scaleTransform__005 + _this__1022 * scaleTransform__015 + _this__2022 * scaleTransform__025,_this__0022 * scaleTransform__105 + _this__1022 * scaleTransform__115 + _this__2022 * scaleTransform__125,_this__0022 * scaleTransform__205 + _this__1022 * scaleTransform__215 + _this__2022 * scaleTransform__225,_this__0122 * scaleTransform__005 + _this__1122 * scaleTransform__015 + _this__2122 * scaleTransform__025,_this__0122 * scaleTransform__105 + _this__1122 * scaleTransform__115 + _this__2122 * scaleTransform__125,_this__0122 * scaleTransform__205 + _this__1122 * scaleTransform__215 + _this__2122 * scaleTransform__225,_this__0222 * scaleTransform__005 + _this__1222 * scaleTransform__015 + _this__2222 * scaleTransform__025,_this__0222 * scaleTransform__105 + _this__1222 * scaleTransform__115 + _this__2222 * scaleTransform__125,_this__0222 * scaleTransform__205 + _this__1222 * scaleTransform__215 + _this__2222 * scaleTransform__225);
			break;
		case 0:case 5:
			var wid19 = Main.wid;
			var hi19 = Main.hi;
			var w26 = wid19 - border * 2;
			var h26 = hi19 - border * 2;
			var dw6 = w26 - w;
			var dh6 = h26 - h;
			var scale6 = dw6 < dh6 ? w26 / w : h26 / h;
			if(scale6 < 0) {
				scale6 = 0.;
			}
			var scaleTransform__006 = scale6;
			var scaleTransform__106 = 0;
			var scaleTransform__206 = 0;
			var scaleTransform__016 = 0;
			var scaleTransform__116 = scale6;
			var scaleTransform__216 = 0;
			var scaleTransform__026 = 0;
			var scaleTransform__126 = 0;
			var scaleTransform__226 = 1;
			var value_x6 = w;
			var value_y6 = h;
			var w10 = scaleTransform__026 * value_x6 + scaleTransform__126 * value_y6 + scaleTransform__226;
			var x8 = (scaleTransform__006 * value_x6 + scaleTransform__106 * value_y6 + scaleTransform__206) / w10;
			var y8 = (scaleTransform__016 * value_x6 + scaleTransform__116 * value_y6 + scaleTransform__216) / w10;
			var sv_x8 = x8;
			var sv_y8 = y8;
			var _this__0023 = 1;
			var _this__1023 = 0;
			var _this__2023 = wid19 / 2 - sv_x8 / 2;
			var _this__0123 = 0;
			var _this__1123 = 1;
			var _this__2123 = hi19 / 2 - sv_y8 / 2;
			var _this__0223 = 0;
			var _this__1223 = 0;
			var _this__2223 = 1;
			b0 = new kha_math_FastMatrix3(_this__0023 * scaleTransform__006 + _this__1023 * scaleTransform__016 + _this__2023 * scaleTransform__026,_this__0023 * scaleTransform__106 + _this__1023 * scaleTransform__116 + _this__2023 * scaleTransform__126,_this__0023 * scaleTransform__206 + _this__1023 * scaleTransform__216 + _this__2023 * scaleTransform__226,_this__0123 * scaleTransform__006 + _this__1123 * scaleTransform__016 + _this__2123 * scaleTransform__026,_this__0123 * scaleTransform__106 + _this__1123 * scaleTransform__116 + _this__2123 * scaleTransform__126,_this__0123 * scaleTransform__206 + _this__1123 * scaleTransform__216 + _this__2123 * scaleTransform__226,_this__0223 * scaleTransform__006 + _this__1223 * scaleTransform__016 + _this__2223 * scaleTransform__026,_this__0223 * scaleTransform__106 + _this__1223 * scaleTransform__116 + _this__2223 * scaleTransform__126,_this__0223 * scaleTransform__206 + _this__1223 * scaleTransform__216 + _this__2223 * scaleTransform__226);
			break;
		case 1:case 6:
			var wid20 = Main.wid;
			var hi20 = Main.hi;
			var w27 = wid20 - border * 2;
			var h27 = hi20 - border * 2;
			var dw7 = w27 - w;
			var dh7 = h27 - h;
			var scale7 = dw7 < dh7 ? w27 / w : h27 / h;
			if(scale7 < 0) {
				scale7 = 0.;
			}
			var scaleTransform__007 = scale7;
			var scaleTransform__107 = 0;
			var scaleTransform__207 = 0;
			var scaleTransform__017 = 0;
			var scaleTransform__117 = scale7;
			var scaleTransform__217 = 0;
			var scaleTransform__027 = 0;
			var scaleTransform__127 = 0;
			var scaleTransform__227 = 1;
			var value_x7 = w;
			var value_y7 = h;
			var w11 = scaleTransform__027 * value_x7 + scaleTransform__127 * value_y7 + scaleTransform__227;
			var x9 = (scaleTransform__007 * value_x7 + scaleTransform__107 * value_y7 + scaleTransform__207) / w11;
			var y9 = (scaleTransform__017 * value_x7 + scaleTransform__117 * value_y7 + scaleTransform__217) / w11;
			var sv_x9 = x9;
			var sv_y9 = y9;
			var _this__0024 = 1;
			var _this__1024 = 0;
			var _this__2024 = border;
			var _this__0124 = 0;
			var _this__1124 = 1;
			var _this__2124 = hi20 / 2 - sv_y9 / 2;
			var _this__0224 = 0;
			var _this__1224 = 0;
			var _this__2224 = 1;
			b0 = new kha_math_FastMatrix3(_this__0024 * scaleTransform__007 + _this__1024 * scaleTransform__017 + _this__2024 * scaleTransform__027,_this__0024 * scaleTransform__107 + _this__1024 * scaleTransform__117 + _this__2024 * scaleTransform__127,_this__0024 * scaleTransform__207 + _this__1024 * scaleTransform__217 + _this__2024 * scaleTransform__227,_this__0124 * scaleTransform__007 + _this__1124 * scaleTransform__017 + _this__2124 * scaleTransform__027,_this__0124 * scaleTransform__107 + _this__1124 * scaleTransform__117 + _this__2124 * scaleTransform__127,_this__0124 * scaleTransform__207 + _this__1124 * scaleTransform__217 + _this__2124 * scaleTransform__227,_this__0224 * scaleTransform__007 + _this__1224 * scaleTransform__017 + _this__2224 * scaleTransform__027,_this__0224 * scaleTransform__107 + _this__1224 * scaleTransform__117 + _this__2224 * scaleTransform__127,_this__0224 * scaleTransform__207 + _this__1224 * scaleTransform__217 + _this__2224 * scaleTransform__227);
			break;
		case 3:case 8:
			var wid21 = Main.wid;
			var hi21 = Main.hi;
			var w28 = wid21 - border * 2;
			var h28 = hi21 - border * 2;
			var dw8 = w28 - w;
			var dh8 = h28 - h;
			var scale8 = dw8 < dh8 ? w28 / w : h28 / h;
			if(scale8 < 0) {
				scale8 = 0.;
			}
			var scaleTransform__008 = scale8;
			var scaleTransform__108 = 0;
			var scaleTransform__208 = 0;
			var scaleTransform__018 = 0;
			var scaleTransform__118 = scale8;
			var scaleTransform__218 = 0;
			var scaleTransform__028 = 0;
			var scaleTransform__128 = 0;
			var scaleTransform__228 = 1;
			var value_x8 = w;
			var value_y8 = h;
			var w12 = scaleTransform__028 * value_x8 + scaleTransform__128 * value_y8 + scaleTransform__228;
			var x10 = (scaleTransform__008 * value_x8 + scaleTransform__108 * value_y8 + scaleTransform__208) / w12;
			var y10 = (scaleTransform__018 * value_x8 + scaleTransform__118 * value_y8 + scaleTransform__218) / w12;
			var sv_x10 = x10;
			var sv_y10 = y10;
			var _this__0025 = 1;
			var _this__1025 = 0;
			var _this__2025 = wid21 / 2 - sv_x10 / 2;
			var _this__0125 = 0;
			var _this__1125 = 1;
			var _this__2125 = border;
			var _this__0225 = 0;
			var _this__1225 = 0;
			var _this__2225 = 1;
			b0 = new kha_math_FastMatrix3(_this__0025 * scaleTransform__008 + _this__1025 * scaleTransform__018 + _this__2025 * scaleTransform__028,_this__0025 * scaleTransform__108 + _this__1025 * scaleTransform__118 + _this__2025 * scaleTransform__128,_this__0025 * scaleTransform__208 + _this__1025 * scaleTransform__218 + _this__2025 * scaleTransform__228,_this__0125 * scaleTransform__008 + _this__1125 * scaleTransform__018 + _this__2125 * scaleTransform__028,_this__0125 * scaleTransform__108 + _this__1125 * scaleTransform__118 + _this__2125 * scaleTransform__128,_this__0125 * scaleTransform__208 + _this__1125 * scaleTransform__218 + _this__2125 * scaleTransform__228,_this__0225 * scaleTransform__008 + _this__1225 * scaleTransform__018 + _this__2225 * scaleTransform__028,_this__0225 * scaleTransform__108 + _this__1225 * scaleTransform__118 + _this__2225 * scaleTransform__128,_this__0225 * scaleTransform__208 + _this__1225 * scaleTransform__218 + _this__2225 * scaleTransform__228);
			break;
		case 4:case 9:
			var wid22 = Main.wid;
			var hi22 = Main.hi;
			var w29 = wid22 - border * 2;
			var h29 = hi22 - border * 2;
			var dw9 = w29 - w;
			var dh9 = h29 - h;
			var scale9 = dw9 < dh9 ? w29 / w : h29 / h;
			if(scale9 < 0) {
				scale9 = 0.;
			}
			var scaleTransform__009 = scale9;
			var scaleTransform__109 = 0;
			var scaleTransform__209 = 0;
			var scaleTransform__019 = 0;
			var scaleTransform__119 = scale9;
			var scaleTransform__219 = 0;
			var scaleTransform__029 = 0;
			var scaleTransform__129 = 0;
			var scaleTransform__229 = 1;
			var value_x9 = w;
			var value_y9 = h;
			var w13 = scaleTransform__029 * value_x9 + scaleTransform__129 * value_y9 + scaleTransform__229;
			var x11 = (scaleTransform__009 * value_x9 + scaleTransform__109 * value_y9 + scaleTransform__209) / w13;
			var y11 = (scaleTransform__019 * value_x9 + scaleTransform__119 * value_y9 + scaleTransform__219) / w13;
			var sv_x11 = x11;
			var sv_y11 = y11;
			var _this__0026 = 1;
			var _this__1026 = 0;
			var _this__2026 = wid22 / 2 - sv_x11 / 2;
			var _this__0126 = 0;
			var _this__1126 = 1;
			var _this__2126 = hi22 - sv_y11 - border;
			var _this__0226 = 0;
			var _this__1226 = 0;
			var _this__2226 = 1;
			b0 = new kha_math_FastMatrix3(_this__0026 * scaleTransform__009 + _this__1026 * scaleTransform__019 + _this__2026 * scaleTransform__029,_this__0026 * scaleTransform__109 + _this__1026 * scaleTransform__119 + _this__2026 * scaleTransform__129,_this__0026 * scaleTransform__209 + _this__1026 * scaleTransform__219 + _this__2026 * scaleTransform__229,_this__0126 * scaleTransform__009 + _this__1126 * scaleTransform__019 + _this__2126 * scaleTransform__029,_this__0126 * scaleTransform__109 + _this__1126 * scaleTransform__119 + _this__2126 * scaleTransform__129,_this__0126 * scaleTransform__209 + _this__1126 * scaleTransform__219 + _this__2126 * scaleTransform__229,_this__0226 * scaleTransform__009 + _this__1226 * scaleTransform__019 + _this__2226 * scaleTransform__029,_this__0226 * scaleTransform__109 + _this__1226 * scaleTransform__119 + _this__2226 * scaleTransform__129,_this__0226 * scaleTransform__209 + _this__1226 * scaleTransform__219 + _this__2226 * scaleTransform__229);
			break;
		case 10:case 11:
			if(border * 2 + sv_x6 < wid17) {
				var _this__0027 = 1;
				var _this__1027 = 0;
				var _this__2027 = border;
				var _this__0127 = 0;
				var _this__1127 = 1;
				var _this__2127 = border;
				var _this__0227 = 0;
				var _this__1227 = 0;
				var _this__2227 = 1;
				b0 = new kha_math_FastMatrix3(_this__0027 * scaleTransform14._00 + _this__1027 * scaleTransform14._01 + _this__2027 * scaleTransform14._02,_this__0027 * scaleTransform14._10 + _this__1027 * scaleTransform14._11 + _this__2027 * scaleTransform14._12,_this__0027 * scaleTransform14._20 + _this__1027 * scaleTransform14._21 + _this__2027 * scaleTransform14._22,_this__0127 * scaleTransform14._00 + _this__1127 * scaleTransform14._01 + _this__2127 * scaleTransform14._02,_this__0127 * scaleTransform14._10 + _this__1127 * scaleTransform14._11 + _this__2127 * scaleTransform14._12,_this__0127 * scaleTransform14._20 + _this__1127 * scaleTransform14._21 + _this__2127 * scaleTransform14._22,_this__0227 * scaleTransform14._00 + _this__1227 * scaleTransform14._01 + _this__2227 * scaleTransform14._02,_this__0227 * scaleTransform14._10 + _this__1227 * scaleTransform14._11 + _this__2227 * scaleTransform14._12,_this__0227 * scaleTransform14._20 + _this__1227 * scaleTransform14._21 + _this__2227 * scaleTransform14._22);
			} else {
				var wid23 = Main.wid;
				var hi23 = Main.hi;
				var scaleTransform15 = Main.scaleTransform;
				var _this__0028 = 1;
				var _this__1028 = 0;
				var _this__2028 = border;
				var _this__0128 = 0;
				var _this__1128 = 1;
				var _this__2128 = hi23 / 2 - sv_y6 / 2;
				var _this__0228 = 0;
				var _this__1228 = 0;
				var _this__2228 = 1;
				b0 = new kha_math_FastMatrix3(_this__0028 * scaleTransform15._00 + _this__1028 * scaleTransform15._01 + _this__2028 * scaleTransform15._02,_this__0028 * scaleTransform15._10 + _this__1028 * scaleTransform15._11 + _this__2028 * scaleTransform15._12,_this__0028 * scaleTransform15._20 + _this__1028 * scaleTransform15._21 + _this__2028 * scaleTransform15._22,_this__0128 * scaleTransform15._00 + _this__1128 * scaleTransform15._01 + _this__2128 * scaleTransform15._02,_this__0128 * scaleTransform15._10 + _this__1128 * scaleTransform15._11 + _this__2128 * scaleTransform15._12,_this__0128 * scaleTransform15._20 + _this__1128 * scaleTransform15._21 + _this__2128 * scaleTransform15._22,_this__0228 * scaleTransform15._00 + _this__1228 * scaleTransform15._01 + _this__2228 * scaleTransform15._02,_this__0228 * scaleTransform15._10 + _this__1228 * scaleTransform15._11 + _this__2228 * scaleTransform15._12,_this__0228 * scaleTransform15._20 + _this__1228 * scaleTransform15._21 + _this__2228 * scaleTransform15._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x6 < wid17) {
				var _this__0029 = 1;
				var _this__1029 = 0;
				var _this__2029 = wid17 - sv_x6 - border;
				var _this__0129 = 0;
				var _this__1129 = 1;
				var _this__2129 = border;
				var _this__0229 = 0;
				var _this__1229 = 0;
				var _this__2229 = 1;
				b0 = new kha_math_FastMatrix3(_this__0029 * scaleTransform14._00 + _this__1029 * scaleTransform14._01 + _this__2029 * scaleTransform14._02,_this__0029 * scaleTransform14._10 + _this__1029 * scaleTransform14._11 + _this__2029 * scaleTransform14._12,_this__0029 * scaleTransform14._20 + _this__1029 * scaleTransform14._21 + _this__2029 * scaleTransform14._22,_this__0129 * scaleTransform14._00 + _this__1129 * scaleTransform14._01 + _this__2129 * scaleTransform14._02,_this__0129 * scaleTransform14._10 + _this__1129 * scaleTransform14._11 + _this__2129 * scaleTransform14._12,_this__0129 * scaleTransform14._20 + _this__1129 * scaleTransform14._21 + _this__2129 * scaleTransform14._22,_this__0229 * scaleTransform14._00 + _this__1229 * scaleTransform14._01 + _this__2229 * scaleTransform14._02,_this__0229 * scaleTransform14._10 + _this__1229 * scaleTransform14._11 + _this__2229 * scaleTransform14._12,_this__0229 * scaleTransform14._20 + _this__1229 * scaleTransform14._21 + _this__2229 * scaleTransform14._22);
			} else {
				var wid24 = Main.wid;
				var hi24 = Main.hi;
				var scaleTransform16 = Main.scaleTransform;
				var _this__0030 = 1;
				var _this__1030 = 0;
				var _this__2030 = wid24 - sv_x6 - border;
				var _this__0130 = 0;
				var _this__1130 = 1;
				var _this__2130 = hi24 / 2 - sv_y6 / 2;
				var _this__0230 = 0;
				var _this__1230 = 0;
				var _this__2230 = 1;
				b0 = new kha_math_FastMatrix3(_this__0030 * scaleTransform16._00 + _this__1030 * scaleTransform16._01 + _this__2030 * scaleTransform16._02,_this__0030 * scaleTransform16._10 + _this__1030 * scaleTransform16._11 + _this__2030 * scaleTransform16._12,_this__0030 * scaleTransform16._20 + _this__1030 * scaleTransform16._21 + _this__2030 * scaleTransform16._22,_this__0130 * scaleTransform16._00 + _this__1130 * scaleTransform16._01 + _this__2130 * scaleTransform16._02,_this__0130 * scaleTransform16._10 + _this__1130 * scaleTransform16._11 + _this__2130 * scaleTransform16._12,_this__0130 * scaleTransform16._20 + _this__1130 * scaleTransform16._21 + _this__2130 * scaleTransform16._22,_this__0230 * scaleTransform16._00 + _this__1230 * scaleTransform16._01 + _this__2230 * scaleTransform16._02,_this__0230 * scaleTransform16._10 + _this__1230 * scaleTransform16._11 + _this__2230 * scaleTransform16._12,_this__0230 * scaleTransform16._20 + _this__1230 * scaleTransform16._21 + _this__2230 * scaleTransform16._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y6 < hi17) {
				var _this__0031 = 1;
				var _this__1031 = 0;
				var _this__2031 = border;
				var _this__0131 = 0;
				var _this__1131 = 1;
				var _this__2131 = hi17 - sv_y6 - border;
				var _this__0231 = 0;
				var _this__1231 = 0;
				var _this__2231 = 1;
				b0 = new kha_math_FastMatrix3(_this__0031 * scaleTransform14._00 + _this__1031 * scaleTransform14._01 + _this__2031 * scaleTransform14._02,_this__0031 * scaleTransform14._10 + _this__1031 * scaleTransform14._11 + _this__2031 * scaleTransform14._12,_this__0031 * scaleTransform14._20 + _this__1031 * scaleTransform14._21 + _this__2031 * scaleTransform14._22,_this__0131 * scaleTransform14._00 + _this__1131 * scaleTransform14._01 + _this__2131 * scaleTransform14._02,_this__0131 * scaleTransform14._10 + _this__1131 * scaleTransform14._11 + _this__2131 * scaleTransform14._12,_this__0131 * scaleTransform14._20 + _this__1131 * scaleTransform14._21 + _this__2131 * scaleTransform14._22,_this__0231 * scaleTransform14._00 + _this__1231 * scaleTransform14._01 + _this__2231 * scaleTransform14._02,_this__0231 * scaleTransform14._10 + _this__1231 * scaleTransform14._11 + _this__2231 * scaleTransform14._12,_this__0231 * scaleTransform14._20 + _this__1231 * scaleTransform14._21 + _this__2231 * scaleTransform14._22);
			} else {
				var wid25 = Main.wid;
				var hi25 = Main.hi;
				var scaleTransform17 = Main.scaleTransform;
				var _this__0032 = 1;
				var _this__1032 = 0;
				var _this__2032 = border;
				var _this__0132 = 0;
				var _this__1132 = 1;
				var _this__2132 = hi25 / 2 - sv_y6 / 2;
				var _this__0232 = 0;
				var _this__1232 = 0;
				var _this__2232 = 1;
				b0 = new kha_math_FastMatrix3(_this__0032 * scaleTransform17._00 + _this__1032 * scaleTransform17._01 + _this__2032 * scaleTransform17._02,_this__0032 * scaleTransform17._10 + _this__1032 * scaleTransform17._11 + _this__2032 * scaleTransform17._12,_this__0032 * scaleTransform17._20 + _this__1032 * scaleTransform17._21 + _this__2032 * scaleTransform17._22,_this__0132 * scaleTransform17._00 + _this__1132 * scaleTransform17._01 + _this__2132 * scaleTransform17._02,_this__0132 * scaleTransform17._10 + _this__1132 * scaleTransform17._11 + _this__2132 * scaleTransform17._12,_this__0132 * scaleTransform17._20 + _this__1132 * scaleTransform17._21 + _this__2132 * scaleTransform17._22,_this__0232 * scaleTransform17._00 + _this__1232 * scaleTransform17._01 + _this__2232 * scaleTransform17._02,_this__0232 * scaleTransform17._10 + _this__1232 * scaleTransform17._11 + _this__2232 * scaleTransform17._12,_this__0232 * scaleTransform17._20 + _this__1232 * scaleTransform17._21 + _this__2232 * scaleTransform17._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y6 < hi17) {
				var _this__0033 = 1;
				var _this__1033 = 0;
				var _this__2033 = wid17 - sv_x6 - border;
				var _this__0133 = 0;
				var _this__1133 = 1;
				var _this__2133 = hi17 - sv_y6 - border;
				var _this__0233 = 0;
				var _this__1233 = 0;
				var _this__2233 = 1;
				b0 = new kha_math_FastMatrix3(_this__0033 * scaleTransform14._00 + _this__1033 * scaleTransform14._01 + _this__2033 * scaleTransform14._02,_this__0033 * scaleTransform14._10 + _this__1033 * scaleTransform14._11 + _this__2033 * scaleTransform14._12,_this__0033 * scaleTransform14._20 + _this__1033 * scaleTransform14._21 + _this__2033 * scaleTransform14._22,_this__0133 * scaleTransform14._00 + _this__1133 * scaleTransform14._01 + _this__2133 * scaleTransform14._02,_this__0133 * scaleTransform14._10 + _this__1133 * scaleTransform14._11 + _this__2133 * scaleTransform14._12,_this__0133 * scaleTransform14._20 + _this__1133 * scaleTransform14._21 + _this__2133 * scaleTransform14._22,_this__0233 * scaleTransform14._00 + _this__1233 * scaleTransform14._01 + _this__2233 * scaleTransform14._02,_this__0233 * scaleTransform14._10 + _this__1233 * scaleTransform14._11 + _this__2233 * scaleTransform14._12,_this__0233 * scaleTransform14._20 + _this__1233 * scaleTransform14._21 + _this__2233 * scaleTransform14._22);
			} else {
				var wid26 = Main.wid;
				var hi26 = Main.hi;
				var scaleTransform18 = Main.scaleTransform;
				var _this__0034 = 1;
				var _this__1034 = 0;
				var _this__2034 = wid26 - sv_x6 - border;
				var _this__0134 = 0;
				var _this__1134 = 1;
				var _this__2134 = hi26 / 2 - sv_y6 / 2;
				var _this__0234 = 0;
				var _this__1234 = 0;
				var _this__2234 = 1;
				b0 = new kha_math_FastMatrix3(_this__0034 * scaleTransform18._00 + _this__1034 * scaleTransform18._01 + _this__2034 * scaleTransform18._02,_this__0034 * scaleTransform18._10 + _this__1034 * scaleTransform18._11 + _this__2034 * scaleTransform18._12,_this__0034 * scaleTransform18._20 + _this__1034 * scaleTransform18._21 + _this__2034 * scaleTransform18._22,_this__0134 * scaleTransform18._00 + _this__1134 * scaleTransform18._01 + _this__2134 * scaleTransform18._02,_this__0134 * scaleTransform18._10 + _this__1134 * scaleTransform18._11 + _this__2134 * scaleTransform18._12,_this__0134 * scaleTransform18._20 + _this__1134 * scaleTransform18._21 + _this__2134 * scaleTransform18._22,_this__0234 * scaleTransform18._00 + _this__1234 * scaleTransform18._01 + _this__2234 * scaleTransform18._02,_this__0234 * scaleTransform18._10 + _this__1234 * scaleTransform18._11 + _this__2234 * scaleTransform18._12,_this__0234 * scaleTransform18._20 + _this__1234 * scaleTransform18._21 + _this__2234 * scaleTransform18._22);
			}
			break;
		case 18:
			var wid27 = Main.wid;
			var hi27 = Main.hi;
			var scaleTransform19 = Main.scaleTransform;
			var _this__0035 = 1;
			var _this__1035 = 0;
			var _this__2035 = wid27 / 2 - sv_x6 / 2;
			var _this__0135 = 0;
			var _this__1135 = 1;
			var _this__2135 = hi27 / 2 - sv_y6 / 2;
			var _this__0235 = 0;
			var _this__1235 = 0;
			var _this__2235 = 1;
			b0 = new kha_math_FastMatrix3(_this__0035 * scaleTransform19._00 + _this__1035 * scaleTransform19._01 + _this__2035 * scaleTransform19._02,_this__0035 * scaleTransform19._10 + _this__1035 * scaleTransform19._11 + _this__2035 * scaleTransform19._12,_this__0035 * scaleTransform19._20 + _this__1035 * scaleTransform19._21 + _this__2035 * scaleTransform19._22,_this__0135 * scaleTransform19._00 + _this__1135 * scaleTransform19._01 + _this__2135 * scaleTransform19._02,_this__0135 * scaleTransform19._10 + _this__1135 * scaleTransform19._11 + _this__2135 * scaleTransform19._12,_this__0135 * scaleTransform19._20 + _this__1135 * scaleTransform19._21 + _this__2135 * scaleTransform19._22,_this__0235 * scaleTransform19._00 + _this__1235 * scaleTransform19._01 + _this__2235 * scaleTransform19._02,_this__0235 * scaleTransform19._10 + _this__1235 * scaleTransform19._11 + _this__2235 * scaleTransform19._12,_this__0235 * scaleTransform19._20 + _this__1235 * scaleTransform19._21 + _this__2235 * scaleTransform19._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x6 < wid17) {
				var wid28 = Main.wid;
				var hi28 = Main.hi;
				var scaleTransform20 = Main.scaleTransform;
				var _this__0036 = 1;
				var _this__1036 = 0;
				var _this__2036 = border;
				var _this__0136 = 0;
				var _this__1136 = 1;
				var _this__2136 = hi28 / 2 - sv_y6 / 2;
				var _this__0236 = 0;
				var _this__1236 = 0;
				var _this__2236 = 1;
				b0 = new kha_math_FastMatrix3(_this__0036 * scaleTransform20._00 + _this__1036 * scaleTransform20._01 + _this__2036 * scaleTransform20._02,_this__0036 * scaleTransform20._10 + _this__1036 * scaleTransform20._11 + _this__2036 * scaleTransform20._12,_this__0036 * scaleTransform20._20 + _this__1036 * scaleTransform20._21 + _this__2036 * scaleTransform20._22,_this__0136 * scaleTransform20._00 + _this__1136 * scaleTransform20._01 + _this__2136 * scaleTransform20._02,_this__0136 * scaleTransform20._10 + _this__1136 * scaleTransform20._11 + _this__2136 * scaleTransform20._12,_this__0136 * scaleTransform20._20 + _this__1136 * scaleTransform20._21 + _this__2136 * scaleTransform20._22,_this__0236 * scaleTransform20._00 + _this__1236 * scaleTransform20._01 + _this__2236 * scaleTransform20._02,_this__0236 * scaleTransform20._10 + _this__1236 * scaleTransform20._11 + _this__2236 * scaleTransform20._12,_this__0236 * scaleTransform20._20 + _this__1236 * scaleTransform20._21 + _this__2236 * scaleTransform20._22);
			} else {
				var wid29 = Main.wid;
				var hi29 = Main.hi;
				var scaleTransform21 = Main.scaleTransform;
				var _this__0037 = 1;
				var _this__1037 = 0;
				var _this__2037 = wid29 / 2 - sv_x6 / 2;
				var _this__0137 = 0;
				var _this__1137 = 1;
				var _this__2137 = hi29 / 2 - sv_y6 / 2;
				var _this__0237 = 0;
				var _this__1237 = 0;
				var _this__2237 = 1;
				b0 = new kha_math_FastMatrix3(_this__0037 * scaleTransform21._00 + _this__1037 * scaleTransform21._01 + _this__2037 * scaleTransform21._02,_this__0037 * scaleTransform21._10 + _this__1037 * scaleTransform21._11 + _this__2037 * scaleTransform21._12,_this__0037 * scaleTransform21._20 + _this__1037 * scaleTransform21._21 + _this__2037 * scaleTransform21._22,_this__0137 * scaleTransform21._00 + _this__1137 * scaleTransform21._01 + _this__2137 * scaleTransform21._02,_this__0137 * scaleTransform21._10 + _this__1137 * scaleTransform21._11 + _this__2137 * scaleTransform21._12,_this__0137 * scaleTransform21._20 + _this__1137 * scaleTransform21._21 + _this__2137 * scaleTransform21._22,_this__0237 * scaleTransform21._00 + _this__1237 * scaleTransform21._01 + _this__2237 * scaleTransform21._02,_this__0237 * scaleTransform21._10 + _this__1237 * scaleTransform21._11 + _this__2237 * scaleTransform21._12,_this__0237 * scaleTransform21._20 + _this__1237 * scaleTransform21._21 + _this__2237 * scaleTransform21._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x6 < wid17) {
				var wid30 = Main.wid;
				var hi30 = Main.hi;
				var scaleTransform22 = Main.scaleTransform;
				var _this__0038 = 1;
				var _this__1038 = 0;
				var _this__2038 = wid30 - sv_x6 - border;
				var _this__0138 = 0;
				var _this__1138 = 1;
				var _this__2138 = hi30 / 2 - sv_y6 / 2;
				var _this__0238 = 0;
				var _this__1238 = 0;
				var _this__2238 = 1;
				b0 = new kha_math_FastMatrix3(_this__0038 * scaleTransform22._00 + _this__1038 * scaleTransform22._01 + _this__2038 * scaleTransform22._02,_this__0038 * scaleTransform22._10 + _this__1038 * scaleTransform22._11 + _this__2038 * scaleTransform22._12,_this__0038 * scaleTransform22._20 + _this__1038 * scaleTransform22._21 + _this__2038 * scaleTransform22._22,_this__0138 * scaleTransform22._00 + _this__1138 * scaleTransform22._01 + _this__2138 * scaleTransform22._02,_this__0138 * scaleTransform22._10 + _this__1138 * scaleTransform22._11 + _this__2138 * scaleTransform22._12,_this__0138 * scaleTransform22._20 + _this__1138 * scaleTransform22._21 + _this__2138 * scaleTransform22._22,_this__0238 * scaleTransform22._00 + _this__1238 * scaleTransform22._01 + _this__2238 * scaleTransform22._02,_this__0238 * scaleTransform22._10 + _this__1238 * scaleTransform22._11 + _this__2238 * scaleTransform22._12,_this__0238 * scaleTransform22._20 + _this__1238 * scaleTransform22._21 + _this__2238 * scaleTransform22._22);
			} else {
				var wid31 = Main.wid;
				var hi31 = Main.hi;
				var scaleTransform23 = Main.scaleTransform;
				var _this__0039 = 1;
				var _this__1039 = 0;
				var _this__2039 = wid31 / 2 - sv_x6 / 2;
				var _this__0139 = 0;
				var _this__1139 = 1;
				var _this__2139 = hi31 / 2 - sv_y6 / 2;
				var _this__0239 = 0;
				var _this__1239 = 0;
				var _this__2239 = 1;
				b0 = new kha_math_FastMatrix3(_this__0039 * scaleTransform23._00 + _this__1039 * scaleTransform23._01 + _this__2039 * scaleTransform23._02,_this__0039 * scaleTransform23._10 + _this__1039 * scaleTransform23._11 + _this__2039 * scaleTransform23._12,_this__0039 * scaleTransform23._20 + _this__1039 * scaleTransform23._21 + _this__2039 * scaleTransform23._22,_this__0139 * scaleTransform23._00 + _this__1139 * scaleTransform23._01 + _this__2139 * scaleTransform23._02,_this__0139 * scaleTransform23._10 + _this__1139 * scaleTransform23._11 + _this__2139 * scaleTransform23._12,_this__0139 * scaleTransform23._20 + _this__1139 * scaleTransform23._21 + _this__2139 * scaleTransform23._22,_this__0239 * scaleTransform23._00 + _this__1239 * scaleTransform23._01 + _this__2239 * scaleTransform23._02,_this__0239 * scaleTransform23._10 + _this__1239 * scaleTransform23._11 + _this__2239 * scaleTransform23._12,_this__0239 * scaleTransform23._20 + _this__1239 * scaleTransform23._21 + _this__2239 * scaleTransform23._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y6 < hi17) {
				var _this__0040 = 1;
				var _this__1040 = 0;
				var _this__2040 = wid17 / 2 - sv_x6 / 2;
				var _this__0140 = 0;
				var _this__1140 = 1;
				var _this__2140 = hi17 - sv_y6 - border;
				var _this__0240 = 0;
				var _this__1240 = 0;
				var _this__2240 = 1;
				b0 = new kha_math_FastMatrix3(_this__0040 * scaleTransform14._00 + _this__1040 * scaleTransform14._01 + _this__2040 * scaleTransform14._02,_this__0040 * scaleTransform14._10 + _this__1040 * scaleTransform14._11 + _this__2040 * scaleTransform14._12,_this__0040 * scaleTransform14._20 + _this__1040 * scaleTransform14._21 + _this__2040 * scaleTransform14._22,_this__0140 * scaleTransform14._00 + _this__1140 * scaleTransform14._01 + _this__2140 * scaleTransform14._02,_this__0140 * scaleTransform14._10 + _this__1140 * scaleTransform14._11 + _this__2140 * scaleTransform14._12,_this__0140 * scaleTransform14._20 + _this__1140 * scaleTransform14._21 + _this__2140 * scaleTransform14._22,_this__0240 * scaleTransform14._00 + _this__1240 * scaleTransform14._01 + _this__2240 * scaleTransform14._02,_this__0240 * scaleTransform14._10 + _this__1240 * scaleTransform14._11 + _this__2240 * scaleTransform14._12,_this__0240 * scaleTransform14._20 + _this__1240 * scaleTransform14._21 + _this__2240 * scaleTransform14._22);
			} else {
				var wid32 = Main.wid;
				var hi32 = Main.hi;
				var scaleTransform24 = Main.scaleTransform;
				var _this__0041 = 1;
				var _this__1041 = 0;
				var _this__2041 = wid32 / 2 - sv_x6 / 2;
				var _this__0141 = 0;
				var _this__1141 = 1;
				var _this__2141 = hi32 / 2 - sv_y6 / 2;
				var _this__0241 = 0;
				var _this__1241 = 0;
				var _this__2241 = 1;
				b0 = new kha_math_FastMatrix3(_this__0041 * scaleTransform24._00 + _this__1041 * scaleTransform24._01 + _this__2041 * scaleTransform24._02,_this__0041 * scaleTransform24._10 + _this__1041 * scaleTransform24._11 + _this__2041 * scaleTransform24._12,_this__0041 * scaleTransform24._20 + _this__1041 * scaleTransform24._21 + _this__2041 * scaleTransform24._22,_this__0141 * scaleTransform24._00 + _this__1141 * scaleTransform24._01 + _this__2141 * scaleTransform24._02,_this__0141 * scaleTransform24._10 + _this__1141 * scaleTransform24._11 + _this__2141 * scaleTransform24._12,_this__0141 * scaleTransform24._20 + _this__1141 * scaleTransform24._21 + _this__2141 * scaleTransform24._22,_this__0241 * scaleTransform24._00 + _this__1241 * scaleTransform24._01 + _this__2241 * scaleTransform24._02,_this__0241 * scaleTransform24._10 + _this__1241 * scaleTransform24._11 + _this__2241 * scaleTransform24._12,_this__0241 * scaleTransform24._20 + _this__1241 * scaleTransform24._21 + _this__2241 * scaleTransform24._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y6 < hi17) {
				var _this__0042 = 1;
				var _this__1042 = 0;
				var _this__2042 = wid17 / 2 - sv_x6 / 2;
				var _this__0142 = 0;
				var _this__1142 = 1;
				var _this__2142 = border;
				var _this__0242 = 0;
				var _this__1242 = 0;
				var _this__2242 = 1;
				b0 = new kha_math_FastMatrix3(_this__0042 * scaleTransform14._00 + _this__1042 * scaleTransform14._01 + _this__2042 * scaleTransform14._02,_this__0042 * scaleTransform14._10 + _this__1042 * scaleTransform14._11 + _this__2042 * scaleTransform14._12,_this__0042 * scaleTransform14._20 + _this__1042 * scaleTransform14._21 + _this__2042 * scaleTransform14._22,_this__0142 * scaleTransform14._00 + _this__1142 * scaleTransform14._01 + _this__2142 * scaleTransform14._02,_this__0142 * scaleTransform14._10 + _this__1142 * scaleTransform14._11 + _this__2142 * scaleTransform14._12,_this__0142 * scaleTransform14._20 + _this__1142 * scaleTransform14._21 + _this__2142 * scaleTransform14._22,_this__0242 * scaleTransform14._00 + _this__1242 * scaleTransform14._01 + _this__2242 * scaleTransform14._02,_this__0242 * scaleTransform14._10 + _this__1242 * scaleTransform14._11 + _this__2242 * scaleTransform14._12,_this__0242 * scaleTransform14._20 + _this__1242 * scaleTransform14._21 + _this__2242 * scaleTransform14._22);
			} else {
				var wid33 = Main.wid;
				var hi33 = Main.hi;
				var scaleTransform25 = Main.scaleTransform;
				var _this__0043 = 1;
				var _this__1043 = 0;
				var _this__2043 = wid33 / 2 - sv_x6 / 2;
				var _this__0143 = 0;
				var _this__1143 = 1;
				var _this__2143 = hi33 / 2 - sv_y6 / 2;
				var _this__0243 = 0;
				var _this__1243 = 0;
				var _this__2243 = 1;
				b0 = new kha_math_FastMatrix3(_this__0043 * scaleTransform25._00 + _this__1043 * scaleTransform25._01 + _this__2043 * scaleTransform25._02,_this__0043 * scaleTransform25._10 + _this__1043 * scaleTransform25._11 + _this__2043 * scaleTransform25._12,_this__0043 * scaleTransform25._20 + _this__1043 * scaleTransform25._21 + _this__2043 * scaleTransform25._22,_this__0143 * scaleTransform25._00 + _this__1143 * scaleTransform25._01 + _this__2143 * scaleTransform25._02,_this__0143 * scaleTransform25._10 + _this__1143 * scaleTransform25._11 + _this__2143 * scaleTransform25._12,_this__0143 * scaleTransform25._20 + _this__1143 * scaleTransform25._21 + _this__2143 * scaleTransform25._22,_this__0243 * scaleTransform25._00 + _this__1243 * scaleTransform25._01 + _this__2243 * scaleTransform25._02,_this__0243 * scaleTransform25._10 + _this__1243 * scaleTransform25._11 + _this__2243 * scaleTransform25._12,_this__0243 * scaleTransform25._20 + _this__1243 * scaleTransform25._21 + _this__2243 * scaleTransform25._22);
			}
			break;
		}
		var scaleTransform26 = Main.scaleTransform;
		var v_x2 = w;
		var v_y2 = h;
		var w14 = scaleTransform26._02 * v_x2 + scaleTransform26._12 * v_y2 + scaleTransform26._22;
		var x12 = (scaleTransform26._00 * v_x2 + scaleTransform26._10 * v_y2 + scaleTransform26._20) / w14;
		var y12 = (scaleTransform26._01 * v_x2 + scaleTransform26._11 * v_y2 + scaleTransform26._21) / w14;
		var sv_x12 = x12;
		var sv_y12 = y12;
		var wid34 = Main.wid;
		var hi34 = Main.hi;
		var scaleTransform27 = Main.scaleTransform;
		var c0;
		switch(simpleText_Alignment.BottomLeft._hx_index) {
		case 2:case 7:
			var wid35 = Main.wid;
			var hi35 = Main.hi;
			var w210 = wid35 - border * 2;
			var h210 = hi35 - border * 2;
			var dw10 = w210 - w;
			var dh10 = h210 - h;
			var scale10 = dw10 < dh10 ? w210 / w : h210 / h;
			if(scale10 < 0) {
				scale10 = 0.;
			}
			var scaleTransform__0010 = scale10;
			var scaleTransform__1010 = 0;
			var scaleTransform__2010 = 0;
			var scaleTransform__0110 = 0;
			var scaleTransform__1110 = scale10;
			var scaleTransform__2110 = 0;
			var scaleTransform__0210 = 0;
			var scaleTransform__1210 = 0;
			var scaleTransform__2210 = 1;
			var value_x10 = w;
			var value_y10 = h;
			var w15 = scaleTransform__0210 * value_x10 + scaleTransform__1210 * value_y10 + scaleTransform__2210;
			var x13 = (scaleTransform__0010 * value_x10 + scaleTransform__1010 * value_y10 + scaleTransform__2010) / w15;
			var y13 = (scaleTransform__0110 * value_x10 + scaleTransform__1110 * value_y10 + scaleTransform__2110) / w15;
			var sv_x13 = x13;
			var sv_y13 = y13;
			var _this__0044 = 1;
			var _this__1044 = 0;
			var _this__2044 = wid35 - sv_x13 - border;
			var _this__0144 = 0;
			var _this__1144 = 1;
			var _this__2144 = hi35 / 2 - sv_y13 / 2;
			var _this__0244 = 0;
			var _this__1244 = 0;
			var _this__2244 = 1;
			c0 = new kha_math_FastMatrix3(_this__0044 * scaleTransform__0010 + _this__1044 * scaleTransform__0110 + _this__2044 * scaleTransform__0210,_this__0044 * scaleTransform__1010 + _this__1044 * scaleTransform__1110 + _this__2044 * scaleTransform__1210,_this__0044 * scaleTransform__2010 + _this__1044 * scaleTransform__2110 + _this__2044 * scaleTransform__2210,_this__0144 * scaleTransform__0010 + _this__1144 * scaleTransform__0110 + _this__2144 * scaleTransform__0210,_this__0144 * scaleTransform__1010 + _this__1144 * scaleTransform__1110 + _this__2144 * scaleTransform__1210,_this__0144 * scaleTransform__2010 + _this__1144 * scaleTransform__2110 + _this__2144 * scaleTransform__2210,_this__0244 * scaleTransform__0010 + _this__1244 * scaleTransform__0110 + _this__2244 * scaleTransform__0210,_this__0244 * scaleTransform__1010 + _this__1244 * scaleTransform__1110 + _this__2244 * scaleTransform__1210,_this__0244 * scaleTransform__2010 + _this__1244 * scaleTransform__2110 + _this__2244 * scaleTransform__2210);
			break;
		case 0:case 5:
			var wid36 = Main.wid;
			var hi36 = Main.hi;
			var w211 = wid36 - border * 2;
			var h211 = hi36 - border * 2;
			var dw11 = w211 - w;
			var dh11 = h211 - h;
			var scale11 = dw11 < dh11 ? w211 / w : h211 / h;
			if(scale11 < 0) {
				scale11 = 0.;
			}
			var scaleTransform__0011 = scale11;
			var scaleTransform__1011 = 0;
			var scaleTransform__2011 = 0;
			var scaleTransform__0111 = 0;
			var scaleTransform__1111 = scale11;
			var scaleTransform__2111 = 0;
			var scaleTransform__0211 = 0;
			var scaleTransform__1211 = 0;
			var scaleTransform__2211 = 1;
			var value_x11 = w;
			var value_y11 = h;
			var w16 = scaleTransform__0211 * value_x11 + scaleTransform__1211 * value_y11 + scaleTransform__2211;
			var x14 = (scaleTransform__0011 * value_x11 + scaleTransform__1011 * value_y11 + scaleTransform__2011) / w16;
			var y14 = (scaleTransform__0111 * value_x11 + scaleTransform__1111 * value_y11 + scaleTransform__2111) / w16;
			var sv_x14 = x14;
			var sv_y14 = y14;
			var _this__0045 = 1;
			var _this__1045 = 0;
			var _this__2045 = wid36 / 2 - sv_x14 / 2;
			var _this__0145 = 0;
			var _this__1145 = 1;
			var _this__2145 = hi36 / 2 - sv_y14 / 2;
			var _this__0245 = 0;
			var _this__1245 = 0;
			var _this__2245 = 1;
			c0 = new kha_math_FastMatrix3(_this__0045 * scaleTransform__0011 + _this__1045 * scaleTransform__0111 + _this__2045 * scaleTransform__0211,_this__0045 * scaleTransform__1011 + _this__1045 * scaleTransform__1111 + _this__2045 * scaleTransform__1211,_this__0045 * scaleTransform__2011 + _this__1045 * scaleTransform__2111 + _this__2045 * scaleTransform__2211,_this__0145 * scaleTransform__0011 + _this__1145 * scaleTransform__0111 + _this__2145 * scaleTransform__0211,_this__0145 * scaleTransform__1011 + _this__1145 * scaleTransform__1111 + _this__2145 * scaleTransform__1211,_this__0145 * scaleTransform__2011 + _this__1145 * scaleTransform__2111 + _this__2145 * scaleTransform__2211,_this__0245 * scaleTransform__0011 + _this__1245 * scaleTransform__0111 + _this__2245 * scaleTransform__0211,_this__0245 * scaleTransform__1011 + _this__1245 * scaleTransform__1111 + _this__2245 * scaleTransform__1211,_this__0245 * scaleTransform__2011 + _this__1245 * scaleTransform__2111 + _this__2245 * scaleTransform__2211);
			break;
		case 1:case 6:
			var wid37 = Main.wid;
			var hi37 = Main.hi;
			var w212 = wid37 - border * 2;
			var h212 = hi37 - border * 2;
			var dw12 = w212 - w;
			var dh12 = h212 - h;
			var scale12 = dw12 < dh12 ? w212 / w : h212 / h;
			if(scale12 < 0) {
				scale12 = 0.;
			}
			var scaleTransform__0012 = scale12;
			var scaleTransform__1012 = 0;
			var scaleTransform__2012 = 0;
			var scaleTransform__0112 = 0;
			var scaleTransform__1112 = scale12;
			var scaleTransform__2112 = 0;
			var scaleTransform__0212 = 0;
			var scaleTransform__1212 = 0;
			var scaleTransform__2212 = 1;
			var value_x12 = w;
			var value_y12 = h;
			var w17 = scaleTransform__0212 * value_x12 + scaleTransform__1212 * value_y12 + scaleTransform__2212;
			var x15 = (scaleTransform__0012 * value_x12 + scaleTransform__1012 * value_y12 + scaleTransform__2012) / w17;
			var y15 = (scaleTransform__0112 * value_x12 + scaleTransform__1112 * value_y12 + scaleTransform__2112) / w17;
			var sv_x15 = x15;
			var sv_y15 = y15;
			var _this__0046 = 1;
			var _this__1046 = 0;
			var _this__2046 = border;
			var _this__0146 = 0;
			var _this__1146 = 1;
			var _this__2146 = hi37 / 2 - sv_y15 / 2;
			var _this__0246 = 0;
			var _this__1246 = 0;
			var _this__2246 = 1;
			c0 = new kha_math_FastMatrix3(_this__0046 * scaleTransform__0012 + _this__1046 * scaleTransform__0112 + _this__2046 * scaleTransform__0212,_this__0046 * scaleTransform__1012 + _this__1046 * scaleTransform__1112 + _this__2046 * scaleTransform__1212,_this__0046 * scaleTransform__2012 + _this__1046 * scaleTransform__2112 + _this__2046 * scaleTransform__2212,_this__0146 * scaleTransform__0012 + _this__1146 * scaleTransform__0112 + _this__2146 * scaleTransform__0212,_this__0146 * scaleTransform__1012 + _this__1146 * scaleTransform__1112 + _this__2146 * scaleTransform__1212,_this__0146 * scaleTransform__2012 + _this__1146 * scaleTransform__2112 + _this__2146 * scaleTransform__2212,_this__0246 * scaleTransform__0012 + _this__1246 * scaleTransform__0112 + _this__2246 * scaleTransform__0212,_this__0246 * scaleTransform__1012 + _this__1246 * scaleTransform__1112 + _this__2246 * scaleTransform__1212,_this__0246 * scaleTransform__2012 + _this__1246 * scaleTransform__2112 + _this__2246 * scaleTransform__2212);
			break;
		case 3:case 8:
			var wid38 = Main.wid;
			var hi38 = Main.hi;
			var w213 = wid38 - border * 2;
			var h213 = hi38 - border * 2;
			var dw13 = w213 - w;
			var dh13 = h213 - h;
			var scale13 = dw13 < dh13 ? w213 / w : h213 / h;
			if(scale13 < 0) {
				scale13 = 0.;
			}
			var scaleTransform__0013 = scale13;
			var scaleTransform__1013 = 0;
			var scaleTransform__2013 = 0;
			var scaleTransform__0113 = 0;
			var scaleTransform__1113 = scale13;
			var scaleTransform__2113 = 0;
			var scaleTransform__0213 = 0;
			var scaleTransform__1213 = 0;
			var scaleTransform__2213 = 1;
			var value_x13 = w;
			var value_y13 = h;
			var w18 = scaleTransform__0213 * value_x13 + scaleTransform__1213 * value_y13 + scaleTransform__2213;
			var x16 = (scaleTransform__0013 * value_x13 + scaleTransform__1013 * value_y13 + scaleTransform__2013) / w18;
			var y16 = (scaleTransform__0113 * value_x13 + scaleTransform__1113 * value_y13 + scaleTransform__2113) / w18;
			var sv_x16 = x16;
			var sv_y16 = y16;
			var _this__0047 = 1;
			var _this__1047 = 0;
			var _this__2047 = wid38 / 2 - sv_x16 / 2;
			var _this__0147 = 0;
			var _this__1147 = 1;
			var _this__2147 = border;
			var _this__0247 = 0;
			var _this__1247 = 0;
			var _this__2247 = 1;
			c0 = new kha_math_FastMatrix3(_this__0047 * scaleTransform__0013 + _this__1047 * scaleTransform__0113 + _this__2047 * scaleTransform__0213,_this__0047 * scaleTransform__1013 + _this__1047 * scaleTransform__1113 + _this__2047 * scaleTransform__1213,_this__0047 * scaleTransform__2013 + _this__1047 * scaleTransform__2113 + _this__2047 * scaleTransform__2213,_this__0147 * scaleTransform__0013 + _this__1147 * scaleTransform__0113 + _this__2147 * scaleTransform__0213,_this__0147 * scaleTransform__1013 + _this__1147 * scaleTransform__1113 + _this__2147 * scaleTransform__1213,_this__0147 * scaleTransform__2013 + _this__1147 * scaleTransform__2113 + _this__2147 * scaleTransform__2213,_this__0247 * scaleTransform__0013 + _this__1247 * scaleTransform__0113 + _this__2247 * scaleTransform__0213,_this__0247 * scaleTransform__1013 + _this__1247 * scaleTransform__1113 + _this__2247 * scaleTransform__1213,_this__0247 * scaleTransform__2013 + _this__1247 * scaleTransform__2113 + _this__2247 * scaleTransform__2213);
			break;
		case 4:case 9:
			var wid39 = Main.wid;
			var hi39 = Main.hi;
			var w214 = wid39 - border * 2;
			var h214 = hi39 - border * 2;
			var dw14 = w214 - w;
			var dh14 = h214 - h;
			var scale14 = dw14 < dh14 ? w214 / w : h214 / h;
			if(scale14 < 0) {
				scale14 = 0.;
			}
			var scaleTransform__0014 = scale14;
			var scaleTransform__1014 = 0;
			var scaleTransform__2014 = 0;
			var scaleTransform__0114 = 0;
			var scaleTransform__1114 = scale14;
			var scaleTransform__2114 = 0;
			var scaleTransform__0214 = 0;
			var scaleTransform__1214 = 0;
			var scaleTransform__2214 = 1;
			var value_x14 = w;
			var value_y14 = h;
			var w19 = scaleTransform__0214 * value_x14 + scaleTransform__1214 * value_y14 + scaleTransform__2214;
			var x17 = (scaleTransform__0014 * value_x14 + scaleTransform__1014 * value_y14 + scaleTransform__2014) / w19;
			var y17 = (scaleTransform__0114 * value_x14 + scaleTransform__1114 * value_y14 + scaleTransform__2114) / w19;
			var sv_x17 = x17;
			var sv_y17 = y17;
			var _this__0048 = 1;
			var _this__1048 = 0;
			var _this__2048 = wid39 / 2 - sv_x17 / 2;
			var _this__0148 = 0;
			var _this__1148 = 1;
			var _this__2148 = hi39 - sv_y17 - border;
			var _this__0248 = 0;
			var _this__1248 = 0;
			var _this__2248 = 1;
			c0 = new kha_math_FastMatrix3(_this__0048 * scaleTransform__0014 + _this__1048 * scaleTransform__0114 + _this__2048 * scaleTransform__0214,_this__0048 * scaleTransform__1014 + _this__1048 * scaleTransform__1114 + _this__2048 * scaleTransform__1214,_this__0048 * scaleTransform__2014 + _this__1048 * scaleTransform__2114 + _this__2048 * scaleTransform__2214,_this__0148 * scaleTransform__0014 + _this__1148 * scaleTransform__0114 + _this__2148 * scaleTransform__0214,_this__0148 * scaleTransform__1014 + _this__1148 * scaleTransform__1114 + _this__2148 * scaleTransform__1214,_this__0148 * scaleTransform__2014 + _this__1148 * scaleTransform__2114 + _this__2148 * scaleTransform__2214,_this__0248 * scaleTransform__0014 + _this__1248 * scaleTransform__0114 + _this__2248 * scaleTransform__0214,_this__0248 * scaleTransform__1014 + _this__1248 * scaleTransform__1114 + _this__2248 * scaleTransform__1214,_this__0248 * scaleTransform__2014 + _this__1248 * scaleTransform__2114 + _this__2248 * scaleTransform__2214);
			break;
		case 10:case 11:
			if(border * 2 + sv_x12 < wid34) {
				var _this__0049 = 1;
				var _this__1049 = 0;
				var _this__2049 = border;
				var _this__0149 = 0;
				var _this__1149 = 1;
				var _this__2149 = border;
				var _this__0249 = 0;
				var _this__1249 = 0;
				var _this__2249 = 1;
				c0 = new kha_math_FastMatrix3(_this__0049 * scaleTransform27._00 + _this__1049 * scaleTransform27._01 + _this__2049 * scaleTransform27._02,_this__0049 * scaleTransform27._10 + _this__1049 * scaleTransform27._11 + _this__2049 * scaleTransform27._12,_this__0049 * scaleTransform27._20 + _this__1049 * scaleTransform27._21 + _this__2049 * scaleTransform27._22,_this__0149 * scaleTransform27._00 + _this__1149 * scaleTransform27._01 + _this__2149 * scaleTransform27._02,_this__0149 * scaleTransform27._10 + _this__1149 * scaleTransform27._11 + _this__2149 * scaleTransform27._12,_this__0149 * scaleTransform27._20 + _this__1149 * scaleTransform27._21 + _this__2149 * scaleTransform27._22,_this__0249 * scaleTransform27._00 + _this__1249 * scaleTransform27._01 + _this__2249 * scaleTransform27._02,_this__0249 * scaleTransform27._10 + _this__1249 * scaleTransform27._11 + _this__2249 * scaleTransform27._12,_this__0249 * scaleTransform27._20 + _this__1249 * scaleTransform27._21 + _this__2249 * scaleTransform27._22);
			} else {
				var wid40 = Main.wid;
				var hi40 = Main.hi;
				var scaleTransform28 = Main.scaleTransform;
				var _this__0050 = 1;
				var _this__1050 = 0;
				var _this__2050 = border;
				var _this__0150 = 0;
				var _this__1150 = 1;
				var _this__2150 = hi40 / 2 - sv_y12 / 2;
				var _this__0250 = 0;
				var _this__1250 = 0;
				var _this__2250 = 1;
				c0 = new kha_math_FastMatrix3(_this__0050 * scaleTransform28._00 + _this__1050 * scaleTransform28._01 + _this__2050 * scaleTransform28._02,_this__0050 * scaleTransform28._10 + _this__1050 * scaleTransform28._11 + _this__2050 * scaleTransform28._12,_this__0050 * scaleTransform28._20 + _this__1050 * scaleTransform28._21 + _this__2050 * scaleTransform28._22,_this__0150 * scaleTransform28._00 + _this__1150 * scaleTransform28._01 + _this__2150 * scaleTransform28._02,_this__0150 * scaleTransform28._10 + _this__1150 * scaleTransform28._11 + _this__2150 * scaleTransform28._12,_this__0150 * scaleTransform28._20 + _this__1150 * scaleTransform28._21 + _this__2150 * scaleTransform28._22,_this__0250 * scaleTransform28._00 + _this__1250 * scaleTransform28._01 + _this__2250 * scaleTransform28._02,_this__0250 * scaleTransform28._10 + _this__1250 * scaleTransform28._11 + _this__2250 * scaleTransform28._12,_this__0250 * scaleTransform28._20 + _this__1250 * scaleTransform28._21 + _this__2250 * scaleTransform28._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x12 < wid34) {
				var _this__0051 = 1;
				var _this__1051 = 0;
				var _this__2051 = wid34 - sv_x12 - border;
				var _this__0151 = 0;
				var _this__1151 = 1;
				var _this__2151 = border;
				var _this__0251 = 0;
				var _this__1251 = 0;
				var _this__2251 = 1;
				c0 = new kha_math_FastMatrix3(_this__0051 * scaleTransform27._00 + _this__1051 * scaleTransform27._01 + _this__2051 * scaleTransform27._02,_this__0051 * scaleTransform27._10 + _this__1051 * scaleTransform27._11 + _this__2051 * scaleTransform27._12,_this__0051 * scaleTransform27._20 + _this__1051 * scaleTransform27._21 + _this__2051 * scaleTransform27._22,_this__0151 * scaleTransform27._00 + _this__1151 * scaleTransform27._01 + _this__2151 * scaleTransform27._02,_this__0151 * scaleTransform27._10 + _this__1151 * scaleTransform27._11 + _this__2151 * scaleTransform27._12,_this__0151 * scaleTransform27._20 + _this__1151 * scaleTransform27._21 + _this__2151 * scaleTransform27._22,_this__0251 * scaleTransform27._00 + _this__1251 * scaleTransform27._01 + _this__2251 * scaleTransform27._02,_this__0251 * scaleTransform27._10 + _this__1251 * scaleTransform27._11 + _this__2251 * scaleTransform27._12,_this__0251 * scaleTransform27._20 + _this__1251 * scaleTransform27._21 + _this__2251 * scaleTransform27._22);
			} else {
				var wid41 = Main.wid;
				var hi41 = Main.hi;
				var scaleTransform29 = Main.scaleTransform;
				var _this__0052 = 1;
				var _this__1052 = 0;
				var _this__2052 = wid41 - sv_x12 - border;
				var _this__0152 = 0;
				var _this__1152 = 1;
				var _this__2152 = hi41 / 2 - sv_y12 / 2;
				var _this__0252 = 0;
				var _this__1252 = 0;
				var _this__2252 = 1;
				c0 = new kha_math_FastMatrix3(_this__0052 * scaleTransform29._00 + _this__1052 * scaleTransform29._01 + _this__2052 * scaleTransform29._02,_this__0052 * scaleTransform29._10 + _this__1052 * scaleTransform29._11 + _this__2052 * scaleTransform29._12,_this__0052 * scaleTransform29._20 + _this__1052 * scaleTransform29._21 + _this__2052 * scaleTransform29._22,_this__0152 * scaleTransform29._00 + _this__1152 * scaleTransform29._01 + _this__2152 * scaleTransform29._02,_this__0152 * scaleTransform29._10 + _this__1152 * scaleTransform29._11 + _this__2152 * scaleTransform29._12,_this__0152 * scaleTransform29._20 + _this__1152 * scaleTransform29._21 + _this__2152 * scaleTransform29._22,_this__0252 * scaleTransform29._00 + _this__1252 * scaleTransform29._01 + _this__2252 * scaleTransform29._02,_this__0252 * scaleTransform29._10 + _this__1252 * scaleTransform29._11 + _this__2252 * scaleTransform29._12,_this__0252 * scaleTransform29._20 + _this__1252 * scaleTransform29._21 + _this__2252 * scaleTransform29._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y12 < hi34) {
				var _this__0053 = 1;
				var _this__1053 = 0;
				var _this__2053 = border;
				var _this__0153 = 0;
				var _this__1153 = 1;
				var _this__2153 = hi34 - sv_y12 - border;
				var _this__0253 = 0;
				var _this__1253 = 0;
				var _this__2253 = 1;
				c0 = new kha_math_FastMatrix3(_this__0053 * scaleTransform27._00 + _this__1053 * scaleTransform27._01 + _this__2053 * scaleTransform27._02,_this__0053 * scaleTransform27._10 + _this__1053 * scaleTransform27._11 + _this__2053 * scaleTransform27._12,_this__0053 * scaleTransform27._20 + _this__1053 * scaleTransform27._21 + _this__2053 * scaleTransform27._22,_this__0153 * scaleTransform27._00 + _this__1153 * scaleTransform27._01 + _this__2153 * scaleTransform27._02,_this__0153 * scaleTransform27._10 + _this__1153 * scaleTransform27._11 + _this__2153 * scaleTransform27._12,_this__0153 * scaleTransform27._20 + _this__1153 * scaleTransform27._21 + _this__2153 * scaleTransform27._22,_this__0253 * scaleTransform27._00 + _this__1253 * scaleTransform27._01 + _this__2253 * scaleTransform27._02,_this__0253 * scaleTransform27._10 + _this__1253 * scaleTransform27._11 + _this__2253 * scaleTransform27._12,_this__0253 * scaleTransform27._20 + _this__1253 * scaleTransform27._21 + _this__2253 * scaleTransform27._22);
			} else {
				var wid42 = Main.wid;
				var hi42 = Main.hi;
				var scaleTransform30 = Main.scaleTransform;
				var _this__0054 = 1;
				var _this__1054 = 0;
				var _this__2054 = border;
				var _this__0154 = 0;
				var _this__1154 = 1;
				var _this__2154 = hi42 / 2 - sv_y12 / 2;
				var _this__0254 = 0;
				var _this__1254 = 0;
				var _this__2254 = 1;
				c0 = new kha_math_FastMatrix3(_this__0054 * scaleTransform30._00 + _this__1054 * scaleTransform30._01 + _this__2054 * scaleTransform30._02,_this__0054 * scaleTransform30._10 + _this__1054 * scaleTransform30._11 + _this__2054 * scaleTransform30._12,_this__0054 * scaleTransform30._20 + _this__1054 * scaleTransform30._21 + _this__2054 * scaleTransform30._22,_this__0154 * scaleTransform30._00 + _this__1154 * scaleTransform30._01 + _this__2154 * scaleTransform30._02,_this__0154 * scaleTransform30._10 + _this__1154 * scaleTransform30._11 + _this__2154 * scaleTransform30._12,_this__0154 * scaleTransform30._20 + _this__1154 * scaleTransform30._21 + _this__2154 * scaleTransform30._22,_this__0254 * scaleTransform30._00 + _this__1254 * scaleTransform30._01 + _this__2254 * scaleTransform30._02,_this__0254 * scaleTransform30._10 + _this__1254 * scaleTransform30._11 + _this__2254 * scaleTransform30._12,_this__0254 * scaleTransform30._20 + _this__1254 * scaleTransform30._21 + _this__2254 * scaleTransform30._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y12 < hi34) {
				var _this__0055 = 1;
				var _this__1055 = 0;
				var _this__2055 = wid34 - sv_x12 - border;
				var _this__0155 = 0;
				var _this__1155 = 1;
				var _this__2155 = hi34 - sv_y12 - border;
				var _this__0255 = 0;
				var _this__1255 = 0;
				var _this__2255 = 1;
				c0 = new kha_math_FastMatrix3(_this__0055 * scaleTransform27._00 + _this__1055 * scaleTransform27._01 + _this__2055 * scaleTransform27._02,_this__0055 * scaleTransform27._10 + _this__1055 * scaleTransform27._11 + _this__2055 * scaleTransform27._12,_this__0055 * scaleTransform27._20 + _this__1055 * scaleTransform27._21 + _this__2055 * scaleTransform27._22,_this__0155 * scaleTransform27._00 + _this__1155 * scaleTransform27._01 + _this__2155 * scaleTransform27._02,_this__0155 * scaleTransform27._10 + _this__1155 * scaleTransform27._11 + _this__2155 * scaleTransform27._12,_this__0155 * scaleTransform27._20 + _this__1155 * scaleTransform27._21 + _this__2155 * scaleTransform27._22,_this__0255 * scaleTransform27._00 + _this__1255 * scaleTransform27._01 + _this__2255 * scaleTransform27._02,_this__0255 * scaleTransform27._10 + _this__1255 * scaleTransform27._11 + _this__2255 * scaleTransform27._12,_this__0255 * scaleTransform27._20 + _this__1255 * scaleTransform27._21 + _this__2255 * scaleTransform27._22);
			} else {
				var wid43 = Main.wid;
				var hi43 = Main.hi;
				var scaleTransform31 = Main.scaleTransform;
				var _this__0056 = 1;
				var _this__1056 = 0;
				var _this__2056 = wid43 - sv_x12 - border;
				var _this__0156 = 0;
				var _this__1156 = 1;
				var _this__2156 = hi43 / 2 - sv_y12 / 2;
				var _this__0256 = 0;
				var _this__1256 = 0;
				var _this__2256 = 1;
				c0 = new kha_math_FastMatrix3(_this__0056 * scaleTransform31._00 + _this__1056 * scaleTransform31._01 + _this__2056 * scaleTransform31._02,_this__0056 * scaleTransform31._10 + _this__1056 * scaleTransform31._11 + _this__2056 * scaleTransform31._12,_this__0056 * scaleTransform31._20 + _this__1056 * scaleTransform31._21 + _this__2056 * scaleTransform31._22,_this__0156 * scaleTransform31._00 + _this__1156 * scaleTransform31._01 + _this__2156 * scaleTransform31._02,_this__0156 * scaleTransform31._10 + _this__1156 * scaleTransform31._11 + _this__2156 * scaleTransform31._12,_this__0156 * scaleTransform31._20 + _this__1156 * scaleTransform31._21 + _this__2156 * scaleTransform31._22,_this__0256 * scaleTransform31._00 + _this__1256 * scaleTransform31._01 + _this__2256 * scaleTransform31._02,_this__0256 * scaleTransform31._10 + _this__1256 * scaleTransform31._11 + _this__2256 * scaleTransform31._12,_this__0256 * scaleTransform31._20 + _this__1256 * scaleTransform31._21 + _this__2256 * scaleTransform31._22);
			}
			break;
		case 18:
			var wid44 = Main.wid;
			var hi44 = Main.hi;
			var scaleTransform32 = Main.scaleTransform;
			var _this__0057 = 1;
			var _this__1057 = 0;
			var _this__2057 = wid44 / 2 - sv_x12 / 2;
			var _this__0157 = 0;
			var _this__1157 = 1;
			var _this__2157 = hi44 / 2 - sv_y12 / 2;
			var _this__0257 = 0;
			var _this__1257 = 0;
			var _this__2257 = 1;
			c0 = new kha_math_FastMatrix3(_this__0057 * scaleTransform32._00 + _this__1057 * scaleTransform32._01 + _this__2057 * scaleTransform32._02,_this__0057 * scaleTransform32._10 + _this__1057 * scaleTransform32._11 + _this__2057 * scaleTransform32._12,_this__0057 * scaleTransform32._20 + _this__1057 * scaleTransform32._21 + _this__2057 * scaleTransform32._22,_this__0157 * scaleTransform32._00 + _this__1157 * scaleTransform32._01 + _this__2157 * scaleTransform32._02,_this__0157 * scaleTransform32._10 + _this__1157 * scaleTransform32._11 + _this__2157 * scaleTransform32._12,_this__0157 * scaleTransform32._20 + _this__1157 * scaleTransform32._21 + _this__2157 * scaleTransform32._22,_this__0257 * scaleTransform32._00 + _this__1257 * scaleTransform32._01 + _this__2257 * scaleTransform32._02,_this__0257 * scaleTransform32._10 + _this__1257 * scaleTransform32._11 + _this__2257 * scaleTransform32._12,_this__0257 * scaleTransform32._20 + _this__1257 * scaleTransform32._21 + _this__2257 * scaleTransform32._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x12 < wid34) {
				var wid45 = Main.wid;
				var hi45 = Main.hi;
				var scaleTransform33 = Main.scaleTransform;
				var _this__0058 = 1;
				var _this__1058 = 0;
				var _this__2058 = border;
				var _this__0158 = 0;
				var _this__1158 = 1;
				var _this__2158 = hi45 / 2 - sv_y12 / 2;
				var _this__0258 = 0;
				var _this__1258 = 0;
				var _this__2258 = 1;
				c0 = new kha_math_FastMatrix3(_this__0058 * scaleTransform33._00 + _this__1058 * scaleTransform33._01 + _this__2058 * scaleTransform33._02,_this__0058 * scaleTransform33._10 + _this__1058 * scaleTransform33._11 + _this__2058 * scaleTransform33._12,_this__0058 * scaleTransform33._20 + _this__1058 * scaleTransform33._21 + _this__2058 * scaleTransform33._22,_this__0158 * scaleTransform33._00 + _this__1158 * scaleTransform33._01 + _this__2158 * scaleTransform33._02,_this__0158 * scaleTransform33._10 + _this__1158 * scaleTransform33._11 + _this__2158 * scaleTransform33._12,_this__0158 * scaleTransform33._20 + _this__1158 * scaleTransform33._21 + _this__2158 * scaleTransform33._22,_this__0258 * scaleTransform33._00 + _this__1258 * scaleTransform33._01 + _this__2258 * scaleTransform33._02,_this__0258 * scaleTransform33._10 + _this__1258 * scaleTransform33._11 + _this__2258 * scaleTransform33._12,_this__0258 * scaleTransform33._20 + _this__1258 * scaleTransform33._21 + _this__2258 * scaleTransform33._22);
			} else {
				var wid46 = Main.wid;
				var hi46 = Main.hi;
				var scaleTransform34 = Main.scaleTransform;
				var _this__0059 = 1;
				var _this__1059 = 0;
				var _this__2059 = wid46 / 2 - sv_x12 / 2;
				var _this__0159 = 0;
				var _this__1159 = 1;
				var _this__2159 = hi46 / 2 - sv_y12 / 2;
				var _this__0259 = 0;
				var _this__1259 = 0;
				var _this__2259 = 1;
				c0 = new kha_math_FastMatrix3(_this__0059 * scaleTransform34._00 + _this__1059 * scaleTransform34._01 + _this__2059 * scaleTransform34._02,_this__0059 * scaleTransform34._10 + _this__1059 * scaleTransform34._11 + _this__2059 * scaleTransform34._12,_this__0059 * scaleTransform34._20 + _this__1059 * scaleTransform34._21 + _this__2059 * scaleTransform34._22,_this__0159 * scaleTransform34._00 + _this__1159 * scaleTransform34._01 + _this__2159 * scaleTransform34._02,_this__0159 * scaleTransform34._10 + _this__1159 * scaleTransform34._11 + _this__2159 * scaleTransform34._12,_this__0159 * scaleTransform34._20 + _this__1159 * scaleTransform34._21 + _this__2159 * scaleTransform34._22,_this__0259 * scaleTransform34._00 + _this__1259 * scaleTransform34._01 + _this__2259 * scaleTransform34._02,_this__0259 * scaleTransform34._10 + _this__1259 * scaleTransform34._11 + _this__2259 * scaleTransform34._12,_this__0259 * scaleTransform34._20 + _this__1259 * scaleTransform34._21 + _this__2259 * scaleTransform34._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x12 < wid34) {
				var wid47 = Main.wid;
				var hi47 = Main.hi;
				var scaleTransform35 = Main.scaleTransform;
				var _this__0060 = 1;
				var _this__1060 = 0;
				var _this__2060 = wid47 - sv_x12 - border;
				var _this__0160 = 0;
				var _this__1160 = 1;
				var _this__2160 = hi47 / 2 - sv_y12 / 2;
				var _this__0260 = 0;
				var _this__1260 = 0;
				var _this__2260 = 1;
				c0 = new kha_math_FastMatrix3(_this__0060 * scaleTransform35._00 + _this__1060 * scaleTransform35._01 + _this__2060 * scaleTransform35._02,_this__0060 * scaleTransform35._10 + _this__1060 * scaleTransform35._11 + _this__2060 * scaleTransform35._12,_this__0060 * scaleTransform35._20 + _this__1060 * scaleTransform35._21 + _this__2060 * scaleTransform35._22,_this__0160 * scaleTransform35._00 + _this__1160 * scaleTransform35._01 + _this__2160 * scaleTransform35._02,_this__0160 * scaleTransform35._10 + _this__1160 * scaleTransform35._11 + _this__2160 * scaleTransform35._12,_this__0160 * scaleTransform35._20 + _this__1160 * scaleTransform35._21 + _this__2160 * scaleTransform35._22,_this__0260 * scaleTransform35._00 + _this__1260 * scaleTransform35._01 + _this__2260 * scaleTransform35._02,_this__0260 * scaleTransform35._10 + _this__1260 * scaleTransform35._11 + _this__2260 * scaleTransform35._12,_this__0260 * scaleTransform35._20 + _this__1260 * scaleTransform35._21 + _this__2260 * scaleTransform35._22);
			} else {
				var wid48 = Main.wid;
				var hi48 = Main.hi;
				var scaleTransform36 = Main.scaleTransform;
				var _this__0061 = 1;
				var _this__1061 = 0;
				var _this__2061 = wid48 / 2 - sv_x12 / 2;
				var _this__0161 = 0;
				var _this__1161 = 1;
				var _this__2161 = hi48 / 2 - sv_y12 / 2;
				var _this__0261 = 0;
				var _this__1261 = 0;
				var _this__2261 = 1;
				c0 = new kha_math_FastMatrix3(_this__0061 * scaleTransform36._00 + _this__1061 * scaleTransform36._01 + _this__2061 * scaleTransform36._02,_this__0061 * scaleTransform36._10 + _this__1061 * scaleTransform36._11 + _this__2061 * scaleTransform36._12,_this__0061 * scaleTransform36._20 + _this__1061 * scaleTransform36._21 + _this__2061 * scaleTransform36._22,_this__0161 * scaleTransform36._00 + _this__1161 * scaleTransform36._01 + _this__2161 * scaleTransform36._02,_this__0161 * scaleTransform36._10 + _this__1161 * scaleTransform36._11 + _this__2161 * scaleTransform36._12,_this__0161 * scaleTransform36._20 + _this__1161 * scaleTransform36._21 + _this__2161 * scaleTransform36._22,_this__0261 * scaleTransform36._00 + _this__1261 * scaleTransform36._01 + _this__2261 * scaleTransform36._02,_this__0261 * scaleTransform36._10 + _this__1261 * scaleTransform36._11 + _this__2261 * scaleTransform36._12,_this__0261 * scaleTransform36._20 + _this__1261 * scaleTransform36._21 + _this__2261 * scaleTransform36._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y12 < hi34) {
				var _this__0062 = 1;
				var _this__1062 = 0;
				var _this__2062 = wid34 / 2 - sv_x12 / 2;
				var _this__0162 = 0;
				var _this__1162 = 1;
				var _this__2162 = hi34 - sv_y12 - border;
				var _this__0262 = 0;
				var _this__1262 = 0;
				var _this__2262 = 1;
				c0 = new kha_math_FastMatrix3(_this__0062 * scaleTransform27._00 + _this__1062 * scaleTransform27._01 + _this__2062 * scaleTransform27._02,_this__0062 * scaleTransform27._10 + _this__1062 * scaleTransform27._11 + _this__2062 * scaleTransform27._12,_this__0062 * scaleTransform27._20 + _this__1062 * scaleTransform27._21 + _this__2062 * scaleTransform27._22,_this__0162 * scaleTransform27._00 + _this__1162 * scaleTransform27._01 + _this__2162 * scaleTransform27._02,_this__0162 * scaleTransform27._10 + _this__1162 * scaleTransform27._11 + _this__2162 * scaleTransform27._12,_this__0162 * scaleTransform27._20 + _this__1162 * scaleTransform27._21 + _this__2162 * scaleTransform27._22,_this__0262 * scaleTransform27._00 + _this__1262 * scaleTransform27._01 + _this__2262 * scaleTransform27._02,_this__0262 * scaleTransform27._10 + _this__1262 * scaleTransform27._11 + _this__2262 * scaleTransform27._12,_this__0262 * scaleTransform27._20 + _this__1262 * scaleTransform27._21 + _this__2262 * scaleTransform27._22);
			} else {
				var wid49 = Main.wid;
				var hi49 = Main.hi;
				var scaleTransform37 = Main.scaleTransform;
				var _this__0063 = 1;
				var _this__1063 = 0;
				var _this__2063 = wid49 / 2 - sv_x12 / 2;
				var _this__0163 = 0;
				var _this__1163 = 1;
				var _this__2163 = hi49 / 2 - sv_y12 / 2;
				var _this__0263 = 0;
				var _this__1263 = 0;
				var _this__2263 = 1;
				c0 = new kha_math_FastMatrix3(_this__0063 * scaleTransform37._00 + _this__1063 * scaleTransform37._01 + _this__2063 * scaleTransform37._02,_this__0063 * scaleTransform37._10 + _this__1063 * scaleTransform37._11 + _this__2063 * scaleTransform37._12,_this__0063 * scaleTransform37._20 + _this__1063 * scaleTransform37._21 + _this__2063 * scaleTransform37._22,_this__0163 * scaleTransform37._00 + _this__1163 * scaleTransform37._01 + _this__2163 * scaleTransform37._02,_this__0163 * scaleTransform37._10 + _this__1163 * scaleTransform37._11 + _this__2163 * scaleTransform37._12,_this__0163 * scaleTransform37._20 + _this__1163 * scaleTransform37._21 + _this__2163 * scaleTransform37._22,_this__0263 * scaleTransform37._00 + _this__1263 * scaleTransform37._01 + _this__2263 * scaleTransform37._02,_this__0263 * scaleTransform37._10 + _this__1263 * scaleTransform37._11 + _this__2263 * scaleTransform37._12,_this__0263 * scaleTransform37._20 + _this__1263 * scaleTransform37._21 + _this__2263 * scaleTransform37._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y12 < hi34) {
				var _this__0064 = 1;
				var _this__1064 = 0;
				var _this__2064 = wid34 / 2 - sv_x12 / 2;
				var _this__0164 = 0;
				var _this__1164 = 1;
				var _this__2164 = border;
				var _this__0264 = 0;
				var _this__1264 = 0;
				var _this__2264 = 1;
				c0 = new kha_math_FastMatrix3(_this__0064 * scaleTransform27._00 + _this__1064 * scaleTransform27._01 + _this__2064 * scaleTransform27._02,_this__0064 * scaleTransform27._10 + _this__1064 * scaleTransform27._11 + _this__2064 * scaleTransform27._12,_this__0064 * scaleTransform27._20 + _this__1064 * scaleTransform27._21 + _this__2064 * scaleTransform27._22,_this__0164 * scaleTransform27._00 + _this__1164 * scaleTransform27._01 + _this__2164 * scaleTransform27._02,_this__0164 * scaleTransform27._10 + _this__1164 * scaleTransform27._11 + _this__2164 * scaleTransform27._12,_this__0164 * scaleTransform27._20 + _this__1164 * scaleTransform27._21 + _this__2164 * scaleTransform27._22,_this__0264 * scaleTransform27._00 + _this__1264 * scaleTransform27._01 + _this__2264 * scaleTransform27._02,_this__0264 * scaleTransform27._10 + _this__1264 * scaleTransform27._11 + _this__2264 * scaleTransform27._12,_this__0264 * scaleTransform27._20 + _this__1264 * scaleTransform27._21 + _this__2264 * scaleTransform27._22);
			} else {
				var wid50 = Main.wid;
				var hi50 = Main.hi;
				var scaleTransform38 = Main.scaleTransform;
				var _this__0065 = 1;
				var _this__1065 = 0;
				var _this__2065 = wid50 / 2 - sv_x12 / 2;
				var _this__0165 = 0;
				var _this__1165 = 1;
				var _this__2165 = hi50 / 2 - sv_y12 / 2;
				var _this__0265 = 0;
				var _this__1265 = 0;
				var _this__2265 = 1;
				c0 = new kha_math_FastMatrix3(_this__0065 * scaleTransform38._00 + _this__1065 * scaleTransform38._01 + _this__2065 * scaleTransform38._02,_this__0065 * scaleTransform38._10 + _this__1065 * scaleTransform38._11 + _this__2065 * scaleTransform38._12,_this__0065 * scaleTransform38._20 + _this__1065 * scaleTransform38._21 + _this__2065 * scaleTransform38._22,_this__0165 * scaleTransform38._00 + _this__1165 * scaleTransform38._01 + _this__2165 * scaleTransform38._02,_this__0165 * scaleTransform38._10 + _this__1165 * scaleTransform38._11 + _this__2165 * scaleTransform38._12,_this__0165 * scaleTransform38._20 + _this__1165 * scaleTransform38._21 + _this__2165 * scaleTransform38._22,_this__0265 * scaleTransform38._00 + _this__1265 * scaleTransform38._01 + _this__2265 * scaleTransform38._02,_this__0265 * scaleTransform38._10 + _this__1265 * scaleTransform38._11 + _this__2265 * scaleTransform38._12,_this__0265 * scaleTransform38._20 + _this__1265 * scaleTransform38._21 + _this__2265 * scaleTransform38._22);
			}
			break;
		}
		var scaleTransform39 = Main.scaleTransform;
		var v_x3 = w;
		var v_y3 = h;
		var w20 = scaleTransform39._02 * v_x3 + scaleTransform39._12 * v_y3 + scaleTransform39._22;
		var x18 = (scaleTransform39._00 * v_x3 + scaleTransform39._10 * v_y3 + scaleTransform39._20) / w20;
		var y18 = (scaleTransform39._01 * v_x3 + scaleTransform39._11 * v_y3 + scaleTransform39._21) / w20;
		var sv_x18 = x18;
		var sv_y18 = y18;
		var wid51 = Main.wid;
		var hi51 = Main.hi;
		var scaleTransform40 = Main.scaleTransform;
		var d0;
		switch(simpleText_Alignment.BottomRight._hx_index) {
		case 2:case 7:
			var wid52 = Main.wid;
			var hi52 = Main.hi;
			var w215 = wid52 - border * 2;
			var h215 = hi52 - border * 2;
			var dw15 = w215 - w;
			var dh15 = h215 - h;
			var scale15 = dw15 < dh15 ? w215 / w : h215 / h;
			if(scale15 < 0) {
				scale15 = 0.;
			}
			var scaleTransform__0015 = scale15;
			var scaleTransform__1015 = 0;
			var scaleTransform__2015 = 0;
			var scaleTransform__0115 = 0;
			var scaleTransform__1115 = scale15;
			var scaleTransform__2115 = 0;
			var scaleTransform__0215 = 0;
			var scaleTransform__1215 = 0;
			var scaleTransform__2215 = 1;
			var value_x15 = w;
			var value_y15 = h;
			var w30 = scaleTransform__0215 * value_x15 + scaleTransform__1215 * value_y15 + scaleTransform__2215;
			var x19 = (scaleTransform__0015 * value_x15 + scaleTransform__1015 * value_y15 + scaleTransform__2015) / w30;
			var y19 = (scaleTransform__0115 * value_x15 + scaleTransform__1115 * value_y15 + scaleTransform__2115) / w30;
			var sv_x19 = x19;
			var sv_y19 = y19;
			var _this__0066 = 1;
			var _this__1066 = 0;
			var _this__2066 = wid52 - sv_x19 - border;
			var _this__0166 = 0;
			var _this__1166 = 1;
			var _this__2166 = hi52 / 2 - sv_y19 / 2;
			var _this__0266 = 0;
			var _this__1266 = 0;
			var _this__2266 = 1;
			d0 = new kha_math_FastMatrix3(_this__0066 * scaleTransform__0015 + _this__1066 * scaleTransform__0115 + _this__2066 * scaleTransform__0215,_this__0066 * scaleTransform__1015 + _this__1066 * scaleTransform__1115 + _this__2066 * scaleTransform__1215,_this__0066 * scaleTransform__2015 + _this__1066 * scaleTransform__2115 + _this__2066 * scaleTransform__2215,_this__0166 * scaleTransform__0015 + _this__1166 * scaleTransform__0115 + _this__2166 * scaleTransform__0215,_this__0166 * scaleTransform__1015 + _this__1166 * scaleTransform__1115 + _this__2166 * scaleTransform__1215,_this__0166 * scaleTransform__2015 + _this__1166 * scaleTransform__2115 + _this__2166 * scaleTransform__2215,_this__0266 * scaleTransform__0015 + _this__1266 * scaleTransform__0115 + _this__2266 * scaleTransform__0215,_this__0266 * scaleTransform__1015 + _this__1266 * scaleTransform__1115 + _this__2266 * scaleTransform__1215,_this__0266 * scaleTransform__2015 + _this__1266 * scaleTransform__2115 + _this__2266 * scaleTransform__2215);
			break;
		case 0:case 5:
			var wid53 = Main.wid;
			var hi53 = Main.hi;
			var w216 = wid53 - border * 2;
			var h216 = hi53 - border * 2;
			var dw16 = w216 - w;
			var dh16 = h216 - h;
			var scale16 = dw16 < dh16 ? w216 / w : h216 / h;
			if(scale16 < 0) {
				scale16 = 0.;
			}
			var scaleTransform__0016 = scale16;
			var scaleTransform__1016 = 0;
			var scaleTransform__2016 = 0;
			var scaleTransform__0116 = 0;
			var scaleTransform__1116 = scale16;
			var scaleTransform__2116 = 0;
			var scaleTransform__0216 = 0;
			var scaleTransform__1216 = 0;
			var scaleTransform__2216 = 1;
			var value_x16 = w;
			var value_y16 = h;
			var w31 = scaleTransform__0216 * value_x16 + scaleTransform__1216 * value_y16 + scaleTransform__2216;
			var x20 = (scaleTransform__0016 * value_x16 + scaleTransform__1016 * value_y16 + scaleTransform__2016) / w31;
			var y20 = (scaleTransform__0116 * value_x16 + scaleTransform__1116 * value_y16 + scaleTransform__2116) / w31;
			var sv_x20 = x20;
			var sv_y20 = y20;
			var _this__0067 = 1;
			var _this__1067 = 0;
			var _this__2067 = wid53 / 2 - sv_x20 / 2;
			var _this__0167 = 0;
			var _this__1167 = 1;
			var _this__2167 = hi53 / 2 - sv_y20 / 2;
			var _this__0267 = 0;
			var _this__1267 = 0;
			var _this__2267 = 1;
			d0 = new kha_math_FastMatrix3(_this__0067 * scaleTransform__0016 + _this__1067 * scaleTransform__0116 + _this__2067 * scaleTransform__0216,_this__0067 * scaleTransform__1016 + _this__1067 * scaleTransform__1116 + _this__2067 * scaleTransform__1216,_this__0067 * scaleTransform__2016 + _this__1067 * scaleTransform__2116 + _this__2067 * scaleTransform__2216,_this__0167 * scaleTransform__0016 + _this__1167 * scaleTransform__0116 + _this__2167 * scaleTransform__0216,_this__0167 * scaleTransform__1016 + _this__1167 * scaleTransform__1116 + _this__2167 * scaleTransform__1216,_this__0167 * scaleTransform__2016 + _this__1167 * scaleTransform__2116 + _this__2167 * scaleTransform__2216,_this__0267 * scaleTransform__0016 + _this__1267 * scaleTransform__0116 + _this__2267 * scaleTransform__0216,_this__0267 * scaleTransform__1016 + _this__1267 * scaleTransform__1116 + _this__2267 * scaleTransform__1216,_this__0267 * scaleTransform__2016 + _this__1267 * scaleTransform__2116 + _this__2267 * scaleTransform__2216);
			break;
		case 1:case 6:
			var wid54 = Main.wid;
			var hi54 = Main.hi;
			var w217 = wid54 - border * 2;
			var h217 = hi54 - border * 2;
			var dw17 = w217 - w;
			var dh17 = h217 - h;
			var scale17 = dw17 < dh17 ? w217 / w : h217 / h;
			if(scale17 < 0) {
				scale17 = 0.;
			}
			var scaleTransform__0017 = scale17;
			var scaleTransform__1017 = 0;
			var scaleTransform__2017 = 0;
			var scaleTransform__0117 = 0;
			var scaleTransform__1117 = scale17;
			var scaleTransform__2117 = 0;
			var scaleTransform__0217 = 0;
			var scaleTransform__1217 = 0;
			var scaleTransform__2217 = 1;
			var value_x17 = w;
			var value_y17 = h;
			var w32 = scaleTransform__0217 * value_x17 + scaleTransform__1217 * value_y17 + scaleTransform__2217;
			var x21 = (scaleTransform__0017 * value_x17 + scaleTransform__1017 * value_y17 + scaleTransform__2017) / w32;
			var y21 = (scaleTransform__0117 * value_x17 + scaleTransform__1117 * value_y17 + scaleTransform__2117) / w32;
			var sv_x21 = x21;
			var sv_y21 = y21;
			var _this__0068 = 1;
			var _this__1068 = 0;
			var _this__2068 = border;
			var _this__0168 = 0;
			var _this__1168 = 1;
			var _this__2168 = hi54 / 2 - sv_y21 / 2;
			var _this__0268 = 0;
			var _this__1268 = 0;
			var _this__2268 = 1;
			d0 = new kha_math_FastMatrix3(_this__0068 * scaleTransform__0017 + _this__1068 * scaleTransform__0117 + _this__2068 * scaleTransform__0217,_this__0068 * scaleTransform__1017 + _this__1068 * scaleTransform__1117 + _this__2068 * scaleTransform__1217,_this__0068 * scaleTransform__2017 + _this__1068 * scaleTransform__2117 + _this__2068 * scaleTransform__2217,_this__0168 * scaleTransform__0017 + _this__1168 * scaleTransform__0117 + _this__2168 * scaleTransform__0217,_this__0168 * scaleTransform__1017 + _this__1168 * scaleTransform__1117 + _this__2168 * scaleTransform__1217,_this__0168 * scaleTransform__2017 + _this__1168 * scaleTransform__2117 + _this__2168 * scaleTransform__2217,_this__0268 * scaleTransform__0017 + _this__1268 * scaleTransform__0117 + _this__2268 * scaleTransform__0217,_this__0268 * scaleTransform__1017 + _this__1268 * scaleTransform__1117 + _this__2268 * scaleTransform__1217,_this__0268 * scaleTransform__2017 + _this__1268 * scaleTransform__2117 + _this__2268 * scaleTransform__2217);
			break;
		case 3:case 8:
			var wid55 = Main.wid;
			var hi55 = Main.hi;
			var w218 = wid55 - border * 2;
			var h218 = hi55 - border * 2;
			var dw18 = w218 - w;
			var dh18 = h218 - h;
			var scale18 = dw18 < dh18 ? w218 / w : h218 / h;
			if(scale18 < 0) {
				scale18 = 0.;
			}
			var scaleTransform__0018 = scale18;
			var scaleTransform__1018 = 0;
			var scaleTransform__2018 = 0;
			var scaleTransform__0118 = 0;
			var scaleTransform__1118 = scale18;
			var scaleTransform__2118 = 0;
			var scaleTransform__0218 = 0;
			var scaleTransform__1218 = 0;
			var scaleTransform__2218 = 1;
			var value_x18 = w;
			var value_y18 = h;
			var w33 = scaleTransform__0218 * value_x18 + scaleTransform__1218 * value_y18 + scaleTransform__2218;
			var x22 = (scaleTransform__0018 * value_x18 + scaleTransform__1018 * value_y18 + scaleTransform__2018) / w33;
			var y22 = (scaleTransform__0118 * value_x18 + scaleTransform__1118 * value_y18 + scaleTransform__2118) / w33;
			var sv_x22 = x22;
			var sv_y22 = y22;
			var _this__0069 = 1;
			var _this__1069 = 0;
			var _this__2069 = wid55 / 2 - sv_x22 / 2;
			var _this__0169 = 0;
			var _this__1169 = 1;
			var _this__2169 = border;
			var _this__0269 = 0;
			var _this__1269 = 0;
			var _this__2269 = 1;
			d0 = new kha_math_FastMatrix3(_this__0069 * scaleTransform__0018 + _this__1069 * scaleTransform__0118 + _this__2069 * scaleTransform__0218,_this__0069 * scaleTransform__1018 + _this__1069 * scaleTransform__1118 + _this__2069 * scaleTransform__1218,_this__0069 * scaleTransform__2018 + _this__1069 * scaleTransform__2118 + _this__2069 * scaleTransform__2218,_this__0169 * scaleTransform__0018 + _this__1169 * scaleTransform__0118 + _this__2169 * scaleTransform__0218,_this__0169 * scaleTransform__1018 + _this__1169 * scaleTransform__1118 + _this__2169 * scaleTransform__1218,_this__0169 * scaleTransform__2018 + _this__1169 * scaleTransform__2118 + _this__2169 * scaleTransform__2218,_this__0269 * scaleTransform__0018 + _this__1269 * scaleTransform__0118 + _this__2269 * scaleTransform__0218,_this__0269 * scaleTransform__1018 + _this__1269 * scaleTransform__1118 + _this__2269 * scaleTransform__1218,_this__0269 * scaleTransform__2018 + _this__1269 * scaleTransform__2118 + _this__2269 * scaleTransform__2218);
			break;
		case 4:case 9:
			var wid56 = Main.wid;
			var hi56 = Main.hi;
			var w219 = wid56 - border * 2;
			var h219 = hi56 - border * 2;
			var dw19 = w219 - w;
			var dh19 = h219 - h;
			var scale19 = dw19 < dh19 ? w219 / w : h219 / h;
			if(scale19 < 0) {
				scale19 = 0.;
			}
			var scaleTransform__0019 = scale19;
			var scaleTransform__1019 = 0;
			var scaleTransform__2019 = 0;
			var scaleTransform__0119 = 0;
			var scaleTransform__1119 = scale19;
			var scaleTransform__2119 = 0;
			var scaleTransform__0219 = 0;
			var scaleTransform__1219 = 0;
			var scaleTransform__2219 = 1;
			var value_x19 = w;
			var value_y19 = h;
			var w34 = scaleTransform__0219 * value_x19 + scaleTransform__1219 * value_y19 + scaleTransform__2219;
			var x23 = (scaleTransform__0019 * value_x19 + scaleTransform__1019 * value_y19 + scaleTransform__2019) / w34;
			var y23 = (scaleTransform__0119 * value_x19 + scaleTransform__1119 * value_y19 + scaleTransform__2119) / w34;
			var sv_x23 = x23;
			var sv_y23 = y23;
			var _this__0070 = 1;
			var _this__1070 = 0;
			var _this__2070 = wid56 / 2 - sv_x23 / 2;
			var _this__0170 = 0;
			var _this__1170 = 1;
			var _this__2170 = hi56 - sv_y23 - border;
			var _this__0270 = 0;
			var _this__1270 = 0;
			var _this__2270 = 1;
			d0 = new kha_math_FastMatrix3(_this__0070 * scaleTransform__0019 + _this__1070 * scaleTransform__0119 + _this__2070 * scaleTransform__0219,_this__0070 * scaleTransform__1019 + _this__1070 * scaleTransform__1119 + _this__2070 * scaleTransform__1219,_this__0070 * scaleTransform__2019 + _this__1070 * scaleTransform__2119 + _this__2070 * scaleTransform__2219,_this__0170 * scaleTransform__0019 + _this__1170 * scaleTransform__0119 + _this__2170 * scaleTransform__0219,_this__0170 * scaleTransform__1019 + _this__1170 * scaleTransform__1119 + _this__2170 * scaleTransform__1219,_this__0170 * scaleTransform__2019 + _this__1170 * scaleTransform__2119 + _this__2170 * scaleTransform__2219,_this__0270 * scaleTransform__0019 + _this__1270 * scaleTransform__0119 + _this__2270 * scaleTransform__0219,_this__0270 * scaleTransform__1019 + _this__1270 * scaleTransform__1119 + _this__2270 * scaleTransform__1219,_this__0270 * scaleTransform__2019 + _this__1270 * scaleTransform__2119 + _this__2270 * scaleTransform__2219);
			break;
		case 10:case 11:
			if(border * 2 + sv_x18 < wid51) {
				var _this__0071 = 1;
				var _this__1071 = 0;
				var _this__2071 = border;
				var _this__0171 = 0;
				var _this__1171 = 1;
				var _this__2171 = border;
				var _this__0271 = 0;
				var _this__1271 = 0;
				var _this__2271 = 1;
				d0 = new kha_math_FastMatrix3(_this__0071 * scaleTransform40._00 + _this__1071 * scaleTransform40._01 + _this__2071 * scaleTransform40._02,_this__0071 * scaleTransform40._10 + _this__1071 * scaleTransform40._11 + _this__2071 * scaleTransform40._12,_this__0071 * scaleTransform40._20 + _this__1071 * scaleTransform40._21 + _this__2071 * scaleTransform40._22,_this__0171 * scaleTransform40._00 + _this__1171 * scaleTransform40._01 + _this__2171 * scaleTransform40._02,_this__0171 * scaleTransform40._10 + _this__1171 * scaleTransform40._11 + _this__2171 * scaleTransform40._12,_this__0171 * scaleTransform40._20 + _this__1171 * scaleTransform40._21 + _this__2171 * scaleTransform40._22,_this__0271 * scaleTransform40._00 + _this__1271 * scaleTransform40._01 + _this__2271 * scaleTransform40._02,_this__0271 * scaleTransform40._10 + _this__1271 * scaleTransform40._11 + _this__2271 * scaleTransform40._12,_this__0271 * scaleTransform40._20 + _this__1271 * scaleTransform40._21 + _this__2271 * scaleTransform40._22);
			} else {
				var wid57 = Main.wid;
				var hi57 = Main.hi;
				var scaleTransform41 = Main.scaleTransform;
				var _this__0072 = 1;
				var _this__1072 = 0;
				var _this__2072 = border;
				var _this__0172 = 0;
				var _this__1172 = 1;
				var _this__2172 = hi57 / 2 - sv_y18 / 2;
				var _this__0272 = 0;
				var _this__1272 = 0;
				var _this__2272 = 1;
				d0 = new kha_math_FastMatrix3(_this__0072 * scaleTransform41._00 + _this__1072 * scaleTransform41._01 + _this__2072 * scaleTransform41._02,_this__0072 * scaleTransform41._10 + _this__1072 * scaleTransform41._11 + _this__2072 * scaleTransform41._12,_this__0072 * scaleTransform41._20 + _this__1072 * scaleTransform41._21 + _this__2072 * scaleTransform41._22,_this__0172 * scaleTransform41._00 + _this__1172 * scaleTransform41._01 + _this__2172 * scaleTransform41._02,_this__0172 * scaleTransform41._10 + _this__1172 * scaleTransform41._11 + _this__2172 * scaleTransform41._12,_this__0172 * scaleTransform41._20 + _this__1172 * scaleTransform41._21 + _this__2172 * scaleTransform41._22,_this__0272 * scaleTransform41._00 + _this__1272 * scaleTransform41._01 + _this__2272 * scaleTransform41._02,_this__0272 * scaleTransform41._10 + _this__1272 * scaleTransform41._11 + _this__2272 * scaleTransform41._12,_this__0272 * scaleTransform41._20 + _this__1272 * scaleTransform41._21 + _this__2272 * scaleTransform41._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x18 < wid51) {
				var _this__0073 = 1;
				var _this__1073 = 0;
				var _this__2073 = wid51 - sv_x18 - border;
				var _this__0173 = 0;
				var _this__1173 = 1;
				var _this__2173 = border;
				var _this__0273 = 0;
				var _this__1273 = 0;
				var _this__2273 = 1;
				d0 = new kha_math_FastMatrix3(_this__0073 * scaleTransform40._00 + _this__1073 * scaleTransform40._01 + _this__2073 * scaleTransform40._02,_this__0073 * scaleTransform40._10 + _this__1073 * scaleTransform40._11 + _this__2073 * scaleTransform40._12,_this__0073 * scaleTransform40._20 + _this__1073 * scaleTransform40._21 + _this__2073 * scaleTransform40._22,_this__0173 * scaleTransform40._00 + _this__1173 * scaleTransform40._01 + _this__2173 * scaleTransform40._02,_this__0173 * scaleTransform40._10 + _this__1173 * scaleTransform40._11 + _this__2173 * scaleTransform40._12,_this__0173 * scaleTransform40._20 + _this__1173 * scaleTransform40._21 + _this__2173 * scaleTransform40._22,_this__0273 * scaleTransform40._00 + _this__1273 * scaleTransform40._01 + _this__2273 * scaleTransform40._02,_this__0273 * scaleTransform40._10 + _this__1273 * scaleTransform40._11 + _this__2273 * scaleTransform40._12,_this__0273 * scaleTransform40._20 + _this__1273 * scaleTransform40._21 + _this__2273 * scaleTransform40._22);
			} else {
				var wid58 = Main.wid;
				var hi58 = Main.hi;
				var scaleTransform42 = Main.scaleTransform;
				var _this__0074 = 1;
				var _this__1074 = 0;
				var _this__2074 = wid58 - sv_x18 - border;
				var _this__0174 = 0;
				var _this__1174 = 1;
				var _this__2174 = hi58 / 2 - sv_y18 / 2;
				var _this__0274 = 0;
				var _this__1274 = 0;
				var _this__2274 = 1;
				d0 = new kha_math_FastMatrix3(_this__0074 * scaleTransform42._00 + _this__1074 * scaleTransform42._01 + _this__2074 * scaleTransform42._02,_this__0074 * scaleTransform42._10 + _this__1074 * scaleTransform42._11 + _this__2074 * scaleTransform42._12,_this__0074 * scaleTransform42._20 + _this__1074 * scaleTransform42._21 + _this__2074 * scaleTransform42._22,_this__0174 * scaleTransform42._00 + _this__1174 * scaleTransform42._01 + _this__2174 * scaleTransform42._02,_this__0174 * scaleTransform42._10 + _this__1174 * scaleTransform42._11 + _this__2174 * scaleTransform42._12,_this__0174 * scaleTransform42._20 + _this__1174 * scaleTransform42._21 + _this__2174 * scaleTransform42._22,_this__0274 * scaleTransform42._00 + _this__1274 * scaleTransform42._01 + _this__2274 * scaleTransform42._02,_this__0274 * scaleTransform42._10 + _this__1274 * scaleTransform42._11 + _this__2274 * scaleTransform42._12,_this__0274 * scaleTransform42._20 + _this__1274 * scaleTransform42._21 + _this__2274 * scaleTransform42._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y18 < hi51) {
				var _this__0075 = 1;
				var _this__1075 = 0;
				var _this__2075 = border;
				var _this__0175 = 0;
				var _this__1175 = 1;
				var _this__2175 = hi51 - sv_y18 - border;
				var _this__0275 = 0;
				var _this__1275 = 0;
				var _this__2275 = 1;
				d0 = new kha_math_FastMatrix3(_this__0075 * scaleTransform40._00 + _this__1075 * scaleTransform40._01 + _this__2075 * scaleTransform40._02,_this__0075 * scaleTransform40._10 + _this__1075 * scaleTransform40._11 + _this__2075 * scaleTransform40._12,_this__0075 * scaleTransform40._20 + _this__1075 * scaleTransform40._21 + _this__2075 * scaleTransform40._22,_this__0175 * scaleTransform40._00 + _this__1175 * scaleTransform40._01 + _this__2175 * scaleTransform40._02,_this__0175 * scaleTransform40._10 + _this__1175 * scaleTransform40._11 + _this__2175 * scaleTransform40._12,_this__0175 * scaleTransform40._20 + _this__1175 * scaleTransform40._21 + _this__2175 * scaleTransform40._22,_this__0275 * scaleTransform40._00 + _this__1275 * scaleTransform40._01 + _this__2275 * scaleTransform40._02,_this__0275 * scaleTransform40._10 + _this__1275 * scaleTransform40._11 + _this__2275 * scaleTransform40._12,_this__0275 * scaleTransform40._20 + _this__1275 * scaleTransform40._21 + _this__2275 * scaleTransform40._22);
			} else {
				var wid59 = Main.wid;
				var hi59 = Main.hi;
				var scaleTransform43 = Main.scaleTransform;
				var _this__0076 = 1;
				var _this__1076 = 0;
				var _this__2076 = border;
				var _this__0176 = 0;
				var _this__1176 = 1;
				var _this__2176 = hi59 / 2 - sv_y18 / 2;
				var _this__0276 = 0;
				var _this__1276 = 0;
				var _this__2276 = 1;
				d0 = new kha_math_FastMatrix3(_this__0076 * scaleTransform43._00 + _this__1076 * scaleTransform43._01 + _this__2076 * scaleTransform43._02,_this__0076 * scaleTransform43._10 + _this__1076 * scaleTransform43._11 + _this__2076 * scaleTransform43._12,_this__0076 * scaleTransform43._20 + _this__1076 * scaleTransform43._21 + _this__2076 * scaleTransform43._22,_this__0176 * scaleTransform43._00 + _this__1176 * scaleTransform43._01 + _this__2176 * scaleTransform43._02,_this__0176 * scaleTransform43._10 + _this__1176 * scaleTransform43._11 + _this__2176 * scaleTransform43._12,_this__0176 * scaleTransform43._20 + _this__1176 * scaleTransform43._21 + _this__2176 * scaleTransform43._22,_this__0276 * scaleTransform43._00 + _this__1276 * scaleTransform43._01 + _this__2276 * scaleTransform43._02,_this__0276 * scaleTransform43._10 + _this__1276 * scaleTransform43._11 + _this__2276 * scaleTransform43._12,_this__0276 * scaleTransform43._20 + _this__1276 * scaleTransform43._21 + _this__2276 * scaleTransform43._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y18 < hi51) {
				var _this__0077 = 1;
				var _this__1077 = 0;
				var _this__2077 = wid51 - sv_x18 - border;
				var _this__0177 = 0;
				var _this__1177 = 1;
				var _this__2177 = hi51 - sv_y18 - border;
				var _this__0277 = 0;
				var _this__1277 = 0;
				var _this__2277 = 1;
				d0 = new kha_math_FastMatrix3(_this__0077 * scaleTransform40._00 + _this__1077 * scaleTransform40._01 + _this__2077 * scaleTransform40._02,_this__0077 * scaleTransform40._10 + _this__1077 * scaleTransform40._11 + _this__2077 * scaleTransform40._12,_this__0077 * scaleTransform40._20 + _this__1077 * scaleTransform40._21 + _this__2077 * scaleTransform40._22,_this__0177 * scaleTransform40._00 + _this__1177 * scaleTransform40._01 + _this__2177 * scaleTransform40._02,_this__0177 * scaleTransform40._10 + _this__1177 * scaleTransform40._11 + _this__2177 * scaleTransform40._12,_this__0177 * scaleTransform40._20 + _this__1177 * scaleTransform40._21 + _this__2177 * scaleTransform40._22,_this__0277 * scaleTransform40._00 + _this__1277 * scaleTransform40._01 + _this__2277 * scaleTransform40._02,_this__0277 * scaleTransform40._10 + _this__1277 * scaleTransform40._11 + _this__2277 * scaleTransform40._12,_this__0277 * scaleTransform40._20 + _this__1277 * scaleTransform40._21 + _this__2277 * scaleTransform40._22);
			} else {
				var wid60 = Main.wid;
				var hi60 = Main.hi;
				var scaleTransform44 = Main.scaleTransform;
				var _this__0078 = 1;
				var _this__1078 = 0;
				var _this__2078 = wid60 - sv_x18 - border;
				var _this__0178 = 0;
				var _this__1178 = 1;
				var _this__2178 = hi60 / 2 - sv_y18 / 2;
				var _this__0278 = 0;
				var _this__1278 = 0;
				var _this__2278 = 1;
				d0 = new kha_math_FastMatrix3(_this__0078 * scaleTransform44._00 + _this__1078 * scaleTransform44._01 + _this__2078 * scaleTransform44._02,_this__0078 * scaleTransform44._10 + _this__1078 * scaleTransform44._11 + _this__2078 * scaleTransform44._12,_this__0078 * scaleTransform44._20 + _this__1078 * scaleTransform44._21 + _this__2078 * scaleTransform44._22,_this__0178 * scaleTransform44._00 + _this__1178 * scaleTransform44._01 + _this__2178 * scaleTransform44._02,_this__0178 * scaleTransform44._10 + _this__1178 * scaleTransform44._11 + _this__2178 * scaleTransform44._12,_this__0178 * scaleTransform44._20 + _this__1178 * scaleTransform44._21 + _this__2178 * scaleTransform44._22,_this__0278 * scaleTransform44._00 + _this__1278 * scaleTransform44._01 + _this__2278 * scaleTransform44._02,_this__0278 * scaleTransform44._10 + _this__1278 * scaleTransform44._11 + _this__2278 * scaleTransform44._12,_this__0278 * scaleTransform44._20 + _this__1278 * scaleTransform44._21 + _this__2278 * scaleTransform44._22);
			}
			break;
		case 18:
			var wid61 = Main.wid;
			var hi61 = Main.hi;
			var scaleTransform45 = Main.scaleTransform;
			var _this__0079 = 1;
			var _this__1079 = 0;
			var _this__2079 = wid61 / 2 - sv_x18 / 2;
			var _this__0179 = 0;
			var _this__1179 = 1;
			var _this__2179 = hi61 / 2 - sv_y18 / 2;
			var _this__0279 = 0;
			var _this__1279 = 0;
			var _this__2279 = 1;
			d0 = new kha_math_FastMatrix3(_this__0079 * scaleTransform45._00 + _this__1079 * scaleTransform45._01 + _this__2079 * scaleTransform45._02,_this__0079 * scaleTransform45._10 + _this__1079 * scaleTransform45._11 + _this__2079 * scaleTransform45._12,_this__0079 * scaleTransform45._20 + _this__1079 * scaleTransform45._21 + _this__2079 * scaleTransform45._22,_this__0179 * scaleTransform45._00 + _this__1179 * scaleTransform45._01 + _this__2179 * scaleTransform45._02,_this__0179 * scaleTransform45._10 + _this__1179 * scaleTransform45._11 + _this__2179 * scaleTransform45._12,_this__0179 * scaleTransform45._20 + _this__1179 * scaleTransform45._21 + _this__2179 * scaleTransform45._22,_this__0279 * scaleTransform45._00 + _this__1279 * scaleTransform45._01 + _this__2279 * scaleTransform45._02,_this__0279 * scaleTransform45._10 + _this__1279 * scaleTransform45._11 + _this__2279 * scaleTransform45._12,_this__0279 * scaleTransform45._20 + _this__1279 * scaleTransform45._21 + _this__2279 * scaleTransform45._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x18 < wid51) {
				var wid62 = Main.wid;
				var hi62 = Main.hi;
				var scaleTransform46 = Main.scaleTransform;
				var _this__0080 = 1;
				var _this__1080 = 0;
				var _this__2080 = border;
				var _this__0180 = 0;
				var _this__1180 = 1;
				var _this__2180 = hi62 / 2 - sv_y18 / 2;
				var _this__0280 = 0;
				var _this__1280 = 0;
				var _this__2280 = 1;
				d0 = new kha_math_FastMatrix3(_this__0080 * scaleTransform46._00 + _this__1080 * scaleTransform46._01 + _this__2080 * scaleTransform46._02,_this__0080 * scaleTransform46._10 + _this__1080 * scaleTransform46._11 + _this__2080 * scaleTransform46._12,_this__0080 * scaleTransform46._20 + _this__1080 * scaleTransform46._21 + _this__2080 * scaleTransform46._22,_this__0180 * scaleTransform46._00 + _this__1180 * scaleTransform46._01 + _this__2180 * scaleTransform46._02,_this__0180 * scaleTransform46._10 + _this__1180 * scaleTransform46._11 + _this__2180 * scaleTransform46._12,_this__0180 * scaleTransform46._20 + _this__1180 * scaleTransform46._21 + _this__2180 * scaleTransform46._22,_this__0280 * scaleTransform46._00 + _this__1280 * scaleTransform46._01 + _this__2280 * scaleTransform46._02,_this__0280 * scaleTransform46._10 + _this__1280 * scaleTransform46._11 + _this__2280 * scaleTransform46._12,_this__0280 * scaleTransform46._20 + _this__1280 * scaleTransform46._21 + _this__2280 * scaleTransform46._22);
			} else {
				var wid63 = Main.wid;
				var hi63 = Main.hi;
				var scaleTransform47 = Main.scaleTransform;
				var _this__0081 = 1;
				var _this__1081 = 0;
				var _this__2081 = wid63 / 2 - sv_x18 / 2;
				var _this__0181 = 0;
				var _this__1181 = 1;
				var _this__2181 = hi63 / 2 - sv_y18 / 2;
				var _this__0281 = 0;
				var _this__1281 = 0;
				var _this__2281 = 1;
				d0 = new kha_math_FastMatrix3(_this__0081 * scaleTransform47._00 + _this__1081 * scaleTransform47._01 + _this__2081 * scaleTransform47._02,_this__0081 * scaleTransform47._10 + _this__1081 * scaleTransform47._11 + _this__2081 * scaleTransform47._12,_this__0081 * scaleTransform47._20 + _this__1081 * scaleTransform47._21 + _this__2081 * scaleTransform47._22,_this__0181 * scaleTransform47._00 + _this__1181 * scaleTransform47._01 + _this__2181 * scaleTransform47._02,_this__0181 * scaleTransform47._10 + _this__1181 * scaleTransform47._11 + _this__2181 * scaleTransform47._12,_this__0181 * scaleTransform47._20 + _this__1181 * scaleTransform47._21 + _this__2181 * scaleTransform47._22,_this__0281 * scaleTransform47._00 + _this__1281 * scaleTransform47._01 + _this__2281 * scaleTransform47._02,_this__0281 * scaleTransform47._10 + _this__1281 * scaleTransform47._11 + _this__2281 * scaleTransform47._12,_this__0281 * scaleTransform47._20 + _this__1281 * scaleTransform47._21 + _this__2281 * scaleTransform47._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x18 < wid51) {
				var wid64 = Main.wid;
				var hi64 = Main.hi;
				var scaleTransform48 = Main.scaleTransform;
				var _this__0082 = 1;
				var _this__1082 = 0;
				var _this__2082 = wid64 - sv_x18 - border;
				var _this__0182 = 0;
				var _this__1182 = 1;
				var _this__2182 = hi64 / 2 - sv_y18 / 2;
				var _this__0282 = 0;
				var _this__1282 = 0;
				var _this__2282 = 1;
				d0 = new kha_math_FastMatrix3(_this__0082 * scaleTransform48._00 + _this__1082 * scaleTransform48._01 + _this__2082 * scaleTransform48._02,_this__0082 * scaleTransform48._10 + _this__1082 * scaleTransform48._11 + _this__2082 * scaleTransform48._12,_this__0082 * scaleTransform48._20 + _this__1082 * scaleTransform48._21 + _this__2082 * scaleTransform48._22,_this__0182 * scaleTransform48._00 + _this__1182 * scaleTransform48._01 + _this__2182 * scaleTransform48._02,_this__0182 * scaleTransform48._10 + _this__1182 * scaleTransform48._11 + _this__2182 * scaleTransform48._12,_this__0182 * scaleTransform48._20 + _this__1182 * scaleTransform48._21 + _this__2182 * scaleTransform48._22,_this__0282 * scaleTransform48._00 + _this__1282 * scaleTransform48._01 + _this__2282 * scaleTransform48._02,_this__0282 * scaleTransform48._10 + _this__1282 * scaleTransform48._11 + _this__2282 * scaleTransform48._12,_this__0282 * scaleTransform48._20 + _this__1282 * scaleTransform48._21 + _this__2282 * scaleTransform48._22);
			} else {
				var wid65 = Main.wid;
				var hi65 = Main.hi;
				var scaleTransform49 = Main.scaleTransform;
				var _this__0083 = 1;
				var _this__1083 = 0;
				var _this__2083 = wid65 / 2 - sv_x18 / 2;
				var _this__0183 = 0;
				var _this__1183 = 1;
				var _this__2183 = hi65 / 2 - sv_y18 / 2;
				var _this__0283 = 0;
				var _this__1283 = 0;
				var _this__2283 = 1;
				d0 = new kha_math_FastMatrix3(_this__0083 * scaleTransform49._00 + _this__1083 * scaleTransform49._01 + _this__2083 * scaleTransform49._02,_this__0083 * scaleTransform49._10 + _this__1083 * scaleTransform49._11 + _this__2083 * scaleTransform49._12,_this__0083 * scaleTransform49._20 + _this__1083 * scaleTransform49._21 + _this__2083 * scaleTransform49._22,_this__0183 * scaleTransform49._00 + _this__1183 * scaleTransform49._01 + _this__2183 * scaleTransform49._02,_this__0183 * scaleTransform49._10 + _this__1183 * scaleTransform49._11 + _this__2183 * scaleTransform49._12,_this__0183 * scaleTransform49._20 + _this__1183 * scaleTransform49._21 + _this__2183 * scaleTransform49._22,_this__0283 * scaleTransform49._00 + _this__1283 * scaleTransform49._01 + _this__2283 * scaleTransform49._02,_this__0283 * scaleTransform49._10 + _this__1283 * scaleTransform49._11 + _this__2283 * scaleTransform49._12,_this__0283 * scaleTransform49._20 + _this__1283 * scaleTransform49._21 + _this__2283 * scaleTransform49._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y18 < hi51) {
				var _this__0084 = 1;
				var _this__1084 = 0;
				var _this__2084 = wid51 / 2 - sv_x18 / 2;
				var _this__0184 = 0;
				var _this__1184 = 1;
				var _this__2184 = hi51 - sv_y18 - border;
				var _this__0284 = 0;
				var _this__1284 = 0;
				var _this__2284 = 1;
				d0 = new kha_math_FastMatrix3(_this__0084 * scaleTransform40._00 + _this__1084 * scaleTransform40._01 + _this__2084 * scaleTransform40._02,_this__0084 * scaleTransform40._10 + _this__1084 * scaleTransform40._11 + _this__2084 * scaleTransform40._12,_this__0084 * scaleTransform40._20 + _this__1084 * scaleTransform40._21 + _this__2084 * scaleTransform40._22,_this__0184 * scaleTransform40._00 + _this__1184 * scaleTransform40._01 + _this__2184 * scaleTransform40._02,_this__0184 * scaleTransform40._10 + _this__1184 * scaleTransform40._11 + _this__2184 * scaleTransform40._12,_this__0184 * scaleTransform40._20 + _this__1184 * scaleTransform40._21 + _this__2184 * scaleTransform40._22,_this__0284 * scaleTransform40._00 + _this__1284 * scaleTransform40._01 + _this__2284 * scaleTransform40._02,_this__0284 * scaleTransform40._10 + _this__1284 * scaleTransform40._11 + _this__2284 * scaleTransform40._12,_this__0284 * scaleTransform40._20 + _this__1284 * scaleTransform40._21 + _this__2284 * scaleTransform40._22);
			} else {
				var wid66 = Main.wid;
				var hi66 = Main.hi;
				var scaleTransform50 = Main.scaleTransform;
				var _this__0085 = 1;
				var _this__1085 = 0;
				var _this__2085 = wid66 / 2 - sv_x18 / 2;
				var _this__0185 = 0;
				var _this__1185 = 1;
				var _this__2185 = hi66 / 2 - sv_y18 / 2;
				var _this__0285 = 0;
				var _this__1285 = 0;
				var _this__2285 = 1;
				d0 = new kha_math_FastMatrix3(_this__0085 * scaleTransform50._00 + _this__1085 * scaleTransform50._01 + _this__2085 * scaleTransform50._02,_this__0085 * scaleTransform50._10 + _this__1085 * scaleTransform50._11 + _this__2085 * scaleTransform50._12,_this__0085 * scaleTransform50._20 + _this__1085 * scaleTransform50._21 + _this__2085 * scaleTransform50._22,_this__0185 * scaleTransform50._00 + _this__1185 * scaleTransform50._01 + _this__2185 * scaleTransform50._02,_this__0185 * scaleTransform50._10 + _this__1185 * scaleTransform50._11 + _this__2185 * scaleTransform50._12,_this__0185 * scaleTransform50._20 + _this__1185 * scaleTransform50._21 + _this__2185 * scaleTransform50._22,_this__0285 * scaleTransform50._00 + _this__1285 * scaleTransform50._01 + _this__2285 * scaleTransform50._02,_this__0285 * scaleTransform50._10 + _this__1285 * scaleTransform50._11 + _this__2285 * scaleTransform50._12,_this__0285 * scaleTransform50._20 + _this__1285 * scaleTransform50._21 + _this__2285 * scaleTransform50._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y18 < hi51) {
				var _this__0086 = 1;
				var _this__1086 = 0;
				var _this__2086 = wid51 / 2 - sv_x18 / 2;
				var _this__0186 = 0;
				var _this__1186 = 1;
				var _this__2186 = border;
				var _this__0286 = 0;
				var _this__1286 = 0;
				var _this__2286 = 1;
				d0 = new kha_math_FastMatrix3(_this__0086 * scaleTransform40._00 + _this__1086 * scaleTransform40._01 + _this__2086 * scaleTransform40._02,_this__0086 * scaleTransform40._10 + _this__1086 * scaleTransform40._11 + _this__2086 * scaleTransform40._12,_this__0086 * scaleTransform40._20 + _this__1086 * scaleTransform40._21 + _this__2086 * scaleTransform40._22,_this__0186 * scaleTransform40._00 + _this__1186 * scaleTransform40._01 + _this__2186 * scaleTransform40._02,_this__0186 * scaleTransform40._10 + _this__1186 * scaleTransform40._11 + _this__2186 * scaleTransform40._12,_this__0186 * scaleTransform40._20 + _this__1186 * scaleTransform40._21 + _this__2186 * scaleTransform40._22,_this__0286 * scaleTransform40._00 + _this__1286 * scaleTransform40._01 + _this__2286 * scaleTransform40._02,_this__0286 * scaleTransform40._10 + _this__1286 * scaleTransform40._11 + _this__2286 * scaleTransform40._12,_this__0286 * scaleTransform40._20 + _this__1286 * scaleTransform40._21 + _this__2286 * scaleTransform40._22);
			} else {
				var wid67 = Main.wid;
				var hi67 = Main.hi;
				var scaleTransform51 = Main.scaleTransform;
				var _this__0087 = 1;
				var _this__1087 = 0;
				var _this__2087 = wid67 / 2 - sv_x18 / 2;
				var _this__0187 = 0;
				var _this__1187 = 1;
				var _this__2187 = hi67 / 2 - sv_y18 / 2;
				var _this__0287 = 0;
				var _this__1287 = 0;
				var _this__2287 = 1;
				d0 = new kha_math_FastMatrix3(_this__0087 * scaleTransform51._00 + _this__1087 * scaleTransform51._01 + _this__2087 * scaleTransform51._02,_this__0087 * scaleTransform51._10 + _this__1087 * scaleTransform51._11 + _this__2087 * scaleTransform51._12,_this__0087 * scaleTransform51._20 + _this__1087 * scaleTransform51._21 + _this__2087 * scaleTransform51._22,_this__0187 * scaleTransform51._00 + _this__1187 * scaleTransform51._01 + _this__2187 * scaleTransform51._02,_this__0187 * scaleTransform51._10 + _this__1187 * scaleTransform51._11 + _this__2187 * scaleTransform51._12,_this__0187 * scaleTransform51._20 + _this__1187 * scaleTransform51._21 + _this__2187 * scaleTransform51._22,_this__0287 * scaleTransform51._00 + _this__1287 * scaleTransform51._01 + _this__2287 * scaleTransform51._02,_this__0287 * scaleTransform51._10 + _this__1287 * scaleTransform51._11 + _this__2287 * scaleTransform51._12,_this__0287 * scaleTransform51._20 + _this__1287 * scaleTransform51._21 + _this__2287 * scaleTransform51._22);
			}
			break;
		}
		var scaleTransform52 = Main.scaleTransform;
		var v_x4 = w;
		var v_y4 = h;
		var w35 = scaleTransform52._02 * v_x4 + scaleTransform52._12 * v_y4 + scaleTransform52._22;
		var x24 = (scaleTransform52._00 * v_x4 + scaleTransform52._10 * v_y4 + scaleTransform52._20) / w35;
		var y24 = (scaleTransform52._01 * v_x4 + scaleTransform52._11 * v_y4 + scaleTransform52._21) / w35;
		var sv_x24 = x24;
		var sv_y24 = y24;
		var wid68 = Main.wid;
		var hi68 = Main.hi;
		var scaleTransform53 = Main.scaleTransform;
		var a2;
		switch(simpleText_Alignment.Top._hx_index) {
		case 2:case 7:
			var wid69 = Main.wid;
			var hi69 = Main.hi;
			var w220 = wid69 - border * 2;
			var h220 = hi69 - border * 2;
			var dw20 = w220 - w;
			var dh20 = h220 - h;
			var scale20 = dw20 < dh20 ? w220 / w : h220 / h;
			if(scale20 < 0) {
				scale20 = 0.;
			}
			var scaleTransform__0020 = scale20;
			var scaleTransform__1020 = 0;
			var scaleTransform__2020 = 0;
			var scaleTransform__0120 = 0;
			var scaleTransform__1120 = scale20;
			var scaleTransform__2120 = 0;
			var scaleTransform__0220 = 0;
			var scaleTransform__1220 = 0;
			var scaleTransform__2220 = 1;
			var value_x20 = w;
			var value_y20 = h;
			var w36 = scaleTransform__0220 * value_x20 + scaleTransform__1220 * value_y20 + scaleTransform__2220;
			var x25 = (scaleTransform__0020 * value_x20 + scaleTransform__1020 * value_y20 + scaleTransform__2020) / w36;
			var y25 = (scaleTransform__0120 * value_x20 + scaleTransform__1120 * value_y20 + scaleTransform__2120) / w36;
			var sv_x25 = x25;
			var sv_y25 = y25;
			var _this__0088 = 1;
			var _this__1088 = 0;
			var _this__2088 = wid69 - sv_x25 - border;
			var _this__0188 = 0;
			var _this__1188 = 1;
			var _this__2188 = hi69 / 2 - sv_y25 / 2;
			var _this__0288 = 0;
			var _this__1288 = 0;
			var _this__2288 = 1;
			a2 = new kha_math_FastMatrix3(_this__0088 * scaleTransform__0020 + _this__1088 * scaleTransform__0120 + _this__2088 * scaleTransform__0220,_this__0088 * scaleTransform__1020 + _this__1088 * scaleTransform__1120 + _this__2088 * scaleTransform__1220,_this__0088 * scaleTransform__2020 + _this__1088 * scaleTransform__2120 + _this__2088 * scaleTransform__2220,_this__0188 * scaleTransform__0020 + _this__1188 * scaleTransform__0120 + _this__2188 * scaleTransform__0220,_this__0188 * scaleTransform__1020 + _this__1188 * scaleTransform__1120 + _this__2188 * scaleTransform__1220,_this__0188 * scaleTransform__2020 + _this__1188 * scaleTransform__2120 + _this__2188 * scaleTransform__2220,_this__0288 * scaleTransform__0020 + _this__1288 * scaleTransform__0120 + _this__2288 * scaleTransform__0220,_this__0288 * scaleTransform__1020 + _this__1288 * scaleTransform__1120 + _this__2288 * scaleTransform__1220,_this__0288 * scaleTransform__2020 + _this__1288 * scaleTransform__2120 + _this__2288 * scaleTransform__2220);
			break;
		case 0:case 5:
			var wid70 = Main.wid;
			var hi70 = Main.hi;
			var w221 = wid70 - border * 2;
			var h221 = hi70 - border * 2;
			var dw21 = w221 - w;
			var dh21 = h221 - h;
			var scale21 = dw21 < dh21 ? w221 / w : h221 / h;
			if(scale21 < 0) {
				scale21 = 0.;
			}
			var scaleTransform__0021 = scale21;
			var scaleTransform__1021 = 0;
			var scaleTransform__2021 = 0;
			var scaleTransform__0121 = 0;
			var scaleTransform__1121 = scale21;
			var scaleTransform__2121 = 0;
			var scaleTransform__0221 = 0;
			var scaleTransform__1221 = 0;
			var scaleTransform__2221 = 1;
			var value_x21 = w;
			var value_y21 = h;
			var w37 = scaleTransform__0221 * value_x21 + scaleTransform__1221 * value_y21 + scaleTransform__2221;
			var x26 = (scaleTransform__0021 * value_x21 + scaleTransform__1021 * value_y21 + scaleTransform__2021) / w37;
			var y26 = (scaleTransform__0121 * value_x21 + scaleTransform__1121 * value_y21 + scaleTransform__2121) / w37;
			var sv_x26 = x26;
			var sv_y26 = y26;
			var _this__0089 = 1;
			var _this__1089 = 0;
			var _this__2089 = wid70 / 2 - sv_x26 / 2;
			var _this__0189 = 0;
			var _this__1189 = 1;
			var _this__2189 = hi70 / 2 - sv_y26 / 2;
			var _this__0289 = 0;
			var _this__1289 = 0;
			var _this__2289 = 1;
			a2 = new kha_math_FastMatrix3(_this__0089 * scaleTransform__0021 + _this__1089 * scaleTransform__0121 + _this__2089 * scaleTransform__0221,_this__0089 * scaleTransform__1021 + _this__1089 * scaleTransform__1121 + _this__2089 * scaleTransform__1221,_this__0089 * scaleTransform__2021 + _this__1089 * scaleTransform__2121 + _this__2089 * scaleTransform__2221,_this__0189 * scaleTransform__0021 + _this__1189 * scaleTransform__0121 + _this__2189 * scaleTransform__0221,_this__0189 * scaleTransform__1021 + _this__1189 * scaleTransform__1121 + _this__2189 * scaleTransform__1221,_this__0189 * scaleTransform__2021 + _this__1189 * scaleTransform__2121 + _this__2189 * scaleTransform__2221,_this__0289 * scaleTransform__0021 + _this__1289 * scaleTransform__0121 + _this__2289 * scaleTransform__0221,_this__0289 * scaleTransform__1021 + _this__1289 * scaleTransform__1121 + _this__2289 * scaleTransform__1221,_this__0289 * scaleTransform__2021 + _this__1289 * scaleTransform__2121 + _this__2289 * scaleTransform__2221);
			break;
		case 1:case 6:
			var wid71 = Main.wid;
			var hi71 = Main.hi;
			var w222 = wid71 - border * 2;
			var h222 = hi71 - border * 2;
			var dw22 = w222 - w;
			var dh22 = h222 - h;
			var scale22 = dw22 < dh22 ? w222 / w : h222 / h;
			if(scale22 < 0) {
				scale22 = 0.;
			}
			var scaleTransform__0022 = scale22;
			var scaleTransform__1022 = 0;
			var scaleTransform__2022 = 0;
			var scaleTransform__0122 = 0;
			var scaleTransform__1122 = scale22;
			var scaleTransform__2122 = 0;
			var scaleTransform__0222 = 0;
			var scaleTransform__1222 = 0;
			var scaleTransform__2222 = 1;
			var value_x22 = w;
			var value_y22 = h;
			var w38 = scaleTransform__0222 * value_x22 + scaleTransform__1222 * value_y22 + scaleTransform__2222;
			var x27 = (scaleTransform__0022 * value_x22 + scaleTransform__1022 * value_y22 + scaleTransform__2022) / w38;
			var y27 = (scaleTransform__0122 * value_x22 + scaleTransform__1122 * value_y22 + scaleTransform__2122) / w38;
			var sv_x27 = x27;
			var sv_y27 = y27;
			var _this__0090 = 1;
			var _this__1090 = 0;
			var _this__2090 = border;
			var _this__0190 = 0;
			var _this__1190 = 1;
			var _this__2190 = hi71 / 2 - sv_y27 / 2;
			var _this__0290 = 0;
			var _this__1290 = 0;
			var _this__2290 = 1;
			a2 = new kha_math_FastMatrix3(_this__0090 * scaleTransform__0022 + _this__1090 * scaleTransform__0122 + _this__2090 * scaleTransform__0222,_this__0090 * scaleTransform__1022 + _this__1090 * scaleTransform__1122 + _this__2090 * scaleTransform__1222,_this__0090 * scaleTransform__2022 + _this__1090 * scaleTransform__2122 + _this__2090 * scaleTransform__2222,_this__0190 * scaleTransform__0022 + _this__1190 * scaleTransform__0122 + _this__2190 * scaleTransform__0222,_this__0190 * scaleTransform__1022 + _this__1190 * scaleTransform__1122 + _this__2190 * scaleTransform__1222,_this__0190 * scaleTransform__2022 + _this__1190 * scaleTransform__2122 + _this__2190 * scaleTransform__2222,_this__0290 * scaleTransform__0022 + _this__1290 * scaleTransform__0122 + _this__2290 * scaleTransform__0222,_this__0290 * scaleTransform__1022 + _this__1290 * scaleTransform__1122 + _this__2290 * scaleTransform__1222,_this__0290 * scaleTransform__2022 + _this__1290 * scaleTransform__2122 + _this__2290 * scaleTransform__2222);
			break;
		case 3:case 8:
			var wid72 = Main.wid;
			var hi72 = Main.hi;
			var w223 = wid72 - border * 2;
			var h223 = hi72 - border * 2;
			var dw23 = w223 - w;
			var dh23 = h223 - h;
			var scale23 = dw23 < dh23 ? w223 / w : h223 / h;
			if(scale23 < 0) {
				scale23 = 0.;
			}
			var scaleTransform__0023 = scale23;
			var scaleTransform__1023 = 0;
			var scaleTransform__2023 = 0;
			var scaleTransform__0123 = 0;
			var scaleTransform__1123 = scale23;
			var scaleTransform__2123 = 0;
			var scaleTransform__0223 = 0;
			var scaleTransform__1223 = 0;
			var scaleTransform__2223 = 1;
			var value_x23 = w;
			var value_y23 = h;
			var w39 = scaleTransform__0223 * value_x23 + scaleTransform__1223 * value_y23 + scaleTransform__2223;
			var x28 = (scaleTransform__0023 * value_x23 + scaleTransform__1023 * value_y23 + scaleTransform__2023) / w39;
			var y28 = (scaleTransform__0123 * value_x23 + scaleTransform__1123 * value_y23 + scaleTransform__2123) / w39;
			var sv_x28 = x28;
			var sv_y28 = y28;
			var _this__0091 = 1;
			var _this__1091 = 0;
			var _this__2091 = wid72 / 2 - sv_x28 / 2;
			var _this__0191 = 0;
			var _this__1191 = 1;
			var _this__2191 = border;
			var _this__0291 = 0;
			var _this__1291 = 0;
			var _this__2291 = 1;
			a2 = new kha_math_FastMatrix3(_this__0091 * scaleTransform__0023 + _this__1091 * scaleTransform__0123 + _this__2091 * scaleTransform__0223,_this__0091 * scaleTransform__1023 + _this__1091 * scaleTransform__1123 + _this__2091 * scaleTransform__1223,_this__0091 * scaleTransform__2023 + _this__1091 * scaleTransform__2123 + _this__2091 * scaleTransform__2223,_this__0191 * scaleTransform__0023 + _this__1191 * scaleTransform__0123 + _this__2191 * scaleTransform__0223,_this__0191 * scaleTransform__1023 + _this__1191 * scaleTransform__1123 + _this__2191 * scaleTransform__1223,_this__0191 * scaleTransform__2023 + _this__1191 * scaleTransform__2123 + _this__2191 * scaleTransform__2223,_this__0291 * scaleTransform__0023 + _this__1291 * scaleTransform__0123 + _this__2291 * scaleTransform__0223,_this__0291 * scaleTransform__1023 + _this__1291 * scaleTransform__1123 + _this__2291 * scaleTransform__1223,_this__0291 * scaleTransform__2023 + _this__1291 * scaleTransform__2123 + _this__2291 * scaleTransform__2223);
			break;
		case 4:case 9:
			var wid73 = Main.wid;
			var hi73 = Main.hi;
			var w224 = wid73 - border * 2;
			var h224 = hi73 - border * 2;
			var dw24 = w224 - w;
			var dh24 = h224 - h;
			var scale24 = dw24 < dh24 ? w224 / w : h224 / h;
			if(scale24 < 0) {
				scale24 = 0.;
			}
			var scaleTransform__0024 = scale24;
			var scaleTransform__1024 = 0;
			var scaleTransform__2024 = 0;
			var scaleTransform__0124 = 0;
			var scaleTransform__1124 = scale24;
			var scaleTransform__2124 = 0;
			var scaleTransform__0224 = 0;
			var scaleTransform__1224 = 0;
			var scaleTransform__2224 = 1;
			var value_x24 = w;
			var value_y24 = h;
			var w40 = scaleTransform__0224 * value_x24 + scaleTransform__1224 * value_y24 + scaleTransform__2224;
			var x29 = (scaleTransform__0024 * value_x24 + scaleTransform__1024 * value_y24 + scaleTransform__2024) / w40;
			var y29 = (scaleTransform__0124 * value_x24 + scaleTransform__1124 * value_y24 + scaleTransform__2124) / w40;
			var sv_x29 = x29;
			var sv_y29 = y29;
			var _this__0092 = 1;
			var _this__1092 = 0;
			var _this__2092 = wid73 / 2 - sv_x29 / 2;
			var _this__0192 = 0;
			var _this__1192 = 1;
			var _this__2192 = hi73 - sv_y29 - border;
			var _this__0292 = 0;
			var _this__1292 = 0;
			var _this__2292 = 1;
			a2 = new kha_math_FastMatrix3(_this__0092 * scaleTransform__0024 + _this__1092 * scaleTransform__0124 + _this__2092 * scaleTransform__0224,_this__0092 * scaleTransform__1024 + _this__1092 * scaleTransform__1124 + _this__2092 * scaleTransform__1224,_this__0092 * scaleTransform__2024 + _this__1092 * scaleTransform__2124 + _this__2092 * scaleTransform__2224,_this__0192 * scaleTransform__0024 + _this__1192 * scaleTransform__0124 + _this__2192 * scaleTransform__0224,_this__0192 * scaleTransform__1024 + _this__1192 * scaleTransform__1124 + _this__2192 * scaleTransform__1224,_this__0192 * scaleTransform__2024 + _this__1192 * scaleTransform__2124 + _this__2192 * scaleTransform__2224,_this__0292 * scaleTransform__0024 + _this__1292 * scaleTransform__0124 + _this__2292 * scaleTransform__0224,_this__0292 * scaleTransform__1024 + _this__1292 * scaleTransform__1124 + _this__2292 * scaleTransform__1224,_this__0292 * scaleTransform__2024 + _this__1292 * scaleTransform__2124 + _this__2292 * scaleTransform__2224);
			break;
		case 10:case 11:
			if(border * 2 + sv_x24 < wid68) {
				var _this__0093 = 1;
				var _this__1093 = 0;
				var _this__2093 = border;
				var _this__0193 = 0;
				var _this__1193 = 1;
				var _this__2193 = border;
				var _this__0293 = 0;
				var _this__1293 = 0;
				var _this__2293 = 1;
				a2 = new kha_math_FastMatrix3(_this__0093 * scaleTransform53._00 + _this__1093 * scaleTransform53._01 + _this__2093 * scaleTransform53._02,_this__0093 * scaleTransform53._10 + _this__1093 * scaleTransform53._11 + _this__2093 * scaleTransform53._12,_this__0093 * scaleTransform53._20 + _this__1093 * scaleTransform53._21 + _this__2093 * scaleTransform53._22,_this__0193 * scaleTransform53._00 + _this__1193 * scaleTransform53._01 + _this__2193 * scaleTransform53._02,_this__0193 * scaleTransform53._10 + _this__1193 * scaleTransform53._11 + _this__2193 * scaleTransform53._12,_this__0193 * scaleTransform53._20 + _this__1193 * scaleTransform53._21 + _this__2193 * scaleTransform53._22,_this__0293 * scaleTransform53._00 + _this__1293 * scaleTransform53._01 + _this__2293 * scaleTransform53._02,_this__0293 * scaleTransform53._10 + _this__1293 * scaleTransform53._11 + _this__2293 * scaleTransform53._12,_this__0293 * scaleTransform53._20 + _this__1293 * scaleTransform53._21 + _this__2293 * scaleTransform53._22);
			} else {
				var wid74 = Main.wid;
				var hi74 = Main.hi;
				var scaleTransform54 = Main.scaleTransform;
				var _this__0094 = 1;
				var _this__1094 = 0;
				var _this__2094 = border;
				var _this__0194 = 0;
				var _this__1194 = 1;
				var _this__2194 = hi74 / 2 - sv_y24 / 2;
				var _this__0294 = 0;
				var _this__1294 = 0;
				var _this__2294 = 1;
				a2 = new kha_math_FastMatrix3(_this__0094 * scaleTransform54._00 + _this__1094 * scaleTransform54._01 + _this__2094 * scaleTransform54._02,_this__0094 * scaleTransform54._10 + _this__1094 * scaleTransform54._11 + _this__2094 * scaleTransform54._12,_this__0094 * scaleTransform54._20 + _this__1094 * scaleTransform54._21 + _this__2094 * scaleTransform54._22,_this__0194 * scaleTransform54._00 + _this__1194 * scaleTransform54._01 + _this__2194 * scaleTransform54._02,_this__0194 * scaleTransform54._10 + _this__1194 * scaleTransform54._11 + _this__2194 * scaleTransform54._12,_this__0194 * scaleTransform54._20 + _this__1194 * scaleTransform54._21 + _this__2194 * scaleTransform54._22,_this__0294 * scaleTransform54._00 + _this__1294 * scaleTransform54._01 + _this__2294 * scaleTransform54._02,_this__0294 * scaleTransform54._10 + _this__1294 * scaleTransform54._11 + _this__2294 * scaleTransform54._12,_this__0294 * scaleTransform54._20 + _this__1294 * scaleTransform54._21 + _this__2294 * scaleTransform54._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x24 < wid68) {
				var _this__0095 = 1;
				var _this__1095 = 0;
				var _this__2095 = wid68 - sv_x24 - border;
				var _this__0195 = 0;
				var _this__1195 = 1;
				var _this__2195 = border;
				var _this__0295 = 0;
				var _this__1295 = 0;
				var _this__2295 = 1;
				a2 = new kha_math_FastMatrix3(_this__0095 * scaleTransform53._00 + _this__1095 * scaleTransform53._01 + _this__2095 * scaleTransform53._02,_this__0095 * scaleTransform53._10 + _this__1095 * scaleTransform53._11 + _this__2095 * scaleTransform53._12,_this__0095 * scaleTransform53._20 + _this__1095 * scaleTransform53._21 + _this__2095 * scaleTransform53._22,_this__0195 * scaleTransform53._00 + _this__1195 * scaleTransform53._01 + _this__2195 * scaleTransform53._02,_this__0195 * scaleTransform53._10 + _this__1195 * scaleTransform53._11 + _this__2195 * scaleTransform53._12,_this__0195 * scaleTransform53._20 + _this__1195 * scaleTransform53._21 + _this__2195 * scaleTransform53._22,_this__0295 * scaleTransform53._00 + _this__1295 * scaleTransform53._01 + _this__2295 * scaleTransform53._02,_this__0295 * scaleTransform53._10 + _this__1295 * scaleTransform53._11 + _this__2295 * scaleTransform53._12,_this__0295 * scaleTransform53._20 + _this__1295 * scaleTransform53._21 + _this__2295 * scaleTransform53._22);
			} else {
				var wid75 = Main.wid;
				var hi75 = Main.hi;
				var scaleTransform55 = Main.scaleTransform;
				var _this__0096 = 1;
				var _this__1096 = 0;
				var _this__2096 = wid75 - sv_x24 - border;
				var _this__0196 = 0;
				var _this__1196 = 1;
				var _this__2196 = hi75 / 2 - sv_y24 / 2;
				var _this__0296 = 0;
				var _this__1296 = 0;
				var _this__2296 = 1;
				a2 = new kha_math_FastMatrix3(_this__0096 * scaleTransform55._00 + _this__1096 * scaleTransform55._01 + _this__2096 * scaleTransform55._02,_this__0096 * scaleTransform55._10 + _this__1096 * scaleTransform55._11 + _this__2096 * scaleTransform55._12,_this__0096 * scaleTransform55._20 + _this__1096 * scaleTransform55._21 + _this__2096 * scaleTransform55._22,_this__0196 * scaleTransform55._00 + _this__1196 * scaleTransform55._01 + _this__2196 * scaleTransform55._02,_this__0196 * scaleTransform55._10 + _this__1196 * scaleTransform55._11 + _this__2196 * scaleTransform55._12,_this__0196 * scaleTransform55._20 + _this__1196 * scaleTransform55._21 + _this__2196 * scaleTransform55._22,_this__0296 * scaleTransform55._00 + _this__1296 * scaleTransform55._01 + _this__2296 * scaleTransform55._02,_this__0296 * scaleTransform55._10 + _this__1296 * scaleTransform55._11 + _this__2296 * scaleTransform55._12,_this__0296 * scaleTransform55._20 + _this__1296 * scaleTransform55._21 + _this__2296 * scaleTransform55._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y24 < hi68) {
				var _this__0097 = 1;
				var _this__1097 = 0;
				var _this__2097 = border;
				var _this__0197 = 0;
				var _this__1197 = 1;
				var _this__2197 = hi68 - sv_y24 - border;
				var _this__0297 = 0;
				var _this__1297 = 0;
				var _this__2297 = 1;
				a2 = new kha_math_FastMatrix3(_this__0097 * scaleTransform53._00 + _this__1097 * scaleTransform53._01 + _this__2097 * scaleTransform53._02,_this__0097 * scaleTransform53._10 + _this__1097 * scaleTransform53._11 + _this__2097 * scaleTransform53._12,_this__0097 * scaleTransform53._20 + _this__1097 * scaleTransform53._21 + _this__2097 * scaleTransform53._22,_this__0197 * scaleTransform53._00 + _this__1197 * scaleTransform53._01 + _this__2197 * scaleTransform53._02,_this__0197 * scaleTransform53._10 + _this__1197 * scaleTransform53._11 + _this__2197 * scaleTransform53._12,_this__0197 * scaleTransform53._20 + _this__1197 * scaleTransform53._21 + _this__2197 * scaleTransform53._22,_this__0297 * scaleTransform53._00 + _this__1297 * scaleTransform53._01 + _this__2297 * scaleTransform53._02,_this__0297 * scaleTransform53._10 + _this__1297 * scaleTransform53._11 + _this__2297 * scaleTransform53._12,_this__0297 * scaleTransform53._20 + _this__1297 * scaleTransform53._21 + _this__2297 * scaleTransform53._22);
			} else {
				var wid76 = Main.wid;
				var hi76 = Main.hi;
				var scaleTransform56 = Main.scaleTransform;
				var _this__0098 = 1;
				var _this__1098 = 0;
				var _this__2098 = border;
				var _this__0198 = 0;
				var _this__1198 = 1;
				var _this__2198 = hi76 / 2 - sv_y24 / 2;
				var _this__0298 = 0;
				var _this__1298 = 0;
				var _this__2298 = 1;
				a2 = new kha_math_FastMatrix3(_this__0098 * scaleTransform56._00 + _this__1098 * scaleTransform56._01 + _this__2098 * scaleTransform56._02,_this__0098 * scaleTransform56._10 + _this__1098 * scaleTransform56._11 + _this__2098 * scaleTransform56._12,_this__0098 * scaleTransform56._20 + _this__1098 * scaleTransform56._21 + _this__2098 * scaleTransform56._22,_this__0198 * scaleTransform56._00 + _this__1198 * scaleTransform56._01 + _this__2198 * scaleTransform56._02,_this__0198 * scaleTransform56._10 + _this__1198 * scaleTransform56._11 + _this__2198 * scaleTransform56._12,_this__0198 * scaleTransform56._20 + _this__1198 * scaleTransform56._21 + _this__2198 * scaleTransform56._22,_this__0298 * scaleTransform56._00 + _this__1298 * scaleTransform56._01 + _this__2298 * scaleTransform56._02,_this__0298 * scaleTransform56._10 + _this__1298 * scaleTransform56._11 + _this__2298 * scaleTransform56._12,_this__0298 * scaleTransform56._20 + _this__1298 * scaleTransform56._21 + _this__2298 * scaleTransform56._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y24 < hi68) {
				var _this__0099 = 1;
				var _this__1099 = 0;
				var _this__2099 = wid68 - sv_x24 - border;
				var _this__0199 = 0;
				var _this__1199 = 1;
				var _this__2199 = hi68 - sv_y24 - border;
				var _this__0299 = 0;
				var _this__1299 = 0;
				var _this__2299 = 1;
				a2 = new kha_math_FastMatrix3(_this__0099 * scaleTransform53._00 + _this__1099 * scaleTransform53._01 + _this__2099 * scaleTransform53._02,_this__0099 * scaleTransform53._10 + _this__1099 * scaleTransform53._11 + _this__2099 * scaleTransform53._12,_this__0099 * scaleTransform53._20 + _this__1099 * scaleTransform53._21 + _this__2099 * scaleTransform53._22,_this__0199 * scaleTransform53._00 + _this__1199 * scaleTransform53._01 + _this__2199 * scaleTransform53._02,_this__0199 * scaleTransform53._10 + _this__1199 * scaleTransform53._11 + _this__2199 * scaleTransform53._12,_this__0199 * scaleTransform53._20 + _this__1199 * scaleTransform53._21 + _this__2199 * scaleTransform53._22,_this__0299 * scaleTransform53._00 + _this__1299 * scaleTransform53._01 + _this__2299 * scaleTransform53._02,_this__0299 * scaleTransform53._10 + _this__1299 * scaleTransform53._11 + _this__2299 * scaleTransform53._12,_this__0299 * scaleTransform53._20 + _this__1299 * scaleTransform53._21 + _this__2299 * scaleTransform53._22);
			} else {
				var wid77 = Main.wid;
				var hi77 = Main.hi;
				var scaleTransform57 = Main.scaleTransform;
				var _this__00100 = 1;
				var _this__10100 = 0;
				var _this__20100 = wid77 - sv_x24 - border;
				var _this__01100 = 0;
				var _this__11100 = 1;
				var _this__21100 = hi77 / 2 - sv_y24 / 2;
				var _this__02100 = 0;
				var _this__12100 = 0;
				var _this__22100 = 1;
				a2 = new kha_math_FastMatrix3(_this__00100 * scaleTransform57._00 + _this__10100 * scaleTransform57._01 + _this__20100 * scaleTransform57._02,_this__00100 * scaleTransform57._10 + _this__10100 * scaleTransform57._11 + _this__20100 * scaleTransform57._12,_this__00100 * scaleTransform57._20 + _this__10100 * scaleTransform57._21 + _this__20100 * scaleTransform57._22,_this__01100 * scaleTransform57._00 + _this__11100 * scaleTransform57._01 + _this__21100 * scaleTransform57._02,_this__01100 * scaleTransform57._10 + _this__11100 * scaleTransform57._11 + _this__21100 * scaleTransform57._12,_this__01100 * scaleTransform57._20 + _this__11100 * scaleTransform57._21 + _this__21100 * scaleTransform57._22,_this__02100 * scaleTransform57._00 + _this__12100 * scaleTransform57._01 + _this__22100 * scaleTransform57._02,_this__02100 * scaleTransform57._10 + _this__12100 * scaleTransform57._11 + _this__22100 * scaleTransform57._12,_this__02100 * scaleTransform57._20 + _this__12100 * scaleTransform57._21 + _this__22100 * scaleTransform57._22);
			}
			break;
		case 18:
			var wid78 = Main.wid;
			var hi78 = Main.hi;
			var scaleTransform58 = Main.scaleTransform;
			var _this__00101 = 1;
			var _this__10101 = 0;
			var _this__20101 = wid78 / 2 - sv_x24 / 2;
			var _this__01101 = 0;
			var _this__11101 = 1;
			var _this__21101 = hi78 / 2 - sv_y24 / 2;
			var _this__02101 = 0;
			var _this__12101 = 0;
			var _this__22101 = 1;
			a2 = new kha_math_FastMatrix3(_this__00101 * scaleTransform58._00 + _this__10101 * scaleTransform58._01 + _this__20101 * scaleTransform58._02,_this__00101 * scaleTransform58._10 + _this__10101 * scaleTransform58._11 + _this__20101 * scaleTransform58._12,_this__00101 * scaleTransform58._20 + _this__10101 * scaleTransform58._21 + _this__20101 * scaleTransform58._22,_this__01101 * scaleTransform58._00 + _this__11101 * scaleTransform58._01 + _this__21101 * scaleTransform58._02,_this__01101 * scaleTransform58._10 + _this__11101 * scaleTransform58._11 + _this__21101 * scaleTransform58._12,_this__01101 * scaleTransform58._20 + _this__11101 * scaleTransform58._21 + _this__21101 * scaleTransform58._22,_this__02101 * scaleTransform58._00 + _this__12101 * scaleTransform58._01 + _this__22101 * scaleTransform58._02,_this__02101 * scaleTransform58._10 + _this__12101 * scaleTransform58._11 + _this__22101 * scaleTransform58._12,_this__02101 * scaleTransform58._20 + _this__12101 * scaleTransform58._21 + _this__22101 * scaleTransform58._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x24 < wid68) {
				var wid79 = Main.wid;
				var hi79 = Main.hi;
				var scaleTransform59 = Main.scaleTransform;
				var _this__00102 = 1;
				var _this__10102 = 0;
				var _this__20102 = border;
				var _this__01102 = 0;
				var _this__11102 = 1;
				var _this__21102 = hi79 / 2 - sv_y24 / 2;
				var _this__02102 = 0;
				var _this__12102 = 0;
				var _this__22102 = 1;
				a2 = new kha_math_FastMatrix3(_this__00102 * scaleTransform59._00 + _this__10102 * scaleTransform59._01 + _this__20102 * scaleTransform59._02,_this__00102 * scaleTransform59._10 + _this__10102 * scaleTransform59._11 + _this__20102 * scaleTransform59._12,_this__00102 * scaleTransform59._20 + _this__10102 * scaleTransform59._21 + _this__20102 * scaleTransform59._22,_this__01102 * scaleTransform59._00 + _this__11102 * scaleTransform59._01 + _this__21102 * scaleTransform59._02,_this__01102 * scaleTransform59._10 + _this__11102 * scaleTransform59._11 + _this__21102 * scaleTransform59._12,_this__01102 * scaleTransform59._20 + _this__11102 * scaleTransform59._21 + _this__21102 * scaleTransform59._22,_this__02102 * scaleTransform59._00 + _this__12102 * scaleTransform59._01 + _this__22102 * scaleTransform59._02,_this__02102 * scaleTransform59._10 + _this__12102 * scaleTransform59._11 + _this__22102 * scaleTransform59._12,_this__02102 * scaleTransform59._20 + _this__12102 * scaleTransform59._21 + _this__22102 * scaleTransform59._22);
			} else {
				var wid80 = Main.wid;
				var hi80 = Main.hi;
				var scaleTransform60 = Main.scaleTransform;
				var _this__00103 = 1;
				var _this__10103 = 0;
				var _this__20103 = wid80 / 2 - sv_x24 / 2;
				var _this__01103 = 0;
				var _this__11103 = 1;
				var _this__21103 = hi80 / 2 - sv_y24 / 2;
				var _this__02103 = 0;
				var _this__12103 = 0;
				var _this__22103 = 1;
				a2 = new kha_math_FastMatrix3(_this__00103 * scaleTransform60._00 + _this__10103 * scaleTransform60._01 + _this__20103 * scaleTransform60._02,_this__00103 * scaleTransform60._10 + _this__10103 * scaleTransform60._11 + _this__20103 * scaleTransform60._12,_this__00103 * scaleTransform60._20 + _this__10103 * scaleTransform60._21 + _this__20103 * scaleTransform60._22,_this__01103 * scaleTransform60._00 + _this__11103 * scaleTransform60._01 + _this__21103 * scaleTransform60._02,_this__01103 * scaleTransform60._10 + _this__11103 * scaleTransform60._11 + _this__21103 * scaleTransform60._12,_this__01103 * scaleTransform60._20 + _this__11103 * scaleTransform60._21 + _this__21103 * scaleTransform60._22,_this__02103 * scaleTransform60._00 + _this__12103 * scaleTransform60._01 + _this__22103 * scaleTransform60._02,_this__02103 * scaleTransform60._10 + _this__12103 * scaleTransform60._11 + _this__22103 * scaleTransform60._12,_this__02103 * scaleTransform60._20 + _this__12103 * scaleTransform60._21 + _this__22103 * scaleTransform60._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x24 < wid68) {
				var wid81 = Main.wid;
				var hi81 = Main.hi;
				var scaleTransform61 = Main.scaleTransform;
				var _this__00104 = 1;
				var _this__10104 = 0;
				var _this__20104 = wid81 - sv_x24 - border;
				var _this__01104 = 0;
				var _this__11104 = 1;
				var _this__21104 = hi81 / 2 - sv_y24 / 2;
				var _this__02104 = 0;
				var _this__12104 = 0;
				var _this__22104 = 1;
				a2 = new kha_math_FastMatrix3(_this__00104 * scaleTransform61._00 + _this__10104 * scaleTransform61._01 + _this__20104 * scaleTransform61._02,_this__00104 * scaleTransform61._10 + _this__10104 * scaleTransform61._11 + _this__20104 * scaleTransform61._12,_this__00104 * scaleTransform61._20 + _this__10104 * scaleTransform61._21 + _this__20104 * scaleTransform61._22,_this__01104 * scaleTransform61._00 + _this__11104 * scaleTransform61._01 + _this__21104 * scaleTransform61._02,_this__01104 * scaleTransform61._10 + _this__11104 * scaleTransform61._11 + _this__21104 * scaleTransform61._12,_this__01104 * scaleTransform61._20 + _this__11104 * scaleTransform61._21 + _this__21104 * scaleTransform61._22,_this__02104 * scaleTransform61._00 + _this__12104 * scaleTransform61._01 + _this__22104 * scaleTransform61._02,_this__02104 * scaleTransform61._10 + _this__12104 * scaleTransform61._11 + _this__22104 * scaleTransform61._12,_this__02104 * scaleTransform61._20 + _this__12104 * scaleTransform61._21 + _this__22104 * scaleTransform61._22);
			} else {
				var wid82 = Main.wid;
				var hi82 = Main.hi;
				var scaleTransform62 = Main.scaleTransform;
				var _this__00105 = 1;
				var _this__10105 = 0;
				var _this__20105 = wid82 / 2 - sv_x24 / 2;
				var _this__01105 = 0;
				var _this__11105 = 1;
				var _this__21105 = hi82 / 2 - sv_y24 / 2;
				var _this__02105 = 0;
				var _this__12105 = 0;
				var _this__22105 = 1;
				a2 = new kha_math_FastMatrix3(_this__00105 * scaleTransform62._00 + _this__10105 * scaleTransform62._01 + _this__20105 * scaleTransform62._02,_this__00105 * scaleTransform62._10 + _this__10105 * scaleTransform62._11 + _this__20105 * scaleTransform62._12,_this__00105 * scaleTransform62._20 + _this__10105 * scaleTransform62._21 + _this__20105 * scaleTransform62._22,_this__01105 * scaleTransform62._00 + _this__11105 * scaleTransform62._01 + _this__21105 * scaleTransform62._02,_this__01105 * scaleTransform62._10 + _this__11105 * scaleTransform62._11 + _this__21105 * scaleTransform62._12,_this__01105 * scaleTransform62._20 + _this__11105 * scaleTransform62._21 + _this__21105 * scaleTransform62._22,_this__02105 * scaleTransform62._00 + _this__12105 * scaleTransform62._01 + _this__22105 * scaleTransform62._02,_this__02105 * scaleTransform62._10 + _this__12105 * scaleTransform62._11 + _this__22105 * scaleTransform62._12,_this__02105 * scaleTransform62._20 + _this__12105 * scaleTransform62._21 + _this__22105 * scaleTransform62._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y24 < hi68) {
				var _this__00106 = 1;
				var _this__10106 = 0;
				var _this__20106 = wid68 / 2 - sv_x24 / 2;
				var _this__01106 = 0;
				var _this__11106 = 1;
				var _this__21106 = hi68 - sv_y24 - border;
				var _this__02106 = 0;
				var _this__12106 = 0;
				var _this__22106 = 1;
				a2 = new kha_math_FastMatrix3(_this__00106 * scaleTransform53._00 + _this__10106 * scaleTransform53._01 + _this__20106 * scaleTransform53._02,_this__00106 * scaleTransform53._10 + _this__10106 * scaleTransform53._11 + _this__20106 * scaleTransform53._12,_this__00106 * scaleTransform53._20 + _this__10106 * scaleTransform53._21 + _this__20106 * scaleTransform53._22,_this__01106 * scaleTransform53._00 + _this__11106 * scaleTransform53._01 + _this__21106 * scaleTransform53._02,_this__01106 * scaleTransform53._10 + _this__11106 * scaleTransform53._11 + _this__21106 * scaleTransform53._12,_this__01106 * scaleTransform53._20 + _this__11106 * scaleTransform53._21 + _this__21106 * scaleTransform53._22,_this__02106 * scaleTransform53._00 + _this__12106 * scaleTransform53._01 + _this__22106 * scaleTransform53._02,_this__02106 * scaleTransform53._10 + _this__12106 * scaleTransform53._11 + _this__22106 * scaleTransform53._12,_this__02106 * scaleTransform53._20 + _this__12106 * scaleTransform53._21 + _this__22106 * scaleTransform53._22);
			} else {
				var wid83 = Main.wid;
				var hi83 = Main.hi;
				var scaleTransform63 = Main.scaleTransform;
				var _this__00107 = 1;
				var _this__10107 = 0;
				var _this__20107 = wid83 / 2 - sv_x24 / 2;
				var _this__01107 = 0;
				var _this__11107 = 1;
				var _this__21107 = hi83 / 2 - sv_y24 / 2;
				var _this__02107 = 0;
				var _this__12107 = 0;
				var _this__22107 = 1;
				a2 = new kha_math_FastMatrix3(_this__00107 * scaleTransform63._00 + _this__10107 * scaleTransform63._01 + _this__20107 * scaleTransform63._02,_this__00107 * scaleTransform63._10 + _this__10107 * scaleTransform63._11 + _this__20107 * scaleTransform63._12,_this__00107 * scaleTransform63._20 + _this__10107 * scaleTransform63._21 + _this__20107 * scaleTransform63._22,_this__01107 * scaleTransform63._00 + _this__11107 * scaleTransform63._01 + _this__21107 * scaleTransform63._02,_this__01107 * scaleTransform63._10 + _this__11107 * scaleTransform63._11 + _this__21107 * scaleTransform63._12,_this__01107 * scaleTransform63._20 + _this__11107 * scaleTransform63._21 + _this__21107 * scaleTransform63._22,_this__02107 * scaleTransform63._00 + _this__12107 * scaleTransform63._01 + _this__22107 * scaleTransform63._02,_this__02107 * scaleTransform63._10 + _this__12107 * scaleTransform63._11 + _this__22107 * scaleTransform63._12,_this__02107 * scaleTransform63._20 + _this__12107 * scaleTransform63._21 + _this__22107 * scaleTransform63._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y24 < hi68) {
				var _this__00108 = 1;
				var _this__10108 = 0;
				var _this__20108 = wid68 / 2 - sv_x24 / 2;
				var _this__01108 = 0;
				var _this__11108 = 1;
				var _this__21108 = border;
				var _this__02108 = 0;
				var _this__12108 = 0;
				var _this__22108 = 1;
				a2 = new kha_math_FastMatrix3(_this__00108 * scaleTransform53._00 + _this__10108 * scaleTransform53._01 + _this__20108 * scaleTransform53._02,_this__00108 * scaleTransform53._10 + _this__10108 * scaleTransform53._11 + _this__20108 * scaleTransform53._12,_this__00108 * scaleTransform53._20 + _this__10108 * scaleTransform53._21 + _this__20108 * scaleTransform53._22,_this__01108 * scaleTransform53._00 + _this__11108 * scaleTransform53._01 + _this__21108 * scaleTransform53._02,_this__01108 * scaleTransform53._10 + _this__11108 * scaleTransform53._11 + _this__21108 * scaleTransform53._12,_this__01108 * scaleTransform53._20 + _this__11108 * scaleTransform53._21 + _this__21108 * scaleTransform53._22,_this__02108 * scaleTransform53._00 + _this__12108 * scaleTransform53._01 + _this__22108 * scaleTransform53._02,_this__02108 * scaleTransform53._10 + _this__12108 * scaleTransform53._11 + _this__22108 * scaleTransform53._12,_this__02108 * scaleTransform53._20 + _this__12108 * scaleTransform53._21 + _this__22108 * scaleTransform53._22);
			} else {
				var wid84 = Main.wid;
				var hi84 = Main.hi;
				var scaleTransform64 = Main.scaleTransform;
				var _this__00109 = 1;
				var _this__10109 = 0;
				var _this__20109 = wid84 / 2 - sv_x24 / 2;
				var _this__01109 = 0;
				var _this__11109 = 1;
				var _this__21109 = hi84 / 2 - sv_y24 / 2;
				var _this__02109 = 0;
				var _this__12109 = 0;
				var _this__22109 = 1;
				a2 = new kha_math_FastMatrix3(_this__00109 * scaleTransform64._00 + _this__10109 * scaleTransform64._01 + _this__20109 * scaleTransform64._02,_this__00109 * scaleTransform64._10 + _this__10109 * scaleTransform64._11 + _this__20109 * scaleTransform64._12,_this__00109 * scaleTransform64._20 + _this__10109 * scaleTransform64._21 + _this__20109 * scaleTransform64._22,_this__01109 * scaleTransform64._00 + _this__11109 * scaleTransform64._01 + _this__21109 * scaleTransform64._02,_this__01109 * scaleTransform64._10 + _this__11109 * scaleTransform64._11 + _this__21109 * scaleTransform64._12,_this__01109 * scaleTransform64._20 + _this__11109 * scaleTransform64._21 + _this__21109 * scaleTransform64._22,_this__02109 * scaleTransform64._00 + _this__12109 * scaleTransform64._01 + _this__22109 * scaleTransform64._02,_this__02109 * scaleTransform64._10 + _this__12109 * scaleTransform64._11 + _this__22109 * scaleTransform64._12,_this__02109 * scaleTransform64._20 + _this__12109 * scaleTransform64._21 + _this__22109 * scaleTransform64._22);
			}
			break;
		}
		var scaleTransform65 = Main.scaleTransform;
		var v_x5 = w;
		var v_y5 = h;
		var w41 = scaleTransform65._02 * v_x5 + scaleTransform65._12 * v_y5 + scaleTransform65._22;
		var x30 = (scaleTransform65._00 * v_x5 + scaleTransform65._10 * v_y5 + scaleTransform65._20) / w41;
		var y30 = (scaleTransform65._01 * v_x5 + scaleTransform65._11 * v_y5 + scaleTransform65._21) / w41;
		var sv_x30 = x30;
		var sv_y30 = y30;
		var wid85 = Main.wid;
		var hi85 = Main.hi;
		var scaleTransform66 = Main.scaleTransform;
		var b2;
		switch(simpleText_Alignment.Right._hx_index) {
		case 2:case 7:
			var wid86 = Main.wid;
			var hi86 = Main.hi;
			var w225 = wid86 - border * 2;
			var h225 = hi86 - border * 2;
			var dw25 = w225 - w;
			var dh25 = h225 - h;
			var scale25 = dw25 < dh25 ? w225 / w : h225 / h;
			if(scale25 < 0) {
				scale25 = 0.;
			}
			var scaleTransform__0025 = scale25;
			var scaleTransform__1025 = 0;
			var scaleTransform__2025 = 0;
			var scaleTransform__0125 = 0;
			var scaleTransform__1125 = scale25;
			var scaleTransform__2125 = 0;
			var scaleTransform__0225 = 0;
			var scaleTransform__1225 = 0;
			var scaleTransform__2225 = 1;
			var value_x25 = w;
			var value_y25 = h;
			var w42 = scaleTransform__0225 * value_x25 + scaleTransform__1225 * value_y25 + scaleTransform__2225;
			var x31 = (scaleTransform__0025 * value_x25 + scaleTransform__1025 * value_y25 + scaleTransform__2025) / w42;
			var y31 = (scaleTransform__0125 * value_x25 + scaleTransform__1125 * value_y25 + scaleTransform__2125) / w42;
			var sv_x31 = x31;
			var sv_y31 = y31;
			var _this__00110 = 1;
			var _this__10110 = 0;
			var _this__20110 = wid86 - sv_x31 - border;
			var _this__01110 = 0;
			var _this__11110 = 1;
			var _this__21110 = hi86 / 2 - sv_y31 / 2;
			var _this__02110 = 0;
			var _this__12110 = 0;
			var _this__22110 = 1;
			b2 = new kha_math_FastMatrix3(_this__00110 * scaleTransform__0025 + _this__10110 * scaleTransform__0125 + _this__20110 * scaleTransform__0225,_this__00110 * scaleTransform__1025 + _this__10110 * scaleTransform__1125 + _this__20110 * scaleTransform__1225,_this__00110 * scaleTransform__2025 + _this__10110 * scaleTransform__2125 + _this__20110 * scaleTransform__2225,_this__01110 * scaleTransform__0025 + _this__11110 * scaleTransform__0125 + _this__21110 * scaleTransform__0225,_this__01110 * scaleTransform__1025 + _this__11110 * scaleTransform__1125 + _this__21110 * scaleTransform__1225,_this__01110 * scaleTransform__2025 + _this__11110 * scaleTransform__2125 + _this__21110 * scaleTransform__2225,_this__02110 * scaleTransform__0025 + _this__12110 * scaleTransform__0125 + _this__22110 * scaleTransform__0225,_this__02110 * scaleTransform__1025 + _this__12110 * scaleTransform__1125 + _this__22110 * scaleTransform__1225,_this__02110 * scaleTransform__2025 + _this__12110 * scaleTransform__2125 + _this__22110 * scaleTransform__2225);
			break;
		case 0:case 5:
			var wid87 = Main.wid;
			var hi87 = Main.hi;
			var w226 = wid87 - border * 2;
			var h226 = hi87 - border * 2;
			var dw26 = w226 - w;
			var dh26 = h226 - h;
			var scale26 = dw26 < dh26 ? w226 / w : h226 / h;
			if(scale26 < 0) {
				scale26 = 0.;
			}
			var scaleTransform__0026 = scale26;
			var scaleTransform__1026 = 0;
			var scaleTransform__2026 = 0;
			var scaleTransform__0126 = 0;
			var scaleTransform__1126 = scale26;
			var scaleTransform__2126 = 0;
			var scaleTransform__0226 = 0;
			var scaleTransform__1226 = 0;
			var scaleTransform__2226 = 1;
			var value_x26 = w;
			var value_y26 = h;
			var w43 = scaleTransform__0226 * value_x26 + scaleTransform__1226 * value_y26 + scaleTransform__2226;
			var x32 = (scaleTransform__0026 * value_x26 + scaleTransform__1026 * value_y26 + scaleTransform__2026) / w43;
			var y32 = (scaleTransform__0126 * value_x26 + scaleTransform__1126 * value_y26 + scaleTransform__2126) / w43;
			var sv_x32 = x32;
			var sv_y32 = y32;
			var _this__00111 = 1;
			var _this__10111 = 0;
			var _this__20111 = wid87 / 2 - sv_x32 / 2;
			var _this__01111 = 0;
			var _this__11111 = 1;
			var _this__21111 = hi87 / 2 - sv_y32 / 2;
			var _this__02111 = 0;
			var _this__12111 = 0;
			var _this__22111 = 1;
			b2 = new kha_math_FastMatrix3(_this__00111 * scaleTransform__0026 + _this__10111 * scaleTransform__0126 + _this__20111 * scaleTransform__0226,_this__00111 * scaleTransform__1026 + _this__10111 * scaleTransform__1126 + _this__20111 * scaleTransform__1226,_this__00111 * scaleTransform__2026 + _this__10111 * scaleTransform__2126 + _this__20111 * scaleTransform__2226,_this__01111 * scaleTransform__0026 + _this__11111 * scaleTransform__0126 + _this__21111 * scaleTransform__0226,_this__01111 * scaleTransform__1026 + _this__11111 * scaleTransform__1126 + _this__21111 * scaleTransform__1226,_this__01111 * scaleTransform__2026 + _this__11111 * scaleTransform__2126 + _this__21111 * scaleTransform__2226,_this__02111 * scaleTransform__0026 + _this__12111 * scaleTransform__0126 + _this__22111 * scaleTransform__0226,_this__02111 * scaleTransform__1026 + _this__12111 * scaleTransform__1126 + _this__22111 * scaleTransform__1226,_this__02111 * scaleTransform__2026 + _this__12111 * scaleTransform__2126 + _this__22111 * scaleTransform__2226);
			break;
		case 1:case 6:
			var wid88 = Main.wid;
			var hi88 = Main.hi;
			var w227 = wid88 - border * 2;
			var h227 = hi88 - border * 2;
			var dw27 = w227 - w;
			var dh27 = h227 - h;
			var scale27 = dw27 < dh27 ? w227 / w : h227 / h;
			if(scale27 < 0) {
				scale27 = 0.;
			}
			var scaleTransform__0027 = scale27;
			var scaleTransform__1027 = 0;
			var scaleTransform__2027 = 0;
			var scaleTransform__0127 = 0;
			var scaleTransform__1127 = scale27;
			var scaleTransform__2127 = 0;
			var scaleTransform__0227 = 0;
			var scaleTransform__1227 = 0;
			var scaleTransform__2227 = 1;
			var value_x27 = w;
			var value_y27 = h;
			var w44 = scaleTransform__0227 * value_x27 + scaleTransform__1227 * value_y27 + scaleTransform__2227;
			var x33 = (scaleTransform__0027 * value_x27 + scaleTransform__1027 * value_y27 + scaleTransform__2027) / w44;
			var y33 = (scaleTransform__0127 * value_x27 + scaleTransform__1127 * value_y27 + scaleTransform__2127) / w44;
			var sv_x33 = x33;
			var sv_y33 = y33;
			var _this__00112 = 1;
			var _this__10112 = 0;
			var _this__20112 = border;
			var _this__01112 = 0;
			var _this__11112 = 1;
			var _this__21112 = hi88 / 2 - sv_y33 / 2;
			var _this__02112 = 0;
			var _this__12112 = 0;
			var _this__22112 = 1;
			b2 = new kha_math_FastMatrix3(_this__00112 * scaleTransform__0027 + _this__10112 * scaleTransform__0127 + _this__20112 * scaleTransform__0227,_this__00112 * scaleTransform__1027 + _this__10112 * scaleTransform__1127 + _this__20112 * scaleTransform__1227,_this__00112 * scaleTransform__2027 + _this__10112 * scaleTransform__2127 + _this__20112 * scaleTransform__2227,_this__01112 * scaleTransform__0027 + _this__11112 * scaleTransform__0127 + _this__21112 * scaleTransform__0227,_this__01112 * scaleTransform__1027 + _this__11112 * scaleTransform__1127 + _this__21112 * scaleTransform__1227,_this__01112 * scaleTransform__2027 + _this__11112 * scaleTransform__2127 + _this__21112 * scaleTransform__2227,_this__02112 * scaleTransform__0027 + _this__12112 * scaleTransform__0127 + _this__22112 * scaleTransform__0227,_this__02112 * scaleTransform__1027 + _this__12112 * scaleTransform__1127 + _this__22112 * scaleTransform__1227,_this__02112 * scaleTransform__2027 + _this__12112 * scaleTransform__2127 + _this__22112 * scaleTransform__2227);
			break;
		case 3:case 8:
			var wid89 = Main.wid;
			var hi89 = Main.hi;
			var w228 = wid89 - border * 2;
			var h228 = hi89 - border * 2;
			var dw28 = w228 - w;
			var dh28 = h228 - h;
			var scale28 = dw28 < dh28 ? w228 / w : h228 / h;
			if(scale28 < 0) {
				scale28 = 0.;
			}
			var scaleTransform__0028 = scale28;
			var scaleTransform__1028 = 0;
			var scaleTransform__2028 = 0;
			var scaleTransform__0128 = 0;
			var scaleTransform__1128 = scale28;
			var scaleTransform__2128 = 0;
			var scaleTransform__0228 = 0;
			var scaleTransform__1228 = 0;
			var scaleTransform__2228 = 1;
			var value_x28 = w;
			var value_y28 = h;
			var w45 = scaleTransform__0228 * value_x28 + scaleTransform__1228 * value_y28 + scaleTransform__2228;
			var x34 = (scaleTransform__0028 * value_x28 + scaleTransform__1028 * value_y28 + scaleTransform__2028) / w45;
			var y34 = (scaleTransform__0128 * value_x28 + scaleTransform__1128 * value_y28 + scaleTransform__2128) / w45;
			var sv_x34 = x34;
			var sv_y34 = y34;
			var _this__00113 = 1;
			var _this__10113 = 0;
			var _this__20113 = wid89 / 2 - sv_x34 / 2;
			var _this__01113 = 0;
			var _this__11113 = 1;
			var _this__21113 = border;
			var _this__02113 = 0;
			var _this__12113 = 0;
			var _this__22113 = 1;
			b2 = new kha_math_FastMatrix3(_this__00113 * scaleTransform__0028 + _this__10113 * scaleTransform__0128 + _this__20113 * scaleTransform__0228,_this__00113 * scaleTransform__1028 + _this__10113 * scaleTransform__1128 + _this__20113 * scaleTransform__1228,_this__00113 * scaleTransform__2028 + _this__10113 * scaleTransform__2128 + _this__20113 * scaleTransform__2228,_this__01113 * scaleTransform__0028 + _this__11113 * scaleTransform__0128 + _this__21113 * scaleTransform__0228,_this__01113 * scaleTransform__1028 + _this__11113 * scaleTransform__1128 + _this__21113 * scaleTransform__1228,_this__01113 * scaleTransform__2028 + _this__11113 * scaleTransform__2128 + _this__21113 * scaleTransform__2228,_this__02113 * scaleTransform__0028 + _this__12113 * scaleTransform__0128 + _this__22113 * scaleTransform__0228,_this__02113 * scaleTransform__1028 + _this__12113 * scaleTransform__1128 + _this__22113 * scaleTransform__1228,_this__02113 * scaleTransform__2028 + _this__12113 * scaleTransform__2128 + _this__22113 * scaleTransform__2228);
			break;
		case 4:case 9:
			var wid90 = Main.wid;
			var hi90 = Main.hi;
			var w229 = wid90 - border * 2;
			var h229 = hi90 - border * 2;
			var dw29 = w229 - w;
			var dh29 = h229 - h;
			var scale29 = dw29 < dh29 ? w229 / w : h229 / h;
			if(scale29 < 0) {
				scale29 = 0.;
			}
			var scaleTransform__0029 = scale29;
			var scaleTransform__1029 = 0;
			var scaleTransform__2029 = 0;
			var scaleTransform__0129 = 0;
			var scaleTransform__1129 = scale29;
			var scaleTransform__2129 = 0;
			var scaleTransform__0229 = 0;
			var scaleTransform__1229 = 0;
			var scaleTransform__2229 = 1;
			var value_x29 = w;
			var value_y29 = h;
			var w46 = scaleTransform__0229 * value_x29 + scaleTransform__1229 * value_y29 + scaleTransform__2229;
			var x35 = (scaleTransform__0029 * value_x29 + scaleTransform__1029 * value_y29 + scaleTransform__2029) / w46;
			var y35 = (scaleTransform__0129 * value_x29 + scaleTransform__1129 * value_y29 + scaleTransform__2129) / w46;
			var sv_x35 = x35;
			var sv_y35 = y35;
			var _this__00114 = 1;
			var _this__10114 = 0;
			var _this__20114 = wid90 / 2 - sv_x35 / 2;
			var _this__01114 = 0;
			var _this__11114 = 1;
			var _this__21114 = hi90 - sv_y35 - border;
			var _this__02114 = 0;
			var _this__12114 = 0;
			var _this__22114 = 1;
			b2 = new kha_math_FastMatrix3(_this__00114 * scaleTransform__0029 + _this__10114 * scaleTransform__0129 + _this__20114 * scaleTransform__0229,_this__00114 * scaleTransform__1029 + _this__10114 * scaleTransform__1129 + _this__20114 * scaleTransform__1229,_this__00114 * scaleTransform__2029 + _this__10114 * scaleTransform__2129 + _this__20114 * scaleTransform__2229,_this__01114 * scaleTransform__0029 + _this__11114 * scaleTransform__0129 + _this__21114 * scaleTransform__0229,_this__01114 * scaleTransform__1029 + _this__11114 * scaleTransform__1129 + _this__21114 * scaleTransform__1229,_this__01114 * scaleTransform__2029 + _this__11114 * scaleTransform__2129 + _this__21114 * scaleTransform__2229,_this__02114 * scaleTransform__0029 + _this__12114 * scaleTransform__0129 + _this__22114 * scaleTransform__0229,_this__02114 * scaleTransform__1029 + _this__12114 * scaleTransform__1129 + _this__22114 * scaleTransform__1229,_this__02114 * scaleTransform__2029 + _this__12114 * scaleTransform__2129 + _this__22114 * scaleTransform__2229);
			break;
		case 10:case 11:
			if(border * 2 + sv_x30 < wid85) {
				var _this__00115 = 1;
				var _this__10115 = 0;
				var _this__20115 = border;
				var _this__01115 = 0;
				var _this__11115 = 1;
				var _this__21115 = border;
				var _this__02115 = 0;
				var _this__12115 = 0;
				var _this__22115 = 1;
				b2 = new kha_math_FastMatrix3(_this__00115 * scaleTransform66._00 + _this__10115 * scaleTransform66._01 + _this__20115 * scaleTransform66._02,_this__00115 * scaleTransform66._10 + _this__10115 * scaleTransform66._11 + _this__20115 * scaleTransform66._12,_this__00115 * scaleTransform66._20 + _this__10115 * scaleTransform66._21 + _this__20115 * scaleTransform66._22,_this__01115 * scaleTransform66._00 + _this__11115 * scaleTransform66._01 + _this__21115 * scaleTransform66._02,_this__01115 * scaleTransform66._10 + _this__11115 * scaleTransform66._11 + _this__21115 * scaleTransform66._12,_this__01115 * scaleTransform66._20 + _this__11115 * scaleTransform66._21 + _this__21115 * scaleTransform66._22,_this__02115 * scaleTransform66._00 + _this__12115 * scaleTransform66._01 + _this__22115 * scaleTransform66._02,_this__02115 * scaleTransform66._10 + _this__12115 * scaleTransform66._11 + _this__22115 * scaleTransform66._12,_this__02115 * scaleTransform66._20 + _this__12115 * scaleTransform66._21 + _this__22115 * scaleTransform66._22);
			} else {
				var wid91 = Main.wid;
				var hi91 = Main.hi;
				var scaleTransform67 = Main.scaleTransform;
				var _this__00116 = 1;
				var _this__10116 = 0;
				var _this__20116 = border;
				var _this__01116 = 0;
				var _this__11116 = 1;
				var _this__21116 = hi91 / 2 - sv_y30 / 2;
				var _this__02116 = 0;
				var _this__12116 = 0;
				var _this__22116 = 1;
				b2 = new kha_math_FastMatrix3(_this__00116 * scaleTransform67._00 + _this__10116 * scaleTransform67._01 + _this__20116 * scaleTransform67._02,_this__00116 * scaleTransform67._10 + _this__10116 * scaleTransform67._11 + _this__20116 * scaleTransform67._12,_this__00116 * scaleTransform67._20 + _this__10116 * scaleTransform67._21 + _this__20116 * scaleTransform67._22,_this__01116 * scaleTransform67._00 + _this__11116 * scaleTransform67._01 + _this__21116 * scaleTransform67._02,_this__01116 * scaleTransform67._10 + _this__11116 * scaleTransform67._11 + _this__21116 * scaleTransform67._12,_this__01116 * scaleTransform67._20 + _this__11116 * scaleTransform67._21 + _this__21116 * scaleTransform67._22,_this__02116 * scaleTransform67._00 + _this__12116 * scaleTransform67._01 + _this__22116 * scaleTransform67._02,_this__02116 * scaleTransform67._10 + _this__12116 * scaleTransform67._11 + _this__22116 * scaleTransform67._12,_this__02116 * scaleTransform67._20 + _this__12116 * scaleTransform67._21 + _this__22116 * scaleTransform67._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x30 < wid85) {
				var _this__00117 = 1;
				var _this__10117 = 0;
				var _this__20117 = wid85 - sv_x30 - border;
				var _this__01117 = 0;
				var _this__11117 = 1;
				var _this__21117 = border;
				var _this__02117 = 0;
				var _this__12117 = 0;
				var _this__22117 = 1;
				b2 = new kha_math_FastMatrix3(_this__00117 * scaleTransform66._00 + _this__10117 * scaleTransform66._01 + _this__20117 * scaleTransform66._02,_this__00117 * scaleTransform66._10 + _this__10117 * scaleTransform66._11 + _this__20117 * scaleTransform66._12,_this__00117 * scaleTransform66._20 + _this__10117 * scaleTransform66._21 + _this__20117 * scaleTransform66._22,_this__01117 * scaleTransform66._00 + _this__11117 * scaleTransform66._01 + _this__21117 * scaleTransform66._02,_this__01117 * scaleTransform66._10 + _this__11117 * scaleTransform66._11 + _this__21117 * scaleTransform66._12,_this__01117 * scaleTransform66._20 + _this__11117 * scaleTransform66._21 + _this__21117 * scaleTransform66._22,_this__02117 * scaleTransform66._00 + _this__12117 * scaleTransform66._01 + _this__22117 * scaleTransform66._02,_this__02117 * scaleTransform66._10 + _this__12117 * scaleTransform66._11 + _this__22117 * scaleTransform66._12,_this__02117 * scaleTransform66._20 + _this__12117 * scaleTransform66._21 + _this__22117 * scaleTransform66._22);
			} else {
				var wid92 = Main.wid;
				var hi92 = Main.hi;
				var scaleTransform68 = Main.scaleTransform;
				var _this__00118 = 1;
				var _this__10118 = 0;
				var _this__20118 = wid92 - sv_x30 - border;
				var _this__01118 = 0;
				var _this__11118 = 1;
				var _this__21118 = hi92 / 2 - sv_y30 / 2;
				var _this__02118 = 0;
				var _this__12118 = 0;
				var _this__22118 = 1;
				b2 = new kha_math_FastMatrix3(_this__00118 * scaleTransform68._00 + _this__10118 * scaleTransform68._01 + _this__20118 * scaleTransform68._02,_this__00118 * scaleTransform68._10 + _this__10118 * scaleTransform68._11 + _this__20118 * scaleTransform68._12,_this__00118 * scaleTransform68._20 + _this__10118 * scaleTransform68._21 + _this__20118 * scaleTransform68._22,_this__01118 * scaleTransform68._00 + _this__11118 * scaleTransform68._01 + _this__21118 * scaleTransform68._02,_this__01118 * scaleTransform68._10 + _this__11118 * scaleTransform68._11 + _this__21118 * scaleTransform68._12,_this__01118 * scaleTransform68._20 + _this__11118 * scaleTransform68._21 + _this__21118 * scaleTransform68._22,_this__02118 * scaleTransform68._00 + _this__12118 * scaleTransform68._01 + _this__22118 * scaleTransform68._02,_this__02118 * scaleTransform68._10 + _this__12118 * scaleTransform68._11 + _this__22118 * scaleTransform68._12,_this__02118 * scaleTransform68._20 + _this__12118 * scaleTransform68._21 + _this__22118 * scaleTransform68._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y30 < hi85) {
				var _this__00119 = 1;
				var _this__10119 = 0;
				var _this__20119 = border;
				var _this__01119 = 0;
				var _this__11119 = 1;
				var _this__21119 = hi85 - sv_y30 - border;
				var _this__02119 = 0;
				var _this__12119 = 0;
				var _this__22119 = 1;
				b2 = new kha_math_FastMatrix3(_this__00119 * scaleTransform66._00 + _this__10119 * scaleTransform66._01 + _this__20119 * scaleTransform66._02,_this__00119 * scaleTransform66._10 + _this__10119 * scaleTransform66._11 + _this__20119 * scaleTransform66._12,_this__00119 * scaleTransform66._20 + _this__10119 * scaleTransform66._21 + _this__20119 * scaleTransform66._22,_this__01119 * scaleTransform66._00 + _this__11119 * scaleTransform66._01 + _this__21119 * scaleTransform66._02,_this__01119 * scaleTransform66._10 + _this__11119 * scaleTransform66._11 + _this__21119 * scaleTransform66._12,_this__01119 * scaleTransform66._20 + _this__11119 * scaleTransform66._21 + _this__21119 * scaleTransform66._22,_this__02119 * scaleTransform66._00 + _this__12119 * scaleTransform66._01 + _this__22119 * scaleTransform66._02,_this__02119 * scaleTransform66._10 + _this__12119 * scaleTransform66._11 + _this__22119 * scaleTransform66._12,_this__02119 * scaleTransform66._20 + _this__12119 * scaleTransform66._21 + _this__22119 * scaleTransform66._22);
			} else {
				var wid93 = Main.wid;
				var hi93 = Main.hi;
				var scaleTransform69 = Main.scaleTransform;
				var _this__00120 = 1;
				var _this__10120 = 0;
				var _this__20120 = border;
				var _this__01120 = 0;
				var _this__11120 = 1;
				var _this__21120 = hi93 / 2 - sv_y30 / 2;
				var _this__02120 = 0;
				var _this__12120 = 0;
				var _this__22120 = 1;
				b2 = new kha_math_FastMatrix3(_this__00120 * scaleTransform69._00 + _this__10120 * scaleTransform69._01 + _this__20120 * scaleTransform69._02,_this__00120 * scaleTransform69._10 + _this__10120 * scaleTransform69._11 + _this__20120 * scaleTransform69._12,_this__00120 * scaleTransform69._20 + _this__10120 * scaleTransform69._21 + _this__20120 * scaleTransform69._22,_this__01120 * scaleTransform69._00 + _this__11120 * scaleTransform69._01 + _this__21120 * scaleTransform69._02,_this__01120 * scaleTransform69._10 + _this__11120 * scaleTransform69._11 + _this__21120 * scaleTransform69._12,_this__01120 * scaleTransform69._20 + _this__11120 * scaleTransform69._21 + _this__21120 * scaleTransform69._22,_this__02120 * scaleTransform69._00 + _this__12120 * scaleTransform69._01 + _this__22120 * scaleTransform69._02,_this__02120 * scaleTransform69._10 + _this__12120 * scaleTransform69._11 + _this__22120 * scaleTransform69._12,_this__02120 * scaleTransform69._20 + _this__12120 * scaleTransform69._21 + _this__22120 * scaleTransform69._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y30 < hi85) {
				var _this__00121 = 1;
				var _this__10121 = 0;
				var _this__20121 = wid85 - sv_x30 - border;
				var _this__01121 = 0;
				var _this__11121 = 1;
				var _this__21121 = hi85 - sv_y30 - border;
				var _this__02121 = 0;
				var _this__12121 = 0;
				var _this__22121 = 1;
				b2 = new kha_math_FastMatrix3(_this__00121 * scaleTransform66._00 + _this__10121 * scaleTransform66._01 + _this__20121 * scaleTransform66._02,_this__00121 * scaleTransform66._10 + _this__10121 * scaleTransform66._11 + _this__20121 * scaleTransform66._12,_this__00121 * scaleTransform66._20 + _this__10121 * scaleTransform66._21 + _this__20121 * scaleTransform66._22,_this__01121 * scaleTransform66._00 + _this__11121 * scaleTransform66._01 + _this__21121 * scaleTransform66._02,_this__01121 * scaleTransform66._10 + _this__11121 * scaleTransform66._11 + _this__21121 * scaleTransform66._12,_this__01121 * scaleTransform66._20 + _this__11121 * scaleTransform66._21 + _this__21121 * scaleTransform66._22,_this__02121 * scaleTransform66._00 + _this__12121 * scaleTransform66._01 + _this__22121 * scaleTransform66._02,_this__02121 * scaleTransform66._10 + _this__12121 * scaleTransform66._11 + _this__22121 * scaleTransform66._12,_this__02121 * scaleTransform66._20 + _this__12121 * scaleTransform66._21 + _this__22121 * scaleTransform66._22);
			} else {
				var wid94 = Main.wid;
				var hi94 = Main.hi;
				var scaleTransform70 = Main.scaleTransform;
				var _this__00122 = 1;
				var _this__10122 = 0;
				var _this__20122 = wid94 - sv_x30 - border;
				var _this__01122 = 0;
				var _this__11122 = 1;
				var _this__21122 = hi94 / 2 - sv_y30 / 2;
				var _this__02122 = 0;
				var _this__12122 = 0;
				var _this__22122 = 1;
				b2 = new kha_math_FastMatrix3(_this__00122 * scaleTransform70._00 + _this__10122 * scaleTransform70._01 + _this__20122 * scaleTransform70._02,_this__00122 * scaleTransform70._10 + _this__10122 * scaleTransform70._11 + _this__20122 * scaleTransform70._12,_this__00122 * scaleTransform70._20 + _this__10122 * scaleTransform70._21 + _this__20122 * scaleTransform70._22,_this__01122 * scaleTransform70._00 + _this__11122 * scaleTransform70._01 + _this__21122 * scaleTransform70._02,_this__01122 * scaleTransform70._10 + _this__11122 * scaleTransform70._11 + _this__21122 * scaleTransform70._12,_this__01122 * scaleTransform70._20 + _this__11122 * scaleTransform70._21 + _this__21122 * scaleTransform70._22,_this__02122 * scaleTransform70._00 + _this__12122 * scaleTransform70._01 + _this__22122 * scaleTransform70._02,_this__02122 * scaleTransform70._10 + _this__12122 * scaleTransform70._11 + _this__22122 * scaleTransform70._12,_this__02122 * scaleTransform70._20 + _this__12122 * scaleTransform70._21 + _this__22122 * scaleTransform70._22);
			}
			break;
		case 18:
			var wid95 = Main.wid;
			var hi95 = Main.hi;
			var scaleTransform71 = Main.scaleTransform;
			var _this__00123 = 1;
			var _this__10123 = 0;
			var _this__20123 = wid95 / 2 - sv_x30 / 2;
			var _this__01123 = 0;
			var _this__11123 = 1;
			var _this__21123 = hi95 / 2 - sv_y30 / 2;
			var _this__02123 = 0;
			var _this__12123 = 0;
			var _this__22123 = 1;
			b2 = new kha_math_FastMatrix3(_this__00123 * scaleTransform71._00 + _this__10123 * scaleTransform71._01 + _this__20123 * scaleTransform71._02,_this__00123 * scaleTransform71._10 + _this__10123 * scaleTransform71._11 + _this__20123 * scaleTransform71._12,_this__00123 * scaleTransform71._20 + _this__10123 * scaleTransform71._21 + _this__20123 * scaleTransform71._22,_this__01123 * scaleTransform71._00 + _this__11123 * scaleTransform71._01 + _this__21123 * scaleTransform71._02,_this__01123 * scaleTransform71._10 + _this__11123 * scaleTransform71._11 + _this__21123 * scaleTransform71._12,_this__01123 * scaleTransform71._20 + _this__11123 * scaleTransform71._21 + _this__21123 * scaleTransform71._22,_this__02123 * scaleTransform71._00 + _this__12123 * scaleTransform71._01 + _this__22123 * scaleTransform71._02,_this__02123 * scaleTransform71._10 + _this__12123 * scaleTransform71._11 + _this__22123 * scaleTransform71._12,_this__02123 * scaleTransform71._20 + _this__12123 * scaleTransform71._21 + _this__22123 * scaleTransform71._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x30 < wid85) {
				var wid96 = Main.wid;
				var hi96 = Main.hi;
				var scaleTransform72 = Main.scaleTransform;
				var _this__00124 = 1;
				var _this__10124 = 0;
				var _this__20124 = border;
				var _this__01124 = 0;
				var _this__11124 = 1;
				var _this__21124 = hi96 / 2 - sv_y30 / 2;
				var _this__02124 = 0;
				var _this__12124 = 0;
				var _this__22124 = 1;
				b2 = new kha_math_FastMatrix3(_this__00124 * scaleTransform72._00 + _this__10124 * scaleTransform72._01 + _this__20124 * scaleTransform72._02,_this__00124 * scaleTransform72._10 + _this__10124 * scaleTransform72._11 + _this__20124 * scaleTransform72._12,_this__00124 * scaleTransform72._20 + _this__10124 * scaleTransform72._21 + _this__20124 * scaleTransform72._22,_this__01124 * scaleTransform72._00 + _this__11124 * scaleTransform72._01 + _this__21124 * scaleTransform72._02,_this__01124 * scaleTransform72._10 + _this__11124 * scaleTransform72._11 + _this__21124 * scaleTransform72._12,_this__01124 * scaleTransform72._20 + _this__11124 * scaleTransform72._21 + _this__21124 * scaleTransform72._22,_this__02124 * scaleTransform72._00 + _this__12124 * scaleTransform72._01 + _this__22124 * scaleTransform72._02,_this__02124 * scaleTransform72._10 + _this__12124 * scaleTransform72._11 + _this__22124 * scaleTransform72._12,_this__02124 * scaleTransform72._20 + _this__12124 * scaleTransform72._21 + _this__22124 * scaleTransform72._22);
			} else {
				var wid97 = Main.wid;
				var hi97 = Main.hi;
				var scaleTransform73 = Main.scaleTransform;
				var _this__00125 = 1;
				var _this__10125 = 0;
				var _this__20125 = wid97 / 2 - sv_x30 / 2;
				var _this__01125 = 0;
				var _this__11125 = 1;
				var _this__21125 = hi97 / 2 - sv_y30 / 2;
				var _this__02125 = 0;
				var _this__12125 = 0;
				var _this__22125 = 1;
				b2 = new kha_math_FastMatrix3(_this__00125 * scaleTransform73._00 + _this__10125 * scaleTransform73._01 + _this__20125 * scaleTransform73._02,_this__00125 * scaleTransform73._10 + _this__10125 * scaleTransform73._11 + _this__20125 * scaleTransform73._12,_this__00125 * scaleTransform73._20 + _this__10125 * scaleTransform73._21 + _this__20125 * scaleTransform73._22,_this__01125 * scaleTransform73._00 + _this__11125 * scaleTransform73._01 + _this__21125 * scaleTransform73._02,_this__01125 * scaleTransform73._10 + _this__11125 * scaleTransform73._11 + _this__21125 * scaleTransform73._12,_this__01125 * scaleTransform73._20 + _this__11125 * scaleTransform73._21 + _this__21125 * scaleTransform73._22,_this__02125 * scaleTransform73._00 + _this__12125 * scaleTransform73._01 + _this__22125 * scaleTransform73._02,_this__02125 * scaleTransform73._10 + _this__12125 * scaleTransform73._11 + _this__22125 * scaleTransform73._12,_this__02125 * scaleTransform73._20 + _this__12125 * scaleTransform73._21 + _this__22125 * scaleTransform73._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x30 < wid85) {
				var wid98 = Main.wid;
				var hi98 = Main.hi;
				var scaleTransform74 = Main.scaleTransform;
				var _this__00126 = 1;
				var _this__10126 = 0;
				var _this__20126 = wid98 - sv_x30 - border;
				var _this__01126 = 0;
				var _this__11126 = 1;
				var _this__21126 = hi98 / 2 - sv_y30 / 2;
				var _this__02126 = 0;
				var _this__12126 = 0;
				var _this__22126 = 1;
				b2 = new kha_math_FastMatrix3(_this__00126 * scaleTransform74._00 + _this__10126 * scaleTransform74._01 + _this__20126 * scaleTransform74._02,_this__00126 * scaleTransform74._10 + _this__10126 * scaleTransform74._11 + _this__20126 * scaleTransform74._12,_this__00126 * scaleTransform74._20 + _this__10126 * scaleTransform74._21 + _this__20126 * scaleTransform74._22,_this__01126 * scaleTransform74._00 + _this__11126 * scaleTransform74._01 + _this__21126 * scaleTransform74._02,_this__01126 * scaleTransform74._10 + _this__11126 * scaleTransform74._11 + _this__21126 * scaleTransform74._12,_this__01126 * scaleTransform74._20 + _this__11126 * scaleTransform74._21 + _this__21126 * scaleTransform74._22,_this__02126 * scaleTransform74._00 + _this__12126 * scaleTransform74._01 + _this__22126 * scaleTransform74._02,_this__02126 * scaleTransform74._10 + _this__12126 * scaleTransform74._11 + _this__22126 * scaleTransform74._12,_this__02126 * scaleTransform74._20 + _this__12126 * scaleTransform74._21 + _this__22126 * scaleTransform74._22);
			} else {
				var wid99 = Main.wid;
				var hi99 = Main.hi;
				var scaleTransform75 = Main.scaleTransform;
				var _this__00127 = 1;
				var _this__10127 = 0;
				var _this__20127 = wid99 / 2 - sv_x30 / 2;
				var _this__01127 = 0;
				var _this__11127 = 1;
				var _this__21127 = hi99 / 2 - sv_y30 / 2;
				var _this__02127 = 0;
				var _this__12127 = 0;
				var _this__22127 = 1;
				b2 = new kha_math_FastMatrix3(_this__00127 * scaleTransform75._00 + _this__10127 * scaleTransform75._01 + _this__20127 * scaleTransform75._02,_this__00127 * scaleTransform75._10 + _this__10127 * scaleTransform75._11 + _this__20127 * scaleTransform75._12,_this__00127 * scaleTransform75._20 + _this__10127 * scaleTransform75._21 + _this__20127 * scaleTransform75._22,_this__01127 * scaleTransform75._00 + _this__11127 * scaleTransform75._01 + _this__21127 * scaleTransform75._02,_this__01127 * scaleTransform75._10 + _this__11127 * scaleTransform75._11 + _this__21127 * scaleTransform75._12,_this__01127 * scaleTransform75._20 + _this__11127 * scaleTransform75._21 + _this__21127 * scaleTransform75._22,_this__02127 * scaleTransform75._00 + _this__12127 * scaleTransform75._01 + _this__22127 * scaleTransform75._02,_this__02127 * scaleTransform75._10 + _this__12127 * scaleTransform75._11 + _this__22127 * scaleTransform75._12,_this__02127 * scaleTransform75._20 + _this__12127 * scaleTransform75._21 + _this__22127 * scaleTransform75._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y30 < hi85) {
				var _this__00128 = 1;
				var _this__10128 = 0;
				var _this__20128 = wid85 / 2 - sv_x30 / 2;
				var _this__01128 = 0;
				var _this__11128 = 1;
				var _this__21128 = hi85 - sv_y30 - border;
				var _this__02128 = 0;
				var _this__12128 = 0;
				var _this__22128 = 1;
				b2 = new kha_math_FastMatrix3(_this__00128 * scaleTransform66._00 + _this__10128 * scaleTransform66._01 + _this__20128 * scaleTransform66._02,_this__00128 * scaleTransform66._10 + _this__10128 * scaleTransform66._11 + _this__20128 * scaleTransform66._12,_this__00128 * scaleTransform66._20 + _this__10128 * scaleTransform66._21 + _this__20128 * scaleTransform66._22,_this__01128 * scaleTransform66._00 + _this__11128 * scaleTransform66._01 + _this__21128 * scaleTransform66._02,_this__01128 * scaleTransform66._10 + _this__11128 * scaleTransform66._11 + _this__21128 * scaleTransform66._12,_this__01128 * scaleTransform66._20 + _this__11128 * scaleTransform66._21 + _this__21128 * scaleTransform66._22,_this__02128 * scaleTransform66._00 + _this__12128 * scaleTransform66._01 + _this__22128 * scaleTransform66._02,_this__02128 * scaleTransform66._10 + _this__12128 * scaleTransform66._11 + _this__22128 * scaleTransform66._12,_this__02128 * scaleTransform66._20 + _this__12128 * scaleTransform66._21 + _this__22128 * scaleTransform66._22);
			} else {
				var wid100 = Main.wid;
				var hi100 = Main.hi;
				var scaleTransform76 = Main.scaleTransform;
				var _this__00129 = 1;
				var _this__10129 = 0;
				var _this__20129 = wid100 / 2 - sv_x30 / 2;
				var _this__01129 = 0;
				var _this__11129 = 1;
				var _this__21129 = hi100 / 2 - sv_y30 / 2;
				var _this__02129 = 0;
				var _this__12129 = 0;
				var _this__22129 = 1;
				b2 = new kha_math_FastMatrix3(_this__00129 * scaleTransform76._00 + _this__10129 * scaleTransform76._01 + _this__20129 * scaleTransform76._02,_this__00129 * scaleTransform76._10 + _this__10129 * scaleTransform76._11 + _this__20129 * scaleTransform76._12,_this__00129 * scaleTransform76._20 + _this__10129 * scaleTransform76._21 + _this__20129 * scaleTransform76._22,_this__01129 * scaleTransform76._00 + _this__11129 * scaleTransform76._01 + _this__21129 * scaleTransform76._02,_this__01129 * scaleTransform76._10 + _this__11129 * scaleTransform76._11 + _this__21129 * scaleTransform76._12,_this__01129 * scaleTransform76._20 + _this__11129 * scaleTransform76._21 + _this__21129 * scaleTransform76._22,_this__02129 * scaleTransform76._00 + _this__12129 * scaleTransform76._01 + _this__22129 * scaleTransform76._02,_this__02129 * scaleTransform76._10 + _this__12129 * scaleTransform76._11 + _this__22129 * scaleTransform76._12,_this__02129 * scaleTransform76._20 + _this__12129 * scaleTransform76._21 + _this__22129 * scaleTransform76._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y30 < hi85) {
				var _this__00130 = 1;
				var _this__10130 = 0;
				var _this__20130 = wid85 / 2 - sv_x30 / 2;
				var _this__01130 = 0;
				var _this__11130 = 1;
				var _this__21130 = border;
				var _this__02130 = 0;
				var _this__12130 = 0;
				var _this__22130 = 1;
				b2 = new kha_math_FastMatrix3(_this__00130 * scaleTransform66._00 + _this__10130 * scaleTransform66._01 + _this__20130 * scaleTransform66._02,_this__00130 * scaleTransform66._10 + _this__10130 * scaleTransform66._11 + _this__20130 * scaleTransform66._12,_this__00130 * scaleTransform66._20 + _this__10130 * scaleTransform66._21 + _this__20130 * scaleTransform66._22,_this__01130 * scaleTransform66._00 + _this__11130 * scaleTransform66._01 + _this__21130 * scaleTransform66._02,_this__01130 * scaleTransform66._10 + _this__11130 * scaleTransform66._11 + _this__21130 * scaleTransform66._12,_this__01130 * scaleTransform66._20 + _this__11130 * scaleTransform66._21 + _this__21130 * scaleTransform66._22,_this__02130 * scaleTransform66._00 + _this__12130 * scaleTransform66._01 + _this__22130 * scaleTransform66._02,_this__02130 * scaleTransform66._10 + _this__12130 * scaleTransform66._11 + _this__22130 * scaleTransform66._12,_this__02130 * scaleTransform66._20 + _this__12130 * scaleTransform66._21 + _this__22130 * scaleTransform66._22);
			} else {
				var wid101 = Main.wid;
				var hi101 = Main.hi;
				var scaleTransform77 = Main.scaleTransform;
				var _this__00131 = 1;
				var _this__10131 = 0;
				var _this__20131 = wid101 / 2 - sv_x30 / 2;
				var _this__01131 = 0;
				var _this__11131 = 1;
				var _this__21131 = hi101 / 2 - sv_y30 / 2;
				var _this__02131 = 0;
				var _this__12131 = 0;
				var _this__22131 = 1;
				b2 = new kha_math_FastMatrix3(_this__00131 * scaleTransform77._00 + _this__10131 * scaleTransform77._01 + _this__20131 * scaleTransform77._02,_this__00131 * scaleTransform77._10 + _this__10131 * scaleTransform77._11 + _this__20131 * scaleTransform77._12,_this__00131 * scaleTransform77._20 + _this__10131 * scaleTransform77._21 + _this__20131 * scaleTransform77._22,_this__01131 * scaleTransform77._00 + _this__11131 * scaleTransform77._01 + _this__21131 * scaleTransform77._02,_this__01131 * scaleTransform77._10 + _this__11131 * scaleTransform77._11 + _this__21131 * scaleTransform77._12,_this__01131 * scaleTransform77._20 + _this__11131 * scaleTransform77._21 + _this__21131 * scaleTransform77._22,_this__02131 * scaleTransform77._00 + _this__12131 * scaleTransform77._01 + _this__22131 * scaleTransform77._02,_this__02131 * scaleTransform77._10 + _this__12131 * scaleTransform77._11 + _this__22131 * scaleTransform77._12,_this__02131 * scaleTransform77._20 + _this__12131 * scaleTransform77._21 + _this__22131 * scaleTransform77._22);
			}
			break;
		}
		var scaleTransform78 = Main.scaleTransform;
		var v_x6 = w;
		var v_y6 = h;
		var w47 = scaleTransform78._02 * v_x6 + scaleTransform78._12 * v_y6 + scaleTransform78._22;
		var x36 = (scaleTransform78._00 * v_x6 + scaleTransform78._10 * v_y6 + scaleTransform78._20) / w47;
		var y36 = (scaleTransform78._01 * v_x6 + scaleTransform78._11 * v_y6 + scaleTransform78._21) / w47;
		var sv_x36 = x36;
		var sv_y36 = y36;
		var wid102 = Main.wid;
		var hi102 = Main.hi;
		var scaleTransform79 = Main.scaleTransform;
		var c2;
		switch(simpleText_Alignment.Left._hx_index) {
		case 2:case 7:
			var wid103 = Main.wid;
			var hi103 = Main.hi;
			var w230 = wid103 - border * 2;
			var h230 = hi103 - border * 2;
			var dw30 = w230 - w;
			var dh30 = h230 - h;
			var scale30 = dw30 < dh30 ? w230 / w : h230 / h;
			if(scale30 < 0) {
				scale30 = 0.;
			}
			var scaleTransform__0030 = scale30;
			var scaleTransform__1030 = 0;
			var scaleTransform__2030 = 0;
			var scaleTransform__0130 = 0;
			var scaleTransform__1130 = scale30;
			var scaleTransform__2130 = 0;
			var scaleTransform__0230 = 0;
			var scaleTransform__1230 = 0;
			var scaleTransform__2230 = 1;
			var value_x30 = w;
			var value_y30 = h;
			var w48 = scaleTransform__0230 * value_x30 + scaleTransform__1230 * value_y30 + scaleTransform__2230;
			var x37 = (scaleTransform__0030 * value_x30 + scaleTransform__1030 * value_y30 + scaleTransform__2030) / w48;
			var y37 = (scaleTransform__0130 * value_x30 + scaleTransform__1130 * value_y30 + scaleTransform__2130) / w48;
			var sv_x37 = x37;
			var sv_y37 = y37;
			var _this__00132 = 1;
			var _this__10132 = 0;
			var _this__20132 = wid103 - sv_x37 - border;
			var _this__01132 = 0;
			var _this__11132 = 1;
			var _this__21132 = hi103 / 2 - sv_y37 / 2;
			var _this__02132 = 0;
			var _this__12132 = 0;
			var _this__22132 = 1;
			c2 = new kha_math_FastMatrix3(_this__00132 * scaleTransform__0030 + _this__10132 * scaleTransform__0130 + _this__20132 * scaleTransform__0230,_this__00132 * scaleTransform__1030 + _this__10132 * scaleTransform__1130 + _this__20132 * scaleTransform__1230,_this__00132 * scaleTransform__2030 + _this__10132 * scaleTransform__2130 + _this__20132 * scaleTransform__2230,_this__01132 * scaleTransform__0030 + _this__11132 * scaleTransform__0130 + _this__21132 * scaleTransform__0230,_this__01132 * scaleTransform__1030 + _this__11132 * scaleTransform__1130 + _this__21132 * scaleTransform__1230,_this__01132 * scaleTransform__2030 + _this__11132 * scaleTransform__2130 + _this__21132 * scaleTransform__2230,_this__02132 * scaleTransform__0030 + _this__12132 * scaleTransform__0130 + _this__22132 * scaleTransform__0230,_this__02132 * scaleTransform__1030 + _this__12132 * scaleTransform__1130 + _this__22132 * scaleTransform__1230,_this__02132 * scaleTransform__2030 + _this__12132 * scaleTransform__2130 + _this__22132 * scaleTransform__2230);
			break;
		case 0:case 5:
			var wid104 = Main.wid;
			var hi104 = Main.hi;
			var w231 = wid104 - border * 2;
			var h231 = hi104 - border * 2;
			var dw31 = w231 - w;
			var dh31 = h231 - h;
			var scale31 = dw31 < dh31 ? w231 / w : h231 / h;
			if(scale31 < 0) {
				scale31 = 0.;
			}
			var scaleTransform__0031 = scale31;
			var scaleTransform__1031 = 0;
			var scaleTransform__2031 = 0;
			var scaleTransform__0131 = 0;
			var scaleTransform__1131 = scale31;
			var scaleTransform__2131 = 0;
			var scaleTransform__0231 = 0;
			var scaleTransform__1231 = 0;
			var scaleTransform__2231 = 1;
			var value_x31 = w;
			var value_y31 = h;
			var w49 = scaleTransform__0231 * value_x31 + scaleTransform__1231 * value_y31 + scaleTransform__2231;
			var x38 = (scaleTransform__0031 * value_x31 + scaleTransform__1031 * value_y31 + scaleTransform__2031) / w49;
			var y38 = (scaleTransform__0131 * value_x31 + scaleTransform__1131 * value_y31 + scaleTransform__2131) / w49;
			var sv_x38 = x38;
			var sv_y38 = y38;
			var _this__00133 = 1;
			var _this__10133 = 0;
			var _this__20133 = wid104 / 2 - sv_x38 / 2;
			var _this__01133 = 0;
			var _this__11133 = 1;
			var _this__21133 = hi104 / 2 - sv_y38 / 2;
			var _this__02133 = 0;
			var _this__12133 = 0;
			var _this__22133 = 1;
			c2 = new kha_math_FastMatrix3(_this__00133 * scaleTransform__0031 + _this__10133 * scaleTransform__0131 + _this__20133 * scaleTransform__0231,_this__00133 * scaleTransform__1031 + _this__10133 * scaleTransform__1131 + _this__20133 * scaleTransform__1231,_this__00133 * scaleTransform__2031 + _this__10133 * scaleTransform__2131 + _this__20133 * scaleTransform__2231,_this__01133 * scaleTransform__0031 + _this__11133 * scaleTransform__0131 + _this__21133 * scaleTransform__0231,_this__01133 * scaleTransform__1031 + _this__11133 * scaleTransform__1131 + _this__21133 * scaleTransform__1231,_this__01133 * scaleTransform__2031 + _this__11133 * scaleTransform__2131 + _this__21133 * scaleTransform__2231,_this__02133 * scaleTransform__0031 + _this__12133 * scaleTransform__0131 + _this__22133 * scaleTransform__0231,_this__02133 * scaleTransform__1031 + _this__12133 * scaleTransform__1131 + _this__22133 * scaleTransform__1231,_this__02133 * scaleTransform__2031 + _this__12133 * scaleTransform__2131 + _this__22133 * scaleTransform__2231);
			break;
		case 1:case 6:
			var wid105 = Main.wid;
			var hi105 = Main.hi;
			var w232 = wid105 - border * 2;
			var h232 = hi105 - border * 2;
			var dw32 = w232 - w;
			var dh32 = h232 - h;
			var scale32 = dw32 < dh32 ? w232 / w : h232 / h;
			if(scale32 < 0) {
				scale32 = 0.;
			}
			var scaleTransform__0032 = scale32;
			var scaleTransform__1032 = 0;
			var scaleTransform__2032 = 0;
			var scaleTransform__0132 = 0;
			var scaleTransform__1132 = scale32;
			var scaleTransform__2132 = 0;
			var scaleTransform__0232 = 0;
			var scaleTransform__1232 = 0;
			var scaleTransform__2232 = 1;
			var value_x32 = w;
			var value_y32 = h;
			var w50 = scaleTransform__0232 * value_x32 + scaleTransform__1232 * value_y32 + scaleTransform__2232;
			var x39 = (scaleTransform__0032 * value_x32 + scaleTransform__1032 * value_y32 + scaleTransform__2032) / w50;
			var y39 = (scaleTransform__0132 * value_x32 + scaleTransform__1132 * value_y32 + scaleTransform__2132) / w50;
			var sv_x39 = x39;
			var sv_y39 = y39;
			var _this__00134 = 1;
			var _this__10134 = 0;
			var _this__20134 = border;
			var _this__01134 = 0;
			var _this__11134 = 1;
			var _this__21134 = hi105 / 2 - sv_y39 / 2;
			var _this__02134 = 0;
			var _this__12134 = 0;
			var _this__22134 = 1;
			c2 = new kha_math_FastMatrix3(_this__00134 * scaleTransform__0032 + _this__10134 * scaleTransform__0132 + _this__20134 * scaleTransform__0232,_this__00134 * scaleTransform__1032 + _this__10134 * scaleTransform__1132 + _this__20134 * scaleTransform__1232,_this__00134 * scaleTransform__2032 + _this__10134 * scaleTransform__2132 + _this__20134 * scaleTransform__2232,_this__01134 * scaleTransform__0032 + _this__11134 * scaleTransform__0132 + _this__21134 * scaleTransform__0232,_this__01134 * scaleTransform__1032 + _this__11134 * scaleTransform__1132 + _this__21134 * scaleTransform__1232,_this__01134 * scaleTransform__2032 + _this__11134 * scaleTransform__2132 + _this__21134 * scaleTransform__2232,_this__02134 * scaleTransform__0032 + _this__12134 * scaleTransform__0132 + _this__22134 * scaleTransform__0232,_this__02134 * scaleTransform__1032 + _this__12134 * scaleTransform__1132 + _this__22134 * scaleTransform__1232,_this__02134 * scaleTransform__2032 + _this__12134 * scaleTransform__2132 + _this__22134 * scaleTransform__2232);
			break;
		case 3:case 8:
			var wid106 = Main.wid;
			var hi106 = Main.hi;
			var w233 = wid106 - border * 2;
			var h233 = hi106 - border * 2;
			var dw33 = w233 - w;
			var dh33 = h233 - h;
			var scale33 = dw33 < dh33 ? w233 / w : h233 / h;
			if(scale33 < 0) {
				scale33 = 0.;
			}
			var scaleTransform__0033 = scale33;
			var scaleTransform__1033 = 0;
			var scaleTransform__2033 = 0;
			var scaleTransform__0133 = 0;
			var scaleTransform__1133 = scale33;
			var scaleTransform__2133 = 0;
			var scaleTransform__0233 = 0;
			var scaleTransform__1233 = 0;
			var scaleTransform__2233 = 1;
			var value_x33 = w;
			var value_y33 = h;
			var w51 = scaleTransform__0233 * value_x33 + scaleTransform__1233 * value_y33 + scaleTransform__2233;
			var x40 = (scaleTransform__0033 * value_x33 + scaleTransform__1033 * value_y33 + scaleTransform__2033) / w51;
			var y40 = (scaleTransform__0133 * value_x33 + scaleTransform__1133 * value_y33 + scaleTransform__2133) / w51;
			var sv_x40 = x40;
			var sv_y40 = y40;
			var _this__00135 = 1;
			var _this__10135 = 0;
			var _this__20135 = wid106 / 2 - sv_x40 / 2;
			var _this__01135 = 0;
			var _this__11135 = 1;
			var _this__21135 = border;
			var _this__02135 = 0;
			var _this__12135 = 0;
			var _this__22135 = 1;
			c2 = new kha_math_FastMatrix3(_this__00135 * scaleTransform__0033 + _this__10135 * scaleTransform__0133 + _this__20135 * scaleTransform__0233,_this__00135 * scaleTransform__1033 + _this__10135 * scaleTransform__1133 + _this__20135 * scaleTransform__1233,_this__00135 * scaleTransform__2033 + _this__10135 * scaleTransform__2133 + _this__20135 * scaleTransform__2233,_this__01135 * scaleTransform__0033 + _this__11135 * scaleTransform__0133 + _this__21135 * scaleTransform__0233,_this__01135 * scaleTransform__1033 + _this__11135 * scaleTransform__1133 + _this__21135 * scaleTransform__1233,_this__01135 * scaleTransform__2033 + _this__11135 * scaleTransform__2133 + _this__21135 * scaleTransform__2233,_this__02135 * scaleTransform__0033 + _this__12135 * scaleTransform__0133 + _this__22135 * scaleTransform__0233,_this__02135 * scaleTransform__1033 + _this__12135 * scaleTransform__1133 + _this__22135 * scaleTransform__1233,_this__02135 * scaleTransform__2033 + _this__12135 * scaleTransform__2133 + _this__22135 * scaleTransform__2233);
			break;
		case 4:case 9:
			var wid107 = Main.wid;
			var hi107 = Main.hi;
			var w234 = wid107 - border * 2;
			var h234 = hi107 - border * 2;
			var dw34 = w234 - w;
			var dh34 = h234 - h;
			var scale34 = dw34 < dh34 ? w234 / w : h234 / h;
			if(scale34 < 0) {
				scale34 = 0.;
			}
			var scaleTransform__0034 = scale34;
			var scaleTransform__1034 = 0;
			var scaleTransform__2034 = 0;
			var scaleTransform__0134 = 0;
			var scaleTransform__1134 = scale34;
			var scaleTransform__2134 = 0;
			var scaleTransform__0234 = 0;
			var scaleTransform__1234 = 0;
			var scaleTransform__2234 = 1;
			var value_x34 = w;
			var value_y34 = h;
			var w52 = scaleTransform__0234 * value_x34 + scaleTransform__1234 * value_y34 + scaleTransform__2234;
			var x41 = (scaleTransform__0034 * value_x34 + scaleTransform__1034 * value_y34 + scaleTransform__2034) / w52;
			var y41 = (scaleTransform__0134 * value_x34 + scaleTransform__1134 * value_y34 + scaleTransform__2134) / w52;
			var sv_x41 = x41;
			var sv_y41 = y41;
			var _this__00136 = 1;
			var _this__10136 = 0;
			var _this__20136 = wid107 / 2 - sv_x41 / 2;
			var _this__01136 = 0;
			var _this__11136 = 1;
			var _this__21136 = hi107 - sv_y41 - border;
			var _this__02136 = 0;
			var _this__12136 = 0;
			var _this__22136 = 1;
			c2 = new kha_math_FastMatrix3(_this__00136 * scaleTransform__0034 + _this__10136 * scaleTransform__0134 + _this__20136 * scaleTransform__0234,_this__00136 * scaleTransform__1034 + _this__10136 * scaleTransform__1134 + _this__20136 * scaleTransform__1234,_this__00136 * scaleTransform__2034 + _this__10136 * scaleTransform__2134 + _this__20136 * scaleTransform__2234,_this__01136 * scaleTransform__0034 + _this__11136 * scaleTransform__0134 + _this__21136 * scaleTransform__0234,_this__01136 * scaleTransform__1034 + _this__11136 * scaleTransform__1134 + _this__21136 * scaleTransform__1234,_this__01136 * scaleTransform__2034 + _this__11136 * scaleTransform__2134 + _this__21136 * scaleTransform__2234,_this__02136 * scaleTransform__0034 + _this__12136 * scaleTransform__0134 + _this__22136 * scaleTransform__0234,_this__02136 * scaleTransform__1034 + _this__12136 * scaleTransform__1134 + _this__22136 * scaleTransform__1234,_this__02136 * scaleTransform__2034 + _this__12136 * scaleTransform__2134 + _this__22136 * scaleTransform__2234);
			break;
		case 10:case 11:
			if(border * 2 + sv_x36 < wid102) {
				var _this__00137 = 1;
				var _this__10137 = 0;
				var _this__20137 = border;
				var _this__01137 = 0;
				var _this__11137 = 1;
				var _this__21137 = border;
				var _this__02137 = 0;
				var _this__12137 = 0;
				var _this__22137 = 1;
				c2 = new kha_math_FastMatrix3(_this__00137 * scaleTransform79._00 + _this__10137 * scaleTransform79._01 + _this__20137 * scaleTransform79._02,_this__00137 * scaleTransform79._10 + _this__10137 * scaleTransform79._11 + _this__20137 * scaleTransform79._12,_this__00137 * scaleTransform79._20 + _this__10137 * scaleTransform79._21 + _this__20137 * scaleTransform79._22,_this__01137 * scaleTransform79._00 + _this__11137 * scaleTransform79._01 + _this__21137 * scaleTransform79._02,_this__01137 * scaleTransform79._10 + _this__11137 * scaleTransform79._11 + _this__21137 * scaleTransform79._12,_this__01137 * scaleTransform79._20 + _this__11137 * scaleTransform79._21 + _this__21137 * scaleTransform79._22,_this__02137 * scaleTransform79._00 + _this__12137 * scaleTransform79._01 + _this__22137 * scaleTransform79._02,_this__02137 * scaleTransform79._10 + _this__12137 * scaleTransform79._11 + _this__22137 * scaleTransform79._12,_this__02137 * scaleTransform79._20 + _this__12137 * scaleTransform79._21 + _this__22137 * scaleTransform79._22);
			} else {
				var wid108 = Main.wid;
				var hi108 = Main.hi;
				var scaleTransform80 = Main.scaleTransform;
				var _this__00138 = 1;
				var _this__10138 = 0;
				var _this__20138 = border;
				var _this__01138 = 0;
				var _this__11138 = 1;
				var _this__21138 = hi108 / 2 - sv_y36 / 2;
				var _this__02138 = 0;
				var _this__12138 = 0;
				var _this__22138 = 1;
				c2 = new kha_math_FastMatrix3(_this__00138 * scaleTransform80._00 + _this__10138 * scaleTransform80._01 + _this__20138 * scaleTransform80._02,_this__00138 * scaleTransform80._10 + _this__10138 * scaleTransform80._11 + _this__20138 * scaleTransform80._12,_this__00138 * scaleTransform80._20 + _this__10138 * scaleTransform80._21 + _this__20138 * scaleTransform80._22,_this__01138 * scaleTransform80._00 + _this__11138 * scaleTransform80._01 + _this__21138 * scaleTransform80._02,_this__01138 * scaleTransform80._10 + _this__11138 * scaleTransform80._11 + _this__21138 * scaleTransform80._12,_this__01138 * scaleTransform80._20 + _this__11138 * scaleTransform80._21 + _this__21138 * scaleTransform80._22,_this__02138 * scaleTransform80._00 + _this__12138 * scaleTransform80._01 + _this__22138 * scaleTransform80._02,_this__02138 * scaleTransform80._10 + _this__12138 * scaleTransform80._11 + _this__22138 * scaleTransform80._12,_this__02138 * scaleTransform80._20 + _this__12138 * scaleTransform80._21 + _this__22138 * scaleTransform80._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x36 < wid102) {
				var _this__00139 = 1;
				var _this__10139 = 0;
				var _this__20139 = wid102 - sv_x36 - border;
				var _this__01139 = 0;
				var _this__11139 = 1;
				var _this__21139 = border;
				var _this__02139 = 0;
				var _this__12139 = 0;
				var _this__22139 = 1;
				c2 = new kha_math_FastMatrix3(_this__00139 * scaleTransform79._00 + _this__10139 * scaleTransform79._01 + _this__20139 * scaleTransform79._02,_this__00139 * scaleTransform79._10 + _this__10139 * scaleTransform79._11 + _this__20139 * scaleTransform79._12,_this__00139 * scaleTransform79._20 + _this__10139 * scaleTransform79._21 + _this__20139 * scaleTransform79._22,_this__01139 * scaleTransform79._00 + _this__11139 * scaleTransform79._01 + _this__21139 * scaleTransform79._02,_this__01139 * scaleTransform79._10 + _this__11139 * scaleTransform79._11 + _this__21139 * scaleTransform79._12,_this__01139 * scaleTransform79._20 + _this__11139 * scaleTransform79._21 + _this__21139 * scaleTransform79._22,_this__02139 * scaleTransform79._00 + _this__12139 * scaleTransform79._01 + _this__22139 * scaleTransform79._02,_this__02139 * scaleTransform79._10 + _this__12139 * scaleTransform79._11 + _this__22139 * scaleTransform79._12,_this__02139 * scaleTransform79._20 + _this__12139 * scaleTransform79._21 + _this__22139 * scaleTransform79._22);
			} else {
				var wid109 = Main.wid;
				var hi109 = Main.hi;
				var scaleTransform81 = Main.scaleTransform;
				var _this__00140 = 1;
				var _this__10140 = 0;
				var _this__20140 = wid109 - sv_x36 - border;
				var _this__01140 = 0;
				var _this__11140 = 1;
				var _this__21140 = hi109 / 2 - sv_y36 / 2;
				var _this__02140 = 0;
				var _this__12140 = 0;
				var _this__22140 = 1;
				c2 = new kha_math_FastMatrix3(_this__00140 * scaleTransform81._00 + _this__10140 * scaleTransform81._01 + _this__20140 * scaleTransform81._02,_this__00140 * scaleTransform81._10 + _this__10140 * scaleTransform81._11 + _this__20140 * scaleTransform81._12,_this__00140 * scaleTransform81._20 + _this__10140 * scaleTransform81._21 + _this__20140 * scaleTransform81._22,_this__01140 * scaleTransform81._00 + _this__11140 * scaleTransform81._01 + _this__21140 * scaleTransform81._02,_this__01140 * scaleTransform81._10 + _this__11140 * scaleTransform81._11 + _this__21140 * scaleTransform81._12,_this__01140 * scaleTransform81._20 + _this__11140 * scaleTransform81._21 + _this__21140 * scaleTransform81._22,_this__02140 * scaleTransform81._00 + _this__12140 * scaleTransform81._01 + _this__22140 * scaleTransform81._02,_this__02140 * scaleTransform81._10 + _this__12140 * scaleTransform81._11 + _this__22140 * scaleTransform81._12,_this__02140 * scaleTransform81._20 + _this__12140 * scaleTransform81._21 + _this__22140 * scaleTransform81._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y36 < hi102) {
				var _this__00141 = 1;
				var _this__10141 = 0;
				var _this__20141 = border;
				var _this__01141 = 0;
				var _this__11141 = 1;
				var _this__21141 = hi102 - sv_y36 - border;
				var _this__02141 = 0;
				var _this__12141 = 0;
				var _this__22141 = 1;
				c2 = new kha_math_FastMatrix3(_this__00141 * scaleTransform79._00 + _this__10141 * scaleTransform79._01 + _this__20141 * scaleTransform79._02,_this__00141 * scaleTransform79._10 + _this__10141 * scaleTransform79._11 + _this__20141 * scaleTransform79._12,_this__00141 * scaleTransform79._20 + _this__10141 * scaleTransform79._21 + _this__20141 * scaleTransform79._22,_this__01141 * scaleTransform79._00 + _this__11141 * scaleTransform79._01 + _this__21141 * scaleTransform79._02,_this__01141 * scaleTransform79._10 + _this__11141 * scaleTransform79._11 + _this__21141 * scaleTransform79._12,_this__01141 * scaleTransform79._20 + _this__11141 * scaleTransform79._21 + _this__21141 * scaleTransform79._22,_this__02141 * scaleTransform79._00 + _this__12141 * scaleTransform79._01 + _this__22141 * scaleTransform79._02,_this__02141 * scaleTransform79._10 + _this__12141 * scaleTransform79._11 + _this__22141 * scaleTransform79._12,_this__02141 * scaleTransform79._20 + _this__12141 * scaleTransform79._21 + _this__22141 * scaleTransform79._22);
			} else {
				var wid110 = Main.wid;
				var hi110 = Main.hi;
				var scaleTransform82 = Main.scaleTransform;
				var _this__00142 = 1;
				var _this__10142 = 0;
				var _this__20142 = border;
				var _this__01142 = 0;
				var _this__11142 = 1;
				var _this__21142 = hi110 / 2 - sv_y36 / 2;
				var _this__02142 = 0;
				var _this__12142 = 0;
				var _this__22142 = 1;
				c2 = new kha_math_FastMatrix3(_this__00142 * scaleTransform82._00 + _this__10142 * scaleTransform82._01 + _this__20142 * scaleTransform82._02,_this__00142 * scaleTransform82._10 + _this__10142 * scaleTransform82._11 + _this__20142 * scaleTransform82._12,_this__00142 * scaleTransform82._20 + _this__10142 * scaleTransform82._21 + _this__20142 * scaleTransform82._22,_this__01142 * scaleTransform82._00 + _this__11142 * scaleTransform82._01 + _this__21142 * scaleTransform82._02,_this__01142 * scaleTransform82._10 + _this__11142 * scaleTransform82._11 + _this__21142 * scaleTransform82._12,_this__01142 * scaleTransform82._20 + _this__11142 * scaleTransform82._21 + _this__21142 * scaleTransform82._22,_this__02142 * scaleTransform82._00 + _this__12142 * scaleTransform82._01 + _this__22142 * scaleTransform82._02,_this__02142 * scaleTransform82._10 + _this__12142 * scaleTransform82._11 + _this__22142 * scaleTransform82._12,_this__02142 * scaleTransform82._20 + _this__12142 * scaleTransform82._21 + _this__22142 * scaleTransform82._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y36 < hi102) {
				var _this__00143 = 1;
				var _this__10143 = 0;
				var _this__20143 = wid102 - sv_x36 - border;
				var _this__01143 = 0;
				var _this__11143 = 1;
				var _this__21143 = hi102 - sv_y36 - border;
				var _this__02143 = 0;
				var _this__12143 = 0;
				var _this__22143 = 1;
				c2 = new kha_math_FastMatrix3(_this__00143 * scaleTransform79._00 + _this__10143 * scaleTransform79._01 + _this__20143 * scaleTransform79._02,_this__00143 * scaleTransform79._10 + _this__10143 * scaleTransform79._11 + _this__20143 * scaleTransform79._12,_this__00143 * scaleTransform79._20 + _this__10143 * scaleTransform79._21 + _this__20143 * scaleTransform79._22,_this__01143 * scaleTransform79._00 + _this__11143 * scaleTransform79._01 + _this__21143 * scaleTransform79._02,_this__01143 * scaleTransform79._10 + _this__11143 * scaleTransform79._11 + _this__21143 * scaleTransform79._12,_this__01143 * scaleTransform79._20 + _this__11143 * scaleTransform79._21 + _this__21143 * scaleTransform79._22,_this__02143 * scaleTransform79._00 + _this__12143 * scaleTransform79._01 + _this__22143 * scaleTransform79._02,_this__02143 * scaleTransform79._10 + _this__12143 * scaleTransform79._11 + _this__22143 * scaleTransform79._12,_this__02143 * scaleTransform79._20 + _this__12143 * scaleTransform79._21 + _this__22143 * scaleTransform79._22);
			} else {
				var wid111 = Main.wid;
				var hi111 = Main.hi;
				var scaleTransform83 = Main.scaleTransform;
				var _this__00144 = 1;
				var _this__10144 = 0;
				var _this__20144 = wid111 - sv_x36 - border;
				var _this__01144 = 0;
				var _this__11144 = 1;
				var _this__21144 = hi111 / 2 - sv_y36 / 2;
				var _this__02144 = 0;
				var _this__12144 = 0;
				var _this__22144 = 1;
				c2 = new kha_math_FastMatrix3(_this__00144 * scaleTransform83._00 + _this__10144 * scaleTransform83._01 + _this__20144 * scaleTransform83._02,_this__00144 * scaleTransform83._10 + _this__10144 * scaleTransform83._11 + _this__20144 * scaleTransform83._12,_this__00144 * scaleTransform83._20 + _this__10144 * scaleTransform83._21 + _this__20144 * scaleTransform83._22,_this__01144 * scaleTransform83._00 + _this__11144 * scaleTransform83._01 + _this__21144 * scaleTransform83._02,_this__01144 * scaleTransform83._10 + _this__11144 * scaleTransform83._11 + _this__21144 * scaleTransform83._12,_this__01144 * scaleTransform83._20 + _this__11144 * scaleTransform83._21 + _this__21144 * scaleTransform83._22,_this__02144 * scaleTransform83._00 + _this__12144 * scaleTransform83._01 + _this__22144 * scaleTransform83._02,_this__02144 * scaleTransform83._10 + _this__12144 * scaleTransform83._11 + _this__22144 * scaleTransform83._12,_this__02144 * scaleTransform83._20 + _this__12144 * scaleTransform83._21 + _this__22144 * scaleTransform83._22);
			}
			break;
		case 18:
			var wid112 = Main.wid;
			var hi112 = Main.hi;
			var scaleTransform84 = Main.scaleTransform;
			var _this__00145 = 1;
			var _this__10145 = 0;
			var _this__20145 = wid112 / 2 - sv_x36 / 2;
			var _this__01145 = 0;
			var _this__11145 = 1;
			var _this__21145 = hi112 / 2 - sv_y36 / 2;
			var _this__02145 = 0;
			var _this__12145 = 0;
			var _this__22145 = 1;
			c2 = new kha_math_FastMatrix3(_this__00145 * scaleTransform84._00 + _this__10145 * scaleTransform84._01 + _this__20145 * scaleTransform84._02,_this__00145 * scaleTransform84._10 + _this__10145 * scaleTransform84._11 + _this__20145 * scaleTransform84._12,_this__00145 * scaleTransform84._20 + _this__10145 * scaleTransform84._21 + _this__20145 * scaleTransform84._22,_this__01145 * scaleTransform84._00 + _this__11145 * scaleTransform84._01 + _this__21145 * scaleTransform84._02,_this__01145 * scaleTransform84._10 + _this__11145 * scaleTransform84._11 + _this__21145 * scaleTransform84._12,_this__01145 * scaleTransform84._20 + _this__11145 * scaleTransform84._21 + _this__21145 * scaleTransform84._22,_this__02145 * scaleTransform84._00 + _this__12145 * scaleTransform84._01 + _this__22145 * scaleTransform84._02,_this__02145 * scaleTransform84._10 + _this__12145 * scaleTransform84._11 + _this__22145 * scaleTransform84._12,_this__02145 * scaleTransform84._20 + _this__12145 * scaleTransform84._21 + _this__22145 * scaleTransform84._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x36 < wid102) {
				var wid113 = Main.wid;
				var hi113 = Main.hi;
				var scaleTransform85 = Main.scaleTransform;
				var _this__00146 = 1;
				var _this__10146 = 0;
				var _this__20146 = border;
				var _this__01146 = 0;
				var _this__11146 = 1;
				var _this__21146 = hi113 / 2 - sv_y36 / 2;
				var _this__02146 = 0;
				var _this__12146 = 0;
				var _this__22146 = 1;
				c2 = new kha_math_FastMatrix3(_this__00146 * scaleTransform85._00 + _this__10146 * scaleTransform85._01 + _this__20146 * scaleTransform85._02,_this__00146 * scaleTransform85._10 + _this__10146 * scaleTransform85._11 + _this__20146 * scaleTransform85._12,_this__00146 * scaleTransform85._20 + _this__10146 * scaleTransform85._21 + _this__20146 * scaleTransform85._22,_this__01146 * scaleTransform85._00 + _this__11146 * scaleTransform85._01 + _this__21146 * scaleTransform85._02,_this__01146 * scaleTransform85._10 + _this__11146 * scaleTransform85._11 + _this__21146 * scaleTransform85._12,_this__01146 * scaleTransform85._20 + _this__11146 * scaleTransform85._21 + _this__21146 * scaleTransform85._22,_this__02146 * scaleTransform85._00 + _this__12146 * scaleTransform85._01 + _this__22146 * scaleTransform85._02,_this__02146 * scaleTransform85._10 + _this__12146 * scaleTransform85._11 + _this__22146 * scaleTransform85._12,_this__02146 * scaleTransform85._20 + _this__12146 * scaleTransform85._21 + _this__22146 * scaleTransform85._22);
			} else {
				var wid114 = Main.wid;
				var hi114 = Main.hi;
				var scaleTransform86 = Main.scaleTransform;
				var _this__00147 = 1;
				var _this__10147 = 0;
				var _this__20147 = wid114 / 2 - sv_x36 / 2;
				var _this__01147 = 0;
				var _this__11147 = 1;
				var _this__21147 = hi114 / 2 - sv_y36 / 2;
				var _this__02147 = 0;
				var _this__12147 = 0;
				var _this__22147 = 1;
				c2 = new kha_math_FastMatrix3(_this__00147 * scaleTransform86._00 + _this__10147 * scaleTransform86._01 + _this__20147 * scaleTransform86._02,_this__00147 * scaleTransform86._10 + _this__10147 * scaleTransform86._11 + _this__20147 * scaleTransform86._12,_this__00147 * scaleTransform86._20 + _this__10147 * scaleTransform86._21 + _this__20147 * scaleTransform86._22,_this__01147 * scaleTransform86._00 + _this__11147 * scaleTransform86._01 + _this__21147 * scaleTransform86._02,_this__01147 * scaleTransform86._10 + _this__11147 * scaleTransform86._11 + _this__21147 * scaleTransform86._12,_this__01147 * scaleTransform86._20 + _this__11147 * scaleTransform86._21 + _this__21147 * scaleTransform86._22,_this__02147 * scaleTransform86._00 + _this__12147 * scaleTransform86._01 + _this__22147 * scaleTransform86._02,_this__02147 * scaleTransform86._10 + _this__12147 * scaleTransform86._11 + _this__22147 * scaleTransform86._12,_this__02147 * scaleTransform86._20 + _this__12147 * scaleTransform86._21 + _this__22147 * scaleTransform86._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x36 < wid102) {
				var wid115 = Main.wid;
				var hi115 = Main.hi;
				var scaleTransform87 = Main.scaleTransform;
				var _this__00148 = 1;
				var _this__10148 = 0;
				var _this__20148 = wid115 - sv_x36 - border;
				var _this__01148 = 0;
				var _this__11148 = 1;
				var _this__21148 = hi115 / 2 - sv_y36 / 2;
				var _this__02148 = 0;
				var _this__12148 = 0;
				var _this__22148 = 1;
				c2 = new kha_math_FastMatrix3(_this__00148 * scaleTransform87._00 + _this__10148 * scaleTransform87._01 + _this__20148 * scaleTransform87._02,_this__00148 * scaleTransform87._10 + _this__10148 * scaleTransform87._11 + _this__20148 * scaleTransform87._12,_this__00148 * scaleTransform87._20 + _this__10148 * scaleTransform87._21 + _this__20148 * scaleTransform87._22,_this__01148 * scaleTransform87._00 + _this__11148 * scaleTransform87._01 + _this__21148 * scaleTransform87._02,_this__01148 * scaleTransform87._10 + _this__11148 * scaleTransform87._11 + _this__21148 * scaleTransform87._12,_this__01148 * scaleTransform87._20 + _this__11148 * scaleTransform87._21 + _this__21148 * scaleTransform87._22,_this__02148 * scaleTransform87._00 + _this__12148 * scaleTransform87._01 + _this__22148 * scaleTransform87._02,_this__02148 * scaleTransform87._10 + _this__12148 * scaleTransform87._11 + _this__22148 * scaleTransform87._12,_this__02148 * scaleTransform87._20 + _this__12148 * scaleTransform87._21 + _this__22148 * scaleTransform87._22);
			} else {
				var wid116 = Main.wid;
				var hi116 = Main.hi;
				var scaleTransform88 = Main.scaleTransform;
				var _this__00149 = 1;
				var _this__10149 = 0;
				var _this__20149 = wid116 / 2 - sv_x36 / 2;
				var _this__01149 = 0;
				var _this__11149 = 1;
				var _this__21149 = hi116 / 2 - sv_y36 / 2;
				var _this__02149 = 0;
				var _this__12149 = 0;
				var _this__22149 = 1;
				c2 = new kha_math_FastMatrix3(_this__00149 * scaleTransform88._00 + _this__10149 * scaleTransform88._01 + _this__20149 * scaleTransform88._02,_this__00149 * scaleTransform88._10 + _this__10149 * scaleTransform88._11 + _this__20149 * scaleTransform88._12,_this__00149 * scaleTransform88._20 + _this__10149 * scaleTransform88._21 + _this__20149 * scaleTransform88._22,_this__01149 * scaleTransform88._00 + _this__11149 * scaleTransform88._01 + _this__21149 * scaleTransform88._02,_this__01149 * scaleTransform88._10 + _this__11149 * scaleTransform88._11 + _this__21149 * scaleTransform88._12,_this__01149 * scaleTransform88._20 + _this__11149 * scaleTransform88._21 + _this__21149 * scaleTransform88._22,_this__02149 * scaleTransform88._00 + _this__12149 * scaleTransform88._01 + _this__22149 * scaleTransform88._02,_this__02149 * scaleTransform88._10 + _this__12149 * scaleTransform88._11 + _this__22149 * scaleTransform88._12,_this__02149 * scaleTransform88._20 + _this__12149 * scaleTransform88._21 + _this__22149 * scaleTransform88._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y36 < hi102) {
				var _this__00150 = 1;
				var _this__10150 = 0;
				var _this__20150 = wid102 / 2 - sv_x36 / 2;
				var _this__01150 = 0;
				var _this__11150 = 1;
				var _this__21150 = hi102 - sv_y36 - border;
				var _this__02150 = 0;
				var _this__12150 = 0;
				var _this__22150 = 1;
				c2 = new kha_math_FastMatrix3(_this__00150 * scaleTransform79._00 + _this__10150 * scaleTransform79._01 + _this__20150 * scaleTransform79._02,_this__00150 * scaleTransform79._10 + _this__10150 * scaleTransform79._11 + _this__20150 * scaleTransform79._12,_this__00150 * scaleTransform79._20 + _this__10150 * scaleTransform79._21 + _this__20150 * scaleTransform79._22,_this__01150 * scaleTransform79._00 + _this__11150 * scaleTransform79._01 + _this__21150 * scaleTransform79._02,_this__01150 * scaleTransform79._10 + _this__11150 * scaleTransform79._11 + _this__21150 * scaleTransform79._12,_this__01150 * scaleTransform79._20 + _this__11150 * scaleTransform79._21 + _this__21150 * scaleTransform79._22,_this__02150 * scaleTransform79._00 + _this__12150 * scaleTransform79._01 + _this__22150 * scaleTransform79._02,_this__02150 * scaleTransform79._10 + _this__12150 * scaleTransform79._11 + _this__22150 * scaleTransform79._12,_this__02150 * scaleTransform79._20 + _this__12150 * scaleTransform79._21 + _this__22150 * scaleTransform79._22);
			} else {
				var wid117 = Main.wid;
				var hi117 = Main.hi;
				var scaleTransform89 = Main.scaleTransform;
				var _this__00151 = 1;
				var _this__10151 = 0;
				var _this__20151 = wid117 / 2 - sv_x36 / 2;
				var _this__01151 = 0;
				var _this__11151 = 1;
				var _this__21151 = hi117 / 2 - sv_y36 / 2;
				var _this__02151 = 0;
				var _this__12151 = 0;
				var _this__22151 = 1;
				c2 = new kha_math_FastMatrix3(_this__00151 * scaleTransform89._00 + _this__10151 * scaleTransform89._01 + _this__20151 * scaleTransform89._02,_this__00151 * scaleTransform89._10 + _this__10151 * scaleTransform89._11 + _this__20151 * scaleTransform89._12,_this__00151 * scaleTransform89._20 + _this__10151 * scaleTransform89._21 + _this__20151 * scaleTransform89._22,_this__01151 * scaleTransform89._00 + _this__11151 * scaleTransform89._01 + _this__21151 * scaleTransform89._02,_this__01151 * scaleTransform89._10 + _this__11151 * scaleTransform89._11 + _this__21151 * scaleTransform89._12,_this__01151 * scaleTransform89._20 + _this__11151 * scaleTransform89._21 + _this__21151 * scaleTransform89._22,_this__02151 * scaleTransform89._00 + _this__12151 * scaleTransform89._01 + _this__22151 * scaleTransform89._02,_this__02151 * scaleTransform89._10 + _this__12151 * scaleTransform89._11 + _this__22151 * scaleTransform89._12,_this__02151 * scaleTransform89._20 + _this__12151 * scaleTransform89._21 + _this__22151 * scaleTransform89._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y36 < hi102) {
				var _this__00152 = 1;
				var _this__10152 = 0;
				var _this__20152 = wid102 / 2 - sv_x36 / 2;
				var _this__01152 = 0;
				var _this__11152 = 1;
				var _this__21152 = border;
				var _this__02152 = 0;
				var _this__12152 = 0;
				var _this__22152 = 1;
				c2 = new kha_math_FastMatrix3(_this__00152 * scaleTransform79._00 + _this__10152 * scaleTransform79._01 + _this__20152 * scaleTransform79._02,_this__00152 * scaleTransform79._10 + _this__10152 * scaleTransform79._11 + _this__20152 * scaleTransform79._12,_this__00152 * scaleTransform79._20 + _this__10152 * scaleTransform79._21 + _this__20152 * scaleTransform79._22,_this__01152 * scaleTransform79._00 + _this__11152 * scaleTransform79._01 + _this__21152 * scaleTransform79._02,_this__01152 * scaleTransform79._10 + _this__11152 * scaleTransform79._11 + _this__21152 * scaleTransform79._12,_this__01152 * scaleTransform79._20 + _this__11152 * scaleTransform79._21 + _this__21152 * scaleTransform79._22,_this__02152 * scaleTransform79._00 + _this__12152 * scaleTransform79._01 + _this__22152 * scaleTransform79._02,_this__02152 * scaleTransform79._10 + _this__12152 * scaleTransform79._11 + _this__22152 * scaleTransform79._12,_this__02152 * scaleTransform79._20 + _this__12152 * scaleTransform79._21 + _this__22152 * scaleTransform79._22);
			} else {
				var wid118 = Main.wid;
				var hi118 = Main.hi;
				var scaleTransform90 = Main.scaleTransform;
				var _this__00153 = 1;
				var _this__10153 = 0;
				var _this__20153 = wid118 / 2 - sv_x36 / 2;
				var _this__01153 = 0;
				var _this__11153 = 1;
				var _this__21153 = hi118 / 2 - sv_y36 / 2;
				var _this__02153 = 0;
				var _this__12153 = 0;
				var _this__22153 = 1;
				c2 = new kha_math_FastMatrix3(_this__00153 * scaleTransform90._00 + _this__10153 * scaleTransform90._01 + _this__20153 * scaleTransform90._02,_this__00153 * scaleTransform90._10 + _this__10153 * scaleTransform90._11 + _this__20153 * scaleTransform90._12,_this__00153 * scaleTransform90._20 + _this__10153 * scaleTransform90._21 + _this__20153 * scaleTransform90._22,_this__01153 * scaleTransform90._00 + _this__11153 * scaleTransform90._01 + _this__21153 * scaleTransform90._02,_this__01153 * scaleTransform90._10 + _this__11153 * scaleTransform90._11 + _this__21153 * scaleTransform90._12,_this__01153 * scaleTransform90._20 + _this__11153 * scaleTransform90._21 + _this__21153 * scaleTransform90._22,_this__02153 * scaleTransform90._00 + _this__12153 * scaleTransform90._01 + _this__22153 * scaleTransform90._02,_this__02153 * scaleTransform90._10 + _this__12153 * scaleTransform90._11 + _this__22153 * scaleTransform90._12,_this__02153 * scaleTransform90._20 + _this__12153 * scaleTransform90._21 + _this__22153 * scaleTransform90._22);
			}
			break;
		}
		var scaleTransform91 = Main.scaleTransform;
		var v_x7 = w;
		var v_y7 = h;
		var w53 = scaleTransform91._02 * v_x7 + scaleTransform91._12 * v_y7 + scaleTransform91._22;
		var x42 = (scaleTransform91._00 * v_x7 + scaleTransform91._10 * v_y7 + scaleTransform91._20) / w53;
		var y42 = (scaleTransform91._01 * v_x7 + scaleTransform91._11 * v_y7 + scaleTransform91._21) / w53;
		var sv_x42 = x42;
		var sv_y42 = y42;
		var wid119 = Main.wid;
		var hi119 = Main.hi;
		var scaleTransform92 = Main.scaleTransform;
		var d2;
		switch(simpleText_Alignment.Bottom._hx_index) {
		case 2:case 7:
			var wid120 = Main.wid;
			var hi120 = Main.hi;
			var w235 = wid120 - border * 2;
			var h235 = hi120 - border * 2;
			var dw35 = w235 - w;
			var dh35 = h235 - h;
			var scale35 = dw35 < dh35 ? w235 / w : h235 / h;
			if(scale35 < 0) {
				scale35 = 0.;
			}
			var scaleTransform__0035 = scale35;
			var scaleTransform__1035 = 0;
			var scaleTransform__2035 = 0;
			var scaleTransform__0135 = 0;
			var scaleTransform__1135 = scale35;
			var scaleTransform__2135 = 0;
			var scaleTransform__0235 = 0;
			var scaleTransform__1235 = 0;
			var scaleTransform__2235 = 1;
			var value_x35 = w;
			var value_y35 = h;
			var w54 = scaleTransform__0235 * value_x35 + scaleTransform__1235 * value_y35 + scaleTransform__2235;
			var x43 = (scaleTransform__0035 * value_x35 + scaleTransform__1035 * value_y35 + scaleTransform__2035) / w54;
			var y43 = (scaleTransform__0135 * value_x35 + scaleTransform__1135 * value_y35 + scaleTransform__2135) / w54;
			var sv_x43 = x43;
			var sv_y43 = y43;
			var _this__00154 = 1;
			var _this__10154 = 0;
			var _this__20154 = wid120 - sv_x43 - border;
			var _this__01154 = 0;
			var _this__11154 = 1;
			var _this__21154 = hi120 / 2 - sv_y43 / 2;
			var _this__02154 = 0;
			var _this__12154 = 0;
			var _this__22154 = 1;
			d2 = new kha_math_FastMatrix3(_this__00154 * scaleTransform__0035 + _this__10154 * scaleTransform__0135 + _this__20154 * scaleTransform__0235,_this__00154 * scaleTransform__1035 + _this__10154 * scaleTransform__1135 + _this__20154 * scaleTransform__1235,_this__00154 * scaleTransform__2035 + _this__10154 * scaleTransform__2135 + _this__20154 * scaleTransform__2235,_this__01154 * scaleTransform__0035 + _this__11154 * scaleTransform__0135 + _this__21154 * scaleTransform__0235,_this__01154 * scaleTransform__1035 + _this__11154 * scaleTransform__1135 + _this__21154 * scaleTransform__1235,_this__01154 * scaleTransform__2035 + _this__11154 * scaleTransform__2135 + _this__21154 * scaleTransform__2235,_this__02154 * scaleTransform__0035 + _this__12154 * scaleTransform__0135 + _this__22154 * scaleTransform__0235,_this__02154 * scaleTransform__1035 + _this__12154 * scaleTransform__1135 + _this__22154 * scaleTransform__1235,_this__02154 * scaleTransform__2035 + _this__12154 * scaleTransform__2135 + _this__22154 * scaleTransform__2235);
			break;
		case 0:case 5:
			var wid121 = Main.wid;
			var hi121 = Main.hi;
			var w236 = wid121 - border * 2;
			var h236 = hi121 - border * 2;
			var dw36 = w236 - w;
			var dh36 = h236 - h;
			var scale36 = dw36 < dh36 ? w236 / w : h236 / h;
			if(scale36 < 0) {
				scale36 = 0.;
			}
			var scaleTransform__0036 = scale36;
			var scaleTransform__1036 = 0;
			var scaleTransform__2036 = 0;
			var scaleTransform__0136 = 0;
			var scaleTransform__1136 = scale36;
			var scaleTransform__2136 = 0;
			var scaleTransform__0236 = 0;
			var scaleTransform__1236 = 0;
			var scaleTransform__2236 = 1;
			var value_x36 = w;
			var value_y36 = h;
			var w55 = scaleTransform__0236 * value_x36 + scaleTransform__1236 * value_y36 + scaleTransform__2236;
			var x44 = (scaleTransform__0036 * value_x36 + scaleTransform__1036 * value_y36 + scaleTransform__2036) / w55;
			var y44 = (scaleTransform__0136 * value_x36 + scaleTransform__1136 * value_y36 + scaleTransform__2136) / w55;
			var sv_x44 = x44;
			var sv_y44 = y44;
			var _this__00155 = 1;
			var _this__10155 = 0;
			var _this__20155 = wid121 / 2 - sv_x44 / 2;
			var _this__01155 = 0;
			var _this__11155 = 1;
			var _this__21155 = hi121 / 2 - sv_y44 / 2;
			var _this__02155 = 0;
			var _this__12155 = 0;
			var _this__22155 = 1;
			d2 = new kha_math_FastMatrix3(_this__00155 * scaleTransform__0036 + _this__10155 * scaleTransform__0136 + _this__20155 * scaleTransform__0236,_this__00155 * scaleTransform__1036 + _this__10155 * scaleTransform__1136 + _this__20155 * scaleTransform__1236,_this__00155 * scaleTransform__2036 + _this__10155 * scaleTransform__2136 + _this__20155 * scaleTransform__2236,_this__01155 * scaleTransform__0036 + _this__11155 * scaleTransform__0136 + _this__21155 * scaleTransform__0236,_this__01155 * scaleTransform__1036 + _this__11155 * scaleTransform__1136 + _this__21155 * scaleTransform__1236,_this__01155 * scaleTransform__2036 + _this__11155 * scaleTransform__2136 + _this__21155 * scaleTransform__2236,_this__02155 * scaleTransform__0036 + _this__12155 * scaleTransform__0136 + _this__22155 * scaleTransform__0236,_this__02155 * scaleTransform__1036 + _this__12155 * scaleTransform__1136 + _this__22155 * scaleTransform__1236,_this__02155 * scaleTransform__2036 + _this__12155 * scaleTransform__2136 + _this__22155 * scaleTransform__2236);
			break;
		case 1:case 6:
			var wid122 = Main.wid;
			var hi122 = Main.hi;
			var w237 = wid122 - border * 2;
			var h237 = hi122 - border * 2;
			var dw37 = w237 - w;
			var dh37 = h237 - h;
			var scale37 = dw37 < dh37 ? w237 / w : h237 / h;
			if(scale37 < 0) {
				scale37 = 0.;
			}
			var scaleTransform__0037 = scale37;
			var scaleTransform__1037 = 0;
			var scaleTransform__2037 = 0;
			var scaleTransform__0137 = 0;
			var scaleTransform__1137 = scale37;
			var scaleTransform__2137 = 0;
			var scaleTransform__0237 = 0;
			var scaleTransform__1237 = 0;
			var scaleTransform__2237 = 1;
			var value_x37 = w;
			var value_y37 = h;
			var w56 = scaleTransform__0237 * value_x37 + scaleTransform__1237 * value_y37 + scaleTransform__2237;
			var x45 = (scaleTransform__0037 * value_x37 + scaleTransform__1037 * value_y37 + scaleTransform__2037) / w56;
			var y45 = (scaleTransform__0137 * value_x37 + scaleTransform__1137 * value_y37 + scaleTransform__2137) / w56;
			var sv_x45 = x45;
			var sv_y45 = y45;
			var _this__00156 = 1;
			var _this__10156 = 0;
			var _this__20156 = border;
			var _this__01156 = 0;
			var _this__11156 = 1;
			var _this__21156 = hi122 / 2 - sv_y45 / 2;
			var _this__02156 = 0;
			var _this__12156 = 0;
			var _this__22156 = 1;
			d2 = new kha_math_FastMatrix3(_this__00156 * scaleTransform__0037 + _this__10156 * scaleTransform__0137 + _this__20156 * scaleTransform__0237,_this__00156 * scaleTransform__1037 + _this__10156 * scaleTransform__1137 + _this__20156 * scaleTransform__1237,_this__00156 * scaleTransform__2037 + _this__10156 * scaleTransform__2137 + _this__20156 * scaleTransform__2237,_this__01156 * scaleTransform__0037 + _this__11156 * scaleTransform__0137 + _this__21156 * scaleTransform__0237,_this__01156 * scaleTransform__1037 + _this__11156 * scaleTransform__1137 + _this__21156 * scaleTransform__1237,_this__01156 * scaleTransform__2037 + _this__11156 * scaleTransform__2137 + _this__21156 * scaleTransform__2237,_this__02156 * scaleTransform__0037 + _this__12156 * scaleTransform__0137 + _this__22156 * scaleTransform__0237,_this__02156 * scaleTransform__1037 + _this__12156 * scaleTransform__1137 + _this__22156 * scaleTransform__1237,_this__02156 * scaleTransform__2037 + _this__12156 * scaleTransform__2137 + _this__22156 * scaleTransform__2237);
			break;
		case 3:case 8:
			var wid123 = Main.wid;
			var hi123 = Main.hi;
			var w238 = wid123 - border * 2;
			var h238 = hi123 - border * 2;
			var dw38 = w238 - w;
			var dh38 = h238 - h;
			var scale38 = dw38 < dh38 ? w238 / w : h238 / h;
			if(scale38 < 0) {
				scale38 = 0.;
			}
			var scaleTransform__0038 = scale38;
			var scaleTransform__1038 = 0;
			var scaleTransform__2038 = 0;
			var scaleTransform__0138 = 0;
			var scaleTransform__1138 = scale38;
			var scaleTransform__2138 = 0;
			var scaleTransform__0238 = 0;
			var scaleTransform__1238 = 0;
			var scaleTransform__2238 = 1;
			var value_x38 = w;
			var value_y38 = h;
			var w57 = scaleTransform__0238 * value_x38 + scaleTransform__1238 * value_y38 + scaleTransform__2238;
			var x46 = (scaleTransform__0038 * value_x38 + scaleTransform__1038 * value_y38 + scaleTransform__2038) / w57;
			var y46 = (scaleTransform__0138 * value_x38 + scaleTransform__1138 * value_y38 + scaleTransform__2138) / w57;
			var sv_x46 = x46;
			var sv_y46 = y46;
			var _this__00157 = 1;
			var _this__10157 = 0;
			var _this__20157 = wid123 / 2 - sv_x46 / 2;
			var _this__01157 = 0;
			var _this__11157 = 1;
			var _this__21157 = border;
			var _this__02157 = 0;
			var _this__12157 = 0;
			var _this__22157 = 1;
			d2 = new kha_math_FastMatrix3(_this__00157 * scaleTransform__0038 + _this__10157 * scaleTransform__0138 + _this__20157 * scaleTransform__0238,_this__00157 * scaleTransform__1038 + _this__10157 * scaleTransform__1138 + _this__20157 * scaleTransform__1238,_this__00157 * scaleTransform__2038 + _this__10157 * scaleTransform__2138 + _this__20157 * scaleTransform__2238,_this__01157 * scaleTransform__0038 + _this__11157 * scaleTransform__0138 + _this__21157 * scaleTransform__0238,_this__01157 * scaleTransform__1038 + _this__11157 * scaleTransform__1138 + _this__21157 * scaleTransform__1238,_this__01157 * scaleTransform__2038 + _this__11157 * scaleTransform__2138 + _this__21157 * scaleTransform__2238,_this__02157 * scaleTransform__0038 + _this__12157 * scaleTransform__0138 + _this__22157 * scaleTransform__0238,_this__02157 * scaleTransform__1038 + _this__12157 * scaleTransform__1138 + _this__22157 * scaleTransform__1238,_this__02157 * scaleTransform__2038 + _this__12157 * scaleTransform__2138 + _this__22157 * scaleTransform__2238);
			break;
		case 4:case 9:
			var wid124 = Main.wid;
			var hi124 = Main.hi;
			var w239 = wid124 - border * 2;
			var h239 = hi124 - border * 2;
			var dw39 = w239 - w;
			var dh39 = h239 - h;
			var scale39 = dw39 < dh39 ? w239 / w : h239 / h;
			if(scale39 < 0) {
				scale39 = 0.;
			}
			var scaleTransform__0039 = scale39;
			var scaleTransform__1039 = 0;
			var scaleTransform__2039 = 0;
			var scaleTransform__0139 = 0;
			var scaleTransform__1139 = scale39;
			var scaleTransform__2139 = 0;
			var scaleTransform__0239 = 0;
			var scaleTransform__1239 = 0;
			var scaleTransform__2239 = 1;
			var value_x39 = w;
			var value_y39 = h;
			var w58 = scaleTransform__0239 * value_x39 + scaleTransform__1239 * value_y39 + scaleTransform__2239;
			var x47 = (scaleTransform__0039 * value_x39 + scaleTransform__1039 * value_y39 + scaleTransform__2039) / w58;
			var y47 = (scaleTransform__0139 * value_x39 + scaleTransform__1139 * value_y39 + scaleTransform__2139) / w58;
			var sv_x47 = x47;
			var sv_y47 = y47;
			var _this__00158 = 1;
			var _this__10158 = 0;
			var _this__20158 = wid124 / 2 - sv_x47 / 2;
			var _this__01158 = 0;
			var _this__11158 = 1;
			var _this__21158 = hi124 - sv_y47 - border;
			var _this__02158 = 0;
			var _this__12158 = 0;
			var _this__22158 = 1;
			d2 = new kha_math_FastMatrix3(_this__00158 * scaleTransform__0039 + _this__10158 * scaleTransform__0139 + _this__20158 * scaleTransform__0239,_this__00158 * scaleTransform__1039 + _this__10158 * scaleTransform__1139 + _this__20158 * scaleTransform__1239,_this__00158 * scaleTransform__2039 + _this__10158 * scaleTransform__2139 + _this__20158 * scaleTransform__2239,_this__01158 * scaleTransform__0039 + _this__11158 * scaleTransform__0139 + _this__21158 * scaleTransform__0239,_this__01158 * scaleTransform__1039 + _this__11158 * scaleTransform__1139 + _this__21158 * scaleTransform__1239,_this__01158 * scaleTransform__2039 + _this__11158 * scaleTransform__2139 + _this__21158 * scaleTransform__2239,_this__02158 * scaleTransform__0039 + _this__12158 * scaleTransform__0139 + _this__22158 * scaleTransform__0239,_this__02158 * scaleTransform__1039 + _this__12158 * scaleTransform__1139 + _this__22158 * scaleTransform__1239,_this__02158 * scaleTransform__2039 + _this__12158 * scaleTransform__2139 + _this__22158 * scaleTransform__2239);
			break;
		case 10:case 11:
			if(border * 2 + sv_x42 < wid119) {
				var _this__00159 = 1;
				var _this__10159 = 0;
				var _this__20159 = border;
				var _this__01159 = 0;
				var _this__11159 = 1;
				var _this__21159 = border;
				var _this__02159 = 0;
				var _this__12159 = 0;
				var _this__22159 = 1;
				d2 = new kha_math_FastMatrix3(_this__00159 * scaleTransform92._00 + _this__10159 * scaleTransform92._01 + _this__20159 * scaleTransform92._02,_this__00159 * scaleTransform92._10 + _this__10159 * scaleTransform92._11 + _this__20159 * scaleTransform92._12,_this__00159 * scaleTransform92._20 + _this__10159 * scaleTransform92._21 + _this__20159 * scaleTransform92._22,_this__01159 * scaleTransform92._00 + _this__11159 * scaleTransform92._01 + _this__21159 * scaleTransform92._02,_this__01159 * scaleTransform92._10 + _this__11159 * scaleTransform92._11 + _this__21159 * scaleTransform92._12,_this__01159 * scaleTransform92._20 + _this__11159 * scaleTransform92._21 + _this__21159 * scaleTransform92._22,_this__02159 * scaleTransform92._00 + _this__12159 * scaleTransform92._01 + _this__22159 * scaleTransform92._02,_this__02159 * scaleTransform92._10 + _this__12159 * scaleTransform92._11 + _this__22159 * scaleTransform92._12,_this__02159 * scaleTransform92._20 + _this__12159 * scaleTransform92._21 + _this__22159 * scaleTransform92._22);
			} else {
				var wid125 = Main.wid;
				var hi125 = Main.hi;
				var scaleTransform93 = Main.scaleTransform;
				var _this__00160 = 1;
				var _this__10160 = 0;
				var _this__20160 = border;
				var _this__01160 = 0;
				var _this__11160 = 1;
				var _this__21160 = hi125 / 2 - sv_y42 / 2;
				var _this__02160 = 0;
				var _this__12160 = 0;
				var _this__22160 = 1;
				d2 = new kha_math_FastMatrix3(_this__00160 * scaleTransform93._00 + _this__10160 * scaleTransform93._01 + _this__20160 * scaleTransform93._02,_this__00160 * scaleTransform93._10 + _this__10160 * scaleTransform93._11 + _this__20160 * scaleTransform93._12,_this__00160 * scaleTransform93._20 + _this__10160 * scaleTransform93._21 + _this__20160 * scaleTransform93._22,_this__01160 * scaleTransform93._00 + _this__11160 * scaleTransform93._01 + _this__21160 * scaleTransform93._02,_this__01160 * scaleTransform93._10 + _this__11160 * scaleTransform93._11 + _this__21160 * scaleTransform93._12,_this__01160 * scaleTransform93._20 + _this__11160 * scaleTransform93._21 + _this__21160 * scaleTransform93._22,_this__02160 * scaleTransform93._00 + _this__12160 * scaleTransform93._01 + _this__22160 * scaleTransform93._02,_this__02160 * scaleTransform93._10 + _this__12160 * scaleTransform93._11 + _this__22160 * scaleTransform93._12,_this__02160 * scaleTransform93._20 + _this__12160 * scaleTransform93._21 + _this__22160 * scaleTransform93._22);
			}
			break;
		case 12:case 13:
			if(border * 2 + sv_x42 < wid119) {
				var _this__00161 = 1;
				var _this__10161 = 0;
				var _this__20161 = wid119 - sv_x42 - border;
				var _this__01161 = 0;
				var _this__11161 = 1;
				var _this__21161 = border;
				var _this__02161 = 0;
				var _this__12161 = 0;
				var _this__22161 = 1;
				d2 = new kha_math_FastMatrix3(_this__00161 * scaleTransform92._00 + _this__10161 * scaleTransform92._01 + _this__20161 * scaleTransform92._02,_this__00161 * scaleTransform92._10 + _this__10161 * scaleTransform92._11 + _this__20161 * scaleTransform92._12,_this__00161 * scaleTransform92._20 + _this__10161 * scaleTransform92._21 + _this__20161 * scaleTransform92._22,_this__01161 * scaleTransform92._00 + _this__11161 * scaleTransform92._01 + _this__21161 * scaleTransform92._02,_this__01161 * scaleTransform92._10 + _this__11161 * scaleTransform92._11 + _this__21161 * scaleTransform92._12,_this__01161 * scaleTransform92._20 + _this__11161 * scaleTransform92._21 + _this__21161 * scaleTransform92._22,_this__02161 * scaleTransform92._00 + _this__12161 * scaleTransform92._01 + _this__22161 * scaleTransform92._02,_this__02161 * scaleTransform92._10 + _this__12161 * scaleTransform92._11 + _this__22161 * scaleTransform92._12,_this__02161 * scaleTransform92._20 + _this__12161 * scaleTransform92._21 + _this__22161 * scaleTransform92._22);
			} else {
				var wid126 = Main.wid;
				var hi126 = Main.hi;
				var scaleTransform94 = Main.scaleTransform;
				var _this__00162 = 1;
				var _this__10162 = 0;
				var _this__20162 = wid126 - sv_x42 - border;
				var _this__01162 = 0;
				var _this__11162 = 1;
				var _this__21162 = hi126 / 2 - sv_y42 / 2;
				var _this__02162 = 0;
				var _this__12162 = 0;
				var _this__22162 = 1;
				d2 = new kha_math_FastMatrix3(_this__00162 * scaleTransform94._00 + _this__10162 * scaleTransform94._01 + _this__20162 * scaleTransform94._02,_this__00162 * scaleTransform94._10 + _this__10162 * scaleTransform94._11 + _this__20162 * scaleTransform94._12,_this__00162 * scaleTransform94._20 + _this__10162 * scaleTransform94._21 + _this__20162 * scaleTransform94._22,_this__01162 * scaleTransform94._00 + _this__11162 * scaleTransform94._01 + _this__21162 * scaleTransform94._02,_this__01162 * scaleTransform94._10 + _this__11162 * scaleTransform94._11 + _this__21162 * scaleTransform94._12,_this__01162 * scaleTransform94._20 + _this__11162 * scaleTransform94._21 + _this__21162 * scaleTransform94._22,_this__02162 * scaleTransform94._00 + _this__12162 * scaleTransform94._01 + _this__22162 * scaleTransform94._02,_this__02162 * scaleTransform94._10 + _this__12162 * scaleTransform94._11 + _this__22162 * scaleTransform94._12,_this__02162 * scaleTransform94._20 + _this__12162 * scaleTransform94._21 + _this__22162 * scaleTransform94._22);
			}
			break;
		case 14:case 15:
			if(border * 2 + sv_y42 < hi119) {
				var _this__00163 = 1;
				var _this__10163 = 0;
				var _this__20163 = border;
				var _this__01163 = 0;
				var _this__11163 = 1;
				var _this__21163 = hi119 - sv_y42 - border;
				var _this__02163 = 0;
				var _this__12163 = 0;
				var _this__22163 = 1;
				d2 = new kha_math_FastMatrix3(_this__00163 * scaleTransform92._00 + _this__10163 * scaleTransform92._01 + _this__20163 * scaleTransform92._02,_this__00163 * scaleTransform92._10 + _this__10163 * scaleTransform92._11 + _this__20163 * scaleTransform92._12,_this__00163 * scaleTransform92._20 + _this__10163 * scaleTransform92._21 + _this__20163 * scaleTransform92._22,_this__01163 * scaleTransform92._00 + _this__11163 * scaleTransform92._01 + _this__21163 * scaleTransform92._02,_this__01163 * scaleTransform92._10 + _this__11163 * scaleTransform92._11 + _this__21163 * scaleTransform92._12,_this__01163 * scaleTransform92._20 + _this__11163 * scaleTransform92._21 + _this__21163 * scaleTransform92._22,_this__02163 * scaleTransform92._00 + _this__12163 * scaleTransform92._01 + _this__22163 * scaleTransform92._02,_this__02163 * scaleTransform92._10 + _this__12163 * scaleTransform92._11 + _this__22163 * scaleTransform92._12,_this__02163 * scaleTransform92._20 + _this__12163 * scaleTransform92._21 + _this__22163 * scaleTransform92._22);
			} else {
				var wid127 = Main.wid;
				var hi127 = Main.hi;
				var scaleTransform95 = Main.scaleTransform;
				var _this__00164 = 1;
				var _this__10164 = 0;
				var _this__20164 = border;
				var _this__01164 = 0;
				var _this__11164 = 1;
				var _this__21164 = hi127 / 2 - sv_y42 / 2;
				var _this__02164 = 0;
				var _this__12164 = 0;
				var _this__22164 = 1;
				d2 = new kha_math_FastMatrix3(_this__00164 * scaleTransform95._00 + _this__10164 * scaleTransform95._01 + _this__20164 * scaleTransform95._02,_this__00164 * scaleTransform95._10 + _this__10164 * scaleTransform95._11 + _this__20164 * scaleTransform95._12,_this__00164 * scaleTransform95._20 + _this__10164 * scaleTransform95._21 + _this__20164 * scaleTransform95._22,_this__01164 * scaleTransform95._00 + _this__11164 * scaleTransform95._01 + _this__21164 * scaleTransform95._02,_this__01164 * scaleTransform95._10 + _this__11164 * scaleTransform95._11 + _this__21164 * scaleTransform95._12,_this__01164 * scaleTransform95._20 + _this__11164 * scaleTransform95._21 + _this__21164 * scaleTransform95._22,_this__02164 * scaleTransform95._00 + _this__12164 * scaleTransform95._01 + _this__22164 * scaleTransform95._02,_this__02164 * scaleTransform95._10 + _this__12164 * scaleTransform95._11 + _this__22164 * scaleTransform95._12,_this__02164 * scaleTransform95._20 + _this__12164 * scaleTransform95._21 + _this__22164 * scaleTransform95._22);
			}
			break;
		case 16:case 17:
			if(border * 2 + sv_y42 < hi119) {
				var _this__00165 = 1;
				var _this__10165 = 0;
				var _this__20165 = wid119 - sv_x42 - border;
				var _this__01165 = 0;
				var _this__11165 = 1;
				var _this__21165 = hi119 - sv_y42 - border;
				var _this__02165 = 0;
				var _this__12165 = 0;
				var _this__22165 = 1;
				d2 = new kha_math_FastMatrix3(_this__00165 * scaleTransform92._00 + _this__10165 * scaleTransform92._01 + _this__20165 * scaleTransform92._02,_this__00165 * scaleTransform92._10 + _this__10165 * scaleTransform92._11 + _this__20165 * scaleTransform92._12,_this__00165 * scaleTransform92._20 + _this__10165 * scaleTransform92._21 + _this__20165 * scaleTransform92._22,_this__01165 * scaleTransform92._00 + _this__11165 * scaleTransform92._01 + _this__21165 * scaleTransform92._02,_this__01165 * scaleTransform92._10 + _this__11165 * scaleTransform92._11 + _this__21165 * scaleTransform92._12,_this__01165 * scaleTransform92._20 + _this__11165 * scaleTransform92._21 + _this__21165 * scaleTransform92._22,_this__02165 * scaleTransform92._00 + _this__12165 * scaleTransform92._01 + _this__22165 * scaleTransform92._02,_this__02165 * scaleTransform92._10 + _this__12165 * scaleTransform92._11 + _this__22165 * scaleTransform92._12,_this__02165 * scaleTransform92._20 + _this__12165 * scaleTransform92._21 + _this__22165 * scaleTransform92._22);
			} else {
				var wid128 = Main.wid;
				var hi128 = Main.hi;
				var scaleTransform96 = Main.scaleTransform;
				var _this__00166 = 1;
				var _this__10166 = 0;
				var _this__20166 = wid128 - sv_x42 - border;
				var _this__01166 = 0;
				var _this__11166 = 1;
				var _this__21166 = hi128 / 2 - sv_y42 / 2;
				var _this__02166 = 0;
				var _this__12166 = 0;
				var _this__22166 = 1;
				d2 = new kha_math_FastMatrix3(_this__00166 * scaleTransform96._00 + _this__10166 * scaleTransform96._01 + _this__20166 * scaleTransform96._02,_this__00166 * scaleTransform96._10 + _this__10166 * scaleTransform96._11 + _this__20166 * scaleTransform96._12,_this__00166 * scaleTransform96._20 + _this__10166 * scaleTransform96._21 + _this__20166 * scaleTransform96._22,_this__01166 * scaleTransform96._00 + _this__11166 * scaleTransform96._01 + _this__21166 * scaleTransform96._02,_this__01166 * scaleTransform96._10 + _this__11166 * scaleTransform96._11 + _this__21166 * scaleTransform96._12,_this__01166 * scaleTransform96._20 + _this__11166 * scaleTransform96._21 + _this__21166 * scaleTransform96._22,_this__02166 * scaleTransform96._00 + _this__12166 * scaleTransform96._01 + _this__22166 * scaleTransform96._02,_this__02166 * scaleTransform96._10 + _this__12166 * scaleTransform96._11 + _this__22166 * scaleTransform96._12,_this__02166 * scaleTransform96._20 + _this__12166 * scaleTransform96._21 + _this__22166 * scaleTransform96._22);
			}
			break;
		case 18:
			var wid129 = Main.wid;
			var hi129 = Main.hi;
			var scaleTransform97 = Main.scaleTransform;
			var _this__00167 = 1;
			var _this__10167 = 0;
			var _this__20167 = wid129 / 2 - sv_x42 / 2;
			var _this__01167 = 0;
			var _this__11167 = 1;
			var _this__21167 = hi129 / 2 - sv_y42 / 2;
			var _this__02167 = 0;
			var _this__12167 = 0;
			var _this__22167 = 1;
			d2 = new kha_math_FastMatrix3(_this__00167 * scaleTransform97._00 + _this__10167 * scaleTransform97._01 + _this__20167 * scaleTransform97._02,_this__00167 * scaleTransform97._10 + _this__10167 * scaleTransform97._11 + _this__20167 * scaleTransform97._12,_this__00167 * scaleTransform97._20 + _this__10167 * scaleTransform97._21 + _this__20167 * scaleTransform97._22,_this__01167 * scaleTransform97._00 + _this__11167 * scaleTransform97._01 + _this__21167 * scaleTransform97._02,_this__01167 * scaleTransform97._10 + _this__11167 * scaleTransform97._11 + _this__21167 * scaleTransform97._12,_this__01167 * scaleTransform97._20 + _this__11167 * scaleTransform97._21 + _this__21167 * scaleTransform97._22,_this__02167 * scaleTransform97._00 + _this__12167 * scaleTransform97._01 + _this__22167 * scaleTransform97._02,_this__02167 * scaleTransform97._10 + _this__12167 * scaleTransform97._11 + _this__22167 * scaleTransform97._12,_this__02167 * scaleTransform97._20 + _this__12167 * scaleTransform97._21 + _this__22167 * scaleTransform97._22);
			break;
		case 19:case 20:case 21:
			if(border * 2 + sv_x42 < wid119) {
				var wid130 = Main.wid;
				var hi130 = Main.hi;
				var scaleTransform98 = Main.scaleTransform;
				var _this__00168 = 1;
				var _this__10168 = 0;
				var _this__20168 = border;
				var _this__01168 = 0;
				var _this__11168 = 1;
				var _this__21168 = hi130 / 2 - sv_y42 / 2;
				var _this__02168 = 0;
				var _this__12168 = 0;
				var _this__22168 = 1;
				d2 = new kha_math_FastMatrix3(_this__00168 * scaleTransform98._00 + _this__10168 * scaleTransform98._01 + _this__20168 * scaleTransform98._02,_this__00168 * scaleTransform98._10 + _this__10168 * scaleTransform98._11 + _this__20168 * scaleTransform98._12,_this__00168 * scaleTransform98._20 + _this__10168 * scaleTransform98._21 + _this__20168 * scaleTransform98._22,_this__01168 * scaleTransform98._00 + _this__11168 * scaleTransform98._01 + _this__21168 * scaleTransform98._02,_this__01168 * scaleTransform98._10 + _this__11168 * scaleTransform98._11 + _this__21168 * scaleTransform98._12,_this__01168 * scaleTransform98._20 + _this__11168 * scaleTransform98._21 + _this__21168 * scaleTransform98._22,_this__02168 * scaleTransform98._00 + _this__12168 * scaleTransform98._01 + _this__22168 * scaleTransform98._02,_this__02168 * scaleTransform98._10 + _this__12168 * scaleTransform98._11 + _this__22168 * scaleTransform98._12,_this__02168 * scaleTransform98._20 + _this__12168 * scaleTransform98._21 + _this__22168 * scaleTransform98._22);
			} else {
				var wid131 = Main.wid;
				var hi131 = Main.hi;
				var scaleTransform99 = Main.scaleTransform;
				var _this__00169 = 1;
				var _this__10169 = 0;
				var _this__20169 = wid131 / 2 - sv_x42 / 2;
				var _this__01169 = 0;
				var _this__11169 = 1;
				var _this__21169 = hi131 / 2 - sv_y42 / 2;
				var _this__02169 = 0;
				var _this__12169 = 0;
				var _this__22169 = 1;
				d2 = new kha_math_FastMatrix3(_this__00169 * scaleTransform99._00 + _this__10169 * scaleTransform99._01 + _this__20169 * scaleTransform99._02,_this__00169 * scaleTransform99._10 + _this__10169 * scaleTransform99._11 + _this__20169 * scaleTransform99._12,_this__00169 * scaleTransform99._20 + _this__10169 * scaleTransform99._21 + _this__20169 * scaleTransform99._22,_this__01169 * scaleTransform99._00 + _this__11169 * scaleTransform99._01 + _this__21169 * scaleTransform99._02,_this__01169 * scaleTransform99._10 + _this__11169 * scaleTransform99._11 + _this__21169 * scaleTransform99._12,_this__01169 * scaleTransform99._20 + _this__11169 * scaleTransform99._21 + _this__21169 * scaleTransform99._22,_this__02169 * scaleTransform99._00 + _this__12169 * scaleTransform99._01 + _this__22169 * scaleTransform99._02,_this__02169 * scaleTransform99._10 + _this__12169 * scaleTransform99._11 + _this__22169 * scaleTransform99._12,_this__02169 * scaleTransform99._20 + _this__12169 * scaleTransform99._21 + _this__22169 * scaleTransform99._22);
			}
			break;
		case 22:case 23:case 24:
			if(border * 2 + sv_x42 < wid119) {
				var wid132 = Main.wid;
				var hi132 = Main.hi;
				var scaleTransform100 = Main.scaleTransform;
				var _this__00170 = 1;
				var _this__10170 = 0;
				var _this__20170 = wid132 - sv_x42 - border;
				var _this__01170 = 0;
				var _this__11170 = 1;
				var _this__21170 = hi132 / 2 - sv_y42 / 2;
				var _this__02170 = 0;
				var _this__12170 = 0;
				var _this__22170 = 1;
				d2 = new kha_math_FastMatrix3(_this__00170 * scaleTransform100._00 + _this__10170 * scaleTransform100._01 + _this__20170 * scaleTransform100._02,_this__00170 * scaleTransform100._10 + _this__10170 * scaleTransform100._11 + _this__20170 * scaleTransform100._12,_this__00170 * scaleTransform100._20 + _this__10170 * scaleTransform100._21 + _this__20170 * scaleTransform100._22,_this__01170 * scaleTransform100._00 + _this__11170 * scaleTransform100._01 + _this__21170 * scaleTransform100._02,_this__01170 * scaleTransform100._10 + _this__11170 * scaleTransform100._11 + _this__21170 * scaleTransform100._12,_this__01170 * scaleTransform100._20 + _this__11170 * scaleTransform100._21 + _this__21170 * scaleTransform100._22,_this__02170 * scaleTransform100._00 + _this__12170 * scaleTransform100._01 + _this__22170 * scaleTransform100._02,_this__02170 * scaleTransform100._10 + _this__12170 * scaleTransform100._11 + _this__22170 * scaleTransform100._12,_this__02170 * scaleTransform100._20 + _this__12170 * scaleTransform100._21 + _this__22170 * scaleTransform100._22);
			} else {
				var wid133 = Main.wid;
				var hi133 = Main.hi;
				var scaleTransform101 = Main.scaleTransform;
				var _this__00171 = 1;
				var _this__10171 = 0;
				var _this__20171 = wid133 / 2 - sv_x42 / 2;
				var _this__01171 = 0;
				var _this__11171 = 1;
				var _this__21171 = hi133 / 2 - sv_y42 / 2;
				var _this__02171 = 0;
				var _this__12171 = 0;
				var _this__22171 = 1;
				d2 = new kha_math_FastMatrix3(_this__00171 * scaleTransform101._00 + _this__10171 * scaleTransform101._01 + _this__20171 * scaleTransform101._02,_this__00171 * scaleTransform101._10 + _this__10171 * scaleTransform101._11 + _this__20171 * scaleTransform101._12,_this__00171 * scaleTransform101._20 + _this__10171 * scaleTransform101._21 + _this__20171 * scaleTransform101._22,_this__01171 * scaleTransform101._00 + _this__11171 * scaleTransform101._01 + _this__21171 * scaleTransform101._02,_this__01171 * scaleTransform101._10 + _this__11171 * scaleTransform101._11 + _this__21171 * scaleTransform101._12,_this__01171 * scaleTransform101._20 + _this__11171 * scaleTransform101._21 + _this__21171 * scaleTransform101._22,_this__02171 * scaleTransform101._00 + _this__12171 * scaleTransform101._01 + _this__22171 * scaleTransform101._02,_this__02171 * scaleTransform101._10 + _this__12171 * scaleTransform101._11 + _this__22171 * scaleTransform101._12,_this__02171 * scaleTransform101._20 + _this__12171 * scaleTransform101._21 + _this__22171 * scaleTransform101._22);
			}
			break;
		case 25:case 26:case 27:
			if(border * 2 + sv_y42 < hi119) {
				var _this__00172 = 1;
				var _this__10172 = 0;
				var _this__20172 = wid119 / 2 - sv_x42 / 2;
				var _this__01172 = 0;
				var _this__11172 = 1;
				var _this__21172 = hi119 - sv_y42 - border;
				var _this__02172 = 0;
				var _this__12172 = 0;
				var _this__22172 = 1;
				d2 = new kha_math_FastMatrix3(_this__00172 * scaleTransform92._00 + _this__10172 * scaleTransform92._01 + _this__20172 * scaleTransform92._02,_this__00172 * scaleTransform92._10 + _this__10172 * scaleTransform92._11 + _this__20172 * scaleTransform92._12,_this__00172 * scaleTransform92._20 + _this__10172 * scaleTransform92._21 + _this__20172 * scaleTransform92._22,_this__01172 * scaleTransform92._00 + _this__11172 * scaleTransform92._01 + _this__21172 * scaleTransform92._02,_this__01172 * scaleTransform92._10 + _this__11172 * scaleTransform92._11 + _this__21172 * scaleTransform92._12,_this__01172 * scaleTransform92._20 + _this__11172 * scaleTransform92._21 + _this__21172 * scaleTransform92._22,_this__02172 * scaleTransform92._00 + _this__12172 * scaleTransform92._01 + _this__22172 * scaleTransform92._02,_this__02172 * scaleTransform92._10 + _this__12172 * scaleTransform92._11 + _this__22172 * scaleTransform92._12,_this__02172 * scaleTransform92._20 + _this__12172 * scaleTransform92._21 + _this__22172 * scaleTransform92._22);
			} else {
				var wid134 = Main.wid;
				var hi134 = Main.hi;
				var scaleTransform102 = Main.scaleTransform;
				var _this__00173 = 1;
				var _this__10173 = 0;
				var _this__20173 = wid134 / 2 - sv_x42 / 2;
				var _this__01173 = 0;
				var _this__11173 = 1;
				var _this__21173 = hi134 / 2 - sv_y42 / 2;
				var _this__02173 = 0;
				var _this__12173 = 0;
				var _this__22173 = 1;
				d2 = new kha_math_FastMatrix3(_this__00173 * scaleTransform102._00 + _this__10173 * scaleTransform102._01 + _this__20173 * scaleTransform102._02,_this__00173 * scaleTransform102._10 + _this__10173 * scaleTransform102._11 + _this__20173 * scaleTransform102._12,_this__00173 * scaleTransform102._20 + _this__10173 * scaleTransform102._21 + _this__20173 * scaleTransform102._22,_this__01173 * scaleTransform102._00 + _this__11173 * scaleTransform102._01 + _this__21173 * scaleTransform102._02,_this__01173 * scaleTransform102._10 + _this__11173 * scaleTransform102._11 + _this__21173 * scaleTransform102._12,_this__01173 * scaleTransform102._20 + _this__11173 * scaleTransform102._21 + _this__21173 * scaleTransform102._22,_this__02173 * scaleTransform102._00 + _this__12173 * scaleTransform102._01 + _this__22173 * scaleTransform102._02,_this__02173 * scaleTransform102._10 + _this__12173 * scaleTransform102._11 + _this__22173 * scaleTransform102._12,_this__02173 * scaleTransform102._20 + _this__12173 * scaleTransform102._21 + _this__22173 * scaleTransform102._22);
			}
			break;
		case 28:case 29:case 30:
			if(border * 2 + sv_y42 < hi119) {
				var _this__00174 = 1;
				var _this__10174 = 0;
				var _this__20174 = wid119 / 2 - sv_x42 / 2;
				var _this__01174 = 0;
				var _this__11174 = 1;
				var _this__21174 = border;
				var _this__02174 = 0;
				var _this__12174 = 0;
				var _this__22174 = 1;
				d2 = new kha_math_FastMatrix3(_this__00174 * scaleTransform92._00 + _this__10174 * scaleTransform92._01 + _this__20174 * scaleTransform92._02,_this__00174 * scaleTransform92._10 + _this__10174 * scaleTransform92._11 + _this__20174 * scaleTransform92._12,_this__00174 * scaleTransform92._20 + _this__10174 * scaleTransform92._21 + _this__20174 * scaleTransform92._22,_this__01174 * scaleTransform92._00 + _this__11174 * scaleTransform92._01 + _this__21174 * scaleTransform92._02,_this__01174 * scaleTransform92._10 + _this__11174 * scaleTransform92._11 + _this__21174 * scaleTransform92._12,_this__01174 * scaleTransform92._20 + _this__11174 * scaleTransform92._21 + _this__21174 * scaleTransform92._22,_this__02174 * scaleTransform92._00 + _this__12174 * scaleTransform92._01 + _this__22174 * scaleTransform92._02,_this__02174 * scaleTransform92._10 + _this__12174 * scaleTransform92._11 + _this__22174 * scaleTransform92._12,_this__02174 * scaleTransform92._20 + _this__12174 * scaleTransform92._21 + _this__22174 * scaleTransform92._22);
			} else {
				var wid135 = Main.wid;
				var hi135 = Main.hi;
				var scaleTransform103 = Main.scaleTransform;
				var _this__00175 = 1;
				var _this__10175 = 0;
				var _this__20175 = wid135 / 2 - sv_x42 / 2;
				var _this__01175 = 0;
				var _this__11175 = 1;
				var _this__21175 = hi135 / 2 - sv_y42 / 2;
				var _this__02175 = 0;
				var _this__12175 = 0;
				var _this__22175 = 1;
				d2 = new kha_math_FastMatrix3(_this__00175 * scaleTransform103._00 + _this__10175 * scaleTransform103._01 + _this__20175 * scaleTransform103._02,_this__00175 * scaleTransform103._10 + _this__10175 * scaleTransform103._11 + _this__20175 * scaleTransform103._12,_this__00175 * scaleTransform103._20 + _this__10175 * scaleTransform103._21 + _this__20175 * scaleTransform103._22,_this__01175 * scaleTransform103._00 + _this__11175 * scaleTransform103._01 + _this__21175 * scaleTransform103._02,_this__01175 * scaleTransform103._10 + _this__11175 * scaleTransform103._11 + _this__21175 * scaleTransform103._12,_this__01175 * scaleTransform103._20 + _this__11175 * scaleTransform103._21 + _this__21175 * scaleTransform103._22,_this__02175 * scaleTransform103._00 + _this__12175 * scaleTransform103._01 + _this__22175 * scaleTransform103._02,_this__02175 * scaleTransform103._10 + _this__12175 * scaleTransform103._11 + _this__22175 * scaleTransform103._12,_this__02175 * scaleTransform103._20 + _this__12175 * scaleTransform103._21 + _this__22175 * scaleTransform103._22);
			}
			break;
		}
		var vary0 = 0.5 + Math.sin(this.t0) / 2;
		var vary1 = 0.5 + Math.cos(this.t1) / 2;
		var vary2 = 0.5 + Math.sin(this.t2) / 2;
		var a1__00 = 1;
		var a1__10 = 0;
		var a1__20 = 0;
		var a1__01 = 0;
		var a1__11 = 1;
		var a1__21 = 0;
		var a1__02 = 0;
		var a1__12 = 0;
		var a1__22 = 1;
		a1__00 = a0._00 + (a2._00 - a0._00) * vary0;
		a1__10 = a0._10 + (a2._10 - a0._10) * vary0;
		a1__20 = a0._20 + (a2._20 - a0._20) * vary0;
		a1__01 = a0._01 + (a2._01 - a0._01) * vary0;
		a1__11 = a0._11 + (a2._11 - a0._11) * vary0;
		a1__21 = a0._21 + (a2._21 - a0._21) * vary0;
		a1__02 = a0._02 + (a2._02 - a0._02) * vary0;
		a1__12 = a0._12 + (a2._12 - a0._12) * vary0;
		a1__22 = a0._22 + (a2._22 - a0._22) * vary0;
		var b1__00 = 1;
		var b1__10 = 0;
		var b1__20 = 0;
		var b1__01 = 0;
		var b1__11 = 1;
		var b1__21 = 0;
		var b1__02 = 0;
		var b1__12 = 0;
		var b1__22 = 1;
		b1__00 = b0._00 + (b2._00 - b0._00) * vary0;
		b1__10 = b0._10 + (b2._10 - b0._10) * vary0;
		b1__20 = b0._20 + (b2._20 - b0._20) * vary0;
		b1__01 = b0._01 + (b2._01 - b0._01) * vary0;
		b1__11 = b0._11 + (b2._11 - b0._11) * vary0;
		b1__21 = b0._21 + (b2._21 - b0._21) * vary0;
		b1__02 = b0._02 + (b2._02 - b0._02) * vary0;
		b1__12 = b0._12 + (b2._12 - b0._12) * vary0;
		b1__22 = b0._22 + (b2._22 - b0._22) * vary0;
		var c1__00 = 1;
		var c1__10 = 0;
		var c1__20 = 0;
		var c1__01 = 0;
		var c1__11 = 1;
		var c1__21 = 0;
		var c1__02 = 0;
		var c1__12 = 0;
		var c1__22 = 1;
		c1__00 = c0._00 + (c2._00 - c0._00) * vary0;
		c1__10 = c0._10 + (c2._10 - c0._10) * vary0;
		c1__20 = c0._20 + (c2._20 - c0._20) * vary0;
		c1__01 = c0._01 + (c2._01 - c0._01) * vary0;
		c1__11 = c0._11 + (c2._11 - c0._11) * vary0;
		c1__21 = c0._21 + (c2._21 - c0._21) * vary0;
		c1__02 = c0._02 + (c2._02 - c0._02) * vary0;
		c1__12 = c0._12 + (c2._12 - c0._12) * vary0;
		c1__22 = c0._22 + (c2._22 - c0._22) * vary0;
		var d1__00 = 1;
		var d1__10 = 0;
		var d1__20 = 0;
		var d1__01 = 0;
		var d1__11 = 1;
		var d1__21 = 0;
		var d1__02 = 0;
		var d1__12 = 0;
		var d1__22 = 1;
		d1__00 = d0._00 + (d2._00 - d0._00) * vary0;
		d1__10 = d0._10 + (d2._10 - d0._10) * vary0;
		d1__20 = d0._20 + (d2._20 - d0._20) * vary0;
		d1__01 = d0._01 + (d2._01 - d0._01) * vary0;
		d1__11 = d0._11 + (d2._11 - d0._11) * vary0;
		d1__21 = d0._21 + (d2._21 - d0._21) * vary0;
		d1__02 = d0._02 + (d2._02 - d0._02) * vary0;
		d1__12 = d0._12 + (d2._12 - d0._12) * vary0;
		d1__22 = d0._22 + (d2._22 - d0._22) * vary0;
		var dx = 0.;
		var dy = 0.;
		var rows = 10;
		var cols = 10;
		var _g = 0;
		var _g1 = rows;
		while(_g < _g1) {
			var i = _g++;
			dx = i / rows;
			var _g2 = 0;
			var _g11 = cols;
			while(_g2 < _g11) {
				var j = _g2++;
				dy = j / cols;
				var outA__00 = 1;
				var outA__10 = 0;
				var outA__20 = 0;
				var outA__01 = 0;
				var outA__11 = 1;
				var outA__21 = 0;
				var outA__02 = 0;
				var outA__12 = 0;
				var outA__22 = 1;
				outA__00 = a1__00 + (b1__00 - a1__00) * dx;
				outA__10 = a1__10 + (b1__10 - a1__10) * dx;
				outA__20 = a1__20 + (b1__20 - a1__20) * dx;
				outA__01 = a1__01 + (b1__01 - a1__01) * dx;
				outA__11 = a1__11 + (b1__11 - a1__11) * dx;
				outA__21 = a1__21 + (b1__21 - a1__21) * dx;
				outA__02 = a1__02 + (b1__02 - a1__02) * dx;
				outA__12 = a1__12 + (b1__12 - a1__12) * dx;
				outA__22 = a1__22 + (b1__22 - a1__22) * dx;
				var outB__00 = 1;
				var outB__10 = 0;
				var outB__20 = 0;
				var outB__01 = 0;
				var outB__11 = 1;
				var outB__21 = 0;
				var outB__02 = 0;
				var outB__12 = 0;
				var outB__22 = 1;
				outB__00 = c1__00 + (d1__00 - c1__00) * dx;
				outB__10 = c1__10 + (d1__10 - c1__10) * dx;
				outB__20 = c1__20 + (d1__20 - c1__20) * dx;
				outB__01 = c1__01 + (d1__01 - c1__01) * dx;
				outB__11 = c1__11 + (d1__11 - c1__11) * dx;
				outB__21 = c1__21 + (d1__21 - c1__21) * dx;
				outB__02 = c1__02 + (d1__02 - c1__02) * dx;
				outB__12 = c1__12 + (d1__12 - c1__12) * dx;
				outB__22 = c1__22 + (d1__22 - c1__22) * dx;
				var scaleTransform__0040 = 1;
				var scaleTransform__1040 = 0;
				var scaleTransform__2040 = 0;
				var scaleTransform__0140 = 0;
				var scaleTransform__1140 = 1;
				var scaleTransform__2140 = 0;
				var scaleTransform__0240 = 0;
				var scaleTransform__1240 = 0;
				var scaleTransform__2240 = 1;
				scaleTransform__0040 = outA__00 + (outB__00 - outA__00) * dy;
				scaleTransform__1040 = outA__10 + (outB__10 - outA__10) * dy;
				scaleTransform__2040 = outA__20 + (outB__20 - outA__20) * dy;
				scaleTransform__0140 = outA__01 + (outB__01 - outA__01) * dy;
				scaleTransform__1140 = outA__11 + (outB__11 - outA__11) * dy;
				scaleTransform__2140 = outA__21 + (outB__21 - outA__21) * dy;
				scaleTransform__0240 = outA__02 + (outB__02 - outA__02) * dy;
				scaleTransform__1240 = outA__12 + (outB__12 - outA__12) * dy;
				scaleTransform__2240 = outA__22 + (outB__22 - outA__22) * dy;
				var v_x8 = 0;
				var v_y8 = 0;
				var w59 = scaleTransform__0240 * v_x8 + scaleTransform__1240 * v_y8 + scaleTransform__2240;
				var x48 = (scaleTransform__0040 * v_x8 + scaleTransform__1040 * v_y8 + scaleTransform__2040) / w59;
				var y48 = (scaleTransform__0140 * v_x8 + scaleTransform__1140 * v_y8 + scaleTransform__2140) / w59;
				var sv_x48 = x48;
				var sv_y48 = y48;
				var angle = Math.atan2(sv_x48 - this.mouseX,sv_y48 - this.mouseY);
				var dist = Math.sqrt(Math.pow(sv_x48 - this.mouseX,2) + Math.pow(sv_y48 - this.mouseY,2));
				var dif = dist / Main.wid;
				var t = (0.5 - 0.5 * dif) * dif;
				var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
				out._00 = scaleTransform__0040 + (m0__00 - scaleTransform__0040) * t;
				out._10 = scaleTransform__1040 + (m0__10 - scaleTransform__1040) * t;
				out._20 = scaleTransform__2040 + (m0__20 - scaleTransform__2040) * t;
				out._01 = scaleTransform__0140 + (m0__01 - scaleTransform__0140) * t;
				out._11 = scaleTransform__1140 + (m0__11 - scaleTransform__1140) * t;
				out._21 = scaleTransform__2140 + (m0__21 - scaleTransform__2140) * t;
				out._02 = scaleTransform__0240 + (m0__02 - scaleTransform__0240) * t;
				out._12 = scaleTransform__1240 + (m0__12 - scaleTransform__1240) * t;
				out._22 = scaleTransform__2240 + (m0__22 - scaleTransform__2240) * t;
				var transformation = out;
				g2.setTransformation(transformation);
				var _this = g2.transformations[g2.transformations.length - 1];
				_this._00 = transformation._00;
				_this._10 = transformation._10;
				_this._20 = transformation._20;
				_this._01 = transformation._01;
				_this._11 = transformation._11;
				_this._21 = transformation._21;
				_this._02 = transformation._02;
				_this._12 = transformation._12;
				_this._22 = transformation._22;
				this.images[i][j].scale = Main.scale / 4;
				this.images[i][j].color = kha__$Color_Color_$Impl_$.fromFloats(dx,dy,Math.max(dx * dy,1.),1.);
				this.images[i][j].alpha = 10 * (0.5 - 0.5 * dif) * dif;
				this.images[i][j].render(g2);
			}
		}
		var transformation1 = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
		g2.setTransformation(transformation1);
		var _this1 = g2.transformations[g2.transformations.length - 1];
		_this1._00 = transformation1._00;
		_this1._10 = transformation1._10;
		_this1._20 = transformation1._20;
		_this1._01 = transformation1._01;
		_this1._11 = transformation1._11;
		_this1._21 = transformation1._21;
		_this1._02 = transformation1._02;
		_this1._12 = transformation1._12;
		_this1._22 = transformation1._22;
		g2.set_color(kha__$Color_Color_$Impl_$._new(-10066330));
		g2.drawRect(1,1,Main.wid - 1,Main.hi - 1);
		g2.set_opacity(1.);
		g2.end();
	}
	,__class__: App
};
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
$hxClasses["EReg"] = EReg;
EReg.__name__ = true;
EReg.prototype = {
	r: null
	,match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,matched: function(n) {
		if(this.r.m != null && n >= 0 && n < this.r.m.length) {
			return this.r.m[n];
		} else {
			throw new js__$Boot_HaxeError("EReg::matched");
		}
	}
	,__class__: EReg
};
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = true;
HxOverrides.strDate = function(s) {
	switch(s.length) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k1 = s.split("-");
		return new Date(k1[0],k1[1] - 1,k1[2],0,0,0);
	case 19:
		var k2 = s.split(" ");
		var y = k2[0].split("-");
		var t = k2[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw new js__$Boot_HaxeError("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.remove = function(a,obj) {
	var i = a.indexOf(obj);
	if(i == -1) {
		return false;
	}
	a.splice(i,1);
	return true;
};
HxOverrides.iter = function(a) {
	return { cur : 0, arr : a, hasNext : function() {
		return this.cur < this.arr.length;
	}, next : function() {
		return this.arr[this.cur++];
	}};
};
var IntIterator = function(min,max) {
	this.min = min;
	this.max = max;
};
$hxClasses["IntIterator"] = IntIterator;
IntIterator.__name__ = true;
IntIterator.prototype = {
	min: null
	,max: null
	,__class__: IntIterator
};
var Lambda = function() { };
$hxClasses["Lambda"] = Lambda;
Lambda.__name__ = true;
Lambda.array = function(it) {
	var a = [];
	var i = $getIterator(it);
	while(i.hasNext()) {
		var i1 = i.next();
		a.push(i1);
	}
	return a;
};
var Main = function() { };
$hxClasses["Main"] = Main;
Main.__name__ = true;
Main.main = function() {
	Main.fullBrowser();
	kha_System.start(new kha_SystemOptions("resizeKha test",4096,4096,null,new kha_FramebufferOptions(null,null,null,null,null,4)),function($window) {
		new App();
	});
};
Main.fullBrowser = function() {
	var document = window.document;
	var $window = window;
	document.documentElement.style.padding = "0";
	document.documentElement.style.margin = "0";
	document.body.style.padding = "0";
	document.body.style.margin = "0";
	document.body.style.color = "0x9B7031";
	var canvas = js_Boot.__cast(document.getElementById("khanvas") , HTMLCanvasElement);
	canvas.style.display = "block";
	Main.resize = function() {
		canvas.width = $window.innerWidth * $window.devicePixelRatio | 0;
		canvas.height = $window.innerHeight * $window.devicePixelRatio | 0;
		var nWid = canvas.width / $window.devicePixelRatio | 0;
		var nHi = canvas.height / $window.devicePixelRatio | 0;
		var dimensionsChanged = nHi != Main.hi || nWid != Main.wid;
		if(dimensionsChanged) {
			Main.wid = nWid;
			Main.hi = nHi;
			canvas.style.width = document.documentElement.clientWidth + "px";
			canvas.style.height = document.documentElement.clientHeight + "px";
			var size = Main.hi > Main.wid ? Main.wid : Main.hi;
			Main.scale = size / 768;
			Main.scaleTransform = new kha_math_FastMatrix3(Main.scale,0,0,0,Main.scale,0,0,0,1);
		}
	};
	$window.onresize = Main.resize;
};
Math.__name__ = true;
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = true;
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( e ) {
		var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
		return null;
	}
};
Reflect.isFunction = function(f) {
	if(typeof(f) == "function") {
		return !(f.__name__ || f.__ename__);
	} else {
		return false;
	}
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = true;
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	var v = parseInt(x, x && x[0]=="0" && (x[1]=="x" || x[1]=="X") ? 16 : 10);
	if(isNaN(v)) {
		return null;
	}
	return v;
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = true;
StringTools.endsWith = function(s,end) {
	var elen = end.length;
	var slen = s.length;
	if(slen >= elen) {
		return HxOverrides.substr(s,slen - elen,elen) == end;
	} else {
		return false;
	}
};
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = true;
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) {
		throw new js__$Boot_HaxeError("No such constructor " + constr);
	}
	if(Reflect.isFunction(f)) {
		if(params == null) {
			throw new js__$Boot_HaxeError("Constructor " + constr + " need parameters");
		}
		return f.apply(e,params);
	}
	if(params != null && params.length != 0) {
		throw new js__$Boot_HaxeError("Constructor " + constr + " does not need parameters");
	}
	return f;
};
Type.getInstanceFields = function(c) {
	var a = [];
	for(var i in c.prototype) a.push(i);
	HxOverrides.remove(a,"__class__");
	HxOverrides.remove(a,"__properties__");
	return a;
};
var _$UInt_UInt_$Impl_$ = {};
$hxClasses["_UInt.UInt_Impl_"] = _$UInt_UInt_$Impl_$;
_$UInt_UInt_$Impl_$.__name__ = true;
_$UInt_UInt_$Impl_$.gt = function(a,b) {
	var aNeg = a < 0;
	var bNeg = b < 0;
	if(aNeg != bNeg) {
		return aNeg;
	} else {
		return a > b;
	}
};
_$UInt_UInt_$Impl_$.gte = function(a,b) {
	var aNeg = a < 0;
	var bNeg = b < 0;
	if(aNeg != bNeg) {
		return aNeg;
	} else {
		return a >= b;
	}
};
_$UInt_UInt_$Impl_$.toFloat = function(this1) {
	var int = this1;
	if(int < 0) {
		return 4294967296.0 + int;
	} else {
		return int + 0.0;
	}
};
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = true;
var haxe_Log = function() { };
$hxClasses["haxe.Log"] = haxe_Log;
haxe_Log.__name__ = true;
haxe_Log.formatOutput = function(v,infos) {
	var str = Std.string(v);
	if(infos == null) {
		return str;
	}
	var pstr = infos.fileName + ":" + infos.lineNumber;
	if(infos != null && infos.customParams != null) {
		var _g = 0;
		var _g1 = infos.customParams;
		while(_g < _g1.length) {
			var v1 = _g1[_g];
			++_g;
			str += ", " + Std.string(v1);
		}
	}
	return pstr + ": " + str;
};
haxe_Log.trace = function(v,infos) {
	var str = haxe_Log.formatOutput(v,infos);
	if(typeof(console) != "undefined" && console.log != null) {
		console.log(str);
	}
};
var haxe__$Unserializer_DefaultResolver = function() {
};
$hxClasses["haxe._Unserializer.DefaultResolver"] = haxe__$Unserializer_DefaultResolver;
haxe__$Unserializer_DefaultResolver.__name__ = true;
haxe__$Unserializer_DefaultResolver.prototype = {
	resolveClass: function(name) {
		return $hxClasses[name];
	}
	,resolveEnum: function(name) {
		return $hxEnums[name];
	}
	,__class__: haxe__$Unserializer_DefaultResolver
};
var haxe_Unserializer = function(buf) {
	this.buf = buf;
	this.length = buf.length;
	this.pos = 0;
	this.scache = [];
	this.cache = [];
	var r = haxe_Unserializer.DEFAULT_RESOLVER;
	if(r == null) {
		r = new haxe__$Unserializer_DefaultResolver();
		haxe_Unserializer.DEFAULT_RESOLVER = r;
	}
	this.resolver = r;
};
$hxClasses["haxe.Unserializer"] = haxe_Unserializer;
haxe_Unserializer.__name__ = true;
haxe_Unserializer.initCodes = function() {
	var codes = [];
	var _g = 0;
	var _g1 = haxe_Unserializer.BASE64.length;
	while(_g < _g1) {
		var i = _g++;
		codes[haxe_Unserializer.BASE64.charCodeAt(i)] = i;
	}
	return codes;
};
haxe_Unserializer.run = function(v) {
	return new haxe_Unserializer(v).unserialize();
};
haxe_Unserializer.prototype = {
	buf: null
	,pos: null
	,length: null
	,cache: null
	,scache: null
	,resolver: null
	,readDigits: function() {
		var k = 0;
		var s = false;
		var fpos = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) {
				break;
			}
			if(c == 45) {
				if(this.pos != fpos) {
					break;
				}
				s = true;
				this.pos++;
				continue;
			}
			if(c < 48 || c > 57) {
				break;
			}
			k = k * 10 + (c - 48);
			this.pos++;
		}
		if(s) {
			k *= -1;
		}
		return k;
	}
	,readFloat: function() {
		var p1 = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) {
				break;
			}
			if(c >= 43 && c < 58 || c == 101 || c == 69) {
				this.pos++;
			} else {
				break;
			}
		}
		return parseFloat(HxOverrides.substr(this.buf,p1,this.pos - p1));
	}
	,unserializeObject: function(o) {
		while(true) {
			if(this.pos >= this.length) {
				throw new js__$Boot_HaxeError("Invalid object");
			}
			if(this.buf.charCodeAt(this.pos) == 103) {
				break;
			}
			var k = this.unserialize();
			if(typeof(k) != "string") {
				throw new js__$Boot_HaxeError("Invalid object key");
			}
			var v = this.unserialize();
			o[k] = v;
		}
		this.pos++;
	}
	,unserializeEnum: function(edecl,tag) {
		if(this.buf.charCodeAt(this.pos++) != 58) {
			throw new js__$Boot_HaxeError("Invalid enum format");
		}
		var nargs = this.readDigits();
		if(nargs == 0) {
			return Type.createEnum(edecl,tag);
		}
		var args = [];
		while(nargs-- > 0) args.push(this.unserialize());
		return Type.createEnum(edecl,tag,args);
	}
	,unserialize: function() {
		switch(this.buf.charCodeAt(this.pos++)) {
		case 65:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw new js__$Boot_HaxeError("Class not found " + name);
			}
			return cl;
		case 66:
			var name1 = this.unserialize();
			var e = this.resolver.resolveEnum(name1);
			if(e == null) {
				throw new js__$Boot_HaxeError("Enum not found " + name1);
			}
			return e;
		case 67:
			var name2 = this.unserialize();
			var cl1 = this.resolver.resolveClass(name2);
			if(cl1 == null) {
				throw new js__$Boot_HaxeError("Class not found " + name2);
			}
			var o = Object.create(cl1.prototype);
			this.cache.push(o);
			o.hxUnserialize(this);
			if(this.buf.charCodeAt(this.pos++) != 103) {
				throw new js__$Boot_HaxeError("Invalid custom data");
			}
			return o;
		case 77:
			var h = new haxe_ds_ObjectMap();
			this.cache.push(h);
			var buf = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s = this.unserialize();
				h.set(s,this.unserialize());
			}
			this.pos++;
			return h;
		case 82:
			var n = this.readDigits();
			if(n < 0 || n >= this.scache.length) {
				throw new js__$Boot_HaxeError("Invalid string reference");
			}
			return this.scache[n];
		case 97:
			var buf1 = this.buf;
			var a = [];
			this.cache.push(a);
			while(true) {
				var c = this.buf.charCodeAt(this.pos);
				if(c == 104) {
					this.pos++;
					break;
				}
				if(c == 117) {
					this.pos++;
					var n1 = this.readDigits();
					a[a.length + n1 - 1] = null;
				} else {
					a.push(this.unserialize());
				}
			}
			return a;
		case 98:
			var h1 = new haxe_ds_StringMap();
			this.cache.push(h1);
			var buf2 = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s1 = this.unserialize();
				var value = this.unserialize();
				if(__map_reserved[s1] != null) {
					h1.setReserved(s1,value);
				} else {
					h1.h[s1] = value;
				}
			}
			this.pos++;
			return h1;
		case 99:
			var name3 = this.unserialize();
			var cl2 = this.resolver.resolveClass(name3);
			if(cl2 == null) {
				throw new js__$Boot_HaxeError("Class not found " + name3);
			}
			var o1 = Object.create(cl2.prototype);
			this.cache.push(o1);
			this.unserializeObject(o1);
			return o1;
		case 100:
			return this.readFloat();
		case 102:
			return false;
		case 105:
			return this.readDigits();
		case 106:
			var name4 = this.unserialize();
			var edecl = this.resolver.resolveEnum(name4);
			if(edecl == null) {
				throw new js__$Boot_HaxeError("Enum not found " + name4);
			}
			this.pos++;
			var index = this.readDigits();
			var tag = edecl.__constructs__.slice()[index];
			if(tag == null) {
				throw new js__$Boot_HaxeError("Unknown enum index " + name4 + "@" + index);
			}
			var e1 = this.unserializeEnum(edecl,tag);
			this.cache.push(e1);
			return e1;
		case 107:
			return NaN;
		case 108:
			var l = new haxe_ds_List();
			this.cache.push(l);
			var buf3 = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) l.add(this.unserialize());
			this.pos++;
			return l;
		case 109:
			return -Infinity;
		case 110:
			return null;
		case 111:
			var o2 = { };
			this.cache.push(o2);
			this.unserializeObject(o2);
			return o2;
		case 112:
			return Infinity;
		case 113:
			var h2 = new haxe_ds_IntMap();
			this.cache.push(h2);
			var buf4 = this.buf;
			var c1 = this.buf.charCodeAt(this.pos++);
			while(c1 == 58) {
				var i = this.readDigits();
				var value1 = this.unserialize();
				h2.h[i] = value1;
				c1 = this.buf.charCodeAt(this.pos++);
			}
			if(c1 != 104) {
				throw new js__$Boot_HaxeError("Invalid IntMap format");
			}
			return h2;
		case 114:
			var n2 = this.readDigits();
			if(n2 < 0 || n2 >= this.cache.length) {
				throw new js__$Boot_HaxeError("Invalid reference");
			}
			return this.cache[n2];
		case 115:
			var len = this.readDigits();
			var buf5 = this.buf;
			if(this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) {
				throw new js__$Boot_HaxeError("Invalid bytes length");
			}
			var codes = haxe_Unserializer.CODES;
			if(codes == null) {
				codes = haxe_Unserializer.initCodes();
				haxe_Unserializer.CODES = codes;
			}
			var i1 = this.pos;
			var rest = len & 3;
			var size = (len >> 2) * 3 + (rest >= 2 ? rest - 1 : 0);
			var max = i1 + (len - rest);
			var bytes = new haxe_io_Bytes(new ArrayBuffer(size));
			var bpos = 0;
			while(i1 < max) {
				var c11 = codes[buf5.charCodeAt(i1++)];
				var c2 = codes[buf5.charCodeAt(i1++)];
				bytes.b[bpos++] = c11 << 2 | c2 >> 4;
				var c3 = codes[buf5.charCodeAt(i1++)];
				bytes.b[bpos++] = c2 << 4 | c3 >> 2;
				var c4 = codes[buf5.charCodeAt(i1++)];
				bytes.b[bpos++] = c3 << 6 | c4;
			}
			if(rest >= 2) {
				var c12 = codes[buf5.charCodeAt(i1++)];
				var c21 = codes[buf5.charCodeAt(i1++)];
				bytes.b[bpos++] = c12 << 2 | c21 >> 4;
				if(rest == 3) {
					var c31 = codes[buf5.charCodeAt(i1++)];
					bytes.b[bpos++] = c21 << 4 | c31 >> 2;
				}
			}
			this.pos += len;
			this.cache.push(bytes);
			return bytes;
		case 116:
			return true;
		case 118:
			var d;
			if(this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
				d = HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));
				this.pos += 19;
			} else {
				d = new Date(this.readFloat());
			}
			this.cache.push(d);
			return d;
		case 119:
			var name5 = this.unserialize();
			var edecl1 = this.resolver.resolveEnum(name5);
			if(edecl1 == null) {
				throw new js__$Boot_HaxeError("Enum not found " + name5);
			}
			var e2 = this.unserializeEnum(edecl1,this.unserialize());
			this.cache.push(e2);
			return e2;
		case 120:
			throw js__$Boot_HaxeError.wrap(this.unserialize());
		case 121:
			var len1 = this.readDigits();
			if(this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len1) {
				throw new js__$Boot_HaxeError("Invalid string length");
			}
			var s2 = HxOverrides.substr(this.buf,this.pos,len1);
			this.pos += len1;
			s2 = decodeURIComponent(s2.split("+").join(" "));
			this.scache.push(s2);
			return s2;
		case 122:
			return 0;
		default:
		}
		this.pos--;
		throw new js__$Boot_HaxeError("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
	}
	,__class__: haxe_Unserializer
};
var haxe_io_Bytes = function(data) {
	this.length = data.byteLength;
	this.b = new Uint8Array(data);
	this.b.bufferValue = data;
	data.hxBytes = this;
	data.bytes = this.b;
};
$hxClasses["haxe.io.Bytes"] = haxe_io_Bytes;
haxe_io_Bytes.__name__ = true;
haxe_io_Bytes.ofString = function(s,encoding) {
	if(encoding == haxe_io_Encoding.RawNative) {
		var buf = new Uint8Array(s.length << 1);
		var _g = 0;
		var _g1 = s.length;
		while(_g < _g1) {
			var i = _g++;
			var c = s.charCodeAt(i);
			buf[i << 1] = c & 255;
			buf[i << 1 | 1] = c >> 8;
		}
		return new haxe_io_Bytes(buf.buffer);
	}
	var a = [];
	var i1 = 0;
	while(i1 < s.length) {
		var c1 = s.charCodeAt(i1++);
		if(55296 <= c1 && c1 <= 56319) {
			c1 = c1 - 55232 << 10 | s.charCodeAt(i1++) & 1023;
		}
		if(c1 <= 127) {
			a.push(c1);
		} else if(c1 <= 2047) {
			a.push(192 | c1 >> 6);
			a.push(128 | c1 & 63);
		} else if(c1 <= 65535) {
			a.push(224 | c1 >> 12);
			a.push(128 | c1 >> 6 & 63);
			a.push(128 | c1 & 63);
		} else {
			a.push(240 | c1 >> 18);
			a.push(128 | c1 >> 12 & 63);
			a.push(128 | c1 >> 6 & 63);
			a.push(128 | c1 & 63);
		}
	}
	return new haxe_io_Bytes(new Uint8Array(a).buffer);
};
haxe_io_Bytes.ofData = function(b) {
	var hb = b.hxBytes;
	if(hb != null) {
		return hb;
	}
	return new haxe_io_Bytes(b);
};
haxe_io_Bytes.prototype = {
	length: null
	,b: null
	,data: null
	,blit: function(pos,src,srcpos,len) {
		if(pos < 0 || srcpos < 0 || len < 0 || pos + len > this.length || srcpos + len > src.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		if(srcpos == 0 && len == src.b.byteLength) {
			this.b.set(src.b,pos);
		} else {
			this.b.set(src.b.subarray(srcpos,srcpos + len),pos);
		}
	}
	,sub: function(pos,len) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		return new haxe_io_Bytes(this.b.buffer.slice(pos + this.b.byteOffset,pos + this.b.byteOffset + len));
	}
	,getDouble: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getFloat64(pos,true);
	}
	,getFloat: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getFloat32(pos,true);
	}
	,setDouble: function(pos,v) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		this.data.setFloat64(pos,v,true);
	}
	,setFloat: function(pos,v) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		this.data.setFloat32(pos,v,true);
	}
	,getUInt16: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getUint16(pos,true);
	}
	,getInt32: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getInt32(pos,true);
	}
	,setInt32: function(pos,v) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		this.data.setInt32(pos,v,true);
	}
	,getString: function(pos,len,encoding) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		if(encoding == null) {
			encoding = haxe_io_Encoding.UTF8;
		}
		var s = "";
		var b = this.b;
		var i = pos;
		var max = pos + len;
		switch(encoding._hx_index) {
		case 0:
			var debug = pos > 0;
			while(i < max) {
				var c = b[i++];
				if(c < 128) {
					if(c == 0) {
						break;
					}
					s += String.fromCodePoint(c);
				} else if(c < 224) {
					var code = (c & 63) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code);
				} else if(c < 240) {
					var c2 = b[i++];
					var code1 = (c & 31) << 12 | (c2 & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code1);
				} else {
					var c21 = b[i++];
					var c3 = b[i++];
					var u = (c & 15) << 18 | (c21 & 127) << 12 | (c3 & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(u);
				}
			}
			break;
		case 1:
			while(i < max) {
				var c1 = b[i++] | b[i++] << 8;
				s += String.fromCodePoint(c1);
			}
			break;
		}
		return s;
	}
	,toString: function() {
		return this.getString(0,this.length);
	}
	,__class__: haxe_io_Bytes
};
var haxe_io_Encoding = $hxEnums["haxe.io.Encoding"] = { __ename__ : true, __constructs__ : ["UTF8","RawNative"]
	,UTF8: {_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr}
	,RawNative: {_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}
};
var haxe_crypto_Base64 = function() { };
$hxClasses["haxe.crypto.Base64"] = haxe_crypto_Base64;
haxe_crypto_Base64.__name__ = true;
haxe_crypto_Base64.encode = function(bytes,complement) {
	if(complement == null) {
		complement = true;
	}
	var str = new haxe_crypto_BaseCode(haxe_crypto_Base64.BYTES).encodeBytes(bytes).toString();
	if(complement) {
		switch(bytes.length % 3) {
		case 1:
			str += "==";
			break;
		case 2:
			str += "=";
			break;
		default:
		}
	}
	return str;
};
var haxe_crypto_BaseCode = function(base) {
	var len = base.length;
	var nbits = 1;
	while(len > 1 << nbits) ++nbits;
	if(nbits > 8 || len != 1 << nbits) {
		throw new js__$Boot_HaxeError("BaseCode : base length must be a power of two.");
	}
	this.base = base;
	this.nbits = nbits;
};
$hxClasses["haxe.crypto.BaseCode"] = haxe_crypto_BaseCode;
haxe_crypto_BaseCode.__name__ = true;
haxe_crypto_BaseCode.prototype = {
	base: null
	,nbits: null
	,encodeBytes: function(b) {
		var nbits = this.nbits;
		var base = this.base;
		var size = b.length * 8 / nbits | 0;
		var out = new haxe_io_Bytes(new ArrayBuffer(size + (b.length * 8 % nbits == 0 ? 0 : 1)));
		var buf = 0;
		var curbits = 0;
		var mask = (1 << nbits) - 1;
		var pin = 0;
		var pout = 0;
		while(pout < size) {
			while(curbits < nbits) {
				curbits += 8;
				buf <<= 8;
				buf |= b.b[pin++];
			}
			curbits -= nbits;
			out.b[pout++] = base.b[buf >> curbits & mask];
		}
		if(curbits > 0) {
			out.b[pout++] = base.b[buf << nbits - curbits & mask];
		}
		return out;
	}
	,__class__: haxe_crypto_BaseCode
};
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = true;
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	h: null
	,keys: function() {
		var a = [];
		for( var key in this.h ) if(this.h.hasOwnProperty(key)) {
			a.push(key | 0);
		}
		return HxOverrides.iter(a);
	}
	,iterator: function() {
		return { ref : this.h, it : this.keys(), hasNext : function() {
			return this.it.hasNext();
		}, next : function() {
			var i = this.it.next();
			return this.ref[i];
		}};
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_List = function() {
	this.length = 0;
};
$hxClasses["haxe.ds.List"] = haxe_ds_List;
haxe_ds_List.__name__ = true;
haxe_ds_List.prototype = {
	h: null
	,q: null
	,length: null
	,add: function(item) {
		var x = new haxe_ds__$List_ListNode(item,null);
		if(this.h == null) {
			this.h = x;
		} else {
			this.q.next = x;
		}
		this.q = x;
		this.length++;
	}
	,__class__: haxe_ds_List
};
var haxe_ds__$List_ListNode = function(item,next) {
	this.item = item;
	this.next = next;
};
$hxClasses["haxe.ds._List.ListNode"] = haxe_ds__$List_ListNode;
haxe_ds__$List_ListNode.__name__ = true;
haxe_ds__$List_ListNode.prototype = {
	item: null
	,next: null
	,__class__: haxe_ds__$List_ListNode
};
var haxe_ds_ObjectMap = function() {
	this.h = { __keys__ : { }};
};
$hxClasses["haxe.ds.ObjectMap"] = haxe_ds_ObjectMap;
haxe_ds_ObjectMap.__name__ = true;
haxe_ds_ObjectMap.__interfaces__ = [haxe_IMap];
haxe_ds_ObjectMap.prototype = {
	h: null
	,set: function(key,value) {
		var id = key.__id__ || (key.__id__ = ++haxe_ds_ObjectMap.count);
		this.h[id] = value;
		this.h.__keys__[id] = key;
	}
	,__class__: haxe_ds_ObjectMap
};
var haxe_ds_StringMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = true;
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.prototype = {
	h: null
	,rh: null
	,setReserved: function(key,value) {
		if(this.rh == null) {
			this.rh = { };
		}
		this.rh["$" + key] = value;
	}
	,getReserved: function(key) {
		if(this.rh == null) {
			return null;
		} else {
			return this.rh["$" + key];
		}
	}
	,existsReserved: function(key) {
		if(this.rh == null) {
			return false;
		}
		return this.rh.hasOwnProperty("$" + key);
	}
	,__class__: haxe_ds_StringMap
};
var haxe_io_BytesBuffer = function() {
	this.pos = 0;
	this.size = 0;
};
$hxClasses["haxe.io.BytesBuffer"] = haxe_io_BytesBuffer;
haxe_io_BytesBuffer.__name__ = true;
haxe_io_BytesBuffer.prototype = {
	buffer: null
	,view: null
	,u8: null
	,pos: null
	,size: null
	,addByte: function(byte) {
		if(this.pos == this.size) {
			this.grow(1);
		}
		this.view.setUint8(this.pos++,byte);
	}
	,addBytes: function(src,pos,len) {
		if(pos < 0 || len < 0 || pos + len > src.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		if(this.pos + len > this.size) {
			this.grow(len);
		}
		if(this.size == 0) {
			return;
		}
		var sub = new Uint8Array(src.b.buffer,src.b.byteOffset + pos,len);
		this.u8.set(sub,this.pos);
		this.pos += len;
	}
	,grow: function(delta) {
		var req = this.pos + delta;
		var nsize = this.size == 0 ? 16 : this.size;
		while(nsize < req) nsize = nsize * 3 >> 1;
		var nbuf = new ArrayBuffer(nsize);
		var nu8 = new Uint8Array(nbuf);
		if(this.size > 0) {
			nu8.set(this.u8);
		}
		this.size = nsize;
		this.buffer = nbuf;
		this.u8 = nu8;
		this.view = new DataView(this.buffer);
	}
	,getBytes: function() {
		if(this.size == 0) {
			return new haxe_io_Bytes(new ArrayBuffer(0));
		}
		var b = new haxe_io_Bytes(this.buffer);
		b.length = this.pos;
		return b;
	}
	,__class__: haxe_io_BytesBuffer
};
var haxe_io_Input = function() { };
$hxClasses["haxe.io.Input"] = haxe_io_Input;
haxe_io_Input.__name__ = true;
haxe_io_Input.prototype = {
	bigEndian: null
	,readByte: function() {
		throw new js__$Boot_HaxeError("Not implemented");
	}
	,readBytes: function(s,pos,len) {
		var k = len;
		var b = s.b;
		if(pos < 0 || len < 0 || pos + len > s.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		try {
			while(k > 0) {
				b[pos] = this.readByte();
				++pos;
				--k;
			}
		} catch( eof ) {
			var eof1 = (eof instanceof js__$Boot_HaxeError) ? eof.val : eof;
			if((eof1 instanceof haxe_io_Eof)) {
				var eof2 = eof1;
			} else {
				throw eof;
			}
		}
		return len - k;
	}
	,readFullBytes: function(s,pos,len) {
		while(len > 0) {
			var k = this.readBytes(s,pos,len);
			if(k == 0) {
				throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);
			}
			pos += k;
			len -= k;
		}
	}
	,read: function(nbytes) {
		var s = new haxe_io_Bytes(new ArrayBuffer(nbytes));
		var p = 0;
		while(nbytes > 0) {
			var k = this.readBytes(s,p,nbytes);
			if(k == 0) {
				throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);
			}
			p += k;
			nbytes -= k;
		}
		return s;
	}
	,readInt32: function() {
		var ch1 = this.readByte();
		var ch2 = this.readByte();
		var ch3 = this.readByte();
		var ch4 = this.readByte();
		if(this.bigEndian) {
			return ch4 | ch3 << 8 | ch2 << 16 | ch1 << 24;
		} else {
			return ch1 | ch2 << 8 | ch3 << 16 | ch4 << 24;
		}
	}
	,readString: function(len,encoding) {
		var b = new haxe_io_Bytes(new ArrayBuffer(len));
		this.readFullBytes(b,0,len);
		return b.getString(0,len,encoding);
	}
	,__class__: haxe_io_Input
};
var haxe_io_BytesInput = function(b,pos,len) {
	if(pos == null) {
		pos = 0;
	}
	if(len == null) {
		len = b.length - pos;
	}
	if(pos < 0 || len < 0 || pos + len > b.length) {
		throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
	}
	this.b = b.b;
	this.pos = pos;
	this.len = len;
	this.totlen = len;
};
$hxClasses["haxe.io.BytesInput"] = haxe_io_BytesInput;
haxe_io_BytesInput.__name__ = true;
haxe_io_BytesInput.__super__ = haxe_io_Input;
haxe_io_BytesInput.prototype = $extend(haxe_io_Input.prototype,{
	b: null
	,pos: null
	,len: null
	,totlen: null
	,set_position: function(p) {
		if(p < 0) {
			p = 0;
		} else if(p > this.totlen) {
			p = this.totlen;
		}
		this.len = this.totlen - p;
		return this.pos = p;
	}
	,readByte: function() {
		if(this.len == 0) {
			throw new js__$Boot_HaxeError(new haxe_io_Eof());
		}
		this.len--;
		return this.b[this.pos++];
	}
	,readBytes: function(buf,pos,len) {
		if(pos < 0 || len < 0 || pos + len > buf.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		if(this.len == 0 && len > 0) {
			throw new js__$Boot_HaxeError(new haxe_io_Eof());
		}
		if(this.len < len) {
			len = this.len;
		}
		var b1 = this.b;
		var b2 = buf.b;
		var _g = 0;
		var _g1 = len;
		while(_g < _g1) {
			var i = _g++;
			b2[pos + i] = b1[this.pos + i];
		}
		this.pos += len;
		this.len -= len;
		return len;
	}
	,__class__: haxe_io_BytesInput
});
var haxe_io_Output = function() { };
$hxClasses["haxe.io.Output"] = haxe_io_Output;
haxe_io_Output.__name__ = true;
haxe_io_Output.prototype = {
	bigEndian: null
	,writeByte: function(c) {
		throw new js__$Boot_HaxeError("Not implemented");
	}
	,writeBytes: function(s,pos,len) {
		if(pos < 0 || len < 0 || pos + len > s.length) {
			throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds);
		}
		var b = s.b;
		var k = len;
		while(k > 0) {
			this.writeByte(b[pos]);
			++pos;
			--k;
		}
		return len;
	}
	,write: function(s) {
		var l = s.length;
		var p = 0;
		while(l > 0) {
			var k = this.writeBytes(s,p,l);
			if(k == 0) {
				throw new js__$Boot_HaxeError(haxe_io_Error.Blocked);
			}
			p += k;
			l -= k;
		}
	}
	,writeFloat: function(x) {
		this.writeInt32(haxe_io_FPHelper.floatToI32(x));
	}
	,writeInt32: function(x) {
		if(this.bigEndian) {
			this.writeByte(x >>> 24);
			this.writeByte(x >> 16 & 255);
			this.writeByte(x >> 8 & 255);
			this.writeByte(x & 255);
		} else {
			this.writeByte(x & 255);
			this.writeByte(x >> 8 & 255);
			this.writeByte(x >> 16 & 255);
			this.writeByte(x >>> 24);
		}
	}
	,__class__: haxe_io_Output
};
var haxe_io_BytesOutput = function() {
	this.b = new haxe_io_BytesBuffer();
};
$hxClasses["haxe.io.BytesOutput"] = haxe_io_BytesOutput;
haxe_io_BytesOutput.__name__ = true;
haxe_io_BytesOutput.__super__ = haxe_io_Output;
haxe_io_BytesOutput.prototype = $extend(haxe_io_Output.prototype,{
	b: null
	,writeByte: function(c) {
		this.b.addByte(c);
	}
	,writeBytes: function(buf,pos,len) {
		this.b.addBytes(buf,pos,len);
		return len;
	}
	,getBytes: function() {
		return this.b.getBytes();
	}
	,__class__: haxe_io_BytesOutput
});
var haxe_io_Eof = function() {
};
$hxClasses["haxe.io.Eof"] = haxe_io_Eof;
haxe_io_Eof.__name__ = true;
haxe_io_Eof.prototype = {
	toString: function() {
		return "Eof";
	}
	,__class__: haxe_io_Eof
};
var haxe_io_Error = $hxEnums["haxe.io.Error"] = { __ename__ : true, __constructs__ : ["Blocked","Overflow","OutsideBounds","Custom"]
	,Blocked: {_hx_index:0,__enum__:"haxe.io.Error",toString:$estr}
	,Overflow: {_hx_index:1,__enum__:"haxe.io.Error",toString:$estr}
	,OutsideBounds: {_hx_index:2,__enum__:"haxe.io.Error",toString:$estr}
	,Custom: ($_=function(e) { return {_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}; },$_.__params__ = ["e"],$_)
};
var haxe_io_FPHelper = function() { };
$hxClasses["haxe.io.FPHelper"] = haxe_io_FPHelper;
haxe_io_FPHelper.__name__ = true;
haxe_io_FPHelper.floatToI32 = function(f) {
	haxe_io_FPHelper.helper.setFloat32(0,f,true);
	return haxe_io_FPHelper.helper.getInt32(0,true);
};
var haxe_io__$UInt8Array_UInt8Array_$Impl_$ = {};
$hxClasses["haxe.io._UInt8Array.UInt8Array_Impl_"] = haxe_io__$UInt8Array_UInt8Array_$Impl_$;
haxe_io__$UInt8Array_UInt8Array_$Impl_$.__name__ = true;
haxe_io__$UInt8Array_UInt8Array_$Impl_$.fromBytes = function(bytes,bytePos,length) {
	if(bytePos == null) {
		bytePos = 0;
	}
	if(length == null) {
		length = bytes.length - bytePos;
	}
	return new Uint8Array(bytes.b.bufferValue,bytePos,length);
};
var js__$Boot_HaxeError = function(val) {
	Error.call(this);
	this.val = val;
	if(Error.captureStackTrace) {
		Error.captureStackTrace(this,js__$Boot_HaxeError);
	}
};
$hxClasses["js._Boot.HaxeError"] = js__$Boot_HaxeError;
js__$Boot_HaxeError.__name__ = true;
js__$Boot_HaxeError.wrap = function(val) {
	if((val instanceof Error)) {
		return val;
	} else {
		return new js__$Boot_HaxeError(val);
	}
};
js__$Boot_HaxeError.__super__ = Error;
js__$Boot_HaxeError.prototype = $extend(Error.prototype,{
	val: null
	,__class__: js__$Boot_HaxeError
});
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = true;
js_Boot.getClass = function(o) {
	if((o instanceof Array) && o.__enum__ == null) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s += "\t";
				var tmp = n + "(";
				var _g = [];
				var _g1 = 0;
				var _g2 = con.__params__;
				while(_g1 < _g2.length) {
					var p = _g2[_g1];
					++_g1;
					_g.push(js_Boot.__string_rec(o[p],s));
				}
				return tmp + _g.join(",") + ")";
			} else {
				return n;
			}
		}
		if((o instanceof Array)) {
			var l = o.length;
			var i;
			var str = "[";
			s += "\t";
			var _g3 = 0;
			var _g11 = l;
			while(_g3 < _g11) {
				var i1 = _g3++;
				str += (i1 > 0 ? "," : "") + js_Boot.__string_rec(o[i1],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( e1 ) {
			var e2 = (e1 instanceof js__$Boot_HaxeError) ? e1.val : e1;
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var k = null;
		var str1 = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		for( var k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str1.length != 2) {
			str1 += ", \n";
		}
		str1 += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str1 += "\n" + s + "}";
		return str1;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) {
		return false;
	}
	if(cc == cl) {
		return true;
	}
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g = 0;
		var _g1 = intf.length;
		while(_g < _g1) {
			var i = _g++;
			var i1 = intf[i];
			if(i1 == cl || js_Boot.__interfLoop(i1,cl)) {
				return true;
			}
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		if((o instanceof Array)) {
			return o.__enum__ == null;
		} else {
			return false;
		}
		break;
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return true;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return ((o | 0) === o);
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if((o instanceof cl)) {
					return true;
				}
				if(js_Boot.__interfLoop(js_Boot.getClass(o),cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if((o instanceof cl)) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return $hxEnums[o.__enum__] == cl;
	}
};
js_Boot.__cast = function(o,t) {
	if(js_Boot.__instanceof(o,t)) {
		return o;
	} else {
		throw new js__$Boot_HaxeError("Cannot cast " + Std.string(o) + " to " + Std.string(t));
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var js_html__$ArrayBuffer_ArrayBufferCompat = function() { };
$hxClasses["js.html._ArrayBuffer.ArrayBufferCompat"] = js_html__$ArrayBuffer_ArrayBufferCompat;
js_html__$ArrayBuffer_ArrayBufferCompat.__name__ = true;
js_html__$ArrayBuffer_ArrayBufferCompat.sliceImpl = function(begin,end) {
	var u = new Uint8Array(this,begin,end == null ? null : end - begin);
	var resultArray = new Uint8Array(u.byteLength);
	resultArray.set(u);
	return resultArray.buffer;
};
var kha__$Assets_ImageList = function() {
	this.names = ["haxe128x128"];
	this.haxe128x128Description = { name : "haxe128x128", original_height : 128, original_width : 128, files : ["haxe128x128.png"], type : "image"};
	this.haxe128x128Name = "haxe128x128";
	this.haxe128x128 = null;
};
$hxClasses["kha._Assets.ImageList"] = kha__$Assets_ImageList;
kha__$Assets_ImageList.__name__ = true;
kha__$Assets_ImageList.prototype = {
	get: function(name) {
		return Reflect.field(this,name);
	}
	,haxe128x128: null
	,haxe128x128Name: null
	,haxe128x128Description: null
	,haxe128x128Load: function(done,failure) {
		var tmp;
		if(failure != null) {
			tmp = failure;
		} else {
			var f = haxe_Log.trace;
			var infos = { fileName : "kha/internal/AssetsBuilder.hx", lineNumber : 130, className : "kha._Assets.ImageList", methodName : "haxe128x128Load"};
			tmp = function(v) {
				f(v,infos);
			};
		}
		kha_Assets.loadImage("haxe128x128",function(image) {
			done();
		},tmp,{ fileName : "kha/internal/AssetsBuilder.hx", lineNumber : 130, className : "kha._Assets.ImageList", methodName : "haxe128x128Load"});
	}
	,haxe128x128Unload: function() {
		this.haxe128x128.unload();
		this.haxe128x128 = null;
	}
	,names: null
	,__class__: kha__$Assets_ImageList
};
var kha__$Assets_SoundList = function() {
	this.names = [];
};
$hxClasses["kha._Assets.SoundList"] = kha__$Assets_SoundList;
kha__$Assets_SoundList.__name__ = true;
kha__$Assets_SoundList.prototype = {
	get: function(name) {
		return Reflect.field(this,name);
	}
	,names: null
	,__class__: kha__$Assets_SoundList
};
var kha__$Assets_BlobList = function() {
	this.names = [];
};
$hxClasses["kha._Assets.BlobList"] = kha__$Assets_BlobList;
kha__$Assets_BlobList.__name__ = true;
kha__$Assets_BlobList.prototype = {
	get: function(name) {
		return Reflect.field(this,name);
	}
	,names: null
	,__class__: kha__$Assets_BlobList
};
var kha__$Assets_FontList = function() {
	this.names = [];
};
$hxClasses["kha._Assets.FontList"] = kha__$Assets_FontList;
kha__$Assets_FontList.__name__ = true;
kha__$Assets_FontList.prototype = {
	get: function(name) {
		return Reflect.field(this,name);
	}
	,names: null
	,__class__: kha__$Assets_FontList
};
var kha__$Assets_VideoList = function() {
	this.names = [];
};
$hxClasses["kha._Assets.VideoList"] = kha__$Assets_VideoList;
kha__$Assets_VideoList.__name__ = true;
kha__$Assets_VideoList.prototype = {
	get: function(name) {
		return Reflect.field(this,name);
	}
	,names: null
	,__class__: kha__$Assets_VideoList
};
var kha_Assets = function() { };
$hxClasses["kha.Assets"] = kha_Assets;
kha_Assets.__name__ = true;
kha_Assets.loadEverything = function(callback,filter,uncompressSoundsFilter,failed) {
	var fileCount = 0;
	var _g = 0;
	var _g1 = Type.getInstanceFields(kha__$Assets_BlobList);
	while(_g < _g1.length) {
		var blob = _g1[_g];
		++_g;
		if(StringTools.endsWith(blob,"Load")) {
			fileCount += 1;
		}
	}
	var _g2 = 0;
	var _g3 = Type.getInstanceFields(kha__$Assets_ImageList);
	while(_g2 < _g3.length) {
		var image = _g3[_g2];
		++_g2;
		if(StringTools.endsWith(image,"Load")) {
			fileCount += 1;
		}
	}
	var _g4 = 0;
	var _g5 = Type.getInstanceFields(kha__$Assets_SoundList);
	while(_g4 < _g5.length) {
		var sound = _g5[_g4];
		++_g4;
		if(StringTools.endsWith(sound,"Load")) {
			fileCount += 1;
		}
	}
	var _g6 = 0;
	var _g7 = Type.getInstanceFields(kha__$Assets_FontList);
	while(_g6 < _g7.length) {
		var font = _g7[_g6];
		++_g6;
		if(StringTools.endsWith(font,"Load")) {
			fileCount += 1;
		}
	}
	var _g8 = 0;
	var _g9 = Type.getInstanceFields(kha__$Assets_VideoList);
	while(_g8 < _g9.length) {
		var video = _g9[_g8];
		++_g8;
		if(StringTools.endsWith(video,"Load")) {
			fileCount += 1;
		}
	}
	if(fileCount == 0) {
		callback();
		return;
	}
	var filesLeft = fileCount;
	var onLoaded = function() {
		filesLeft -= 1;
		kha_Assets.progress = 1 - filesLeft / fileCount;
		if(filesLeft == 0) {
			callback();
		}
	};
	var _g10 = 0;
	var _g11 = Type.getInstanceFields(kha__$Assets_BlobList);
	while(_g10 < _g11.length) {
		var blob1 = _g11[_g10];
		++_g10;
		if(StringTools.endsWith(blob1,"Load")) {
			var name = HxOverrides.substr(blob1,0,blob1.length - 4);
			var description = Reflect.field(kha_Assets.blobs,name + "Description");
			if(filter == null || filter(description)) {
				(Reflect.field(kha_Assets.blobs,blob1))(onLoaded,function(err) {
					if(failed == null) {
						var f = haxe_Log.trace;
						var infos = { fileName : "kha/Assets.hx", lineNumber : 134, className : "kha.Assets", methodName : "loadEverything"};
					}
					onLoaded();
				});
			} else {
				onLoaded();
			}
		}
	}
	var _g12 = 0;
	var _g13 = Type.getInstanceFields(kha__$Assets_ImageList);
	while(_g12 < _g13.length) {
		var image1 = _g13[_g12];
		++_g12;
		if(StringTools.endsWith(image1,"Load")) {
			var name1 = HxOverrides.substr(image1,0,image1.length - 4);
			var description1 = Reflect.field(kha_Assets.images,name1 + "Description");
			if(filter == null || filter(description1)) {
				(Reflect.field(kha_Assets.images,image1))(onLoaded,function(err1) {
					if(failed == null) {
						var f1 = haxe_Log.trace;
						var infos1 = { fileName : "kha/Assets.hx", lineNumber : 150, className : "kha.Assets", methodName : "loadEverything"};
					}
					onLoaded();
				});
			} else {
				onLoaded();
			}
		}
	}
	var _g14 = 0;
	var _g15 = Type.getInstanceFields(kha__$Assets_SoundList);
	while(_g14 < _g15.length) {
		var sound1 = [_g15[_g14]];
		++_g14;
		if(StringTools.endsWith(sound1[0],"Load")) {
			var name2 = HxOverrides.substr(sound1[0],0,sound1[0].length - 4);
			var description2 = [Reflect.field(kha_Assets.sounds,name2 + "Description")];
			if(filter == null || filter(description2[0])) {
				(Reflect.field(kha_Assets.sounds,sound1[0]))((function(description3,sound2) {
					return function() {
						if(uncompressSoundsFilter == null || uncompressSoundsFilter(description3[0])) {
							var sound3 = Reflect.field(kha_Assets.sounds,sound2[0].substring(0,sound2[0].length - 4));
							sound3.uncompress(onLoaded);
						} else {
							onLoaded();
						}
					};
				})(description2,sound1),failed != null ? failed : (function(infos2,f2) {
					return function(v) {
						f2[0](v,infos2[0]);
					};
				})([{ fileName : "kha/Assets.hx", lineNumber : 172, className : "kha.Assets", methodName : "loadEverything"}],[haxe_Log.trace]));
			} else {
				onLoaded();
			}
		}
	}
	var _g16 = 0;
	var _g17 = Type.getInstanceFields(kha__$Assets_FontList);
	while(_g16 < _g17.length) {
		var font1 = _g17[_g16];
		++_g16;
		if(StringTools.endsWith(font1,"Load")) {
			var name3 = HxOverrides.substr(font1,0,font1.length - 4);
			var description4 = Reflect.field(kha_Assets.fonts,name3 + "Description");
			if(filter == null || filter(description4)) {
				(Reflect.field(kha_Assets.fonts,font1))(onLoaded,function(err2) {
					if(failed == null) {
						var f3 = haxe_Log.trace;
						var infos3 = { fileName : "kha/Assets.hx", lineNumber : 185, className : "kha.Assets", methodName : "loadEverything"};
					}
					onLoaded();
				});
			} else {
				onLoaded();
			}
		}
	}
	var _g18 = 0;
	var _g19 = Type.getInstanceFields(kha__$Assets_VideoList);
	while(_g18 < _g19.length) {
		var video1 = _g19[_g18];
		++_g18;
		if(StringTools.endsWith(video1,"Load")) {
			var name4 = HxOverrides.substr(video1,0,video1.length - 4);
			var description5 = Reflect.field(kha_Assets.videos,name4 + "Description");
			if(filter == null || filter(description5)) {
				(Reflect.field(kha_Assets.videos,video1))(onLoaded,function(err3) {
					if(failed == null) {
						var f4 = haxe_Log.trace;
						var infos4 = { fileName : "kha/Assets.hx", lineNumber : 200, className : "kha.Assets", methodName : "loadEverything"};
					}
					onLoaded();
				});
			} else {
				onLoaded();
			}
		}
	}
};
kha_Assets.loadImage = function(name,done,failed,pos) {
	var description = Reflect.field(kha_Assets.images,name + "Description");
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadImageFromDescription(description,function(image) {
		kha_Assets.images[name] = image;
		done(image);
	},tmp);
};
kha_Assets.loadImageFromPath = function(path,readable,done,failed,pos) {
	var description = { files : [path], readable : readable};
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadImageFromDescription(description,done,tmp);
};
kha_Assets.get_imageFormats = function() {
	return kha_LoaderImpl.getImageFormats();
};
kha_Assets.loadBlob = function(name,done,failed,pos) {
	var description = Reflect.field(kha_Assets.blobs,name + "Description");
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadBlobFromDescription(description,function(blob) {
		kha_Assets.blobs[name] = blob;
		done(blob);
	},tmp);
};
kha_Assets.loadBlobFromPath = function(path,done,failed,pos) {
	var description = { files : [path]};
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadBlobFromDescription(description,done,tmp);
};
kha_Assets.loadSound = function(name,done,failed,pos) {
	var description = Reflect.field(kha_Assets.sounds,name + "Description");
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadSoundFromDescription(description,function(sound) {
		kha_Assets.sounds[name] = sound;
		done(sound);
	},tmp);
	return;
};
kha_Assets.loadSoundFromPath = function(path,done,failed,pos) {
	var description = { files : [path]};
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadSoundFromDescription(description,done,tmp);
	return;
};
kha_Assets.get_soundFormats = function() {
	return kha_LoaderImpl.getSoundFormats();
};
kha_Assets.loadFont = function(name,done,failed,pos) {
	var description = Reflect.field(kha_Assets.fonts,name + "Description");
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadFontFromDescription(description,function(font) {
		kha_Assets.fonts[name] = font;
		done(font);
	},tmp);
	return;
};
kha_Assets.loadFontFromPath = function(path,done,failed,pos) {
	var description = { files : [path]};
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadFontFromDescription(description,done,tmp);
	return;
};
kha_Assets.get_fontFormats = function() {
	return ["ttf"];
};
kha_Assets.loadVideo = function(name,done,failed,pos) {
	var description = Reflect.field(kha_Assets.videos,name + "Description");
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadVideoFromDescription(description,function(video) {
		kha_Assets.videos[name] = video;
		done(video);
	},tmp);
	return;
};
kha_Assets.loadVideoFromPath = function(path,done,failed,pos) {
	var description = { files : [path]};
	var tmp;
	if(failed != null) {
		tmp = failed;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		tmp = function(v) {
			f(v,infos);
		};
	}
	kha_LoaderImpl.loadVideoFromDescription(description,done,tmp);
	return;
};
kha_Assets.get_videoFormats = function() {
	return kha_LoaderImpl.getVideoFormats();
};
kha_Assets.reporter = function(custom,pos) {
	if(custom != null) {
		return custom;
	} else {
		var f = haxe_Log.trace;
		var infos = pos;
		return function(v) {
			f(v,infos);
		};
	}
};
var kha_Canvas = function() { };
$hxClasses["kha.Canvas"] = kha_Canvas;
kha_Canvas.__name__ = true;
kha_Canvas.prototype = {
	get_g4: null
	,get_g2: null
	,get_g1: null
	,get_height: null
	,get_width: null
	,width: null
	,height: null
	,g1: null
	,g2: null
	,g4: null
	,__class__: kha_Canvas
};
var kha_Resource = function() { };
$hxClasses["kha.Resource"] = kha_Resource;
kha_Resource.__name__ = true;
kha_Resource.prototype = {
	unload: null
	,__class__: kha_Resource
};
var kha_Image = function() { };
$hxClasses["kha.Image"] = kha_Image;
kha_Image.__name__ = true;
kha_Image.__interfaces__ = [kha_Resource,kha_Canvas];
kha_Image.create = function(width,height,format,usage) {
	if(format == null) {
		format = kha_graphics4_TextureFormat.RGBA32;
	}
	if(usage == null) {
		usage = kha_graphics4_Usage.StaticUsage;
	}
	if(kha_SystemImpl.gl == null) {
		return new kha_CanvasImage(width,height,format,false);
	} else {
		return new kha_WebGLImage(width,height,format,false,0,1);
	}
};
kha_Image.create3D = function(width,height,depth,format,usage) {
	return null;
};
kha_Image.createRenderTarget = function(width,height,format,depthStencil,antiAliasingSamples,contextId) {
	if(contextId == null) {
		contextId = 0;
	}
	if(antiAliasingSamples == null) {
		antiAliasingSamples = 1;
	}
	if(depthStencil == null) {
		depthStencil = 0;
	}
	if(format == null) {
		format = kha_graphics4_TextureFormat.RGBA32;
	}
	if(kha_SystemImpl.gl == null) {
		return new kha_CanvasImage(width,height,format,true);
	} else {
		return new kha_WebGLImage(width,height,format,true,depthStencil,antiAliasingSamples);
	}
};
kha_Image.fromImage = function(image,readable) {
	if(kha_SystemImpl.gl == null) {
		var img = new kha_CanvasImage(image.width,image.height,kha_graphics4_TextureFormat.RGBA32,false);
		img.image = image;
		img.createTexture();
		return img;
	} else {
		var img1 = new kha_WebGLImage(image.width,image.height,kha_graphics4_TextureFormat.RGBA32,false,0,1);
		img1.image = image;
		img1.createTexture();
		return img1;
	}
};
kha_Image.fromBytes = function(bytes,width,height,format,usage) {
	if(format == null) {
		format = kha_graphics4_TextureFormat.RGBA32;
	}
	if(usage == null) {
		usage = kha_graphics4_Usage.StaticUsage;
	}
	if(kha_SystemImpl.gl != null) {
		var img = new kha_WebGLImage(width,height,format,false,0,1);
		img.image = img.bytesToArray(bytes);
		img.createTexture();
		return img;
	}
	return null;
};
kha_Image.fromBytes3D = function(bytes,width,height,depth,format,usage) {
	return null;
};
kha_Image.fromEncodedBytes = function(bytes,fileExtention,doneCallback,errorCallback,readable) {
	if(readable == null) {
		readable = false;
	}
	var dataUrl = "data:image;base64," + haxe_crypto_Base64.encode(bytes);
	var imageElement = js_Boot.__cast(window.document.createElement("img") , HTMLImageElement);
	imageElement.onload = function() {
		var tmp = kha_Image.fromImage(imageElement,readable);
		doneCallback(tmp);
	};
	imageElement.onerror = function() {
		errorCallback("Image was not created");
	};
	imageElement.src = dataUrl;
};
kha_Image.fromVideo = function(video) {
	if(kha_SystemImpl.gl == null) {
		var img = new kha_CanvasImage(video.element.videoWidth,video.element.videoHeight,kha_graphics4_TextureFormat.RGBA32,false);
		img.video = video.element;
		img.createTexture();
		return img;
	} else {
		var img1 = new kha_WebGLImage(video.element.videoWidth,video.element.videoHeight,kha_graphics4_TextureFormat.RGBA32,false,0,1);
		img1.video = video.element;
		img1.createTexture();
		return img1;
	}
};
kha_Image.get_maxSize = function() {
	if(kha_SystemImpl.gl == null) {
		return 8192;
	} else {
		return kha_SystemImpl.gl.getParameter(3379);
	}
};
kha_Image.get_nonPow2Supported = function() {
	return kha_SystemImpl.gl != null;
};
kha_Image.prototype = {
	isOpaque: function(x,y) {
		return false;
	}
	,at: function(x,y) {
		return -16777216;
	}
	,unload: function() {
	}
	,lock: function(level) {
		if(level == null) {
			level = 0;
		}
		return null;
	}
	,unlock: function() {
	}
	,getPixels: function() {
		return null;
	}
	,generateMipmaps: function(levels) {
	}
	,setMipmaps: function(mipmaps) {
	}
	,setDepthStencilFrom: function(image) {
	}
	,clear: function(x,y,z,width,height,depth,color) {
	}
	,width: null
	,get_width: function() {
		return 0;
	}
	,height: null
	,get_height: function() {
		return 0;
	}
	,depth: null
	,get_depth: function() {
		return 1;
	}
	,realWidth: null
	,get_realWidth: function() {
		return 0;
	}
	,realHeight: null
	,get_realHeight: function() {
		return 0;
	}
	,g1: null
	,get_g1: function() {
		return null;
	}
	,g2: null
	,get_g2: function() {
		return null;
	}
	,g4: null
	,get_g4: function() {
		return null;
	}
	,__class__: kha_Image
};
var kha_CanvasImage = function(width,height,format,renderTarget) {
	this.g2canvas = null;
	this.myWidth = width;
	this.myHeight = height;
	this.format = format;
	this.renderTarget = renderTarget;
	this.image = null;
	this.video = null;
	if(renderTarget) {
		this.createTexture();
	}
};
$hxClasses["kha.CanvasImage"] = kha_CanvasImage;
kha_CanvasImage.__name__ = true;
kha_CanvasImage.init = function() {
	var canvas = window.document.createElement("canvas");
	if(canvas != null) {
		kha_CanvasImage.context = canvas.getContext("2d");
		canvas.width = 2048;
		canvas.height = 2048;
		kha_CanvasImage.context.globalCompositeOperation = "copy";
	}
};
kha_CanvasImage.upperPowerOfTwo = function(v) {
	--v;
	v |= v >>> 1;
	v |= v >>> 2;
	v |= v >>> 4;
	v |= v >>> 8;
	v |= v >>> 16;
	return ++v;
};
kha_CanvasImage.__super__ = kha_Image;
kha_CanvasImage.prototype = $extend(kha_Image.prototype,{
	image: null
	,video: null
	,data: null
	,myWidth: null
	,myHeight: null
	,format: null
	,renderTarget: null
	,frameBuffer: null
	,graphics1: null
	,g2canvas: null
	,get_g1: function() {
		if(this.graphics1 == null) {
			this.graphics1 = new kha_graphics2_Graphics1(this);
		}
		return this.graphics1;
	}
	,get_g2: function() {
		if(this.g2canvas == null) {
			var canvas = window.document.createElement("canvas");
			this.image = canvas;
			var context = canvas.getContext("2d");
			canvas.width = this.get_width();
			canvas.height = this.get_height();
			this.g2canvas = new kha_js_CanvasGraphics(context);
		}
		return this.g2canvas;
	}
	,get_g4: function() {
		return null;
	}
	,get_width: function() {
		return this.myWidth;
	}
	,get_height: function() {
		return this.myHeight;
	}
	,get_realWidth: function() {
		return this.myWidth;
	}
	,get_realHeight: function() {
		return this.myHeight;
	}
	,isOpaque: function(x,y) {
		if(this.data == null) {
			if(kha_CanvasImage.context == null) {
				return true;
			} else {
				this.createImageData();
			}
		}
		return this.data.data[y * (this.image.width | 0) * 4 + x * 4 + 3] != 0;
	}
	,at: function(x,y) {
		if(this.data == null) {
			if(kha_CanvasImage.context == null) {
				return -16777216;
			} else {
				this.createImageData();
			}
		}
		return kha__$Color_Color_$Impl_$._new(this.data.data[y * (this.image.width | 0) * 4 + x * 4]);
	}
	,createImageData: function() {
		kha_CanvasImage.context.strokeStyle = "rgba(0,0,0,0)";
		kha_CanvasImage.context.fillStyle = "rgba(0,0,0,0)";
		kha_CanvasImage.context.fillRect(0,0,this.image.width,this.image.height);
		kha_CanvasImage.context.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,this.image.width,this.image.height);
		this.data = kha_CanvasImage.context.getImageData(0,0,this.image.width,this.image.height);
	}
	,texture: null
	,createTexture: function() {
		if(kha_SystemImpl.gl == null) {
			return;
		}
		this.texture = kha_SystemImpl.gl.createTexture();
		kha_SystemImpl.gl.bindTexture(3553,this.texture);
		kha_SystemImpl.gl.texParameteri(3553,10240,9729);
		kha_SystemImpl.gl.texParameteri(3553,10241,9729);
		kha_SystemImpl.gl.texParameteri(3553,10242,33071);
		kha_SystemImpl.gl.texParameteri(3553,10243,33071);
		if(this.renderTarget) {
			this.frameBuffer = kha_SystemImpl.gl.createFramebuffer();
			kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
			kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null);
			kha_SystemImpl.gl.framebufferTexture2D(36160,36064,3553,this.texture,0);
			kha_SystemImpl.gl.bindFramebuffer(36160,null);
		} else if(this.video != null) {
			kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.video);
		} else {
			kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.image);
		}
		kha_SystemImpl.gl.bindTexture(3553,null);
	}
	,set: function(stage) {
		kha_SystemImpl.gl.activeTexture(33984 + stage);
		kha_SystemImpl.gl.bindTexture(3553,this.texture);
		if(this.video != null) {
			kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.video);
		}
	}
	,bytes: null
	,lock: function(level) {
		if(level == null) {
			level = 0;
		}
		this.bytes = new haxe_io_Bytes(new ArrayBuffer(this.format == kha_graphics4_TextureFormat.RGBA32 ? 4 * this.get_width() * this.get_height() : this.get_width() * this.get_height()));
		return this.bytes;
	}
	,unlock: function() {
		if(kha_SystemImpl.gl != null) {
			this.texture = kha_SystemImpl.gl.createTexture();
			kha_SystemImpl.gl.bindTexture(3553,this.texture);
			kha_SystemImpl.gl.texParameteri(3553,10240,9729);
			kha_SystemImpl.gl.texParameteri(3553,10241,9729);
			kha_SystemImpl.gl.texParameteri(3553,10242,33071);
			kha_SystemImpl.gl.texParameteri(3553,10243,33071);
			kha_SystemImpl.gl.texImage2D(3553,0,6409,this.get_width(),this.get_height(),0,6409,5121,new Uint8Array(this.bytes.b.bufferValue));
			if(kha_SystemImpl.gl.getError() == 1282) {
				var rgbaBytes = new haxe_io_Bytes(new ArrayBuffer(this.get_width() * this.get_height() * 4));
				var _g = 0;
				var _g1 = this.get_height();
				while(_g < _g1) {
					var y = _g++;
					var _g2 = 0;
					var _g11 = this.get_width();
					while(_g2 < _g11) {
						var x = _g2++;
						var _this = this.bytes;
						var pos = y * this.get_width() + x;
						var value = _this.b[pos];
						var pos1 = y * this.get_width() * 4 + x * 4;
						rgbaBytes.b[pos1] = value;
						var pos2 = y * this.get_width() * 4 + x * 4 + 1;
						rgbaBytes.b[pos2] = value;
						var pos3 = y * this.get_width() * 4 + x * 4 + 2;
						rgbaBytes.b[pos3] = value;
						var pos4 = y * this.get_width() * 4 + x * 4 + 3;
						rgbaBytes.b[pos4] = 255;
					}
				}
				kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,new Uint8Array(rgbaBytes.b.bufferValue));
			}
			kha_SystemImpl.gl.bindTexture(3553,null);
			this.bytes = null;
		}
	}
	,unload: function() {
		this.image = null;
		this.video = null;
		this.data = null;
	}
	,__class__: kha_CanvasImage
});
var kha__$Color_Color_$Impl_$ = $hx_exports["kha"]["_Color"]["Color_Impl_"] = {};
$hxClasses["kha._Color.Color_Impl_"] = kha__$Color_Color_$Impl_$;
kha__$Color_Color_$Impl_$.__name__ = true;
kha__$Color_Color_$Impl_$.fromValue = function(value) {
	return kha__$Color_Color_$Impl_$._new(value);
};
kha__$Color_Color_$Impl_$.fromBytes = function(r,g,b,a) {
	if(a == null) {
		a = 255;
	}
	return kha__$Color_Color_$Impl_$._new(a << 24 | r << 16 | g << 8 | b);
};
kha__$Color_Color_$Impl_$.fromFloats = function(r,g,b,a) {
	if(a == null) {
		a = 1;
	}
	return kha__$Color_Color_$Impl_$._new((a * 255 | 0) << 24 | (r * 255 | 0) << 16 | (g * 255 | 0) << 8 | (b * 255 | 0));
};
kha__$Color_Color_$Impl_$.fromString = function(value) {
	if((value.length == 7 || value.length == 9) && value.charCodeAt(0) == 35) {
		var colorValue = Std.parseInt("0x" + HxOverrides.substr(value,1,null));
		if(value.length == 7) {
			colorValue += -16777216;
		}
		return kha__$Color_Color_$Impl_$._new(colorValue);
	} else {
		throw new js__$Boot_HaxeError("Invalid Color string: '" + value + "'");
	}
};
kha__$Color_Color_$Impl_$._new = function(value) {
	var this1 = value;
	return this1;
};
kha__$Color_Color_$Impl_$.get_value = function(this1) {
	return this1;
};
kha__$Color_Color_$Impl_$.set_value = function(this1,value) {
	this1 = value;
	return this1;
};
kha__$Color_Color_$Impl_$.get_Rb = function(this1) {
	return (this1 & 16711680) >>> 16;
};
kha__$Color_Color_$Impl_$.get_Gb = function(this1) {
	return (this1 & 65280) >>> 8;
};
kha__$Color_Color_$Impl_$.get_Bb = function(this1) {
	return this1 & 255;
};
kha__$Color_Color_$Impl_$.get_Ab = function(this1) {
	return this1 >>> 24;
};
kha__$Color_Color_$Impl_$.set_Rb = function(this1,i) {
	this1 = this1 >>> 24 << 24 | i << 16 | (this1 & 65280) >>> 8 << 8 | this1 & 255;
	return i;
};
kha__$Color_Color_$Impl_$.set_Gb = function(this1,i) {
	this1 = this1 >>> 24 << 24 | (this1 & 16711680) >>> 16 << 16 | i << 8 | this1 & 255;
	return i;
};
kha__$Color_Color_$Impl_$.set_Bb = function(this1,i) {
	this1 = this1 >>> 24 << 24 | (this1 & 16711680) >>> 16 << 16 | (this1 & 65280) >>> 8 << 8 | i;
	return i;
};
kha__$Color_Color_$Impl_$.set_Ab = function(this1,i) {
	this1 = i << 24 | (this1 & 16711680) >>> 16 << 16 | (this1 & 65280) >>> 8 << 8 | this1 & 255;
	return i;
};
kha__$Color_Color_$Impl_$.get_R = function(this1) {
	return ((this1 & 16711680) >>> 16) * 0.00392156862745098;
};
kha__$Color_Color_$Impl_$.get_G = function(this1) {
	return ((this1 & 65280) >>> 8) * 0.00392156862745098;
};
kha__$Color_Color_$Impl_$.get_B = function(this1) {
	return (this1 & 255) * 0.00392156862745098;
};
kha__$Color_Color_$Impl_$.get_A = function(this1) {
	return (this1 >>> 24) * 0.00392156862745098;
};
kha__$Color_Color_$Impl_$.set_R = function(this1,f) {
	this1 = ((this1 >>> 24) * 0.00392156862745098 * 255 | 0) << 24 | (f * 255 | 0) << 16 | (((this1 & 65280) >>> 8) * 0.00392156862745098 * 255 | 0) << 8 | ((this1 & 255) * 0.00392156862745098 * 255 | 0);
	return f;
};
kha__$Color_Color_$Impl_$.set_G = function(this1,f) {
	this1 = ((this1 >>> 24) * 0.00392156862745098 * 255 | 0) << 24 | (((this1 & 16711680) >>> 16) * 0.00392156862745098 * 255 | 0) << 16 | (f * 255 | 0) << 8 | ((this1 & 255) * 0.00392156862745098 * 255 | 0);
	return f;
};
kha__$Color_Color_$Impl_$.set_B = function(this1,f) {
	this1 = ((this1 >>> 24) * 0.00392156862745098 * 255 | 0) << 24 | (((this1 & 16711680) >>> 16) * 0.00392156862745098 * 255 | 0) << 16 | (((this1 & 65280) >>> 8) * 0.00392156862745098 * 255 | 0) << 8 | (f * 255 | 0);
	return f;
};
kha__$Color_Color_$Impl_$.set_A = function(this1,f) {
	this1 = (f * 255 | 0) << 24 | (((this1 & 16711680) >>> 16) * 0.00392156862745098 * 255 | 0) << 16 | (((this1 & 65280) >>> 8) * 0.00392156862745098 * 255 | 0) << 8 | ((this1 & 255) * 0.00392156862745098 * 255 | 0);
	return f;
};
var kha_CompilerDefines = function() { };
$hxClasses["kha.CompilerDefines"] = kha_CompilerDefines;
kha_CompilerDefines.__name__ = true;
var kha_Display = function() {
};
$hxClasses["kha.Display"] = kha_Display;
kha_Display.__name__ = true;
kha_Display.get_primary = function() {
	return kha_Display.instance;
};
kha_Display.get_all = function() {
	return [kha_Display.get_primary()];
};
kha_Display.prototype = {
	get_available: function() {
		return true;
	}
	,get_name: function() {
		return "Display";
	}
	,get_x: function() {
		return window.screen.left;
	}
	,get_y: function() {
		return window.screen.top;
	}
	,get_width: function() {
		return window.screen.width;
	}
	,get_height: function() {
		return window.screen.height;
	}
	,get_frequency: function() {
		return 60;
	}
	,get_pixelsPerInch: function() {
		var dpiElement = window.document.createElement("div");
		dpiElement.style.position = "absolute";
		dpiElement.style.width = "1in";
		dpiElement.style.height = "1in";
		dpiElement.style.left = "-100%";
		dpiElement.style.top = "-100%";
		window.document.body.appendChild(dpiElement);
		var dpi = dpiElement.offsetHeight;
		dpiElement.remove();
		return dpi;
	}
	,get_modes: function() {
		return [];
	}
	,__class__: kha_Display
};
var kha_DisplayMode = function(width,height,frequency,bitsPerPixel) {
	this.width = width;
	this.height = height;
	this.frequency = frequency;
	this.bitsPerPixel = bitsPerPixel;
};
$hxClasses["kha.DisplayMode"] = kha_DisplayMode;
kha_DisplayMode.__name__ = true;
kha_DisplayMode.prototype = {
	width: null
	,height: null
	,frequency: null
	,bitsPerPixel: null
	,__class__: kha_DisplayMode
};
var kha_Framebuffer = function($window,g1,g2,g4,g5) {
	this.window = $window;
	this.graphics1 = g1;
	this.graphics2 = g2;
	this.graphics4 = g4;
	this.graphics5 = g5;
};
$hxClasses["kha.Framebuffer"] = kha_Framebuffer;
kha_Framebuffer.__name__ = true;
kha_Framebuffer.__interfaces__ = [kha_Canvas];
kha_Framebuffer.prototype = {
	window: null
	,graphics1: null
	,graphics2: null
	,graphics4: null
	,graphics5: null
	,init: function(g1,g2,g4,g5) {
		this.graphics1 = g1;
		this.graphics2 = g2;
		this.graphics4 = g4;
		this.graphics5 = g5;
	}
	,get_g1: function() {
		return this.graphics1;
	}
	,get_g2: function() {
		return this.graphics2;
	}
	,get_g4: function() {
		return this.graphics4;
	}
	,get_g5: function() {
		return this.graphics5;
	}
	,width: null
	,get_width: function() {
		return kha_System.windowWidth(this.window);
	}
	,height: null
	,get_height: function() {
		return kha_System.windowHeight(this.window);
	}
	,__class__: kha_Framebuffer
};
var kha_FramebufferOptions = function(frequency,verticalSync,colorBufferBits,depthBufferBits,stencilBufferBits,samplesPerPixel) {
	if(samplesPerPixel == null) {
		samplesPerPixel = 1;
	}
	if(stencilBufferBits == null) {
		stencilBufferBits = 8;
	}
	if(depthBufferBits == null) {
		depthBufferBits = 16;
	}
	if(colorBufferBits == null) {
		colorBufferBits = 32;
	}
	if(verticalSync == null) {
		verticalSync = true;
	}
	if(frequency == null) {
		frequency = 60;
	}
	this.samplesPerPixel = 1;
	this.stencilBufferBits = 8;
	this.depthBufferBits = 16;
	this.colorBufferBits = 32;
	this.verticalSync = true;
	this.frequency = 60;
	this.frequency = frequency;
	this.verticalSync = verticalSync;
	this.colorBufferBits = colorBufferBits;
	this.depthBufferBits = depthBufferBits;
	this.stencilBufferBits = stencilBufferBits;
	this.samplesPerPixel = samplesPerPixel;
};
$hxClasses["kha.FramebufferOptions"] = kha_FramebufferOptions;
kha_FramebufferOptions.__name__ = true;
kha_FramebufferOptions.prototype = {
	frequency: null
	,verticalSync: null
	,colorBufferBits: null
	,depthBufferBits: null
	,stencilBufferBits: null
	,samplesPerPixel: null
	,__class__: kha_FramebufferOptions
};
var kha_AlignedQuad = function() {
};
$hxClasses["kha.AlignedQuad"] = kha_AlignedQuad;
kha_AlignedQuad.__name__ = true;
kha_AlignedQuad.prototype = {
	x0: null
	,y0: null
	,s0: null
	,t0: null
	,x1: null
	,y1: null
	,s1: null
	,t1: null
	,xadvance: null
	,__class__: kha_AlignedQuad
};
var kha_KravurImage = function(size,ascent,descent,lineGap,width,height,chars,pixels) {
	this.mySize = size;
	this.width = width;
	this.height = height;
	this.chars = chars;
	this.baseline = ascent;
	var _g = 0;
	while(_g < chars.length) {
		var char = chars[_g];
		++_g;
		char.yoff += this.baseline;
	}
	this.texture = kha_Image.create(width,height,kha_graphics4_TextureFormat.L8);
	var bytes = this.texture.lock();
	var pos = 0;
	var _g1 = 0;
	var _g2 = height;
	while(_g1 < _g2) {
		var y = _g1++;
		var _g11 = 0;
		var _g21 = width;
		while(_g11 < _g21) {
			var x = _g11++;
			var v = pixels.readU8(pos);
			bytes.b[pos] = v;
			++pos;
		}
	}
	this.texture.unlock();
};
$hxClasses["kha.KravurImage"] = kha_KravurImage;
kha_KravurImage.__name__ = true;
kha_KravurImage.prototype = {
	mySize: null
	,chars: null
	,texture: null
	,width: null
	,height: null
	,baseline: null
	,getTexture: function() {
		return this.texture;
	}
	,getBakedQuad: function(q,char_index,xpos,ypos) {
		if(char_index >= this.chars.length) {
			return null;
		}
		var ipw = 1.0 / this.width;
		var iph = 1.0 / this.height;
		var b = this.chars[char_index];
		if(b == null) {
			return null;
		}
		var round_x = Math.round(xpos + b.xoff);
		var round_y = Math.round(ypos + b.yoff);
		q.x0 = round_x;
		q.y0 = round_y;
		q.x1 = round_x + b.x1 - b.x0;
		q.y1 = round_y + b.y1 - b.y0;
		q.s0 = b.x0 * ipw;
		q.t0 = b.y0 * iph;
		q.s1 = b.x1 * ipw;
		q.t1 = b.y1 * iph;
		q.xadvance = b.xadvance;
		return q;
	}
	,getCharWidth: function(charIndex) {
		if(this.chars.length == 0) {
			return 0;
		}
		var offset = kha_KravurImage.charBlocks[0];
		if(charIndex < offset) {
			return this.chars[0].xadvance;
		}
		var _g = 1;
		var _g1 = kha_KravurImage.charBlocks.length / 2 | 0;
		while(_g < _g1) {
			var i = _g++;
			var prevEnd = kha_KravurImage.charBlocks[i * 2 - 1];
			var start = kha_KravurImage.charBlocks[i * 2];
			if(charIndex > start - 1) {
				offset += start - 1 - prevEnd;
			}
		}
		if(charIndex - offset >= this.chars.length) {
			return this.chars[0].xadvance;
		}
		return this.chars[charIndex - offset].xadvance;
	}
	,getHeight: function() {
		return this.mySize;
	}
	,stringWidth: function(string) {
		var str = new String(string);
		var width = 0;
		var _g = 0;
		var _g1 = str.length;
		while(_g < _g1) {
			var c = _g++;
			width += this.getCharWidth(HxOverrides.cca(str,c));
		}
		return width;
	}
	,charactersWidth: function(characters,start,length) {
		var width = 0;
		var _g = start;
		var _g1 = start + length;
		while(_g < _g1) {
			var i = _g++;
			width += this.getCharWidth(characters[i]);
		}
		return width;
	}
	,getBaselinePosition: function() {
		return this.baseline;
	}
	,__class__: kha_KravurImage
};
var kha_Kravur = function(blob) {
	this.images = new haxe_ds_IntMap();
	this.blob = blob;
};
$hxClasses["kha.Kravur"] = kha_Kravur;
kha_Kravur.__name__ = true;
kha_Kravur.__interfaces__ = [kha_Resource];
kha_Kravur.fromBytes = function(bytes) {
	return new kha_Kravur(kha_internal_BytesBlob.fromBytes(bytes));
};
kha_Kravur.prototype = {
	oldGlyphs: null
	,blob: null
	,images: null
	,_get: function(fontSize) {
		var glyphs = kha_graphics2_Graphics.fontGlyphs;
		if(glyphs != this.oldGlyphs) {
			this.oldGlyphs = glyphs;
			kha_KravurImage.charBlocks = [glyphs[0]];
			var nextChar = kha_KravurImage.charBlocks[0] + 1;
			var _g = 1;
			var _g1 = glyphs.length;
			while(_g < _g1) {
				var i = _g++;
				if(glyphs[i] != nextChar) {
					kha_KravurImage.charBlocks.push(glyphs[i - 1]);
					kha_KravurImage.charBlocks.push(glyphs[i]);
					nextChar = glyphs[i] + 1;
				} else {
					++nextChar;
				}
			}
			kha_KravurImage.charBlocks.push(glyphs[glyphs.length - 1]);
		}
		var imageIndex = fontSize * 10000 + glyphs.length;
		if(!this.images.h.hasOwnProperty(imageIndex)) {
			var width = 64;
			var height = 32;
			var this1 = new Array(glyphs.length);
			var baked = this1;
			var _g2 = 0;
			var _g11 = baked.length;
			while(_g2 < _g11) {
				var i1 = _g2++;
				baked[i1] = new kha_graphics2_truetype_Stbtt_$bakedchar();
			}
			var pixels = null;
			var status = -1;
			while(status <= 0) {
				if(height < width) {
					height *= 2;
				} else {
					width *= 2;
				}
				pixels = kha_internal_BytesBlob.alloc(width * height);
				status = kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap(this.blob,0,fontSize,pixels,width,height,glyphs,baked);
			}
			var info = new kha_graphics2_truetype_Stbtt_$fontinfo();
			kha_graphics2_truetype_StbTruetype.stbtt_InitFont(info,this.blob,0);
			var metrics = kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics(info);
			var scale = kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(info,fontSize);
			var ascent = Math.round(metrics.ascent * scale);
			var descent = Math.round(metrics.descent * scale);
			var lineGap = Math.round(metrics.lineGap * scale);
			var image = new kha_KravurImage(fontSize | 0,ascent,descent,lineGap,width,height,baked,pixels);
			this.images.h[imageIndex] = image;
			return image;
		}
		return this.images.h[imageIndex];
	}
	,height: function(fontSize) {
		return this._get(fontSize).getHeight();
	}
	,width: function(fontSize,str) {
		return this._get(fontSize).stringWidth(str);
	}
	,widthOfCharacters: function(fontSize,characters,start,length) {
		return this._get(fontSize).charactersWidth(characters,start,length);
	}
	,baseline: function(fontSize) {
		return this._get(fontSize).getBaselinePosition();
	}
	,unload: function() {
		this.blob = null;
		this.images = null;
	}
	,__class__: kha_Kravur
};
var kha_LoaderImpl = function() { };
$hxClasses["kha.LoaderImpl"] = kha_LoaderImpl;
kha_LoaderImpl.__name__ = true;
kha_LoaderImpl.getImageFormats = function() {
	return ["png","jpg","hdr"];
};
kha_LoaderImpl.loadImageFromDescription = function(desc,done,failed) {
	var readable = Object.prototype.hasOwnProperty.call(desc,"readable") && desc.readable;
	if(StringTools.endsWith(desc.files[0],".hdr")) {
		kha_LoaderImpl.loadBlobFromDescription(desc,function(blob) {
			var hdrImage = kha_internal_HdrFormat.parse(blob.toBytes());
			var tmp = kha_Image.fromBytes(haxe_io_Bytes.ofData(hdrImage.data.buffer),hdrImage.width,hdrImage.height,kha_graphics4_TextureFormat.RGBA128,readable ? kha_graphics4_Usage.DynamicUsage : kha_graphics4_Usage.StaticUsage);
			done(tmp);
		},failed);
	} else {
		var img = window.document.createElement("img");
		img.onerror = function(event) {
			failed({ url : desc.files[0], error : event});
		};
		img.onload = function(event1) {
			var tmp1 = kha_Image.fromImage(img,readable);
			done(tmp1);
		};
		img.src = desc.files[0];
		img.crossOrigin = "";
	}
};
kha_LoaderImpl.getSoundFormats = function() {
	var element = window.document.createElement("audio");
	var formats = [];
	if(element.canPlayType("audio/mp4") != "") {
		formats.push("mp4");
	}
	if(element.canPlayType("audio/mp3") != "") {
		formats.push("mp3");
	}
	if(kha_SystemImpl._hasWebAudio || element.canPlayType("audio/ogg") != "") {
		formats.push("ogg");
	}
	return formats;
};
kha_LoaderImpl.loadSoundFromDescription = function(desc,done,failed) {
	if(kha_SystemImpl._hasWebAudio) {
		var element = window.document.createElement("audio");
		if(element.canPlayType("audio/mp4") != "") {
			var _g = 0;
			var _g1 = desc.files.length;
			while(_g < _g1) {
				var i = _g++;
				var file = desc.files[i];
				if(StringTools.endsWith(file,".mp4")) {
					new kha_js_WebAudioSound(file,done,failed);
					return;
				}
			}
		}
		if(element.canPlayType("audio/mp3") != "") {
			var _g2 = 0;
			var _g11 = desc.files.length;
			while(_g2 < _g11) {
				var i1 = _g2++;
				var file1 = desc.files[i1];
				if(StringTools.endsWith(file1,".mp3")) {
					new kha_js_WebAudioSound(file1,done,failed);
					return;
				}
			}
		}
		var _g3 = 0;
		var _g12 = desc.files.length;
		while(_g3 < _g12) {
			var i2 = _g3++;
			var file2 = desc.files[i2];
			if(StringTools.endsWith(file2,".ogg")) {
				new kha_js_WebAudioSound(file2,done,failed);
				return;
			}
		}
	} else if(kha_SystemImpl.mobile) {
		var element1 = window.document.createElement("audio");
		if(element1.canPlayType("audio/mp4") != "") {
			var _g4 = 0;
			var _g13 = desc.files.length;
			while(_g4 < _g13) {
				var i3 = _g4++;
				var file3 = desc.files[i3];
				if(StringTools.endsWith(file3,".mp4")) {
					new kha_js_MobileWebAudioSound(file3,done,failed);
					return;
				}
			}
		}
		if(element1.canPlayType("audio/mp3") != "") {
			var _g5 = 0;
			var _g14 = desc.files.length;
			while(_g5 < _g14) {
				var i4 = _g5++;
				var file4 = desc.files[i4];
				if(StringTools.endsWith(file4,".mp3")) {
					new kha_js_MobileWebAudioSound(file4,done,failed);
					return;
				}
			}
		}
		var _g6 = 0;
		var _g15 = desc.files.length;
		while(_g6 < _g15) {
			var i5 = _g6++;
			var file5 = desc.files[i5];
			if(StringTools.endsWith(file5,".ogg")) {
				new kha_js_MobileWebAudioSound(file5,done,failed);
				return;
			}
		}
	} else {
		new kha_js_Sound(desc.files,done,failed);
	}
};
kha_LoaderImpl.getVideoFormats = function() {
	return ["mp4","webm"];
};
kha_LoaderImpl.loadVideoFromDescription = function(desc,done,failed) {
	kha_js_Video.fromFile(desc.files,done);
};
kha_LoaderImpl.loadRemote = function(desc,done,failed) {
	var request = new XMLHttpRequest();
	request.open("GET",desc.files[0],true);
	request.responseType = "arraybuffer";
	request.onreadystatechange = function() {
		if(request.readyState != 4) {
			return;
		}
		if(request.status >= 200 && request.status < 400 || request.status == 0 && request.statusText == "") {
			var bytes = null;
			var arrayBuffer = request.response;
			if(arrayBuffer != null) {
				var byteArray = new Uint8Array(arrayBuffer);
				bytes = haxe_io_Bytes.ofData(byteArray);
			} else if(request.responseBody != null) {
				var data = VBArray(request.responseBody).toArray();
				bytes = new haxe_io_Bytes(new ArrayBuffer(data.length));
				var _g = 0;
				var _g1 = data.length;
				while(_g < _g1) {
					var i = _g++;
					bytes.b[i] = data[i];
				}
			} else {
				failed({ url : desc.files[0]});
				return;
			}
			done(new kha_internal_BytesBlob(bytes));
		} else {
			failed({ url : desc.files[0]});
		}
	};
	request.send(null);
};
kha_LoaderImpl.loadBlobFromDescription = function(desc,done,failed) {
	kha_LoaderImpl.loadRemote(desc,done,failed);
};
kha_LoaderImpl.loadFontFromDescription = function(desc,done,failed) {
	kha_LoaderImpl.loadBlobFromDescription(desc,function(blob) {
		done(new kha_Kravur(blob));
	},failed);
};
var kha_TimeTask = function() {
};
$hxClasses["kha.TimeTask"] = kha_TimeTask;
kha_TimeTask.__name__ = true;
kha_TimeTask.prototype = {
	task: null
	,start: null
	,period: null
	,duration: null
	,next: null
	,id: null
	,groupId: null
	,active: null
	,paused: null
	,__class__: kha_TimeTask
};
var kha_FrameTask = function(task,priority,id) {
	this.task = task;
	this.priority = priority;
	this.id = id;
	this.active = true;
	this.paused = false;
};
$hxClasses["kha.FrameTask"] = kha_FrameTask;
kha_FrameTask.__name__ = true;
kha_FrameTask.prototype = {
	task: null
	,priority: null
	,id: null
	,active: null
	,paused: null
	,__class__: kha_FrameTask
};
var kha_Scheduler = function() { };
$hxClasses["kha.Scheduler"] = kha_Scheduler;
kha_Scheduler.__name__ = true;
kha_Scheduler.init = function() {
	kha_Scheduler.deltas = [];
	var _g = 0;
	var _g1 = kha_Scheduler.DIF_COUNT;
	while(_g < _g1) {
		var i = _g++;
		kha_Scheduler.deltas[i] = 0;
	}
	kha_Scheduler.stopped = true;
	kha_Scheduler.frame_tasks_sorted = true;
	kha_Scheduler.current = kha_Scheduler.lastTime = kha_Scheduler.realTime();
	kha_Scheduler.currentFrameTaskId = 0;
	kha_Scheduler.currentTimeTaskId = 0;
	kha_Scheduler.currentGroupId = 0;
	kha_Scheduler.timeTasks = [];
	kha_Scheduler.pausedTimeTasks = [];
	kha_Scheduler.outdatedTimeTasks = [];
	kha_Scheduler.timeTasksScratchpad = [];
	kha_Scheduler.frameTasks = [];
	kha_Scheduler.toDeleteFrame = [];
};
kha_Scheduler.start = function(restartTimers) {
	if(restartTimers == null) {
		restartTimers = false;
	}
	kha_Scheduler.vsync = kha_Window.get(0).get_vSynced();
	var hz = kha_Display.get_primary().get_frequency();
	if(hz >= 57 && hz <= 63) {
		hz = 60;
	}
	kha_Scheduler.onedifhz = 1.0 / hz;
	kha_Scheduler.stopped = false;
	kha_Scheduler.resetTime();
	kha_Scheduler.lastTime = kha_Scheduler.realTime() - kha_Scheduler.startTime;
	var _g = 0;
	var _g1 = kha_Scheduler.DIF_COUNT;
	while(_g < _g1) {
		var i = _g++;
		kha_Scheduler.deltas[i] = 0;
	}
	if(restartTimers) {
		var _g2 = 0;
		var _g3 = kha_Scheduler.timeTasks;
		while(_g2 < _g3.length) {
			var timeTask = _g3[_g2];
			++_g2;
			timeTask.paused = false;
		}
		var _g4 = 0;
		var _g5 = kha_Scheduler.frameTasks;
		while(_g4 < _g5.length) {
			var frameTask = _g5[_g4];
			++_g4;
			frameTask.paused = false;
		}
	}
};
kha_Scheduler.stop = function() {
	kha_Scheduler.stopped = true;
};
kha_Scheduler.isStopped = function() {
	return kha_Scheduler.stopped;
};
kha_Scheduler.warpTimeTasksBack = function(time,tasks) {
	var _g = 0;
	while(_g < tasks.length) {
		var timeTask = tasks[_g];
		++_g;
		if(timeTask.start >= time) {
			timeTask.next = timeTask.start;
		} else if(timeTask.period > 0) {
			var sinceStart = time - timeTask.start;
			var times = Math.ceil(sinceStart / timeTask.period);
			timeTask.next = timeTask.start + times * timeTask.period;
		}
	}
};
kha_Scheduler.warp = function(time) {
	if(time < kha_Scheduler.lastTime) {
		kha_Scheduler.current = time;
		kha_Scheduler.lastTime = time;
		kha_Scheduler.warpTimeTasksBack(time,kha_Scheduler.outdatedTimeTasks);
		kha_Scheduler.warpTimeTasksBack(time,kha_Scheduler.timeTasks);
		var _g = 0;
		var _g1 = kha_Scheduler.outdatedTimeTasks;
		while(_g < _g1.length) {
			var task = _g1[_g];
			++_g;
			if(task.next >= time) {
				kha_Scheduler.timeTasksScratchpad.push(task);
			}
		}
		var _g2 = 0;
		var _g3 = kha_Scheduler.timeTasksScratchpad;
		while(_g2 < _g3.length) {
			var task1 = _g3[_g2];
			++_g2;
			HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,task1);
		}
		var _g4 = 0;
		var _g5 = kha_Scheduler.timeTasksScratchpad;
		while(_g4 < _g5.length) {
			var task2 = _g5[_g4];
			++_g4;
			kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,task2);
		}
		while(kha_Scheduler.timeTasksScratchpad.length > 0) HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);
	} else if(time > kha_Scheduler.lastTime) {
		kha_Scheduler.startTime -= time - kha_Scheduler.lastTime;
		kha_Scheduler.current = time;
		kha_Scheduler.lastTime = time;
		kha_Scheduler.executeTimeTasks(time);
	}
};
kha_Scheduler.executeFrame = function() {
	var now = kha_Scheduler.realTime() - kha_Scheduler.startTime;
	var delta = now - kha_Scheduler.lastTime;
	var frameEnd = kha_Scheduler.current;
	if(delta >= 0) {
		if(kha_network_Session.the() == null) {
			if(delta > kha_Scheduler.maxframetime) {
				kha_Scheduler.startTime += delta - kha_Scheduler.maxframetime;
				delta = kha_Scheduler.maxframetime;
				frameEnd += delta;
			} else if(kha_Scheduler.vsync) {
				var realdif = kha_Scheduler.onedifhz;
				while(realdif < delta - kha_Scheduler.onedifhz) realdif += kha_Scheduler.onedifhz;
				delta = realdif;
				var _g = 0;
				var _g1 = kha_Scheduler.DIF_COUNT - 2;
				while(_g < _g1) {
					var i = _g++;
					delta += kha_Scheduler.deltas[i];
					kha_Scheduler.deltas[i] = kha_Scheduler.deltas[i + 1];
				}
				delta += kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT - 2];
				delta /= kha_Scheduler.DIF_COUNT;
				kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT - 2] = realdif;
				frameEnd += delta;
			} else {
				var _g2 = 0;
				var _g11 = kha_Scheduler.DIF_COUNT - 1;
				while(_g2 < _g11) {
					var i1 = _g2++;
					kha_Scheduler.deltas[i1] = kha_Scheduler.deltas[i1 + 1];
				}
				kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT - 1] = delta;
				var next = 0;
				var _g21 = 0;
				var _g3 = kha_Scheduler.DIF_COUNT;
				while(_g21 < _g3) {
					var i2 = _g21++;
					next += kha_Scheduler.deltas[i2];
				}
				next /= kha_Scheduler.DIF_COUNT;
				frameEnd += next;
			}
		} else {
			frameEnd += delta;
		}
		kha_Scheduler.lastTime = frameEnd;
		if(!kha_Scheduler.stopped) {
			kha_Scheduler.current = frameEnd;
		}
		var _g4 = 0;
		var _g12 = kha_Scheduler.pausedTimeTasks;
		while(_g4 < _g12.length) {
			var pausedTask = _g12[_g4];
			++_g4;
			pausedTask.next += delta;
		}
		if(kha_Scheduler.stopped) {
			var _g22 = 0;
			var _g31 = kha_Scheduler.timeTasks;
			while(_g22 < _g31.length) {
				var timeTask = _g31[_g22];
				++_g22;
				timeTask.next += delta;
			}
		}
		kha_Scheduler.executeTimeTasks(frameEnd);
		var _g23 = 0;
		var _g32 = kha_Scheduler.outdatedTimeTasks;
		while(_g23 < _g32.length) {
			var task = _g32[_g23];
			++_g23;
			if(task.next < frameEnd - 10.0) {
				kha_Scheduler.timeTasksScratchpad.push(task);
			}
		}
		var _g41 = 0;
		var _g5 = kha_Scheduler.timeTasksScratchpad;
		while(_g41 < _g5.length) {
			var task1 = _g5[_g41];
			++_g41;
			HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,task1);
		}
		while(kha_Scheduler.timeTasksScratchpad.length > 0) HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);
	}
	kha_Scheduler.sortFrameTasks();
	var _g6 = 0;
	var _g13 = kha_Scheduler.frameTasks;
	while(_g6 < _g13.length) {
		var frameTask = _g13[_g6];
		++_g6;
		if(!kha_Scheduler.stopped && !frameTask.paused && frameTask.active) {
			if(!frameTask.task()) {
				frameTask.active = false;
			}
		}
	}
	var _g24 = 0;
	var _g33 = kha_Scheduler.frameTasks;
	while(_g24 < _g33.length) {
		var frameTask1 = _g33[_g24];
		++_g24;
		if(!frameTask1.active) {
			kha_Scheduler.toDeleteFrame.push(frameTask1);
		}
	}
	while(kha_Scheduler.toDeleteFrame.length > 0) HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop());
};
kha_Scheduler.executeTimeTasks = function(until) {
	while(kha_Scheduler.timeTasks.length > 0) {
		kha_Scheduler.activeTimeTask = kha_Scheduler.timeTasks[0];
		if(kha_Scheduler.activeTimeTask.next <= until) {
			kha_Scheduler.activeTimeTask.next += kha_Scheduler.activeTimeTask.period;
			HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);
			if(kha_Scheduler.activeTimeTask.active && kha_Scheduler.activeTimeTask.task()) {
				if(kha_Scheduler.activeTimeTask.period > 0 && (kha_Scheduler.activeTimeTask.duration == 0 || kha_Scheduler.activeTimeTask.duration >= kha_Scheduler.activeTimeTask.start + kha_Scheduler.activeTimeTask.next)) {
					kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);
				} else {
					kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until);
				}
			} else {
				kha_Scheduler.activeTimeTask.active = false;
				kha_Scheduler.archiveTimeTask(kha_Scheduler.activeTimeTask,until);
			}
		} else {
			break;
		}
	}
	kha_Scheduler.activeTimeTask = null;
};
kha_Scheduler.archiveTimeTask = function(timeTask,frameEnd) {
};
kha_Scheduler.time = function() {
	return kha_Scheduler.current;
};
kha_Scheduler.realTime = function() {
	return kha_System.get_time();
};
kha_Scheduler.resetTime = function() {
	var now = kha_System.get_time();
	var dif = now - kha_Scheduler.startTime;
	kha_Scheduler.startTime = now;
	var _g = 0;
	var _g1 = kha_Scheduler.timeTasks;
	while(_g < _g1.length) {
		var timeTask = _g1[_g];
		++_g;
		timeTask.start -= dif;
		timeTask.next -= dif;
	}
	var _g2 = 0;
	var _g3 = kha_Scheduler.DIF_COUNT;
	while(_g2 < _g3) {
		var i = _g2++;
		kha_Scheduler.deltas[i] = 0;
	}
	kha_Scheduler.current = 0;
	kha_Scheduler.lastTime = 0;
};
kha_Scheduler.addBreakableFrameTask = function(task,priority) {
	kha_Scheduler.frameTasks.push(new kha_FrameTask(task,priority,++kha_Scheduler.currentFrameTaskId));
	kha_Scheduler.frame_tasks_sorted = false;
	return kha_Scheduler.currentFrameTaskId;
};
kha_Scheduler.addFrameTask = function(task,priority) {
	return kha_Scheduler.addBreakableFrameTask(function() {
		task();
		return true;
	},priority);
};
kha_Scheduler.pauseFrameTask = function(id,paused) {
	var _g = 0;
	var _g1 = kha_Scheduler.frameTasks;
	while(_g < _g1.length) {
		var frameTask = _g1[_g];
		++_g;
		if(frameTask.id == id) {
			frameTask.paused = paused;
			break;
		}
	}
};
kha_Scheduler.removeFrameTask = function(id) {
	var _g = 0;
	var _g1 = kha_Scheduler.frameTasks;
	while(_g < _g1.length) {
		var frameTask = _g1[_g];
		++_g;
		if(frameTask.id == id) {
			frameTask.active = false;
			break;
		}
	}
};
kha_Scheduler.generateGroupId = function() {
	return ++kha_Scheduler.currentGroupId;
};
kha_Scheduler.addBreakableTimeTaskToGroup = function(groupId,task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	var t = new kha_TimeTask();
	t.active = true;
	t.task = task;
	t.id = ++kha_Scheduler.currentTimeTaskId;
	t.groupId = groupId;
	t.start = kha_Scheduler.current + start;
	t.period = 0;
	if(period != 0) {
		t.period = period;
	}
	t.duration = 0;
	if(duration != 0) {
		t.duration = t.start + duration;
	}
	t.next = t.start;
	kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,t);
	return t.id;
};
kha_Scheduler.addTimeTaskToGroup = function(groupId,task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	return kha_Scheduler.addBreakableTimeTaskToGroup(groupId,function() {
		task();
		return true;
	},start,period,duration);
};
kha_Scheduler.addBreakableTimeTask = function(task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	return kha_Scheduler.addBreakableTimeTaskToGroup(0,task,start,period,duration);
};
kha_Scheduler.addTimeTask = function(task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	return kha_Scheduler.addTimeTaskToGroup(0,task,start,period,duration);
};
kha_Scheduler.getTimeTask = function(id) {
	if(kha_Scheduler.activeTimeTask != null && kha_Scheduler.activeTimeTask.id == id) {
		return kha_Scheduler.activeTimeTask;
	}
	var _g = 0;
	var _g1 = kha_Scheduler.timeTasks;
	while(_g < _g1.length) {
		var timeTask = _g1[_g];
		++_g;
		if(timeTask.id == id) {
			return timeTask;
		}
	}
	var _g2 = 0;
	var _g3 = kha_Scheduler.pausedTimeTasks;
	while(_g2 < _g3.length) {
		var timeTask1 = _g3[_g2];
		++_g2;
		if(timeTask1.id == id) {
			return timeTask1;
		}
	}
	return null;
};
kha_Scheduler.pauseTimeTask = function(id,paused) {
	var timeTask = kha_Scheduler.getTimeTask(id);
	if(timeTask != null) {
		kha_Scheduler.pauseRunningTimeTask(timeTask,paused);
	}
	if(kha_Scheduler.activeTimeTask != null && kha_Scheduler.activeTimeTask.id == id) {
		kha_Scheduler.activeTimeTask.paused = paused;
	}
};
kha_Scheduler.pauseRunningTimeTask = function(timeTask,paused) {
	timeTask.paused = paused;
	if(paused) {
		HxOverrides.remove(kha_Scheduler.timeTasks,timeTask);
		kha_Scheduler.pausedTimeTasks.push(timeTask);
	} else {
		kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,timeTask);
		HxOverrides.remove(kha_Scheduler.pausedTimeTasks,timeTask);
	}
};
kha_Scheduler.pauseTimeTasks = function(groupId,paused) {
	var _g = 0;
	var _g1 = kha_Scheduler.timeTasks;
	while(_g < _g1.length) {
		var timeTask = _g1[_g];
		++_g;
		if(timeTask.groupId == groupId) {
			kha_Scheduler.pauseRunningTimeTask(timeTask,paused);
		}
	}
	if(kha_Scheduler.activeTimeTask != null && kha_Scheduler.activeTimeTask.groupId == groupId) {
		kha_Scheduler.activeTimeTask.paused = paused;
	}
};
kha_Scheduler.removeTimeTask = function(id) {
	var timeTask = kha_Scheduler.getTimeTask(id);
	if(timeTask != null) {
		timeTask.active = false;
		HxOverrides.remove(kha_Scheduler.timeTasks,timeTask);
	}
};
kha_Scheduler.removeTimeTasks = function(groupId) {
	var _g = 0;
	var _g1 = kha_Scheduler.timeTasks;
	while(_g < _g1.length) {
		var timeTask = _g1[_g];
		++_g;
		if(timeTask.groupId == groupId) {
			timeTask.active = false;
			kha_Scheduler.timeTasksScratchpad.push(timeTask);
		}
	}
	var _g2 = 0;
	var _g3 = kha_Scheduler.timeTasksScratchpad;
	while(_g2 < _g3.length) {
		var timeTask1 = _g3[_g2];
		++_g2;
		HxOverrides.remove(kha_Scheduler.timeTasks,timeTask1);
	}
	while(kha_Scheduler.timeTasksScratchpad.length > 0) HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);
	if(kha_Scheduler.activeTimeTask != null && kha_Scheduler.activeTimeTask.groupId == groupId) {
		kha_Scheduler.activeTimeTask.active = false;
	}
};
kha_Scheduler.numTasksInSchedule = function() {
	return kha_Scheduler.timeTasks.length + kha_Scheduler.frameTasks.length;
};
kha_Scheduler.insertSorted = function(list,task) {
	var _g = 0;
	var _g1 = list.length;
	while(_g < _g1) {
		var i = _g++;
		if(list[i].next > task.next) {
			list.splice(i,0,task);
			return;
		}
	}
	list.push(task);
};
kha_Scheduler.sortFrameTasks = function() {
	if(kha_Scheduler.frame_tasks_sorted) {
		return;
	}
	kha_Scheduler.frameTasks.sort(function(a,b) {
		if(a.priority > b.priority) {
			return 1;
		} else if(a.priority < b.priority) {
			return -1;
		} else {
			return 0;
		}
	});
	kha_Scheduler.frame_tasks_sorted = true;
};
var kha_ScreenRotation = $hxEnums["kha.ScreenRotation"] = { __ename__ : true, __constructs__ : ["RotationNone","Rotation90","Rotation180","Rotation270"]
	,RotationNone: {_hx_index:0,__enum__:"kha.ScreenRotation",toString:$estr}
	,Rotation90: {_hx_index:1,__enum__:"kha.ScreenRotation",toString:$estr}
	,Rotation180: {_hx_index:2,__enum__:"kha.ScreenRotation",toString:$estr}
	,Rotation270: {_hx_index:3,__enum__:"kha.ScreenRotation",toString:$estr}
};
var kha_Shaders = function() { };
$hxClasses["kha.Shaders"] = kha_Shaders;
kha_Shaders.__name__ = true;
kha_Shaders.init = function() {
	var blobs = [];
	var data = Reflect.field(kha_Shaders,"painter_colored_fragData" + 0);
	var bytes = haxe_Unserializer.run(data);
	blobs.push(kha_internal_BytesBlob.fromBytes(bytes));
	var data1 = Reflect.field(kha_Shaders,"painter_colored_fragData" + 1);
	var bytes1 = haxe_Unserializer.run(data1);
	blobs.push(kha_internal_BytesBlob.fromBytes(bytes1));
	var data2 = Reflect.field(kha_Shaders,"painter_colored_fragData" + 2);
	var bytes2 = haxe_Unserializer.run(data2);
	blobs.push(kha_internal_BytesBlob.fromBytes(bytes2));
	kha_Shaders.painter_colored_frag = new kha_graphics4_FragmentShader(blobs,["painter-colored.frag.essl","painter-colored-relaxed.frag.essl","painter-colored-webgl2.frag.essl"]);
	var blobs1 = [];
	var data3 = Reflect.field(kha_Shaders,"painter_colored_vertData" + 0);
	var bytes3 = haxe_Unserializer.run(data3);
	blobs1.push(kha_internal_BytesBlob.fromBytes(bytes3));
	var data4 = Reflect.field(kha_Shaders,"painter_colored_vertData" + 1);
	var bytes4 = haxe_Unserializer.run(data4);
	blobs1.push(kha_internal_BytesBlob.fromBytes(bytes4));
	var data5 = Reflect.field(kha_Shaders,"painter_colored_vertData" + 2);
	var bytes5 = haxe_Unserializer.run(data5);
	blobs1.push(kha_internal_BytesBlob.fromBytes(bytes5));
	kha_Shaders.painter_colored_vert = new kha_graphics4_VertexShader(blobs1,["painter-colored.vert.essl","painter-colored-relaxed.vert.essl","painter-colored-webgl2.vert.essl"]);
	var blobs2 = [];
	var data6 = Reflect.field(kha_Shaders,"painter_image_fragData" + 0);
	var bytes6 = haxe_Unserializer.run(data6);
	blobs2.push(kha_internal_BytesBlob.fromBytes(bytes6));
	var data7 = Reflect.field(kha_Shaders,"painter_image_fragData" + 1);
	var bytes7 = haxe_Unserializer.run(data7);
	blobs2.push(kha_internal_BytesBlob.fromBytes(bytes7));
	var data8 = Reflect.field(kha_Shaders,"painter_image_fragData" + 2);
	var bytes8 = haxe_Unserializer.run(data8);
	blobs2.push(kha_internal_BytesBlob.fromBytes(bytes8));
	kha_Shaders.painter_image_frag = new kha_graphics4_FragmentShader(blobs2,["painter-image.frag.essl","painter-image-relaxed.frag.essl","painter-image-webgl2.frag.essl"]);
	var blobs3 = [];
	var data9 = Reflect.field(kha_Shaders,"painter_image_vertData" + 0);
	var bytes9 = haxe_Unserializer.run(data9);
	blobs3.push(kha_internal_BytesBlob.fromBytes(bytes9));
	var data10 = Reflect.field(kha_Shaders,"painter_image_vertData" + 1);
	var bytes10 = haxe_Unserializer.run(data10);
	blobs3.push(kha_internal_BytesBlob.fromBytes(bytes10));
	var data11 = Reflect.field(kha_Shaders,"painter_image_vertData" + 2);
	var bytes11 = haxe_Unserializer.run(data11);
	blobs3.push(kha_internal_BytesBlob.fromBytes(bytes11));
	kha_Shaders.painter_image_vert = new kha_graphics4_VertexShader(blobs3,["painter-image.vert.essl","painter-image-relaxed.vert.essl","painter-image-webgl2.vert.essl"]);
	var blobs4 = [];
	var data12 = Reflect.field(kha_Shaders,"painter_text_fragData" + 0);
	var bytes12 = haxe_Unserializer.run(data12);
	blobs4.push(kha_internal_BytesBlob.fromBytes(bytes12));
	var data13 = Reflect.field(kha_Shaders,"painter_text_fragData" + 1);
	var bytes13 = haxe_Unserializer.run(data13);
	blobs4.push(kha_internal_BytesBlob.fromBytes(bytes13));
	var data14 = Reflect.field(kha_Shaders,"painter_text_fragData" + 2);
	var bytes14 = haxe_Unserializer.run(data14);
	blobs4.push(kha_internal_BytesBlob.fromBytes(bytes14));
	kha_Shaders.painter_text_frag = new kha_graphics4_FragmentShader(blobs4,["painter-text.frag.essl","painter-text-relaxed.frag.essl","painter-text-webgl2.frag.essl"]);
	var blobs5 = [];
	var data15 = Reflect.field(kha_Shaders,"painter_text_vertData" + 0);
	var bytes15 = haxe_Unserializer.run(data15);
	blobs5.push(kha_internal_BytesBlob.fromBytes(bytes15));
	var data16 = Reflect.field(kha_Shaders,"painter_text_vertData" + 1);
	var bytes16 = haxe_Unserializer.run(data16);
	blobs5.push(kha_internal_BytesBlob.fromBytes(bytes16));
	var data17 = Reflect.field(kha_Shaders,"painter_text_vertData" + 2);
	var bytes17 = haxe_Unserializer.run(data17);
	blobs5.push(kha_internal_BytesBlob.fromBytes(bytes17));
	kha_Shaders.painter_text_vert = new kha_graphics4_VertexShader(blobs5,["painter-text.vert.essl","painter-text-relaxed.vert.essl","painter-text-webgl2.vert.essl"]);
	var blobs6 = [];
	var data18 = Reflect.field(kha_Shaders,"painter_video_fragData" + 0);
	var bytes18 = haxe_Unserializer.run(data18);
	blobs6.push(kha_internal_BytesBlob.fromBytes(bytes18));
	var data19 = Reflect.field(kha_Shaders,"painter_video_fragData" + 1);
	var bytes19 = haxe_Unserializer.run(data19);
	blobs6.push(kha_internal_BytesBlob.fromBytes(bytes19));
	var data20 = Reflect.field(kha_Shaders,"painter_video_fragData" + 2);
	var bytes20 = haxe_Unserializer.run(data20);
	blobs6.push(kha_internal_BytesBlob.fromBytes(bytes20));
	kha_Shaders.painter_video_frag = new kha_graphics4_FragmentShader(blobs6,["painter-video.frag.essl","painter-video-relaxed.frag.essl","painter-video-webgl2.frag.essl"]);
	var blobs7 = [];
	var data21 = Reflect.field(kha_Shaders,"painter_video_vertData" + 0);
	var bytes21 = haxe_Unserializer.run(data21);
	blobs7.push(kha_internal_BytesBlob.fromBytes(bytes21));
	var data22 = Reflect.field(kha_Shaders,"painter_video_vertData" + 1);
	var bytes22 = haxe_Unserializer.run(data22);
	blobs7.push(kha_internal_BytesBlob.fromBytes(bytes22));
	var data23 = Reflect.field(kha_Shaders,"painter_video_vertData" + 2);
	var bytes23 = haxe_Unserializer.run(data23);
	blobs7.push(kha_internal_BytesBlob.fromBytes(bytes23));
	kha_Shaders.painter_video_vert = new kha_graphics4_VertexShader(blobs7,["painter-video.vert.essl","painter-video-relaxed.vert.essl","painter-video-webgl2.vert.essl"]);
};
var kha_Sound = function() {
};
$hxClasses["kha.Sound"] = kha_Sound;
kha_Sound.__name__ = true;
kha_Sound.__interfaces__ = [kha_Resource];
kha_Sound.prototype = {
	compressedData: null
	,uncompressedData: null
	,uncompress: function(done) {
		if(this.uncompressedData != null) {
			done();
			return;
		}
		var output = new haxe_io_BytesOutput();
		var header = kha_audio2_ogg_vorbis_Reader.readAll(this.compressedData,output,true);
		var soundBytes = output.getBytes();
		var count = soundBytes.length / 4 | 0;
		if(header.channel == 1) {
			var this1 = new Float32Array(count * 2);
			this.uncompressedData = this1;
			var _g = 0;
			var _g1 = count;
			while(_g < _g1) {
				var i = _g++;
				this.uncompressedData[i * 2] = soundBytes.getFloat(i * 4);
				this.uncompressedData[i * 2 + 1] = soundBytes.getFloat(i * 4);
			}
		} else {
			var this2 = new Float32Array(count);
			this.uncompressedData = this2;
			var _g2 = 0;
			var _g11 = count;
			while(_g2 < _g11) {
				var i1 = _g2++;
				this.uncompressedData[i1] = soundBytes.getFloat(i1 * 4);
			}
		}
		this.compressedData = null;
		done();
	}
	,unload: function() {
		this.compressedData = null;
		this.uncompressedData = null;
	}
	,__class__: kha_Sound
};
var kha_SystemOptions = function(title,width,height,$window,framebuffer) {
	if(height == null) {
		height = -1;
	}
	if(width == null) {
		width = -1;
	}
	if(title == null) {
		title = "Kha";
	}
	this.framebuffer = null;
	this.window = null;
	this.height = -1;
	this.width = -1;
	this.title = "Kha";
	this.title = title;
	this.window = $window == null ? new kha_WindowOptions(null,null,null,null,null,null,null,null,null) : $window;
	if(width > 0) {
		this.window.width = width;
		this.width = width;
	} else {
		this.width = this.window.width;
	}
	if(height > 0) {
		this.window.height = height;
		this.height = height;
	} else {
		this.height = this.window.height;
	}
	if(this.window.title == null) {
		this.window.title = title;
	}
	this.framebuffer = framebuffer == null ? new kha_FramebufferOptions(null,null,null,null,null,null) : framebuffer;
};
$hxClasses["kha.SystemOptions"] = kha_SystemOptions;
kha_SystemOptions.__name__ = true;
kha_SystemOptions.prototype = {
	title: null
	,width: null
	,height: null
	,window: null
	,framebuffer: null
	,__class__: kha_SystemOptions
};
var kha_System = function() { };
$hxClasses["kha.System"] = kha_System;
kha_System.__name__ = true;
kha_System.init = function(options,callback) {
	var features = 0;
	if(options.resizable) {
		features = features | 1;
	}
	if(options.maximizable) {
		features = features | 4;
	}
	if(options.minimizable) {
		features = features | 2;
	}
	var newOptions = new kha_SystemOptions(options.title,options.width,options.height,new kha_WindowOptions(null,null,null,null,null,null,null,features,options.windowMode),new kha_FramebufferOptions(null,options.vSync,null,null,null,options.samplesPerPixel));
	kha_System.start(newOptions,function(_) {
		callback();
	});
};
kha_System.start = function(options,callback) {
	kha_System.theTitle = options.title;
	kha_SystemImpl.init(options,callback);
};
kha_System.get_title = function() {
	return kha_System.theTitle;
};
kha_System.notifyOnRender = function(listener,id) {
	if(id == null) {
		id = 0;
	}
	kha_System.renderListeners.push(function(framebuffers) {
		if(id < framebuffers.length) {
			listener(framebuffers[id]);
		}
	});
};
kha_System.notifyOnFrames = function(listener) {
	kha_System.renderListeners.push(listener);
};
kha_System.removeFramesListener = function(listener) {
	HxOverrides.remove(kha_System.renderListeners,listener);
};
kha_System.notifyOnApplicationState = function(foregroundListener,resumeListener,pauseListener,backgroundListener,shutdownListener) {
	if(foregroundListener != null) {
		kha_System.foregroundListeners.push(foregroundListener);
	}
	if(resumeListener != null) {
		kha_System.resumeListeners.push(resumeListener);
	}
	if(pauseListener != null) {
		kha_System.pauseListeners.push(pauseListener);
	}
	if(backgroundListener != null) {
		kha_System.backgroundListeners.push(backgroundListener);
	}
	if(shutdownListener != null) {
		kha_System.shutdownListeners.push(shutdownListener);
	}
};
kha_System.notifyOnDropFiles = function(dropFilesListener) {
	kha_System.dropFilesListeners.push(dropFilesListener);
};
kha_System.notifyOnCutCopyPaste = function(cutListener,copyListener,pasteListener) {
	kha_System.cutListener = cutListener;
	kha_System.copyListener = copyListener;
	kha_System.pasteListener = pasteListener;
};
kha_System.render = function(framebuffers) {
	var _g = 0;
	var _g1 = kha_System.renderListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener(framebuffers);
	}
};
kha_System.foreground = function() {
	var _g = 0;
	var _g1 = kha_System.foregroundListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener();
	}
};
kha_System.resume = function() {
	var _g = 0;
	var _g1 = kha_System.resumeListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener();
	}
};
kha_System.pause = function() {
	var _g = 0;
	var _g1 = kha_System.pauseListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener();
	}
};
kha_System.background = function() {
	var _g = 0;
	var _g1 = kha_System.backgroundListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener();
	}
};
kha_System.shutdown = function() {
	var _g = 0;
	var _g1 = kha_System.shutdownListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener();
	}
};
kha_System.dropFiles = function(filePath) {
	var _g = 0;
	var _g1 = kha_System.dropFilesListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener(filePath);
	}
};
kha_System.get_time = function() {
	return kha_SystemImpl.getTime();
};
kha_System.windowWidth = function($window) {
	if($window == null) {
		$window = 0;
	}
	return kha_Window.get($window).get_width();
};
kha_System.windowHeight = function($window) {
	if($window == null) {
		$window = 0;
	}
	return kha_Window.get_all()[$window].get_height();
};
kha_System.get_screenRotation = function() {
	return kha_ScreenRotation.RotationNone;
};
kha_System.get_systemId = function() {
	return kha_SystemImpl.getSystemId();
};
kha_System.get_language = function() {
	return kha_SystemImpl.getLanguage();
};
kha_System.stop = function() {
	return kha_SystemImpl.requestShutdown();
};
kha_System.loadUrl = function(url) {
	kha_SystemImpl.loadUrl(url);
};
kha_System.canSwitchFullscreen = function() {
	return true;
};
kha_System.isFullscreen = function() {
	if(kha_Window.get(0).get_mode() != 1) {
		return kha_Window.get(0).get_mode() == 1;
	} else {
		return true;
	}
};
kha_System.requestFullscreen = function() {
	kha_Window.get(0).set_mode(1);
};
kha_System.exitFullscreen = function() {
	kha_Window.get(0).set_mode(0);
};
kha_System.notifyOnFullscreenChange = function(func,error) {
};
kha_System.removeFullscreenListener = function(func,error) {
};
kha_System.changeResolution = function(width,height) {
};
kha_System.requestShutdown = function() {
	kha_System.stop();
};
kha_System.get_vsync = function() {
	return kha_Window.get(0).get_vSynced();
};
kha_System.get_refreshRate = function() {
	return kha_Display.get_primary().get_frequency();
};
kha_System.screenDpi = function() {
	return kha_Display.get_primary().get_pixelsPerInch();
};
var kha_GamepadStates = function() {
	this.axes = [];
	this.buttons = [];
};
$hxClasses["kha.GamepadStates"] = kha_GamepadStates;
kha_GamepadStates.__name__ = true;
kha_GamepadStates.prototype = {
	axes: null
	,buttons: null
	,__class__: kha_GamepadStates
};
var kha_SystemImpl = function() { };
$hxClasses["kha.SystemImpl"] = kha_SystemImpl;
kha_SystemImpl.__name__ = true;
kha_SystemImpl.errorHandler = function(message,source,lineno,colno,error) {
	window.console.error(error.stack);
	return true;
};
kha_SystemImpl.init = function(options,callback) {
	kha_SystemImpl.options = options;
	kha_SystemImpl.mobile = kha_SystemImpl.isMobile();
	kha_SystemImpl.ios = kha_SystemImpl.isIOS();
	kha_SystemImpl.chrome = kha_SystemImpl.isChrome();
	kha_SystemImpl.firefox = kha_SystemImpl.isFirefox();
	kha_SystemImpl.ie = kha_SystemImpl.isIE();
	kha_SystemImpl.initSecondStep(callback);
};
kha_SystemImpl.initSecondStep = function(callback) {
	kha_SystemImpl.init2(kha_SystemImpl.options.window.width,kha_SystemImpl.options.window.height);
	callback(kha_SystemImpl.window);
	if(kha_SystemImpl.ios) {
		window.ondevicemotion = function(event) {
			kha_input_Sensor._changed(0,-event.accelerationIncludingGravity.x,-event.accelerationIncludingGravity.y,-event.accelerationIncludingGravity.z);
		};
	} else {
		window.ondevicemotion = function(event1) {
			kha_input_Sensor._changed(0,event1.accelerationIncludingGravity.x,event1.accelerationIncludingGravity.y,event1.accelerationIncludingGravity.z);
		};
	}
	window.ondeviceorientation = function(event2) {
		kha_input_Sensor._changed(1,event2.beta,event2.gamma,event2.alpha);
	};
};
kha_SystemImpl.isMobile = function() {
	var agent = window.navigator.userAgent;
	if(agent.indexOf("Android") >= 0 || agent.indexOf("webOS") >= 0 || agent.indexOf("BlackBerry") >= 0 || agent.indexOf("Windows Phone") >= 0) {
		return true;
	}
	if(kha_SystemImpl.isIOS()) {
		return true;
	}
	return false;
};
kha_SystemImpl.isIOS = function() {
	var agent = window.navigator.userAgent;
	if(agent.indexOf("iPhone") >= 0 || agent.indexOf("iPad") >= 0 || agent.indexOf("iPod") >= 0) {
		return true;
	}
	return false;
};
kha_SystemImpl.isChrome = function() {
	var agent = window.navigator.userAgent;
	if(agent.indexOf("Chrome") >= 0) {
		return true;
	}
	return false;
};
kha_SystemImpl.isFirefox = function() {
	var agent = window.navigator.userAgent;
	if(agent.indexOf("Firefox") >= 0) {
		return true;
	}
	return false;
};
kha_SystemImpl.isIE = function() {
	var agent = window.navigator.userAgent;
	if(agent.indexOf("MSIE ") >= 0 || agent.indexOf("Trident/") >= 0) {
		return true;
	}
	return false;
};
kha_SystemImpl.setCanvas = function(canvas) {
	kha_SystemImpl.khanvas = canvas;
};
kha_SystemImpl.getScreenRotation = function() {
	return kha_ScreenRotation.RotationNone;
};
kha_SystemImpl.getTime = function() {
	var performance = window.performance ? window.performance : window.Date;
	return performance.now() / 1000;
};
kha_SystemImpl.getSystemId = function() {
	return "HTML5";
};
kha_SystemImpl.getLanguage = function() {
	return window.navigator.language;
};
kha_SystemImpl.requestShutdown = function() {
	window.close();
	return true;
};
kha_SystemImpl.init2 = function(defaultWidth,defaultHeight,backbufferFormat) {
	kha_SystemImpl.keyboard = new kha_input_Keyboard();
	kha_SystemImpl.mouse = new kha_input_MouseImpl();
	kha_SystemImpl.surface = new kha_input_Surface();
	kha_SystemImpl.gamepads = [];
	kha_SystemImpl.gamepadStates = [];
	kha_SystemImpl.gamepads[0] = new kha_input_Gamepad(0);
	kha_SystemImpl.gamepadStates[0] = new kha_GamepadStates();
	kha_SystemImpl.gamepads[1] = new kha_input_Gamepad(1);
	kha_SystemImpl.gamepadStates[1] = new kha_GamepadStates();
	kha_SystemImpl.gamepads[2] = new kha_input_Gamepad(2);
	kha_SystemImpl.gamepadStates[2] = new kha_GamepadStates();
	kha_SystemImpl.gamepads[3] = new kha_input_Gamepad(3);
	kha_SystemImpl.gamepadStates[3] = new kha_GamepadStates();
	window.addEventListener("gamepadconnected",function(e_) {
		kha_input_Gamepad.sendConnectEvent(e_.gamepad.index);
	});
	window.addEventListener("gamepaddisconnected",function(e_1) {
		kha_input_Gamepad.sendDisconnectEvent(e_1.gamepad.index);
	});
	if(kha_SystemImpl.ie) {
		kha_SystemImpl.pressedKeys = [];
		var _g = 0;
		while(_g < 256) {
			var i = _g++;
			kha_SystemImpl.pressedKeys.push(false);
		}
		var _g1 = 0;
		while(_g1 < 256) {
			var i1 = _g1++;
			kha_SystemImpl.pressedKeys.push(null);
		}
	}
	window.document.addEventListener("copy",function(e_2) {
		var e = e_2;
		if(kha_System.copyListener != null) {
			var data = kha_System.copyListener();
			if(data != null) {
				e.clipboardData.setData("text/plain",data);
			}
			e.preventDefault();
		}
	});
	window.document.addEventListener("cut",function(e_3) {
		var e1 = e_3;
		if(kha_System.cutListener != null) {
			var data1 = kha_System.cutListener();
			if(data1 != null) {
				e1.clipboardData.setData("text/plain",data1);
			}
			e1.preventDefault();
		}
	});
	window.document.addEventListener("paste",function(e_4) {
		var e2 = e_4;
		if(kha_System.pasteListener != null) {
			var tmp = e2.clipboardData.getData("text/plain");
			kha_System.pasteListener(tmp);
			e2.preventDefault();
		}
	});
	kha_CanvasImage.init();
	kha_Scheduler.init();
	kha_SystemImpl.loadFinished(defaultWidth,defaultHeight);
};
kha_SystemImpl.getMouse = function(num) {
	if(num != 0) {
		return null;
	}
	return kha_SystemImpl.mouse;
};
kha_SystemImpl.getKeyboard = function(num) {
	if(num != 0) {
		return null;
	}
	return kha_SystemImpl.keyboard;
};
kha_SystemImpl.checkGamepad = function(pad) {
	var _g = 0;
	var _g1 = pad.axes.length;
	while(_g < _g1) {
		var i = _g++;
		if(pad.axes[i] != null) {
			var axis = pad.axes[i];
			if(i % 2 == 1) {
				axis = -axis;
			}
			if(kha_SystemImpl.gamepadStates[pad.index].axes[i] != axis) {
				kha_SystemImpl.gamepadStates[pad.index].axes[i] = axis;
				kha_SystemImpl.gamepads[pad.index].sendAxisEvent(i,axis);
			}
		}
	}
	var _g2 = 0;
	var _g3 = pad.buttons.length;
	while(_g2 < _g3) {
		var i1 = _g2++;
		if(pad.buttons[i1] != null) {
			if(kha_SystemImpl.gamepadStates[pad.index].buttons[i1] != pad.buttons[i1].value) {
				kha_SystemImpl.gamepadStates[pad.index].buttons[i1] = pad.buttons[i1].value;
				kha_SystemImpl.gamepads[pad.index].sendButtonEvent(i1,pad.buttons[i1].value);
			}
		}
	}
	if(pad.axes.length <= 4 && pad.buttons.length > 7) {
		kha_SystemImpl.gamepadStates[pad.index].axes[4] = pad.buttons[6].value;
		kha_SystemImpl.gamepads[pad.index].sendAxisEvent(4,pad.buttons[6].value);
		kha_SystemImpl.gamepadStates[pad.index].axes[5] = pad.buttons[7].value;
		kha_SystemImpl.gamepads[pad.index].sendAxisEvent(5,pad.buttons[7].value);
	}
};
kha_SystemImpl.loadFinished = function(defaultWidth,defaultHeight) {
	var canvas = kha_SystemImpl.khanvas;
	if(canvas == null) {
		canvas = window.document.getElementById(kha_CompilerDefines.canvas_id);
	}
	canvas.style.cursor = "default";
	var gl = false;
	try {
		kha_SystemImpl.gl = canvas.getContext("webgl2",{ alpha : false, antialias : kha_SystemImpl.options.framebuffer.samplesPerPixel > 1, stencil : true});
		kha_SystemImpl.gl.pixelStorei(37441,1);
		kha_SystemImpl.halfFloat = { HALF_FLOAT_OES : 5131};
		kha_SystemImpl.depthTexture = { UNSIGNED_INT_24_8_WEBGL : 34042};
		kha_SystemImpl.drawBuffers = { COLOR_ATTACHMENT0_WEBGL : 36064};
		kha_SystemImpl.elementIndexUint = true;
		kha_SystemImpl.gl.getExtension("EXT_color_buffer_float");
		kha_SystemImpl.gl.getExtension("OES_texture_float_linear");
		kha_SystemImpl.gl.getExtension("OES_texture_half_float_linear");
		kha_SystemImpl.anisotropicFilter = kha_SystemImpl.gl.getExtension("EXT_texture_filter_anisotropic");
		if(kha_SystemImpl.anisotropicFilter == null) {
			kha_SystemImpl.anisotropicFilter = kha_SystemImpl.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
		}
		gl = true;
		kha_SystemImpl.gl2 = true;
		kha_Shaders.init();
	} catch( e ) {
		var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
		haxe_Log.trace("Could not initialize WebGL 2, falling back to WebGL.",{ fileName : "kha/SystemImpl.hx", lineNumber : 331, className : "kha.SystemImpl", methodName : "loadFinished"});
	}
	if(!kha_SystemImpl.gl2) {
		try {
			kha_SystemImpl.gl = canvas.getContext("experimental-webgl",{ alpha : false, antialias : kha_SystemImpl.options.framebuffer.samplesPerPixel > 1, stencil : true});
			kha_SystemImpl.gl.pixelStorei(37441,1);
			kha_SystemImpl.gl.getExtension("OES_texture_float");
			kha_SystemImpl.gl.getExtension("OES_texture_float_linear");
			kha_SystemImpl.halfFloat = kha_SystemImpl.gl.getExtension("OES_texture_half_float");
			kha_SystemImpl.gl.getExtension("OES_texture_half_float_linear");
			kha_SystemImpl.depthTexture = kha_SystemImpl.gl.getExtension("WEBGL_depth_texture");
			kha_SystemImpl.gl.getExtension("EXT_shader_texture_lod");
			kha_SystemImpl.gl.getExtension("OES_standard_derivatives");
			kha_SystemImpl.anisotropicFilter = kha_SystemImpl.gl.getExtension("EXT_texture_filter_anisotropic");
			if(kha_SystemImpl.anisotropicFilter == null) {
				kha_SystemImpl.anisotropicFilter = kha_SystemImpl.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
			}
			kha_SystemImpl.drawBuffers = kha_SystemImpl.gl.getExtension("WEBGL_draw_buffers");
			kha_SystemImpl.elementIndexUint = kha_SystemImpl.gl.getExtension("OES_element_index_uint");
			gl = true;
			kha_Shaders.init();
		} catch( e2 ) {
			var e3 = (e2 instanceof js__$Boot_HaxeError) ? e2.val : e2;
			haxe_Log.trace("Could not initialize WebGL, falling back to <canvas>.",{ fileName : "kha/SystemImpl.hx", lineNumber : 353, className : "kha.SystemImpl", methodName : "loadFinished"});
		}
	}
	kha_SystemImpl.setCanvas(canvas);
	kha_SystemImpl.window = new kha_Window(defaultWidth,defaultHeight,canvas);
	if(gl) {
		var g4 = new kha_js_graphics4_Graphics();
		kha_SystemImpl.frame = new kha_Framebuffer(0,null,null,g4);
		kha_SystemImpl.frame.init(new kha_graphics2_Graphics1(kha_SystemImpl.frame),new kha_js_graphics4_Graphics2(kha_SystemImpl.frame),g4);
	} else {
		kha_js_Font.Kravur = kha_Kravur; kha_Kravur = kha_js_Font;
		var g2 = new kha_js_CanvasGraphics(canvas.getContext("2d"));
		kha_SystemImpl.frame = new kha_Framebuffer(0,null,g2,null);
		kha_SystemImpl.frame.init(new kha_graphics2_Graphics1(kha_SystemImpl.frame),g2,null);
	}
	if(!kha_SystemImpl.mobile && kha_audio2_Audio._init()) {
		kha_SystemImpl._hasWebAudio = true;
		kha_audio2_Audio1._init();
	} else if(kha_SystemImpl.mobile) {
		kha_SystemImpl._hasWebAudio = false;
		kha_js_MobileWebAudio._init();
		kha_audio2_Audio1 = kha_js_MobileWebAudio;
	} else {
		kha_SystemImpl._hasWebAudio = false;
		kha_js_AudioElementAudio._compile();
		kha_audio2_Audio1 = kha_js_AudioElementAudio;
	}
	kha_vr_VrInterface.instance = new kha_js_vr_VrInterface();
	kha_Scheduler.start();
	var $window = window;
	var requestAnimationFrame = $window.requestAnimationFrame;
	if(requestAnimationFrame == null) {
		requestAnimationFrame = $window.mozRequestAnimationFrame;
	}
	if(requestAnimationFrame == null) {
		requestAnimationFrame = $window.webkitRequestAnimationFrame;
	}
	if(requestAnimationFrame == null) {
		requestAnimationFrame = $window.msRequestAnimationFrame;
	}
	var animate = null;
	animate = function(timestamp) {
		var window1 = window;
		if(requestAnimationFrame == null) {
			window1.setTimeout(animate,16.6666666666666679);
		} else {
			requestAnimationFrame(animate);
		}
		var sysGamepads = kha_SystemImpl.getGamepads();
		if(sysGamepads != null) {
			var _g = 0;
			var _g1 = sysGamepads.length;
			while(_g < _g1) {
				var i = _g++;
				var pad = sysGamepads[i];
				if(pad != null) {
					kha_SystemImpl.checkGamepad(pad);
				}
			}
		}
		kha_Scheduler.executeFrame();
		if(canvas.getContext) {
			var displayWidth = canvas.clientWidth;
			var displayHeight = canvas.clientHeight;
			if(canvas.width != displayWidth || canvas.height != displayHeight) {
				canvas.width = displayWidth;
				canvas.height = displayHeight;
			}
			kha_System.render([kha_SystemImpl.frame]);
			if(kha_SystemImpl.gl != null) {
				kha_SystemImpl.gl.clearColor(1,1,1,1);
				kha_SystemImpl.gl.colorMask(false,false,false,true);
				kha_SystemImpl.gl.clear(16384);
				kha_SystemImpl.gl.colorMask(true,true,true,true);
			}
		}
	};
	if(requestAnimationFrame == null) {
		$window.setTimeout(animate,16.6666666666666679);
	} else {
		requestAnimationFrame(animate);
	}
	canvas.focus();
	canvas.oncontextmenu = function(event) {
		event.stopPropagation();
		event.preventDefault();
	};
	canvas.onmousedown = kha_SystemImpl.mouseDown;
	canvas.onmousemove = kha_SystemImpl.mouseMove;
	if(kha_SystemImpl.keyboard != null) {
		canvas.onkeydown = kha_SystemImpl.keyDown;
		canvas.onkeyup = kha_SystemImpl.keyUp;
		canvas.onkeypress = kha_SystemImpl.keyPress;
	}
	canvas.onblur = kha_SystemImpl.onBlur;
	canvas.onfocus = kha_SystemImpl.onFocus;
	canvas.onmousewheel = canvas.onwheel = kha_SystemImpl.mouseWheel;
	canvas.onmouseleave = kha_SystemImpl.mouseLeave;
	canvas.addEventListener("wheel mousewheel",kha_SystemImpl.mouseWheel,false);
	canvas.addEventListener("touchstart",kha_SystemImpl.touchDown,false);
	canvas.addEventListener("touchend",kha_SystemImpl.touchUp,false);
	canvas.addEventListener("touchmove",kha_SystemImpl.touchMove,false);
	canvas.addEventListener("touchcancel",kha_SystemImpl.touchCancel,false);
	window.addEventListener("unload",function() {
		kha_System.shutdown();
	});
};
kha_SystemImpl.lockMouse = function() {
	if(($_=kha_SystemImpl.khanvas,$bind($_,$_.requestPointerLock))) {
		kha_SystemImpl.khanvas.requestPointerLock();
	} else if(kha_SystemImpl.khanvas.mozRequestPointerLock) {
		kha_SystemImpl.khanvas.mozRequestPointerLock();
	} else if(kha_SystemImpl.khanvas.webkitRequestPointerLock) {
		kha_SystemImpl.khanvas.webkitRequestPointerLock();
	}
};
kha_SystemImpl.unlockMouse = function() {
	if(document.exitPointerLock) {
		document.exitPointerLock();
	} else if(document.mozExitPointerLock) {
		document.mozExitPointerLock();
	} else if(document.webkitExitPointerLock) {
		document.webkitExitPointerLock();
	}
};
kha_SystemImpl.canLockMouse = function() {
	return 'pointerLockElement' in document ||
		'mozPointerLockElement' in document ||
		'webkitPointerLockElement' in document;
};
kha_SystemImpl.isMouseLocked = function() {
	return document.pointerLockElement === kha_SystemImpl.khanvas ||
			document.mozPointerLockElement === kha_SystemImpl.khanvas ||
			document.webkitPointerLockElement === kha_SystemImpl.khanvas;
};
kha_SystemImpl.notifyOfMouseLockChange = function(func,error) {
	window.document.addEventListener("pointerlockchange",func,false);
	window.document.addEventListener("mozpointerlockchange",func,false);
	window.document.addEventListener("webkitpointerlockchange",func,false);
	window.document.addEventListener("pointerlockerror",error,false);
	window.document.addEventListener("mozpointerlockerror",error,false);
	window.document.addEventListener("webkitpointerlockerror",error,false);
};
kha_SystemImpl.removeFromMouseLockChange = function(func,error) {
	window.document.removeEventListener("pointerlockchange",func,false);
	window.document.removeEventListener("mozpointerlockchange",func,false);
	window.document.removeEventListener("webkitpointerlockchange",func,false);
	window.document.removeEventListener("pointerlockerror",error,false);
	window.document.removeEventListener("mozpointerlockerror",error,false);
	window.document.removeEventListener("webkitpointerlockerror",error,false);
};
kha_SystemImpl.setMouseXY = function(event) {
	var rect = kha_SystemImpl.khanvas.getBoundingClientRect();
	var borderWidth = kha_SystemImpl.khanvas.clientLeft;
	var borderHeight = kha_SystemImpl.khanvas.clientTop;
	kha_SystemImpl.mouseX = (event.clientX - rect.left - borderWidth) * kha_SystemImpl.khanvas.width / (rect.width - 2 * borderWidth) | 0;
	kha_SystemImpl.mouseY = (event.clientY - rect.top - borderHeight) * kha_SystemImpl.khanvas.height / (rect.height - 2 * borderHeight) | 0;
};
kha_SystemImpl.unlockiOSSound = function() {
	if(!kha_SystemImpl.ios || kha_SystemImpl.iosSoundEnabled) {
		return;
	}
	var buffer = kha_js_MobileWebAudio._context.createBuffer(1,1,22050);
	var source = kha_js_MobileWebAudio._context.createBufferSource();
	source.buffer = buffer;
	source.connect(kha_js_MobileWebAudio._context.destination);
	source.start();
	source.stop();
	kha_SystemImpl.iosSoundEnabled = true;
};
kha_SystemImpl.unlockSound = function() {
	if(!kha_SystemImpl.soundEnabled) {
		var context = kha_audio2_Audio._context;
		if(context == null) {
			context = kha_audio2_Audio1._context;
		}
		if(context != null) {
			context.resume().then(function(c) {
				kha_SystemImpl.soundEnabled = true;
			})["catch"](function(err) {
				haxe_Log.trace(err,{ fileName : "kha/SystemImpl.hx", lineNumber : 593, className : "kha.SystemImpl", methodName : "unlockSound"});
			});
		}
	}
	kha_SystemImpl.unlockiOSSound();
};
kha_SystemImpl.mouseLeave = function() {
	kha_SystemImpl.mouse.sendLeaveEvent(0);
};
kha_SystemImpl.mouseWheel = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	event.preventDefault();
	if(event.deltaMode == 0) {
		if(event.deltaY < 0) {
			kha_SystemImpl.mouse.sendWheelEvent(0,-1);
		} else if(event.deltaY > 0) {
			kha_SystemImpl.mouse.sendWheelEvent(0,1);
		}
		kha_SystemImpl.insideInputEvent = false;
		return false;
	}
	if(event.deltaMode == 1) {
		kha_SystemImpl.minimumScroll = Math.min(kha_SystemImpl.minimumScroll,Math.abs(event.deltaY)) | 0;
		kha_SystemImpl.mouse.sendWheelEvent(0,event.deltaY / kha_SystemImpl.minimumScroll | 0);
		kha_SystemImpl.insideInputEvent = false;
		return false;
	}
	kha_SystemImpl.insideInputEvent = false;
	return false;
};
kha_SystemImpl.mouseDown = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	kha_SystemImpl.setMouseXY(event);
	if(event.which == 1) {
		if(event.ctrlKey) {
			kha_SystemImpl.leftMouseCtrlDown = true;
			kha_SystemImpl.mouse.sendDownEvent(0,1,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
		} else {
			kha_SystemImpl.leftMouseCtrlDown = false;
			kha_SystemImpl.mouse.sendDownEvent(0,0,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
		}
		if(kha_SystemImpl.khanvas.setCapture != null) {
			kha_SystemImpl.khanvas.setCapture();
		} else {
			kha_SystemImpl.khanvas.ownerDocument.addEventListener("mousemove",kha_SystemImpl.documentMouseMove,true);
		}
		kha_SystemImpl.khanvas.ownerDocument.addEventListener("mouseup",kha_SystemImpl.mouseLeftUp);
	} else if(event.which == 2) {
		kha_SystemImpl.mouse.sendDownEvent(0,2,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
		kha_SystemImpl.khanvas.ownerDocument.addEventListener("mouseup",kha_SystemImpl.mouseMiddleUp);
	} else if(event.which == 3) {
		kha_SystemImpl.mouse.sendDownEvent(0,1,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
		kha_SystemImpl.khanvas.ownerDocument.addEventListener("mouseup",kha_SystemImpl.mouseRightUp);
	}
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.mouseLeftUp = function(event) {
	kha_SystemImpl.unlockSound();
	if(event.which != 1) {
		return;
	}
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.khanvas.ownerDocument.removeEventListener("mouseup",kha_SystemImpl.mouseLeftUp);
	if(kha_SystemImpl.khanvas.releaseCapture != null) {
		kha_SystemImpl.khanvas.ownerDocument.releaseCapture();
	} else {
		kha_SystemImpl.khanvas.ownerDocument.removeEventListener("mousemove",kha_SystemImpl.documentMouseMove,true);
	}
	if(kha_SystemImpl.leftMouseCtrlDown) {
		kha_SystemImpl.mouse.sendUpEvent(0,1,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
	} else {
		kha_SystemImpl.mouse.sendUpEvent(0,0,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
	}
	kha_SystemImpl.leftMouseCtrlDown = false;
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.mouseMiddleUp = function(event) {
	kha_SystemImpl.unlockSound();
	if(event.which != 2) {
		return;
	}
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.khanvas.ownerDocument.removeEventListener("mouseup",kha_SystemImpl.mouseMiddleUp);
	kha_SystemImpl.mouse.sendUpEvent(0,2,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.mouseRightUp = function(event) {
	kha_SystemImpl.unlockSound();
	if(event.which != 3) {
		return;
	}
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.khanvas.ownerDocument.removeEventListener("mouseup",kha_SystemImpl.mouseRightUp);
	kha_SystemImpl.mouse.sendUpEvent(0,1,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY);
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.documentMouseMove = function(event) {
	event.stopPropagation();
	kha_SystemImpl.mouseMove(event);
};
kha_SystemImpl.mouseMove = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	var lastMouseX = kha_SystemImpl.mouseX;
	var lastMouseY = kha_SystemImpl.mouseY;
	kha_SystemImpl.setMouseXY(event);
	var movementX = event.movementX;
	var movementY = event.movementY;
	if(event.movementX == null) {
		movementX = event.mozMovementX != null ? event.mozMovementX : event.webkitMovementX != null ? event.webkitMovementX : kha_SystemImpl.mouseX - lastMouseX;
		movementY = event.mozMovementY != null ? event.mozMovementY : event.webkitMovementY != null ? event.webkitMovementY : kha_SystemImpl.mouseY - lastMouseY;
	}
	if(kha_SystemImpl.firefox) {
		movementX = movementX * window.devicePixelRatio | 0;
		movementY = movementY * window.devicePixelRatio | 0;
	}
	kha_SystemImpl.mouse.sendMoveEvent(0,kha_SystemImpl.mouseX,kha_SystemImpl.mouseY,movementX,movementY);
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.setTouchXY = function(touch) {
	var rect = kha_SystemImpl.khanvas.getBoundingClientRect();
	var borderWidth = kha_SystemImpl.khanvas.clientLeft;
	var borderHeight = kha_SystemImpl.khanvas.clientTop;
	kha_SystemImpl.touchX = (touch.clientX - rect.left - borderWidth) * kha_SystemImpl.khanvas.width / (rect.width - 2 * borderWidth) | 0;
	kha_SystemImpl.touchY = (touch.clientY - rect.top - borderHeight) * kha_SystemImpl.khanvas.height / (rect.height - 2 * borderHeight) | 0;
};
kha_SystemImpl.touchDown = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	event.stopPropagation();
	event.preventDefault();
	var _g = 0;
	var _g1 = event.changedTouches;
	while(_g < _g1.length) {
		var touch = _g1[_g];
		++_g;
		var id = touch.identifier;
		if(kha_SystemImpl.ios) {
			id = kha_SystemImpl.iosTouchs.indexOf(-1);
			if(id == -1) {
				id = kha_SystemImpl.iosTouchs.length;
			}
			kha_SystemImpl.iosTouchs[id] = touch.identifier;
		}
		kha_SystemImpl.setTouchXY(touch);
		kha_SystemImpl.mouse.sendDownEvent(0,0,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
		kha_SystemImpl.surface.sendTouchStartEvent(id,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
	}
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.touchUp = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	var _g = 0;
	var _g1 = event.changedTouches;
	while(_g < _g1.length) {
		var touch = _g1[_g];
		++_g;
		var id = touch.identifier;
		if(kha_SystemImpl.ios) {
			id = kha_SystemImpl.iosTouchs.indexOf(id);
			kha_SystemImpl.iosTouchs[id] = -1;
		}
		kha_SystemImpl.setTouchXY(touch);
		kha_SystemImpl.mouse.sendUpEvent(0,0,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
		kha_SystemImpl.surface.sendTouchEndEvent(id,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
	}
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.touchMove = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	var index = 0;
	var _g = 0;
	var _g1 = event.changedTouches;
	while(_g < _g1.length) {
		var touch = _g1[_g];
		++_g;
		kha_SystemImpl.setTouchXY(touch);
		if(index == 0) {
			var movementX = kha_SystemImpl.touchX - kha_SystemImpl.lastFirstTouchX;
			var movementY = kha_SystemImpl.touchY - kha_SystemImpl.lastFirstTouchY;
			kha_SystemImpl.lastFirstTouchX = kha_SystemImpl.touchX;
			kha_SystemImpl.lastFirstTouchY = kha_SystemImpl.touchY;
			kha_SystemImpl.mouse.sendMoveEvent(0,kha_SystemImpl.touchX,kha_SystemImpl.touchY,movementX,movementY);
		}
		var id = touch.identifier;
		if(kha_SystemImpl.ios) {
			id = kha_SystemImpl.iosTouchs.indexOf(id);
		}
		kha_SystemImpl.surface.sendMoveEvent(id,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
		++index;
	}
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.touchCancel = function(event) {
	kha_SystemImpl.insideInputEvent = true;
	kha_SystemImpl.unlockSound();
	var _g = 0;
	var _g1 = event.changedTouches;
	while(_g < _g1.length) {
		var touch = _g1[_g];
		++_g;
		var id = touch.identifier;
		if(kha_SystemImpl.ios) {
			id = kha_SystemImpl.iosTouchs.indexOf(id);
		}
		kha_SystemImpl.setTouchXY(touch);
		kha_SystemImpl.mouse.sendUpEvent(0,0,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
		kha_SystemImpl.surface.sendTouchEndEvent(id,kha_SystemImpl.touchX,kha_SystemImpl.touchY);
	}
	kha_SystemImpl.iosTouchs = [];
	kha_SystemImpl.insideInputEvent = false;
};
kha_SystemImpl.onBlur = function() {
	kha_System.background();
};
kha_SystemImpl.onFocus = function() {
	kha_System.foreground();
};
kha_SystemImpl.keycodeToChar = function(key,keycode,shift) {
	if(key != null) {
		if(key.length == 1) {
			return key;
		}
		switch(key) {
		case "Add":
			return "+";
		case "Divide":
			return "/";
		case "Multiply":
			return "*";
		case "Subtract":
			return "-";
		}
	}
	switch(keycode) {
	case 48:
		if(shift) {
			return "=";
		} else {
			return "0";
		}
		break;
	case 49:
		if(shift) {
			return "!";
		} else {
			return "1";
		}
		break;
	case 50:
		if(shift) {
			return "\"";
		} else {
			return "2";
		}
		break;
	case 51:
		if(shift) {
			return "§";
		} else {
			return "3";
		}
		break;
	case 52:
		if(shift) {
			return "$";
		} else {
			return "4";
		}
		break;
	case 53:
		if(shift) {
			return "%";
		} else {
			return "5";
		}
		break;
	case 54:
		if(shift) {
			return "&";
		} else {
			return "6";
		}
		break;
	case 55:
		if(shift) {
			return "/";
		} else {
			return "7";
		}
		break;
	case 56:
		if(shift) {
			return "(";
		} else {
			return "8";
		}
		break;
	case 57:
		if(shift) {
			return ")";
		} else {
			return "9";
		}
		break;
	case 106:
		return "*";
	case 107:
		return "+";
	case 109:
		return "-";
	case 111:
		return "/";
	case 187:
		if(shift) {
			return "*";
		} else {
			return "+";
		}
		break;
	case 188:
		if(shift) {
			return ";";
		} else {
			return ",";
		}
		break;
	case 189:
		if(shift) {
			return "_";
		} else {
			return "-";
		}
		break;
	case 190:
		if(shift) {
			return ":";
		} else {
			return ".";
		}
		break;
	case 191:
		if(shift) {
			return "'";
		} else {
			return "#";
		}
		break;
	case 212:
		if(shift) {
			return "`";
		} else {
			return "´";
		}
		break;
	case 219:
		if(shift) {
			return "?";
		} else {
			return "ß";
		}
		break;
	case 226:
		if(shift) {
			return ">";
		} else {
			return "<";
		}
		break;
	}
	if(keycode >= 96 && keycode <= 105) {
		return String.fromCodePoint(-48 + keycode);
	}
	if(keycode >= 65 && keycode <= 90) {
		if(shift) {
			return String.fromCodePoint(keycode);
		} else {
			return String.fromCodePoint(keycode - 65 + 97);
		}
	}
	return String.fromCodePoint(keycode);
};
kha_SystemImpl.keyDown = function(event) {
	if((event.keyCode < 112 || event.keyCode > 123) && (event.key != null && event.key.length != 1)) {
		event.preventDefault();
	}
	event.stopPropagation();
	if(kha_SystemImpl.ie) {
		if(kha_SystemImpl.pressedKeys[event.keyCode]) {
			event.preventDefault();
			return;
		}
		kha_SystemImpl.pressedKeys[event.keyCode] = true;
	} else if(event.repeat) {
		event.preventDefault();
		return;
	}
	kha_SystemImpl.keyboard.sendDownEvent(event.keyCode);
};
kha_SystemImpl.keyUp = function(event) {
	event.preventDefault();
	event.stopPropagation();
	if(kha_SystemImpl.ie) {
		kha_SystemImpl.pressedKeys[event.keyCode] = false;
	}
	kha_SystemImpl.keyboard.sendUpEvent(event.keyCode);
};
kha_SystemImpl.keyPress = function(event) {
	if(event.which == 0) {
		return;
	}
	event.preventDefault();
	event.stopPropagation();
	var code = event.which;
	kha_SystemImpl.keyboard.sendPressEvent(String.fromCodePoint(code));
};
kha_SystemImpl.canSwitchFullscreen = function() {
	return 'fullscreenElement ' in document ||
		'mozFullScreenElement' in document ||
		'webkitFullscreenElement' in document ||
		'msFullscreenElement' in document
		;
};
kha_SystemImpl.notifyOfFullscreenChange = function(func,error) {
	window.document.addEventListener("fullscreenchange",func,false);
	window.document.addEventListener("mozfullscreenchange",func,false);
	window.document.addEventListener("webkitfullscreenchange",func,false);
	window.document.addEventListener("MSFullscreenChange",func,false);
	window.document.addEventListener("fullscreenerror",error,false);
	window.document.addEventListener("mozfullscreenerror",error,false);
	window.document.addEventListener("webkitfullscreenerror",error,false);
	window.document.addEventListener("MSFullscreenError",error,false);
};
kha_SystemImpl.removeFromFullscreenChange = function(func,error) {
	window.document.removeEventListener("fullscreenchange",func,false);
	window.document.removeEventListener("mozfullscreenchange",func,false);
	window.document.removeEventListener("webkitfullscreenchange",func,false);
	window.document.removeEventListener("MSFullscreenChange",func,false);
	window.document.removeEventListener("fullscreenerror",error,false);
	window.document.removeEventListener("mozfullscreenerror",error,false);
	window.document.removeEventListener("webkitfullscreenerror",error,false);
	window.document.removeEventListener("MSFullscreenError",error,false);
};
kha_SystemImpl.setKeepScreenOn = function(on) {
};
kha_SystemImpl.loadUrl = function(url) {
	window.open(url,"_blank");
};
kha_SystemImpl.getGamepadId = function(index) {
	var sysGamepads = kha_SystemImpl.getGamepads();
	if(sysGamepads != null && sysGamepads[index]) {
		return sysGamepads[index].id;
	}
	return "unkown";
};
kha_SystemImpl.getGamepads = function() {
	if(kha_SystemImpl.chrome && kha_vr_VrInterface.instance.IsVrEnabled()) {
		return null;
	}
	if(navigator.getGamepads) {
		return window.navigator.getGamepads();
	} else {
		return null;
	}
};
kha_SystemImpl.getPen = function(num) {
	return null;
};
var kha_Video = function() {
};
$hxClasses["kha.Video"] = kha_Video;
kha_Video.__name__ = true;
kha_Video.__interfaces__ = [kha_Resource];
kha_Video.prototype = {
	width: function() {
		return 100;
	}
	,height: function() {
		return 100;
	}
	,play: function(loop) {
		if(loop == null) {
			loop = false;
		}
	}
	,pause: function() {
	}
	,stop: function() {
	}
	,getLength: function() {
		return 0;
	}
	,getCurrentPos: function() {
		return 0;
	}
	,get_position: function() {
		return 0;
	}
	,set_position: function(value) {
		return 0;
	}
	,getVolume: function() {
		return 1;
	}
	,setVolume: function(volume) {
	}
	,isFinished: function() {
		return this.getCurrentPos() >= this.getLength();
	}
	,unload: function() {
	}
	,__class__: kha_Video
};
var kha_WebGLImage = function(width,height,format,renderTarget,depthStencilFormat,samples) {
	this.pixels = null;
	this.depthTexture = null;
	this.texture = null;
	this.renderBuffer = null;
	this.frameBuffer = null;
	this.myWidth = width;
	this.myHeight = height;
	this.format = format;
	this.renderTarget = renderTarget;
	this.samples = samples;
	this.image = null;
	this.video = null;
	this.depthStencilFormat = depthStencilFormat;
	kha_WebGLImage.init();
	if(renderTarget) {
		this.createTexture();
	}
};
$hxClasses["kha.WebGLImage"] = kha_WebGLImage;
kha_WebGLImage.__name__ = true;
kha_WebGLImage.init = function() {
	if(kha_WebGLImage.context == null) {
		kha_WebGLImage.canvas = window.document.createElement("canvas");
		if(kha_WebGLImage.canvas != null) {
			kha_WebGLImage.context = kha_WebGLImage.canvas.getContext("2d");
			kha_WebGLImage.canvas.width = 4096;
			kha_WebGLImage.canvas.height = 4096;
			kha_WebGLImage.context.globalCompositeOperation = "copy";
		}
	}
};
kha_WebGLImage.upperPowerOfTwo = function(v) {
	--v;
	v |= v >>> 1;
	v |= v >>> 2;
	v |= v >>> 4;
	v |= v >>> 8;
	v |= v >>> 16;
	return ++v;
};
kha_WebGLImage.formatByteSize = function(format) {
	switch(format._hx_index) {
	case 0:
		return 4;
	case 1:
		return 1;
	case 2:
		return 16;
	case 3:
		return 2;
	case 4:
		return 8;
	case 5:
		return 4;
	case 6:
		return 2;
	}
};
kha_WebGLImage.__super__ = kha_Image;
kha_WebGLImage.prototype = $extend(kha_Image.prototype,{
	image: null
	,video: null
	,data: null
	,myWidth: null
	,myHeight: null
	,format: null
	,renderTarget: null
	,samples: null
	,frameBuffer: null
	,renderBuffer: null
	,texture: null
	,depthTexture: null
	,graphics1: null
	,graphics2: null
	,graphics4: null
	,depthStencilFormat: null
	,get_g1: function() {
		if(this.graphics1 == null) {
			this.graphics1 = new kha_graphics2_Graphics1(this);
		}
		return this.graphics1;
	}
	,get_g2: function() {
		if(this.graphics2 == null) {
			this.graphics2 = new kha_js_graphics4_Graphics2(this);
		}
		return this.graphics2;
	}
	,get_g4: function() {
		if(this.graphics4 == null) {
			this.graphics4 = new kha_js_graphics4_Graphics(this);
		}
		return this.graphics4;
	}
	,get_width: function() {
		return this.myWidth;
	}
	,get_height: function() {
		return this.myHeight;
	}
	,get_realWidth: function() {
		return this.myWidth;
	}
	,get_realHeight: function() {
		return this.myHeight;
	}
	,isOpaque: function(x,y) {
		if(this.data == null) {
			if(kha_WebGLImage.context == null) {
				return true;
			} else {
				this.createImageData();
			}
		}
		return this.data.data[y * (this.image.width | 0) * 4 + x * 4 + 3] != 0;
	}
	,at: function(x,y) {
		if(this.data == null) {
			if(kha_WebGLImage.context == null) {
				return -16777216;
			} else {
				this.createImageData();
			}
		}
		var r = this.data.data[y * (this.image.width | 0) * 4 + x * 4];
		var g = this.data.data[y * (this.image.width | 0) * 4 + x * 4 + 1];
		var b = this.data.data[y * (this.image.width | 0) * 4 + x * 4 + 2];
		var a = this.data.data[y * (this.image.width | 0) * 4 + x * 4 + 3];
		return kha__$Color_Color_$Impl_$._new(a << 24 | r << 16 | g << 8 | b);
	}
	,createImageData: function() {
		if((this.image instanceof Uint8Array)) {
			this.data = new ImageData(new Uint8ClampedArray(this.image.buffer),this.get_width(),this.get_height());
		} else {
			if(this.get_width() > kha_WebGLImage.canvas.width || this.get_height() > kha_WebGLImage.canvas.height) {
				var cw = kha_WebGLImage.canvas.width;
				var ch = kha_WebGLImage.canvas.height;
				while(this.get_width() > cw || this.get_height() > ch) {
					cw *= 2;
					ch *= 2;
				}
				kha_WebGLImage.canvas.width = cw;
				kha_WebGLImage.canvas.height = ch;
			}
			kha_WebGLImage.context.strokeStyle = "rgba(0,0,0,0)";
			kha_WebGLImage.context.fillStyle = "rgba(0,0,0,0)";
			kha_WebGLImage.context.fillRect(0,0,this.image.width,this.image.height);
			kha_WebGLImage.context.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,this.image.width,this.image.height);
			this.data = kha_WebGLImage.context.getImageData(0,0,this.image.width,this.image.height);
		}
	}
	,createTexture: function() {
		if(kha_SystemImpl.gl == null) {
			return;
		}
		this.texture = kha_SystemImpl.gl.createTexture();
		kha_SystemImpl.gl.bindTexture(3553,this.texture);
		kha_SystemImpl.gl.texParameteri(3553,10240,9729);
		kha_SystemImpl.gl.texParameteri(3553,10241,9729);
		kha_SystemImpl.gl.texParameteri(3553,10242,33071);
		kha_SystemImpl.gl.texParameteri(3553,10243,33071);
		if(this.renderTarget) {
			this.frameBuffer = kha_SystemImpl.gl.createFramebuffer();
			kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
			switch(this.format._hx_index) {
			case 0:
				kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null);
				break;
			case 2:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.get_realWidth(),this.get_realHeight(),0,6408,5126,null);
				break;
			case 3:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.get_realWidth(),this.get_realHeight(),0,6402,5123,null);
				break;
			case 4:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.get_realWidth(),this.get_realHeight(),0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				break;
			case 5:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.get_realWidth(),this.get_realHeight(),0,kha_SystemImpl.gl2 ? 6403 : 6406,5126,null);
				break;
			case 6:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.get_realWidth(),this.get_realHeight(),0,kha_SystemImpl.gl2 ? 6403 : 6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				break;
			default:
				kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null);
			}
			if(this.format == kha_graphics4_TextureFormat.DEPTH16) {
				kha_SystemImpl.gl.texParameteri(3553,10240,9728);
				kha_SystemImpl.gl.texParameteri(3553,10241,9728);
				kha_SystemImpl.gl.framebufferTexture2D(36160,36096,3553,this.texture,0);
				if(!kha_SystemImpl.gl2) {
					var colortex = kha_SystemImpl.gl.createTexture();
					kha_SystemImpl.gl.bindTexture(3553,colortex);
					kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_realWidth(),this.get_realHeight(),0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,3553,colortex,0);
					kha_SystemImpl.gl.bindTexture(3553,this.texture);
				}
			} else {
				kha_SystemImpl.gl.framebufferTexture2D(36160,36064,3553,this.texture,0);
			}
			this.initDepthStencilBuffer(this.depthStencilFormat);
			if(kha_SystemImpl.gl.checkFramebufferStatus(36160) != 36053) {
				haxe_Log.trace("WebGL error: Framebuffer incomplete",{ fileName : "kha/WebGLImage.hx", lineNumber : 225, className : "kha.WebGLImage", methodName : "createTexture"});
			}
			kha_SystemImpl.gl.bindRenderbuffer(36161,null);
			kha_SystemImpl.gl.bindFramebuffer(36160,null);
		} else if(this.video != null) {
			kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.video);
		} else {
			switch(this.format._hx_index) {
			case 0:
				if((this.image instanceof Uint8Array)) {
					kha_SystemImpl.gl.texImage2D(3553,0,6408,this.myWidth,this.myHeight,0,6408,5121,this.image);
				} else {
					kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.image);
				}
				break;
			case 1:
				kha_SystemImpl.gl.texImage2D(3553,0,6409,this.myWidth,this.myHeight,0,6409,5121,this.image);
				break;
			case 2:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,this.image);
				break;
			case 4:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,this.image);
				break;
			case 5:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,kha_SystemImpl.gl2 ? 6403 : 6406,5126,this.image);
				break;
			case 6:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,kha_SystemImpl.gl2 ? 6403 : 6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,this.image);
				break;
			default:
				kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.image);
			}
		}
		kha_SystemImpl.gl.bindTexture(3553,null);
	}
	,initDepthStencilBuffer: function(depthStencilFormat) {
		switch(depthStencilFormat) {
		case 0:
			break;
		case 1:case 5:
			if(kha_SystemImpl.depthTexture == null) {
				this.renderBuffer = kha_SystemImpl.gl.createRenderbuffer();
				kha_SystemImpl.gl.bindRenderbuffer(36161,this.renderBuffer);
				kha_SystemImpl.gl.renderbufferStorage(36161,33189,this.get_realWidth(),this.get_realHeight());
				kha_SystemImpl.gl.framebufferRenderbuffer(36160,36096,36161,this.renderBuffer);
			} else {
				this.depthTexture = kha_SystemImpl.gl.createTexture();
				kha_SystemImpl.gl.bindTexture(3553,this.depthTexture);
				if(depthStencilFormat == 1) {
					kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33190 : 6402,this.get_realWidth(),this.get_realHeight(),0,6402,5125,null);
				} else {
					kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.get_realWidth(),this.get_realHeight(),0,6402,5123,null);
				}
				kha_SystemImpl.gl.texParameteri(3553,10240,9728);
				kha_SystemImpl.gl.texParameteri(3553,10241,9728);
				kha_SystemImpl.gl.texParameteri(3553,10242,33071);
				kha_SystemImpl.gl.texParameteri(3553,10243,33071);
				kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
				kha_SystemImpl.gl.framebufferTexture2D(36160,36096,3553,this.depthTexture,0);
			}
			break;
		case 2:case 3:case 4:
			if(kha_SystemImpl.depthTexture == null) {
				this.renderBuffer = kha_SystemImpl.gl.createRenderbuffer();
				kha_SystemImpl.gl.bindRenderbuffer(36161,this.renderBuffer);
				kha_SystemImpl.gl.renderbufferStorage(36161,34041,this.get_realWidth(),this.get_realHeight());
				kha_SystemImpl.gl.framebufferRenderbuffer(36160,33306,36161,this.renderBuffer);
			} else {
				this.depthTexture = kha_SystemImpl.gl.createTexture();
				kha_SystemImpl.gl.bindTexture(3553,this.depthTexture);
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 35056 : 34041,this.get_realWidth(),this.get_realHeight(),0,34041,kha_SystemImpl.depthTexture.UNSIGNED_INT_24_8_WEBGL,null);
				kha_SystemImpl.gl.texParameteri(3553,10240,9728);
				kha_SystemImpl.gl.texParameteri(3553,10241,9728);
				kha_SystemImpl.gl.texParameteri(3553,10242,33071);
				kha_SystemImpl.gl.texParameteri(3553,10243,33071);
				kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
				kha_SystemImpl.gl.framebufferTexture2D(36160,33306,3553,this.depthTexture,0);
			}
			break;
		}
	}
	,set: function(stage) {
		kha_SystemImpl.gl.activeTexture(33984 + stage);
		kha_SystemImpl.gl.bindTexture(3553,this.texture);
		if(this.video != null) {
			kha_SystemImpl.gl.texImage2D(3553,0,6408,6408,5121,this.video);
		}
	}
	,setDepth: function(stage) {
		kha_SystemImpl.gl.activeTexture(33984 + stage);
		kha_SystemImpl.gl.bindTexture(3553,this.depthTexture);
	}
	,setDepthStencilFrom: function(image) {
		kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
		kha_SystemImpl.gl.framebufferTexture2D(36160,36096,3553,(js_Boot.__cast(image , kha_WebGLImage)).depthTexture,0);
	}
	,bytesToArray: function(bytes) {
		switch(this.format._hx_index) {
		case 0:case 1:
			return new Uint8Array(bytes.b.bufferValue);
		case 2:case 4:case 5:case 6:
			return new Float32Array(bytes.b.bufferValue);
		default:
			return new Uint8Array(bytes.b.bufferValue);
		}
	}
	,bytes: null
	,lock: function(level) {
		if(level == null) {
			level = 0;
		}
		this.bytes = new haxe_io_Bytes(new ArrayBuffer(kha_WebGLImage.formatByteSize(this.format) * this.get_width() * this.get_height()));
		return this.bytes;
	}
	,unlock: function() {
		if(kha_SystemImpl.gl != null) {
			this.texture = kha_SystemImpl.gl.createTexture();
			kha_SystemImpl.gl.bindTexture(3553,this.texture);
			kha_SystemImpl.gl.texParameteri(3553,10240,9729);
			kha_SystemImpl.gl.texParameteri(3553,10241,9729);
			kha_SystemImpl.gl.texParameteri(3553,10242,33071);
			kha_SystemImpl.gl.texParameteri(3553,10243,33071);
			switch(this.format._hx_index) {
			case 0:
				kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,this.bytesToArray(this.bytes));
				break;
			case 1:
				kha_SystemImpl.gl.texImage2D(3553,0,6409,this.get_width(),this.get_height(),0,6409,5121,this.bytesToArray(this.bytes));
				if(kha_SystemImpl.gl.getError() == 1282) {
					var rgbaBytes = new haxe_io_Bytes(new ArrayBuffer(this.get_width() * this.get_height() * 4));
					var _g = 0;
					var _g1 = this.get_height();
					while(_g < _g1) {
						var y = _g++;
						var _g2 = 0;
						var _g11 = this.get_width();
						while(_g2 < _g11) {
							var x = _g2++;
							var _this = this.bytes;
							var pos = y * this.get_width() + x;
							var value = _this.b[pos];
							var pos1 = y * this.get_width() * 4 + x * 4;
							rgbaBytes.b[pos1] = value;
							var pos2 = y * this.get_width() * 4 + x * 4 + 1;
							rgbaBytes.b[pos2] = value;
							var pos3 = y * this.get_width() * 4 + x * 4 + 2;
							rgbaBytes.b[pos3] = value;
							var pos4 = y * this.get_width() * 4 + x * 4 + 3;
							rgbaBytes.b[pos4] = 255;
						}
					}
					kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,this.bytesToArray(rgbaBytes));
				}
				break;
			case 2:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.get_width(),this.get_height(),0,6408,5126,this.bytesToArray(this.bytes));
				break;
			case 4:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.get_width(),this.get_height(),0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,this.bytesToArray(this.bytes));
				break;
			case 5:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.get_width(),this.get_height(),0,kha_SystemImpl.gl2 ? 6403 : 6406,5126,this.bytesToArray(this.bytes));
				break;
			case 6:
				kha_SystemImpl.gl.texImage2D(3553,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.get_width(),this.get_height(),0,kha_SystemImpl.gl2 ? 6403 : 6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,this.bytesToArray(this.bytes));
				break;
			default:
				kha_SystemImpl.gl.texImage2D(3553,0,6408,this.get_width(),this.get_height(),0,6408,5121,this.bytesToArray(this.bytes));
			}
			kha_SystemImpl.gl.bindTexture(3553,null);
			this.bytes = null;
		}
	}
	,pixels: null
	,getPixels: function() {
		if(this.frameBuffer == null) {
			return null;
		}
		if(this.pixels == null) {
			switch(this.format._hx_index) {
			case 0:case 1:
				this.pixels = new Uint8Array(kha_WebGLImage.formatByteSize(this.format) * this.get_width() * this.get_height());
				break;
			case 2:case 5:
				this.pixels = new Float32Array((kha_WebGLImage.formatByteSize(this.format) / 4 | 0) * this.get_width() * this.get_height());
				break;
			case 4:case 6:
				this.pixels = new Uint16Array((kha_WebGLImage.formatByteSize(this.format) / 2 | 0) * this.get_width() * this.get_height());
				break;
			default:
				this.pixels = new Uint8Array(kha_WebGLImage.formatByteSize(this.format) * this.get_width() * this.get_height());
			}
		}
		kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
		switch(this.format._hx_index) {
		case 0:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,6408,5121,this.pixels);
			break;
		case 1:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,kha_SystemImpl.gl2 ? 6403 : 6406,5121,this.pixels);
			break;
		case 2:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,6408,5126,this.pixels);
			break;
		case 4:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,this.pixels);
			break;
		case 5:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,kha_SystemImpl.gl2 ? 6403 : 6406,5126,this.pixels);
			break;
		case 6:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,kha_SystemImpl.gl2 ? 6403 : 6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,this.pixels);
			break;
		default:
			kha_SystemImpl.gl.readPixels(0,0,this.myWidth,this.myHeight,6408,5121,this.pixels);
		}
		return haxe_io_Bytes.ofData(this.pixels.buffer);
	}
	,unload: function() {
		if(this.texture != null) {
			kha_SystemImpl.gl.deleteTexture(this.texture);
		}
		if(this.depthTexture != null) {
			kha_SystemImpl.gl.deleteTexture(this.depthTexture);
		}
		if(this.frameBuffer != null) {
			kha_SystemImpl.gl.deleteFramebuffer(this.frameBuffer);
		}
		if(this.renderBuffer != null) {
			kha_SystemImpl.gl.deleteRenderbuffer(this.renderBuffer);
		}
	}
	,generateMipmaps: function(levels) {
		kha_SystemImpl.gl.bindTexture(3553,this.texture);
		kha_SystemImpl.gl.generateMipmap(3553);
	}
	,setMipmaps: function(mipmaps) {
		kha_SystemImpl.gl.bindTexture(3553,this.texture);
		if(this.format == kha_graphics4_TextureFormat.RGBA128) {
			var _g = 0;
			var _g1 = mipmaps.length;
			while(_g < _g1) {
				var i = _g++;
				kha_SystemImpl.gl.texImage2D(3553,i + 1,kha_SystemImpl.gl2 ? 34836 : 6408,mipmaps[i].get_width(),mipmaps[i].get_height(),0,6408,5126,(js_Boot.__cast(mipmaps[i] , kha_WebGLImage)).image);
			}
		} else if(this.format == kha_graphics4_TextureFormat.RGBA64) {
			var _g2 = 0;
			var _g11 = mipmaps.length;
			while(_g2 < _g11) {
				var i1 = _g2++;
				kha_SystemImpl.gl.texImage2D(3553,i1 + 1,kha_SystemImpl.gl2 ? 34842 : 6408,mipmaps[i1].get_width(),mipmaps[i1].get_height(),0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,(js_Boot.__cast(mipmaps[i1] , kha_WebGLImage)).image);
			}
		} else {
			var _g3 = 0;
			var _g12 = mipmaps.length;
			while(_g3 < _g12) {
				var i2 = _g3++;
				kha_SystemImpl.gl.texImage2D(3553,i2 + 1,6408,6408,5121,(js_Boot.__cast(mipmaps[i2] , kha_WebGLImage)).image);
			}
		}
	}
	,__class__: kha_WebGLImage
});
var kha_Window = function(defaultWidth,defaultHeight,canvas) {
	this.canvas = canvas;
	this.defaultWidth = defaultWidth;
	this.defaultHeight = defaultHeight;
	kha_Window.windows.push(this);
};
$hxClasses["kha.Window"] = kha_Window;
kha_Window.__name__ = true;
kha_Window.create = function(win,frame) {
	return null;
};
kha_Window.destroy = function($window) {
};
kha_Window.get = function(index) {
	return kha_Window.windows[index];
};
kha_Window.get_all = function() {
	return kha_Window.windows;
};
kha_Window.prototype = {
	canvas: null
	,defaultWidth: null
	,defaultHeight: null
	,resize: function(width,height) {
	}
	,move: function(x,y) {
	}
	,changeWindowFeatures: function(features) {
	}
	,changeFramebuffer: function(frame) {
	}
	,get_x: function() {
		return 0;
	}
	,set_x: function(value) {
		return 0;
	}
	,get_y: function() {
		return 0;
	}
	,set_y: function(value) {
		return 0;
	}
	,get_width: function() {
		if(this.canvas.width == 0) {
			return this.defaultWidth;
		} else {
			return this.canvas.width;
		}
	}
	,set_width: function(value) {
		return 800;
	}
	,get_height: function() {
		if(this.canvas.height == 0) {
			return this.defaultHeight;
		} else {
			return this.canvas.height;
		}
	}
	,set_height: function(value) {
		return 600;
	}
	,get_mode: function() {
		return 0;
	}
	,set_mode: function(mode) {
		if(mode == 1 || mode == 2) {
			if(!this.isFullscreen()) {
				this.requestFullscreen();
			}
		} else if(this.isFullscreen()) {
			this.exitFullscreen();
		}
		return mode;
	}
	,isFullscreen: function() {
		return document.fullscreenElement === this.canvas ||
			document.mozFullScreenElement === this.canvas ||
			document.webkitFullscreenElement === this.canvas ||
			document.msFullscreenElement === this.canvas ;
	}
	,requestFullscreen: function() {
		if(this.canvas.requestFullscreen) {
			this.canvas.requestFullscreen();
		} else if(this.canvas.msRequestFullscreen) {
			this.canvas.msRequestFullscreen();
		} else if(this.canvas.mozRequestFullScreen) {
			this.canvas.mozRequestFullScreen();
		} else if(this.canvas.webkitRequestFullscreen) {
			this.canvas.webkitRequestFullscreen();
		}
	}
	,exitFullscreen: function() {
		if(document.exitFullscreen) {
			document.exitFullscreen();
		} else if(document.msExitFullscreen) {
			document.msExitFullscreen();
		} else if(document.mozCancelFullScreen) {
			document.mozCancelFullScreen();
		} else if(document.webkitExitFullscreen) {
			document.webkitExitFullscreen();
		}
	}
	,get_visible: function() {
		return true;
	}
	,set_visible: function(value) {
		return true;
	}
	,get_title: function() {
		return "Kha";
	}
	,set_title: function(value) {
		return "Kha";
	}
	,notifyOnResize: function(callback) {
	}
	,get_vSynced: function() {
		return true;
	}
	,__class__: kha_Window
};
var kha__$WindowOptions_WindowFeatures_$Impl_$ = {};
$hxClasses["kha._WindowOptions.WindowFeatures_Impl_"] = kha__$WindowOptions_WindowFeatures_$Impl_$;
kha__$WindowOptions_WindowFeatures_$Impl_$.__name__ = true;
kha__$WindowOptions_WindowFeatures_$Impl_$._new = function(value) {
	var this1 = value;
	return this1;
};
var kha_WindowOptions = function(title,x,y,width,height,display,visible,windowFeatures,mode) {
	if(mode == null) {
		mode = 0;
	}
	if(visible == null) {
		visible = true;
	}
	if(height == null) {
		height = 600;
	}
	if(width == null) {
		width = 800;
	}
	if(y == null) {
		y = -1;
	}
	if(x == null) {
		x = -1;
	}
	this.mode = 0;
	this.windowFeatures = 1 | 4 | 2;
	this.visible = true;
	this.display = null;
	this.height = 600;
	this.width = 800;
	this.y = -1;
	this.x = -1;
	this.title = null;
	this.title = title;
	this.x = x;
	this.y = y;
	this.width = width;
	this.height = height;
	this.display = display == null ? kha_Display.get_primary() : display;
	this.visible = visible;
	this.windowFeatures = windowFeatures == null ? 1 | 4 | 2 : windowFeatures;
	this.mode = mode;
};
$hxClasses["kha.WindowOptions"] = kha_WindowOptions;
kha_WindowOptions.__name__ = true;
kha_WindowOptions.prototype = {
	title: null
	,x: null
	,y: null
	,width: null
	,height: null
	,display: null
	,visible: null
	,windowFeatures: null
	,mode: null
	,__class__: kha_WindowOptions
};
var kha_arrays__$Float32Array_Float32Array_$Impl_$ = {};
$hxClasses["kha.arrays._Float32Array.Float32Array_Impl_"] = kha_arrays__$Float32Array_Float32Array_$Impl_$;
kha_arrays__$Float32Array_Float32Array_$Impl_$.__name__ = true;
kha_arrays__$Float32Array_Float32Array_$Impl_$._new = function(elements) {
	var this1 = new Float32Array(elements);
	return this1;
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.get_length = function(this1) {
	return this1.length;
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.set = function(this1,index,value) {
	return this1[index] = value;
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.get = function(this1,index) {
	return this1[index];
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.data = function(this1) {
	return this1;
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayRead = function(this1,index) {
	return this1[index];
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.arrayWrite = function(this1,index,value) {
	return this1[index] = value;
};
kha_arrays__$Float32Array_Float32Array_$Impl_$.subarray = function(this1,start,end) {
	return this1.subarray(start,end);
};
var kha_arrays__$Uint32Array_Uint32Array_$Impl_$ = {};
$hxClasses["kha.arrays._Uint32Array.Uint32Array_Impl_"] = kha_arrays__$Uint32Array_Uint32Array_$Impl_$;
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.__name__ = true;
kha_arrays__$Uint32Array_Uint32Array_$Impl_$._new = function(elements) {
	var this1 = new Uint32Array(elements);
	return this1;
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get_length = function(this1) {
	return this1.length;
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.set = function(this1,index,value) {
	return this1[index] = value;
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.get = function(this1,index) {
	return this1[index];
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.data = function(this1) {
	return this1;
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayRead = function(this1,index) {
	return this1[index];
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.arrayWrite = function(this1,index,value) {
	return this1[index] = value;
};
kha_arrays__$Uint32Array_Uint32Array_$Impl_$.subarray = function(this1,start,end) {
	return this1.subarray(start,end);
};
var kha_audio1_AudioChannel = function() { };
$hxClasses["kha.audio1.AudioChannel"] = kha_audio1_AudioChannel;
kha_audio1_AudioChannel.__name__ = true;
kha_audio1_AudioChannel.prototype = {
	play: null
	,pause: null
	,stop: null
	,length: null
	,get_length: null
	,position: null
	,get_position: null
	,get_volume: null
	,set_volume: null
	,finished: null
	,get_finished: null
	,__class__: kha_audio1_AudioChannel
};
var kha_audio2_Audio = function() { };
$hxClasses["kha.audio2.Audio"] = kha_audio2_Audio;
kha_audio2_Audio.__name__ = true;
kha_audio2_Audio.initContext = function() {
	try {
		kha_audio2_Audio._context = new AudioContext();
		return;
	} catch( e ) {
		var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
	}
	try {
		this._context = new webkitAudioContext();
		return;
	} catch( e2 ) {
		var e3 = (e2 instanceof js__$Boot_HaxeError) ? e2.val : e2;
	}
};
kha_audio2_Audio._init = function() {
	kha_audio2_Audio.initContext();
	if(kha_audio2_Audio._context == null) {
		return false;
	}
	var bufferSize = 2048;
	kha_audio2_Audio.buffer = new kha_audio2_Buffer(bufferSize * 4,2,kha_audio2_Audio._context.sampleRate | 0);
	kha_audio2_Audio.processingNode = kha_audio2_Audio._context.createScriptProcessor(bufferSize,0,2);
	kha_audio2_Audio.processingNode.onaudioprocess = function(e) {
		var output1 = e.outputBuffer.getChannelData(0);
		var output2 = e.outputBuffer.getChannelData(1);
		if(kha_audio2_Audio.audioCallback != null) {
			kha_audio2_Audio.audioCallback(e.outputBuffer.length * 2,kha_audio2_Audio.buffer);
			var _g = 0;
			var _g1 = e.outputBuffer.length;
			while(_g < _g1) {
				var i = _g++;
				output1[i] = kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.readLocation];
				kha_audio2_Audio.buffer.readLocation += 1;
				output2[i] = kha_audio2_Audio.buffer.data[kha_audio2_Audio.buffer.readLocation];
				kha_audio2_Audio.buffer.readLocation += 1;
				if(kha_audio2_Audio.buffer.readLocation >= kha_audio2_Audio.buffer.size) {
					kha_audio2_Audio.buffer.readLocation = 0;
				}
			}
		} else {
			var _g2 = 0;
			var _g11 = e.outputBuffer.length;
			while(_g2 < _g11) {
				var i1 = _g2++;
				output1[i1] = 0;
				output2[i1] = 0;
			}
		}
	};
	kha_audio2_Audio.processingNode.connect(kha_audio2_Audio._context.destination);
	return true;
};
kha_audio2_Audio.stream = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	var element = window.document.createElement("audio");
	var blob = new Blob([sound.compressedData.b.bufferValue],{ type : "audio/mp4"});
	element.src = URL.createObjectURL(blob);
	element.loop = loop;
	var channel = new kha_js_AEAudioChannel(element);
	channel.play();
	return channel;
};
var kha_audio2_Audio1 = function() { };
$hxClasses["kha.audio2.Audio1"] = kha_audio2_Audio1;
kha_audio2_Audio1.__name__ = true;
kha_audio2_Audio1._init = function() {
	var this1 = new Array(16);
	kha_audio2_Audio1.soundChannels = this1;
	var this2 = new Array(16);
	kha_audio2_Audio1.streamChannels = this2;
	var this3 = new Array(16);
	kha_audio2_Audio1.internalSoundChannels = this3;
	var this4 = new Array(16);
	kha_audio2_Audio1.internalStreamChannels = this4;
	var this5 = new Float32Array(512);
	kha_audio2_Audio1.sampleCache1 = this5;
	var this6 = new Float32Array(512);
	kha_audio2_Audio1.sampleCache2 = this6;
	kha_audio2_Audio.audioCallback = kha_audio2_Audio1.mix;
};
kha_audio2_Audio1.max = function(a,b) {
	if(a > b) {
		return a;
	} else {
		return b;
	}
};
kha_audio2_Audio1.min = function(a,b) {
	if(a < b) {
		return a;
	} else {
		return b;
	}
};
kha_audio2_Audio1.mix = function(samples,buffer) {
	if(kha_audio2_Audio1.sampleCache1.length < samples) {
		var this1 = new Float32Array(samples);
		kha_audio2_Audio1.sampleCache1 = this1;
		var this2 = new Float32Array(samples);
		kha_audio2_Audio1.sampleCache2 = this2;
	}
	var _g = 0;
	var _g1 = samples;
	while(_g < _g1) {
		var i = _g++;
		kha_audio2_Audio1.sampleCache2[i] = 0;
	}
	kha_audio2_Audio1.internalSoundChannels[0] = kha_audio2_Audio1.soundChannels[0];
	kha_audio2_Audio1.internalSoundChannels[1] = kha_audio2_Audio1.soundChannels[1];
	kha_audio2_Audio1.internalSoundChannels[2] = kha_audio2_Audio1.soundChannels[2];
	kha_audio2_Audio1.internalSoundChannels[3] = kha_audio2_Audio1.soundChannels[3];
	kha_audio2_Audio1.internalSoundChannels[4] = kha_audio2_Audio1.soundChannels[4];
	kha_audio2_Audio1.internalSoundChannels[5] = kha_audio2_Audio1.soundChannels[5];
	kha_audio2_Audio1.internalSoundChannels[6] = kha_audio2_Audio1.soundChannels[6];
	kha_audio2_Audio1.internalSoundChannels[7] = kha_audio2_Audio1.soundChannels[7];
	kha_audio2_Audio1.internalSoundChannels[8] = kha_audio2_Audio1.soundChannels[8];
	kha_audio2_Audio1.internalSoundChannels[9] = kha_audio2_Audio1.soundChannels[9];
	kha_audio2_Audio1.internalSoundChannels[10] = kha_audio2_Audio1.soundChannels[10];
	kha_audio2_Audio1.internalSoundChannels[11] = kha_audio2_Audio1.soundChannels[11];
	kha_audio2_Audio1.internalSoundChannels[12] = kha_audio2_Audio1.soundChannels[12];
	kha_audio2_Audio1.internalSoundChannels[13] = kha_audio2_Audio1.soundChannels[13];
	kha_audio2_Audio1.internalSoundChannels[14] = kha_audio2_Audio1.soundChannels[14];
	kha_audio2_Audio1.internalSoundChannels[15] = kha_audio2_Audio1.soundChannels[15];
	kha_audio2_Audio1.internalStreamChannels[0] = kha_audio2_Audio1.streamChannels[0];
	kha_audio2_Audio1.internalStreamChannels[1] = kha_audio2_Audio1.streamChannels[1];
	kha_audio2_Audio1.internalStreamChannels[2] = kha_audio2_Audio1.streamChannels[2];
	kha_audio2_Audio1.internalStreamChannels[3] = kha_audio2_Audio1.streamChannels[3];
	kha_audio2_Audio1.internalStreamChannels[4] = kha_audio2_Audio1.streamChannels[4];
	kha_audio2_Audio1.internalStreamChannels[5] = kha_audio2_Audio1.streamChannels[5];
	kha_audio2_Audio1.internalStreamChannels[6] = kha_audio2_Audio1.streamChannels[6];
	kha_audio2_Audio1.internalStreamChannels[7] = kha_audio2_Audio1.streamChannels[7];
	kha_audio2_Audio1.internalStreamChannels[8] = kha_audio2_Audio1.streamChannels[8];
	kha_audio2_Audio1.internalStreamChannels[9] = kha_audio2_Audio1.streamChannels[9];
	kha_audio2_Audio1.internalStreamChannels[10] = kha_audio2_Audio1.streamChannels[10];
	kha_audio2_Audio1.internalStreamChannels[11] = kha_audio2_Audio1.streamChannels[11];
	kha_audio2_Audio1.internalStreamChannels[12] = kha_audio2_Audio1.streamChannels[12];
	kha_audio2_Audio1.internalStreamChannels[13] = kha_audio2_Audio1.streamChannels[13];
	kha_audio2_Audio1.internalStreamChannels[14] = kha_audio2_Audio1.streamChannels[14];
	kha_audio2_Audio1.internalStreamChannels[15] = kha_audio2_Audio1.streamChannels[15];
	var _g2 = 0;
	var _g3 = kha_audio2_Audio1.internalSoundChannels;
	while(_g2 < _g3.length) {
		var channel = _g3[_g2];
		++_g2;
		if(channel == null || channel.get_finished()) {
			continue;
		}
		channel.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);
		var _g21 = 0;
		var _g31 = samples;
		while(_g21 < _g31) {
			var i1 = _g21++;
			kha_audio2_Audio1.sampleCache2[i1] += kha_audio2_Audio1.sampleCache1[i1] * channel.get_volume();
		}
	}
	var _g4 = 0;
	var _g5 = kha_audio2_Audio1.internalStreamChannels;
	while(_g4 < _g5.length) {
		var channel1 = _g5[_g4];
		++_g4;
		if(channel1 == null || channel1.get_finished()) {
			continue;
		}
		channel1.nextSamples(kha_audio2_Audio1.sampleCache1,samples,buffer.samplesPerSecond);
		var _g41 = 0;
		var _g51 = samples;
		while(_g41 < _g51) {
			var i2 = _g41++;
			kha_audio2_Audio1.sampleCache2[i2] += kha_audio2_Audio1.sampleCache1[i2] * channel1.get_volume();
		}
	}
	var _g6 = 0;
	var _g7 = samples;
	while(_g6 < _g7) {
		var i3 = _g6++;
		var a = kha_audio2_Audio1.sampleCache2[i3];
		var a1 = a < 1.0 ? a : 1.0;
		buffer.data[buffer.writeLocation] = a1 > -1.0 ? a1 : -1.0;
		buffer.writeLocation += 1;
		if(buffer.writeLocation >= buffer.size) {
			buffer.writeLocation = 0;
		}
	}
};
kha_audio2_Audio1.play = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	var channel = null;
	var _g = 0;
	while(_g < 16) {
		var i = _g++;
		if(kha_audio2_Audio1.soundChannels[i] == null || kha_audio2_Audio1.soundChannels[i].get_finished()) {
			channel = new kha_audio2_AudioChannel(loop);
			channel.data = sound.uncompressedData;
			kha_audio2_Audio1.soundChannels[i] = channel;
			break;
		}
	}
	return channel;
};
kha_audio2_Audio1._playAgain = function(channel) {
	var _g = 0;
	while(_g < 16) {
		var i = _g++;
		if(kha_audio2_Audio1.soundChannels[i] == null || kha_audio2_Audio1.soundChannels[i].get_finished() || kha_audio2_Audio1.soundChannels[i] == channel) {
			kha_audio2_Audio1.soundChannels[i] = channel;
			break;
		}
	}
};
kha_audio2_Audio1.stream = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	var hardwareChannel = kha_audio2_Audio.stream(sound,loop);
	if(hardwareChannel != null) {
		return hardwareChannel;
	}
	var channel = null;
	var _g = 0;
	while(_g < 16) {
		var i = _g++;
		if(kha_audio2_Audio1.streamChannels[i] == null || kha_audio2_Audio1.streamChannels[i].get_finished()) {
			channel = new kha_audio2_StreamChannel(sound.compressedData,loop);
			kha_audio2_Audio1.streamChannels[i] = channel;
			break;
		}
	}
	return channel;
};
var kha_audio2_AudioChannel = function(looping) {
	this.paused = false;
	this.looping = looping;
	this.myVolume = 1;
	this.myPosition = 0;
};
$hxClasses["kha.audio2.AudioChannel"] = kha_audio2_AudioChannel;
kha_audio2_AudioChannel.__name__ = true;
kha_audio2_AudioChannel.__interfaces__ = [kha_audio1_AudioChannel];
kha_audio2_AudioChannel.prototype = {
	data: null
	,myVolume: null
	,myPosition: null
	,paused: null
	,looping: null
	,nextSamples: function(samples,length,sampleRate) {
		if(this.paused) {
			var _g = 0;
			var _g1 = length;
			while(_g < _g1) {
				var i = _g++;
				samples[i] = 0;
			}
			return;
		}
		var w_ptr = 0;
		var chk_ptr = 0;
		while(w_ptr < length) {
			var addressable_data = this.data.length - this.myPosition;
			var next_chunk = addressable_data < length - w_ptr ? addressable_data : length - w_ptr;
			while(chk_ptr < next_chunk) {
				samples[w_ptr] = this.data[this.myPosition];
				++this.myPosition;
				++chk_ptr;
				++w_ptr;
			}
			if(!this.looping) {
				break;
			} else {
				chk_ptr = 0;
				if(this.myPosition >= this.data.length) {
					this.myPosition = 0;
				}
			}
		}
		while(w_ptr < length) {
			samples[w_ptr] = 0;
			++w_ptr;
		}
	}
	,play: function() {
		this.paused = false;
		if(this.get_finished()) {
			this.myPosition = 0;
			kha_audio2_Audio1._playAgain(this);
		}
	}
	,pause: function() {
		this.paused = true;
	}
	,stop: function() {
		this.myPosition = this.data.length;
	}
	,length: null
	,get_length: function() {
		return this.data.length / 44100 / 2;
	}
	,position: null
	,get_position: function() {
		return this.myPosition / 44100 / 2;
	}
	,get_volume: function() {
		return this.myVolume;
	}
	,set_volume: function(value) {
		return this.myVolume = value;
	}
	,finished: null
	,get_finished: function() {
		return this.myPosition >= this.data.length;
	}
	,__class__: kha_audio2_AudioChannel
};
var kha_audio2_Buffer = function(size,channels,samplesPerSecond) {
	this.size = size;
	var this1 = new Float32Array(size);
	this.data = this1;
	this.channels = channels;
	this.samplesPerSecond = samplesPerSecond;
	this.readLocation = 0;
	this.writeLocation = 0;
};
$hxClasses["kha.audio2.Buffer"] = kha_audio2_Buffer;
kha_audio2_Buffer.__name__ = true;
kha_audio2_Buffer.prototype = {
	channels: null
	,samplesPerSecond: null
	,data: null
	,size: null
	,readLocation: null
	,writeLocation: null
	,__class__: kha_audio2_Buffer
};
var kha_audio2_StreamChannel = function(data,loop) {
	this.paused = false;
	this.atend = false;
	this.myVolume = 1;
	this.loop = loop;
	this.reader = kha_audio2_ogg_vorbis_Reader.openFromBytes(data);
};
$hxClasses["kha.audio2.StreamChannel"] = kha_audio2_StreamChannel;
kha_audio2_StreamChannel.__name__ = true;
kha_audio2_StreamChannel.__interfaces__ = [kha_audio1_AudioChannel];
kha_audio2_StreamChannel.prototype = {
	reader: null
	,atend: null
	,loop: null
	,myVolume: null
	,paused: null
	,nextSamples: function(samples,length,sampleRate) {
		if(this.paused) {
			var _g = 0;
			var _g1 = length;
			while(_g < _g1) {
				var i = _g++;
				samples[i] = 0;
			}
			return;
		}
		var count = this.reader.read(samples,length / 2 | 0,2,sampleRate,true) * 2;
		if(count < length) {
			if(this.loop) {
				this.reader.set_currentMillisecond(0);
			} else {
				this.atend = true;
			}
			var _g2 = count;
			var _g11 = length;
			while(_g2 < _g11) {
				var i1 = _g2++;
				samples[i1] = 0;
			}
		}
	}
	,play: function() {
		this.paused = false;
	}
	,pause: function() {
		this.paused = true;
	}
	,stop: function() {
		this.atend = true;
	}
	,length: null
	,get_length: function() {
		return this.reader.get_totalMillisecond() / 1000.0;
	}
	,position: null
	,get_position: function() {
		return this.reader.get_currentMillisecond() / 1000.0;
	}
	,get_volume: function() {
		return this.myVolume;
	}
	,set_volume: function(value) {
		return this.myVolume = value;
	}
	,finished: null
	,get_finished: function() {
		return this.atend;
	}
	,__class__: kha_audio2_StreamChannel
};
var kha_audio2_ogg_tools_Crc32 = function() { };
$hxClasses["kha.audio2.ogg.tools.Crc32"] = kha_audio2_ogg_tools_Crc32;
kha_audio2_ogg_tools_Crc32.__name__ = true;
kha_audio2_ogg_tools_Crc32.init = function() {
	if(kha_audio2_ogg_tools_Crc32.table != null) {
		return;
	}
	var this1 = new Array(256);
	kha_audio2_ogg_tools_Crc32.table = this1;
	var _g = 0;
	while(_g < 256) {
		var i = _g++;
		var s = i << 24;
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		s = s << 1 ^ (_$UInt_UInt_$Impl_$.gte(s,1 << 31) ? 79764919 : 0);
		kha_audio2_ogg_tools_Crc32.table[i] = s;
	}
};
kha_audio2_ogg_tools_Crc32.update = function(crc,byte) {
	return crc << 8 ^ kha_audio2_ogg_tools_Crc32.table[byte ^ crc >>> 24];
};
var kha_audio2_ogg_tools_MathTools = function() { };
$hxClasses["kha.audio2.ogg.tools.MathTools"] = kha_audio2_ogg_tools_MathTools;
kha_audio2_ogg_tools_MathTools.__name__ = true;
kha_audio2_ogg_tools_MathTools.ilog = function(n) {
	var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
	if(n < 16384) {
		if(n < 16) {
			return log2_4[n];
		} else if(n < 512) {
			return 5 + log2_4[n >> 5];
		} else {
			return 10 + log2_4[n >> 10];
		}
	} else if(n < 16777216) {
		if(n < 524288) {
			return 15 + log2_4[n >> 15];
		} else {
			return 20 + log2_4[n >> 20];
		}
	} else if(n < 536870912) {
		return 25 + log2_4[n >> 25];
	} else if(n < -2147483648) {
		return 30 + log2_4[n >> 30];
	} else {
		return 0;
	}
};
var kha_audio2_ogg_tools_Mdct = function() { };
$hxClasses["kha.audio2.ogg.tools.Mdct"] = kha_audio2_ogg_tools_Mdct;
kha_audio2_ogg_tools_Mdct.__name__ = true;
kha_audio2_ogg_tools_Mdct.inverseTransform = function(buffer,n,a,b,c,bitReverse) {
	var n2 = n >> 1;
	var n4 = n >> 2;
	var n8 = n >> 3;
	var this1 = new Array(n2);
	var buf2 = this1;
	var dOffset = n2 - 2;
	var aaOffset = 0;
	var eOffset = 0;
	var eStopOffset = n2;
	while(eOffset != eStopOffset) {
		buf2[dOffset + 1] = buffer[eOffset] * a[aaOffset] - buffer[eOffset + 2] * a[aaOffset + 1];
		buf2[dOffset] = buffer[eOffset] * a[aaOffset + 1] + buffer[eOffset + 2] * a[aaOffset];
		dOffset -= 2;
		aaOffset += 2;
		eOffset += 4;
	}
	eOffset = n2 - 3;
	while(dOffset >= 0) {
		buf2[dOffset + 1] = -buffer[eOffset + 2] * a[aaOffset] - -buffer[eOffset] * a[aaOffset + 1];
		buf2[dOffset] = -buffer[eOffset + 2] * a[aaOffset + 1] + -buffer[eOffset] * a[aaOffset];
		dOffset -= 2;
		aaOffset += 2;
		eOffset -= 4;
	}
	var u = buffer;
	var v = buf2;
	var aaOffset1 = n2 - 8;
	var eOffset0 = n4;
	var eOffset1 = 0;
	var dOffset0 = n4;
	var dOffset1 = 0;
	while(aaOffset1 >= 0) {
		var v41_21 = v[eOffset0 + 1] - v[eOffset1 + 1];
		var v40_20 = v[eOffset0] - v[eOffset1];
		u[dOffset0 + 1] = v[eOffset0 + 1] + v[eOffset1 + 1];
		u[dOffset0] = v[eOffset0] + v[eOffset1];
		u[dOffset1 + 1] = v41_21 * a[aaOffset1 + 4] - v40_20 * a[aaOffset1 + 5];
		u[dOffset1] = v40_20 * a[aaOffset1 + 4] + v41_21 * a[aaOffset1 + 5];
		v41_21 = v[eOffset0 + 3] - v[eOffset1 + 3];
		v40_20 = v[eOffset0 + 2] - v[eOffset1 + 2];
		u[dOffset0 + 3] = v[eOffset0 + 3] + v[eOffset1 + 3];
		u[dOffset0 + 2] = v[eOffset0 + 2] + v[eOffset1 + 2];
		u[dOffset1 + 3] = v41_21 * a[aaOffset1] - v40_20 * a[aaOffset1 + 1];
		u[dOffset1 + 2] = v40_20 * a[aaOffset1] + v41_21 * a[aaOffset1 + 1];
		aaOffset1 -= 8;
		dOffset0 += 4;
		dOffset1 += 4;
		eOffset0 += 4;
		eOffset1 += 4;
	}
	var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
	var ld = (n < 16384 ? n < 16 ? log2_4[n] : n < 512 ? 5 + log2_4[n >> 5] : 10 + log2_4[n >> 10] : n < 16777216 ? n < 524288 ? 15 + log2_4[n >> 15] : 20 + log2_4[n >> 20] : n < 536870912 ? 25 + log2_4[n >> 25] : n < -2147483648 ? 30 + log2_4[n >> 30] : 0) - 1;
	var i_off = n2 - 1 - n4 * 0;
	var eeOffset0 = i_off;
	var eeOffset2 = i_off + -(n >> 3);
	var aOffset = 0;
	var i = (n >> 4 >> 2) + 1;
	while(--i > 0) {
		var k00_20 = u[eeOffset0] - u[eeOffset2];
		var k01_21 = u[eeOffset0 + -1] - u[eeOffset2 + -1];
		var _g = eeOffset0;
		var _g1 = u;
		_g1[_g] = _g1[_g] + u[eeOffset2];
		var _g2 = eeOffset0 + -1;
		var _g11 = u;
		_g11[_g2] = _g11[_g2] + u[eeOffset2 + -1];
		u[eeOffset2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		u[eeOffset2 + -1] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		k00_20 = u[eeOffset0 + -2] - u[eeOffset2 + -2];
		k01_21 = u[eeOffset0 + -3] - u[eeOffset2 + -3];
		var _g3 = eeOffset0 + -2;
		var _g12 = u;
		_g12[_g3] = _g12[_g3] + u[eeOffset2 + -2];
		var _g4 = eeOffset0 + -3;
		var _g13 = u;
		_g13[_g4] = _g13[_g4] + u[eeOffset2 + -3];
		u[eeOffset2 + -2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		u[eeOffset2 + -3] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		k00_20 = u[eeOffset0 + -4] - u[eeOffset2 + -4];
		k01_21 = u[eeOffset0 + -5] - u[eeOffset2 + -5];
		var _g5 = eeOffset0 + -4;
		var _g14 = u;
		_g14[_g5] = _g14[_g5] + u[eeOffset2 + -4];
		var _g6 = eeOffset0 + -5;
		var _g15 = u;
		_g15[_g6] = _g15[_g6] + u[eeOffset2 + -5];
		u[eeOffset2 + -4] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		u[eeOffset2 + -5] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		k00_20 = u[eeOffset0 + -6] - u[eeOffset2 + -6];
		k01_21 = u[eeOffset0 + -7] - u[eeOffset2 + -7];
		var _g7 = eeOffset0 + -6;
		var _g16 = u;
		_g16[_g7] = _g16[_g7] + u[eeOffset2 + -6];
		var _g8 = eeOffset0 + -7;
		var _g17 = u;
		_g17[_g8] = _g17[_g8] + u[eeOffset2 + -7];
		u[eeOffset2 + -6] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		u[eeOffset2 + -7] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		eeOffset0 -= 8;
		eeOffset2 -= 8;
	}
	var i_off1 = n2 - 1 - n4;
	var eeOffset01 = i_off1;
	var eeOffset21 = i_off1 + -(n >> 3);
	var aOffset1 = 0;
	var i1 = (n >> 4 >> 2) + 1;
	while(--i1 > 0) {
		var k00_201 = u[eeOffset01] - u[eeOffset21];
		var k01_211 = u[eeOffset01 + -1] - u[eeOffset21 + -1];
		var _g9 = eeOffset01;
		var _g18 = u;
		_g18[_g9] = _g18[_g9] + u[eeOffset21];
		var _g10 = eeOffset01 + -1;
		var _g19 = u;
		_g19[_g10] = _g19[_g10] + u[eeOffset21 + -1];
		u[eeOffset21] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
		u[eeOffset21 + -1] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
		aOffset1 += 8;
		k00_201 = u[eeOffset01 + -2] - u[eeOffset21 + -2];
		k01_211 = u[eeOffset01 + -3] - u[eeOffset21 + -3];
		var _g20 = eeOffset01 + -2;
		var _g110 = u;
		_g110[_g20] = _g110[_g20] + u[eeOffset21 + -2];
		var _g21 = eeOffset01 + -3;
		var _g111 = u;
		_g111[_g21] = _g111[_g21] + u[eeOffset21 + -3];
		u[eeOffset21 + -2] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
		u[eeOffset21 + -3] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
		aOffset1 += 8;
		k00_201 = u[eeOffset01 + -4] - u[eeOffset21 + -4];
		k01_211 = u[eeOffset01 + -5] - u[eeOffset21 + -5];
		var _g22 = eeOffset01 + -4;
		var _g112 = u;
		_g112[_g22] = _g112[_g22] + u[eeOffset21 + -4];
		var _g23 = eeOffset01 + -5;
		var _g113 = u;
		_g113[_g23] = _g113[_g23] + u[eeOffset21 + -5];
		u[eeOffset21 + -4] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
		u[eeOffset21 + -5] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
		aOffset1 += 8;
		k00_201 = u[eeOffset01 + -6] - u[eeOffset21 + -6];
		k01_211 = u[eeOffset01 + -7] - u[eeOffset21 + -7];
		var _g24 = eeOffset01 + -6;
		var _g114 = u;
		_g114[_g24] = _g114[_g24] + u[eeOffset21 + -6];
		var _g25 = eeOffset01 + -7;
		var _g115 = u;
		_g115[_g25] = _g115[_g25] + u[eeOffset21 + -7];
		u[eeOffset21 + -6] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
		u[eeOffset21 + -7] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
		aOffset1 += 8;
		eeOffset01 -= 8;
		eeOffset21 -= 8;
	}
	var d0 = n2 - 1 - n8 * 0;
	var aOffset2 = 0;
	var eOffset01 = d0;
	var eOffset2 = d0 + -(n >> 4);
	var i2 = (n >> 5 >> 2) + 1;
	while(--i2 > 0) {
		var k00_202 = u[eOffset01] - u[eOffset2];
		var k01_212 = u[eOffset01 + -1] - u[eOffset2 + -1];
		var _g26 = eOffset01;
		var _g116 = u;
		_g116[_g26] = _g116[_g26] + u[eOffset2];
		var _g27 = eOffset01 + -1;
		var _g117 = u;
		_g117[_g27] = _g117[_g27] + u[eOffset2 + -1];
		u[eOffset2] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
		u[eOffset2 + -1] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
		aOffset2 += 16;
		k00_202 = u[eOffset01 + -2] - u[eOffset2 + -2];
		k01_212 = u[eOffset01 + -3] - u[eOffset2 + -3];
		var _g28 = eOffset01 + -2;
		var _g118 = u;
		_g118[_g28] = _g118[_g28] + u[eOffset2 + -2];
		var _g29 = eOffset01 + -3;
		var _g119 = u;
		_g119[_g29] = _g119[_g29] + u[eOffset2 + -3];
		u[eOffset2 + -2] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
		u[eOffset2 + -3] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
		aOffset2 += 16;
		k00_202 = u[eOffset01 + -4] - u[eOffset2 + -4];
		k01_212 = u[eOffset01 + -5] - u[eOffset2 + -5];
		var _g30 = eOffset01 + -4;
		var _g120 = u;
		_g120[_g30] = _g120[_g30] + u[eOffset2 + -4];
		var _g31 = eOffset01 + -5;
		var _g121 = u;
		_g121[_g31] = _g121[_g31] + u[eOffset2 + -5];
		u[eOffset2 + -4] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
		u[eOffset2 + -5] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
		aOffset2 += 16;
		k00_202 = u[eOffset01 + -6] - u[eOffset2 + -6];
		k01_212 = u[eOffset01 + -7] - u[eOffset2 + -7];
		var _g32 = eOffset01 + -6;
		var _g122 = u;
		_g122[_g32] = _g122[_g32] + u[eOffset2 + -6];
		var _g33 = eOffset01 + -7;
		var _g123 = u;
		_g123[_g33] = _g123[_g33] + u[eOffset2 + -7];
		u[eOffset2 + -6] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
		u[eOffset2 + -7] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
		eOffset01 -= 8;
		eOffset2 -= 8;
		aOffset2 += 16;
	}
	var d01 = n2 - 1 - n8;
	var aOffset3 = 0;
	var eOffset02 = d01;
	var eOffset21 = d01 + -(n >> 4);
	var i3 = (n >> 5 >> 2) + 1;
	while(--i3 > 0) {
		var k00_203 = u[eOffset02] - u[eOffset21];
		var k01_213 = u[eOffset02 + -1] - u[eOffset21 + -1];
		var _g34 = eOffset02;
		var _g124 = u;
		_g124[_g34] = _g124[_g34] + u[eOffset21];
		var _g35 = eOffset02 + -1;
		var _g125 = u;
		_g125[_g35] = _g125[_g35] + u[eOffset21 + -1];
		u[eOffset21] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
		u[eOffset21 + -1] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
		aOffset3 += 16;
		k00_203 = u[eOffset02 + -2] - u[eOffset21 + -2];
		k01_213 = u[eOffset02 + -3] - u[eOffset21 + -3];
		var _g36 = eOffset02 + -2;
		var _g126 = u;
		_g126[_g36] = _g126[_g36] + u[eOffset21 + -2];
		var _g37 = eOffset02 + -3;
		var _g127 = u;
		_g127[_g37] = _g127[_g37] + u[eOffset21 + -3];
		u[eOffset21 + -2] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
		u[eOffset21 + -3] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
		aOffset3 += 16;
		k00_203 = u[eOffset02 + -4] - u[eOffset21 + -4];
		k01_213 = u[eOffset02 + -5] - u[eOffset21 + -5];
		var _g38 = eOffset02 + -4;
		var _g128 = u;
		_g128[_g38] = _g128[_g38] + u[eOffset21 + -4];
		var _g39 = eOffset02 + -5;
		var _g129 = u;
		_g129[_g39] = _g129[_g39] + u[eOffset21 + -5];
		u[eOffset21 + -4] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
		u[eOffset21 + -5] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
		aOffset3 += 16;
		k00_203 = u[eOffset02 + -6] - u[eOffset21 + -6];
		k01_213 = u[eOffset02 + -7] - u[eOffset21 + -7];
		var _g40 = eOffset02 + -6;
		var _g130 = u;
		_g130[_g40] = _g130[_g40] + u[eOffset21 + -6];
		var _g41 = eOffset02 + -7;
		var _g131 = u;
		_g131[_g41] = _g131[_g41] + u[eOffset21 + -7];
		u[eOffset21 + -6] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
		u[eOffset21 + -7] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
		eOffset02 -= 8;
		eOffset21 -= 8;
		aOffset3 += 16;
	}
	var d02 = n2 - 1 - n8 * 2;
	var aOffset4 = 0;
	var eOffset03 = d02;
	var eOffset22 = d02 + -(n >> 4);
	var i4 = (n >> 5 >> 2) + 1;
	while(--i4 > 0) {
		var k00_204 = u[eOffset03] - u[eOffset22];
		var k01_214 = u[eOffset03 + -1] - u[eOffset22 + -1];
		var _g42 = eOffset03;
		var _g132 = u;
		_g132[_g42] = _g132[_g42] + u[eOffset22];
		var _g43 = eOffset03 + -1;
		var _g133 = u;
		_g133[_g43] = _g133[_g43] + u[eOffset22 + -1];
		u[eOffset22] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
		u[eOffset22 + -1] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
		aOffset4 += 16;
		k00_204 = u[eOffset03 + -2] - u[eOffset22 + -2];
		k01_214 = u[eOffset03 + -3] - u[eOffset22 + -3];
		var _g44 = eOffset03 + -2;
		var _g134 = u;
		_g134[_g44] = _g134[_g44] + u[eOffset22 + -2];
		var _g45 = eOffset03 + -3;
		var _g135 = u;
		_g135[_g45] = _g135[_g45] + u[eOffset22 + -3];
		u[eOffset22 + -2] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
		u[eOffset22 + -3] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
		aOffset4 += 16;
		k00_204 = u[eOffset03 + -4] - u[eOffset22 + -4];
		k01_214 = u[eOffset03 + -5] - u[eOffset22 + -5];
		var _g46 = eOffset03 + -4;
		var _g136 = u;
		_g136[_g46] = _g136[_g46] + u[eOffset22 + -4];
		var _g47 = eOffset03 + -5;
		var _g137 = u;
		_g137[_g47] = _g137[_g47] + u[eOffset22 + -5];
		u[eOffset22 + -4] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
		u[eOffset22 + -5] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
		aOffset4 += 16;
		k00_204 = u[eOffset03 + -6] - u[eOffset22 + -6];
		k01_214 = u[eOffset03 + -7] - u[eOffset22 + -7];
		var _g48 = eOffset03 + -6;
		var _g138 = u;
		_g138[_g48] = _g138[_g48] + u[eOffset22 + -6];
		var _g49 = eOffset03 + -7;
		var _g139 = u;
		_g139[_g49] = _g139[_g49] + u[eOffset22 + -7];
		u[eOffset22 + -6] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
		u[eOffset22 + -7] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
		eOffset03 -= 8;
		eOffset22 -= 8;
		aOffset4 += 16;
	}
	var d03 = n2 - 1 - n8 * 3;
	var aOffset5 = 0;
	var eOffset04 = d03;
	var eOffset23 = d03 + -(n >> 4);
	var i5 = (n >> 5 >> 2) + 1;
	while(--i5 > 0) {
		var k00_205 = u[eOffset04] - u[eOffset23];
		var k01_215 = u[eOffset04 + -1] - u[eOffset23 + -1];
		var _g50 = eOffset04;
		var _g140 = u;
		_g140[_g50] = _g140[_g50] + u[eOffset23];
		var _g51 = eOffset04 + -1;
		var _g141 = u;
		_g141[_g51] = _g141[_g51] + u[eOffset23 + -1];
		u[eOffset23] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
		u[eOffset23 + -1] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
		aOffset5 += 16;
		k00_205 = u[eOffset04 + -2] - u[eOffset23 + -2];
		k01_215 = u[eOffset04 + -3] - u[eOffset23 + -3];
		var _g52 = eOffset04 + -2;
		var _g142 = u;
		_g142[_g52] = _g142[_g52] + u[eOffset23 + -2];
		var _g53 = eOffset04 + -3;
		var _g143 = u;
		_g143[_g53] = _g143[_g53] + u[eOffset23 + -3];
		u[eOffset23 + -2] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
		u[eOffset23 + -3] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
		aOffset5 += 16;
		k00_205 = u[eOffset04 + -4] - u[eOffset23 + -4];
		k01_215 = u[eOffset04 + -5] - u[eOffset23 + -5];
		var _g54 = eOffset04 + -4;
		var _g144 = u;
		_g144[_g54] = _g144[_g54] + u[eOffset23 + -4];
		var _g55 = eOffset04 + -5;
		var _g145 = u;
		_g145[_g55] = _g145[_g55] + u[eOffset23 + -5];
		u[eOffset23 + -4] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
		u[eOffset23 + -5] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
		aOffset5 += 16;
		k00_205 = u[eOffset04 + -6] - u[eOffset23 + -6];
		k01_215 = u[eOffset04 + -7] - u[eOffset23 + -7];
		var _g56 = eOffset04 + -6;
		var _g146 = u;
		_g146[_g56] = _g146[_g56] + u[eOffset23 + -6];
		var _g57 = eOffset04 + -7;
		var _g147 = u;
		_g147[_g57] = _g147[_g57] + u[eOffset23 + -7];
		u[eOffset23 + -6] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
		u[eOffset23 + -7] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
		eOffset04 -= 8;
		eOffset23 -= 8;
		aOffset5 += 16;
	}
	var _g58 = 2;
	var _g148 = ld - 3 >> 1;
	while(_g58 < _g148) {
		var l = _g58++;
		var k0 = n >> l + 2;
		var k0_2 = k0 >> 1;
		var lim = 1 << l + 1;
		var _g59 = 0;
		var _g149 = lim;
		while(_g59 < _g149) {
			var i6 = _g59++;
			var d04 = n2 - 1 - k0 * i6;
			var k1 = 1 << l + 3;
			var aOffset6 = 0;
			var eOffset05 = d04;
			var eOffset24 = d04 + -k0_2;
			var i7 = (n >> l + 4 >> 2) + 1;
			while(--i7 > 0) {
				var k00_206 = u[eOffset05] - u[eOffset24];
				var k01_216 = u[eOffset05 + -1] - u[eOffset24 + -1];
				var _g60 = eOffset05;
				var _g150 = u;
				_g150[_g60] = _g150[_g60] + u[eOffset24];
				var _g61 = eOffset05 + -1;
				var _g151 = u;
				_g151[_g61] = _g151[_g61] + u[eOffset24 + -1];
				u[eOffset24] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
				u[eOffset24 + -1] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
				aOffset6 += k1;
				k00_206 = u[eOffset05 + -2] - u[eOffset24 + -2];
				k01_216 = u[eOffset05 + -3] - u[eOffset24 + -3];
				var _g62 = eOffset05 + -2;
				var _g152 = u;
				_g152[_g62] = _g152[_g62] + u[eOffset24 + -2];
				var _g63 = eOffset05 + -3;
				var _g153 = u;
				_g153[_g63] = _g153[_g63] + u[eOffset24 + -3];
				u[eOffset24 + -2] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
				u[eOffset24 + -3] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
				aOffset6 += k1;
				k00_206 = u[eOffset05 + -4] - u[eOffset24 + -4];
				k01_216 = u[eOffset05 + -5] - u[eOffset24 + -5];
				var _g64 = eOffset05 + -4;
				var _g154 = u;
				_g154[_g64] = _g154[_g64] + u[eOffset24 + -4];
				var _g65 = eOffset05 + -5;
				var _g155 = u;
				_g155[_g65] = _g155[_g65] + u[eOffset24 + -5];
				u[eOffset24 + -4] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
				u[eOffset24 + -5] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
				aOffset6 += k1;
				k00_206 = u[eOffset05 + -6] - u[eOffset24 + -6];
				k01_216 = u[eOffset05 + -7] - u[eOffset24 + -7];
				var _g66 = eOffset05 + -6;
				var _g156 = u;
				_g156[_g66] = _g156[_g66] + u[eOffset24 + -6];
				var _g67 = eOffset05 + -7;
				var _g157 = u;
				_g157[_g67] = _g157[_g67] + u[eOffset24 + -7];
				u[eOffset24 + -6] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
				u[eOffset24 + -7] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
				eOffset05 -= 8;
				eOffset24 -= 8;
				aOffset6 += k1;
			}
		}
	}
	var _g210 = ld - 3 >> 1;
	var _g310 = ld - 6;
	while(_g210 < _g310) {
		var l1 = _g210++;
		var k01 = n >> l1 + 2;
		var k11 = 1 << l1 + 3;
		var k0_21 = k01 >> 1;
		var rlim = n >> l1 + 6;
		var lim1 = 1 << l1 + 1;
		var aOffset7 = 0;
		var i_off2 = n2 - 1;
		var r = rlim + 1;
		while(--r > 0) {
			var A0 = a[aOffset7];
			var A1 = a[aOffset7 + 1];
			var A2 = a[aOffset7 + k11];
			var A3 = a[aOffset7 + k11 + 1];
			var A4 = a[aOffset7 + k11 * 2];
			var A5 = a[aOffset7 + k11 * 2 + 1];
			var A6 = a[aOffset7 + k11 * 3];
			var A7 = a[aOffset7 + k11 * 3 + 1];
			var eeOffset02 = i_off2;
			var eeOffset22 = i_off2 + -k0_21;
			var i8 = lim1 + 1;
			while(--i8 > 0) {
				var k00 = u[eeOffset02] - u[eeOffset22];
				var k111 = u[eeOffset02 + -1] - u[eeOffset22 + -1];
				u[eeOffset02] = u[eeOffset02] + u[eeOffset22];
				u[eeOffset02 + -1] = u[eeOffset02 + -1] + u[eeOffset22 + -1];
				u[eeOffset22] = k00 * A0 - k111 * A1;
				u[eeOffset22 + -1] = k111 * A0 + k00 * A1;
				k00 = u[eeOffset02 + -2] - u[eeOffset22 + -2];
				k111 = u[eeOffset02 + -3] - u[eeOffset22 + -3];
				u[eeOffset02 + -2] = u[eeOffset02 + -2] + u[eeOffset22 + -2];
				u[eeOffset02 + -3] = u[eeOffset02 + -3] + u[eeOffset22 + -3];
				u[eeOffset22 + -2] = k00 * A2 - k111 * A3;
				u[eeOffset22 + -3] = k111 * A2 + k00 * A3;
				k00 = u[eeOffset02 + -4] - u[eeOffset22 + -4];
				k111 = u[eeOffset02 + -5] - u[eeOffset22 + -5];
				u[eeOffset02 + -4] = u[eeOffset02 + -4] + u[eeOffset22 + -4];
				u[eeOffset02 + -5] = u[eeOffset02 + -5] + u[eeOffset22 + -5];
				u[eeOffset22 + -4] = k00 * A4 - k111 * A5;
				u[eeOffset22 + -5] = k111 * A4 + k00 * A5;
				k00 = u[eeOffset02 + -6] - u[eeOffset22 + -6];
				k111 = u[eeOffset02 + -7] - u[eeOffset22 + -7];
				u[eeOffset02 + -6] = u[eeOffset02 + -6] + u[eeOffset22 + -6];
				u[eeOffset02 + -7] = u[eeOffset02 + -7] + u[eeOffset22 + -7];
				u[eeOffset22 + -6] = k00 * A6 - k111 * A7;
				u[eeOffset22 + -7] = k111 * A6 + k00 * A7;
				eeOffset02 -= k01;
				eeOffset22 -= k01;
			}
			aOffset7 += k11 * 4;
			i_off2 -= 8;
		}
	}
	var i_off3 = n2 - 1;
	var A21 = a[n >> 3];
	var zOffset = i_off3;
	var baseOffset = i_off3 - 16 * (n >> 5);
	while(zOffset > baseOffset) {
		var t0 = u[zOffset];
		var t1 = u[zOffset + -8];
		u[zOffset + -8] = t0 - t1;
		u[zOffset] = t0 + t1;
		t0 = u[zOffset + -1];
		t1 = u[zOffset + -9];
		u[zOffset + -9] = t0 - t1;
		u[zOffset + -1] = t0 + t1;
		t0 = u[zOffset + -2];
		t1 = u[zOffset + -10];
		var k001 = t0 - t1;
		u[zOffset + -2] = t0 + t1;
		t0 = u[zOffset + -3];
		t1 = u[zOffset + -11];
		var k112 = t0 - t1;
		u[zOffset + -3] = t0 + t1;
		u[zOffset + -10] = (k001 + k112) * A21;
		u[zOffset + -11] = (k112 - k001) * A21;
		t0 = u[zOffset + -4];
		t1 = u[zOffset + -12];
		k001 = t1 - t0;
		u[zOffset + -4] = t0 + t1;
		t0 = u[zOffset + -5];
		t1 = u[zOffset + -13];
		k112 = t0 - t1;
		u[zOffset + -5] = t0 + t1;
		u[zOffset + -12] = k112;
		u[zOffset + -13] = k001;
		t0 = u[zOffset + -6];
		t1 = u[zOffset + -14];
		k001 = t1 - t0;
		u[zOffset + -6] = t0 + t1;
		t0 = u[zOffset + -7];
		t1 = u[zOffset + -15];
		k112 = t0 - t1;
		u[zOffset + -7] = t0 + t1;
		u[zOffset + -14] = (k001 + k112) * A21;
		u[zOffset + -15] = (k001 - k112) * A21;
		var t01 = u[zOffset];
		var t11 = u[zOffset + -4];
		var k002 = t01 - t11;
		var y0 = t01 + t11;
		t01 = u[zOffset + -2];
		t11 = u[zOffset + -6];
		var y2 = t01 + t11;
		var k22 = t01 - t11;
		u[zOffset] = y0 + y2;
		u[zOffset + -2] = y0 - y2;
		var k33 = u[zOffset + -3] - u[zOffset + -7];
		u[zOffset + -4] = k002 + k33;
		u[zOffset + -6] = k002 - k33;
		t01 = u[zOffset + -1];
		t11 = u[zOffset + -5];
		var k113 = t01 - t11;
		var y1 = t01 + t11;
		var y3 = u[zOffset + -3] + u[zOffset + -7];
		u[zOffset + -1] = y1 + y3;
		u[zOffset + -3] = y1 - y3;
		u[zOffset + -5] = k113 - k22;
		u[zOffset + -7] = k113 + k22;
		var zOffset1 = zOffset - 8;
		var t02 = u[zOffset1];
		var t12 = u[zOffset1 + -4];
		var k003 = t02 - t12;
		var y01 = t02 + t12;
		t02 = u[zOffset1 + -2];
		t12 = u[zOffset1 + -6];
		var y21 = t02 + t12;
		var k221 = t02 - t12;
		u[zOffset1] = y01 + y21;
		u[zOffset1 + -2] = y01 - y21;
		var k331 = u[zOffset1 + -3] - u[zOffset1 + -7];
		u[zOffset1 + -4] = k003 + k331;
		u[zOffset1 + -6] = k003 - k331;
		t02 = u[zOffset1 + -1];
		t12 = u[zOffset1 + -5];
		var k114 = t02 - t12;
		var y11 = t02 + t12;
		var y31 = u[zOffset1 + -3] + u[zOffset1 + -7];
		u[zOffset1 + -1] = y11 + y31;
		u[zOffset1 + -3] = y11 - y31;
		u[zOffset1 + -5] = k114 - k221;
		u[zOffset1 + -7] = k114 + k221;
		zOffset -= 16;
	}
	var brOffset = 0;
	var dOffset01 = n4 - 4;
	var dOffset11 = n2 - 4;
	while(dOffset01 >= 0) {
		var k4 = bitReverse[brOffset];
		v[dOffset11 + 3] = u[k4];
		v[dOffset11 + 2] = u[k4 + 1];
		v[dOffset01 + 3] = u[k4 + 2];
		v[dOffset01 + 2] = u[k4 + 3];
		k4 = bitReverse[brOffset + 1];
		v[dOffset11 + 1] = u[k4];
		v[dOffset11] = u[k4 + 1];
		v[dOffset01 + 1] = u[k4 + 2];
		v[dOffset01] = u[k4 + 3];
		dOffset01 -= 4;
		dOffset11 -= 4;
		brOffset += 2;
	}
	var cOffset = 0;
	var dOffset2 = 0;
	var eOffset3 = n2 - 4;
	while(dOffset2 < eOffset3) {
		var a02 = v[dOffset2] - v[eOffset3 + 2];
		var a11 = v[dOffset2 + 1] + v[eOffset3 + 3];
		var b0 = c[cOffset + 1] * a02 + c[cOffset] * a11;
		var b1 = c[cOffset + 1] * a11 - c[cOffset] * a02;
		var b2 = v[dOffset2] + v[eOffset3 + 2];
		var b3 = v[dOffset2 + 1] - v[eOffset3 + 3];
		v[dOffset2] = b2 + b0;
		v[dOffset2 + 1] = b3 + b1;
		v[eOffset3 + 2] = b2 - b0;
		v[eOffset3 + 3] = b1 - b3;
		a02 = v[dOffset2 + 2] - v[eOffset3];
		a11 = v[dOffset2 + 3] + v[eOffset3 + 1];
		b0 = c[cOffset + 3] * a02 + c[cOffset + 2] * a11;
		b1 = c[cOffset + 3] * a11 - c[cOffset + 2] * a02;
		b2 = v[dOffset2 + 2] + v[eOffset3];
		b3 = v[dOffset2 + 3] - v[eOffset3 + 1];
		v[dOffset2 + 2] = b2 + b0;
		v[dOffset2 + 3] = b3 + b1;
		v[eOffset3] = b2 - b0;
		v[eOffset3 + 1] = b1 - b3;
		cOffset += 4;
		dOffset2 += 4;
		eOffset3 -= 4;
	}
	var bOffset = n2 - 8;
	var eOffset4 = n2 - 8;
	var dOffset02 = 0;
	var dOffset12 = n2 - 4;
	var dOffset21 = n2;
	var dOffset3 = n - 4;
	while(eOffset4 >= 0) {
		var p3 = buf2[eOffset4 + 6] * b[bOffset + 7] - buf2[eOffset4 + 7] * b[bOffset + 6];
		var p2 = -buf2[eOffset4 + 6] * b[bOffset + 6] - buf2[eOffset4 + 7] * b[bOffset + 7];
		buffer[dOffset02] = p3;
		buffer[dOffset12 + 3] = -p3;
		buffer[dOffset21] = p2;
		buffer[dOffset3 + 3] = p2;
		var p1 = buf2[eOffset4 + 4] * b[bOffset + 5] - buf2[eOffset4 + 5] * b[bOffset + 4];
		var p0 = -buf2[eOffset4 + 4] * b[bOffset + 4] - buf2[eOffset4 + 5] * b[bOffset + 5];
		buffer[dOffset02 + 1] = p1;
		buffer[dOffset12 + 2] = -p1;
		buffer[dOffset21 + 1] = p0;
		buffer[dOffset3 + 2] = p0;
		p3 = buf2[eOffset4 + 2] * b[bOffset + 3] - buf2[eOffset4 + 3] * b[bOffset + 2];
		p2 = -buf2[eOffset4 + 2] * b[bOffset + 2] - buf2[eOffset4 + 3] * b[bOffset + 3];
		buffer[dOffset02 + 2] = p3;
		buffer[dOffset12 + 1] = -p3;
		buffer[dOffset21 + 2] = p2;
		buffer[dOffset3 + 1] = p2;
		p1 = buf2[eOffset4] * b[bOffset + 1] - buf2[eOffset4 + 1] * b[bOffset];
		p0 = -buf2[eOffset4] * b[bOffset] - buf2[eOffset4 + 1] * b[bOffset + 1];
		buffer[dOffset02 + 3] = p1;
		buffer[dOffset12] = -p1;
		buffer[dOffset21 + 3] = p0;
		buffer[dOffset3] = p0;
		bOffset -= 8;
		eOffset4 -= 8;
		dOffset02 += 4;
		dOffset21 += 4;
		dOffset12 -= 4;
		dOffset3 -= 4;
	}
};
kha_audio2_ogg_tools_Mdct.step3Iter0Loop = function(n,e,i_off,k_off,a) {
	var eeOffset0 = i_off;
	var eeOffset2 = i_off + k_off;
	var aOffset = 0;
	var i = (n >> 2) + 1;
	while(--i > 0) {
		var k00_20 = e[eeOffset0] - e[eeOffset2];
		var k01_21 = e[eeOffset0 + -1] - e[eeOffset2 + -1];
		var _g = eeOffset0;
		var _g1 = e;
		_g1[_g] = _g1[_g] + e[eeOffset2];
		var _g2 = eeOffset0 + -1;
		var _g11 = e;
		_g11[_g2] = _g11[_g2] + e[eeOffset2 + -1];
		e[eeOffset2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eeOffset2 + -1] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		k00_20 = e[eeOffset0 + -2] - e[eeOffset2 + -2];
		k01_21 = e[eeOffset0 + -3] - e[eeOffset2 + -3];
		var _g3 = eeOffset0 + -2;
		var _g12 = e;
		_g12[_g3] = _g12[_g3] + e[eeOffset2 + -2];
		var _g4 = eeOffset0 + -3;
		var _g13 = e;
		_g13[_g4] = _g13[_g4] + e[eeOffset2 + -3];
		e[eeOffset2 + -2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eeOffset2 + -3] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		k00_20 = e[eeOffset0 + -4] - e[eeOffset2 + -4];
		k01_21 = e[eeOffset0 + -5] - e[eeOffset2 + -5];
		var _g5 = eeOffset0 + -4;
		var _g14 = e;
		_g14[_g5] = _g14[_g5] + e[eeOffset2 + -4];
		var _g6 = eeOffset0 + -5;
		var _g15 = e;
		_g15[_g6] = _g15[_g6] + e[eeOffset2 + -5];
		e[eeOffset2 + -4] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eeOffset2 + -5] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		k00_20 = e[eeOffset0 + -6] - e[eeOffset2 + -6];
		k01_21 = e[eeOffset0 + -7] - e[eeOffset2 + -7];
		var _g7 = eeOffset0 + -6;
		var _g16 = e;
		_g16[_g7] = _g16[_g7] + e[eeOffset2 + -6];
		var _g8 = eeOffset0 + -7;
		var _g17 = e;
		_g17[_g8] = _g17[_g8] + e[eeOffset2 + -7];
		e[eeOffset2 + -6] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eeOffset2 + -7] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += 8;
		eeOffset0 -= 8;
		eeOffset2 -= 8;
	}
};
kha_audio2_ogg_tools_Mdct.step3InnerRLoop = function(lim,e,d0,k_off,a,k1) {
	var aOffset = 0;
	var eOffset0 = d0;
	var eOffset2 = d0 + k_off;
	var i = (lim >> 2) + 1;
	while(--i > 0) {
		var k00_20 = e[eOffset0] - e[eOffset2];
		var k01_21 = e[eOffset0 + -1] - e[eOffset2 + -1];
		var _g = eOffset0;
		var _g1 = e;
		_g1[_g] = _g1[_g] + e[eOffset2];
		var _g2 = eOffset0 + -1;
		var _g11 = e;
		_g11[_g2] = _g11[_g2] + e[eOffset2 + -1];
		e[eOffset2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eOffset2 + -1] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += k1;
		k00_20 = e[eOffset0 + -2] - e[eOffset2 + -2];
		k01_21 = e[eOffset0 + -3] - e[eOffset2 + -3];
		var _g3 = eOffset0 + -2;
		var _g12 = e;
		_g12[_g3] = _g12[_g3] + e[eOffset2 + -2];
		var _g4 = eOffset0 + -3;
		var _g13 = e;
		_g13[_g4] = _g13[_g4] + e[eOffset2 + -3];
		e[eOffset2 + -2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eOffset2 + -3] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += k1;
		k00_20 = e[eOffset0 + -4] - e[eOffset2 + -4];
		k01_21 = e[eOffset0 + -5] - e[eOffset2 + -5];
		var _g5 = eOffset0 + -4;
		var _g14 = e;
		_g14[_g5] = _g14[_g5] + e[eOffset2 + -4];
		var _g6 = eOffset0 + -5;
		var _g15 = e;
		_g15[_g6] = _g15[_g6] + e[eOffset2 + -5];
		e[eOffset2 + -4] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eOffset2 + -5] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		aOffset += k1;
		k00_20 = e[eOffset0 + -6] - e[eOffset2 + -6];
		k01_21 = e[eOffset0 + -7] - e[eOffset2 + -7];
		var _g7 = eOffset0 + -6;
		var _g16 = e;
		_g16[_g7] = _g16[_g7] + e[eOffset2 + -6];
		var _g8 = eOffset0 + -7;
		var _g17 = e;
		_g17[_g8] = _g17[_g8] + e[eOffset2 + -7];
		e[eOffset2 + -6] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
		e[eOffset2 + -7] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
		eOffset0 -= 8;
		eOffset2 -= 8;
		aOffset += k1;
	}
};
kha_audio2_ogg_tools_Mdct.step3InnerSLoop = function(n,e,i_off,k_off,a,aOffset0,aOffset1,k0) {
	var A0 = a[aOffset0];
	var A1 = a[aOffset0 + 1];
	var A2 = a[aOffset0 + aOffset1];
	var A3 = a[aOffset0 + aOffset1 + 1];
	var A4 = a[aOffset0 + aOffset1 * 2];
	var A5 = a[aOffset0 + aOffset1 * 2 + 1];
	var A6 = a[aOffset0 + aOffset1 * 3];
	var A7 = a[aOffset0 + aOffset1 * 3 + 1];
	var eeOffset0 = i_off;
	var eeOffset2 = i_off + k_off;
	var i = n + 1;
	while(--i > 0) {
		var k00 = e[eeOffset0] - e[eeOffset2];
		var k11 = e[eeOffset0 + -1] - e[eeOffset2 + -1];
		e[eeOffset0] = e[eeOffset0] + e[eeOffset2];
		e[eeOffset0 + -1] = e[eeOffset0 + -1] + e[eeOffset2 + -1];
		e[eeOffset2] = k00 * A0 - k11 * A1;
		e[eeOffset2 + -1] = k11 * A0 + k00 * A1;
		k00 = e[eeOffset0 + -2] - e[eeOffset2 + -2];
		k11 = e[eeOffset0 + -3] - e[eeOffset2 + -3];
		e[eeOffset0 + -2] = e[eeOffset0 + -2] + e[eeOffset2 + -2];
		e[eeOffset0 + -3] = e[eeOffset0 + -3] + e[eeOffset2 + -3];
		e[eeOffset2 + -2] = k00 * A2 - k11 * A3;
		e[eeOffset2 + -3] = k11 * A2 + k00 * A3;
		k00 = e[eeOffset0 + -4] - e[eeOffset2 + -4];
		k11 = e[eeOffset0 + -5] - e[eeOffset2 + -5];
		e[eeOffset0 + -4] = e[eeOffset0 + -4] + e[eeOffset2 + -4];
		e[eeOffset0 + -5] = e[eeOffset0 + -5] + e[eeOffset2 + -5];
		e[eeOffset2 + -4] = k00 * A4 - k11 * A5;
		e[eeOffset2 + -5] = k11 * A4 + k00 * A5;
		k00 = e[eeOffset0 + -6] - e[eeOffset2 + -6];
		k11 = e[eeOffset0 + -7] - e[eeOffset2 + -7];
		e[eeOffset0 + -6] = e[eeOffset0 + -6] + e[eeOffset2 + -6];
		e[eeOffset0 + -7] = e[eeOffset0 + -7] + e[eeOffset2 + -7];
		e[eeOffset2 + -6] = k00 * A6 - k11 * A7;
		e[eeOffset2 + -7] = k11 * A6 + k00 * A7;
		eeOffset0 -= k0;
		eeOffset2 -= k0;
	}
};
kha_audio2_ogg_tools_Mdct.iter54 = function(e,zOffset) {
	var t0 = e[zOffset];
	var t1 = e[zOffset + -4];
	var k00 = t0 - t1;
	var y0 = t0 + t1;
	t0 = e[zOffset + -2];
	t1 = e[zOffset + -6];
	var y2 = t0 + t1;
	var k22 = t0 - t1;
	e[zOffset] = y0 + y2;
	e[zOffset + -2] = y0 - y2;
	var k33 = e[zOffset + -3] - e[zOffset + -7];
	e[zOffset + -4] = k00 + k33;
	e[zOffset + -6] = k00 - k33;
	t0 = e[zOffset + -1];
	t1 = e[zOffset + -5];
	var k11 = t0 - t1;
	var y1 = t0 + t1;
	var y3 = e[zOffset + -3] + e[zOffset + -7];
	e[zOffset + -1] = y1 + y3;
	e[zOffset + -3] = y1 - y3;
	e[zOffset + -5] = k11 - k22;
	e[zOffset + -7] = k11 + k22;
};
kha_audio2_ogg_tools_Mdct.step3InnerSLoopLd654 = function(n,e,i_off,a,baseN) {
	var A2 = a[baseN >> 3];
	var zOffset = i_off;
	var baseOffset = i_off - 16 * n;
	while(zOffset > baseOffset) {
		var t0 = e[zOffset];
		var t1 = e[zOffset + -8];
		e[zOffset + -8] = t0 - t1;
		e[zOffset] = t0 + t1;
		t0 = e[zOffset + -1];
		t1 = e[zOffset + -9];
		e[zOffset + -9] = t0 - t1;
		e[zOffset + -1] = t0 + t1;
		t0 = e[zOffset + -2];
		t1 = e[zOffset + -10];
		var k00 = t0 - t1;
		e[zOffset + -2] = t0 + t1;
		t0 = e[zOffset + -3];
		t1 = e[zOffset + -11];
		var k11 = t0 - t1;
		e[zOffset + -3] = t0 + t1;
		e[zOffset + -10] = (k00 + k11) * A2;
		e[zOffset + -11] = (k11 - k00) * A2;
		t0 = e[zOffset + -4];
		t1 = e[zOffset + -12];
		k00 = t1 - t0;
		e[zOffset + -4] = t0 + t1;
		t0 = e[zOffset + -5];
		t1 = e[zOffset + -13];
		k11 = t0 - t1;
		e[zOffset + -5] = t0 + t1;
		e[zOffset + -12] = k11;
		e[zOffset + -13] = k00;
		t0 = e[zOffset + -6];
		t1 = e[zOffset + -14];
		k00 = t1 - t0;
		e[zOffset + -6] = t0 + t1;
		t0 = e[zOffset + -7];
		t1 = e[zOffset + -15];
		k11 = t0 - t1;
		e[zOffset + -7] = t0 + t1;
		e[zOffset + -14] = (k00 + k11) * A2;
		e[zOffset + -15] = (k00 - k11) * A2;
		var t01 = e[zOffset];
		var t11 = e[zOffset + -4];
		var k001 = t01 - t11;
		var y0 = t01 + t11;
		t01 = e[zOffset + -2];
		t11 = e[zOffset + -6];
		var y2 = t01 + t11;
		var k22 = t01 - t11;
		e[zOffset] = y0 + y2;
		e[zOffset + -2] = y0 - y2;
		var k33 = e[zOffset + -3] - e[zOffset + -7];
		e[zOffset + -4] = k001 + k33;
		e[zOffset + -6] = k001 - k33;
		t01 = e[zOffset + -1];
		t11 = e[zOffset + -5];
		var k111 = t01 - t11;
		var y1 = t01 + t11;
		var y3 = e[zOffset + -3] + e[zOffset + -7];
		e[zOffset + -1] = y1 + y3;
		e[zOffset + -3] = y1 - y3;
		e[zOffset + -5] = k111 - k22;
		e[zOffset + -7] = k111 + k22;
		var zOffset1 = zOffset - 8;
		var t02 = e[zOffset1];
		var t12 = e[zOffset1 + -4];
		var k002 = t02 - t12;
		var y01 = t02 + t12;
		t02 = e[zOffset1 + -2];
		t12 = e[zOffset1 + -6];
		var y21 = t02 + t12;
		var k221 = t02 - t12;
		e[zOffset1] = y01 + y21;
		e[zOffset1 + -2] = y01 - y21;
		var k331 = e[zOffset1 + -3] - e[zOffset1 + -7];
		e[zOffset1 + -4] = k002 + k331;
		e[zOffset1 + -6] = k002 - k331;
		t02 = e[zOffset1 + -1];
		t12 = e[zOffset1 + -5];
		var k112 = t02 - t12;
		var y11 = t02 + t12;
		var y31 = e[zOffset1 + -3] + e[zOffset1 + -7];
		e[zOffset1 + -1] = y11 + y31;
		e[zOffset1 + -3] = y11 - y31;
		e[zOffset1 + -5] = k112 - k221;
		e[zOffset1 + -7] = k112 + k221;
		zOffset -= 16;
	}
};
var kha_audio2_ogg_vorbis_Reader = function(input,seekFunc,inputLength) {
	this.seekFunc = seekFunc;
	this.inputLength = inputLength;
	this.decoder = kha_audio2_ogg_vorbis_VorbisDecoder.start(input);
	this.decoder.setupSampleNumber(seekFunc,inputLength);
	this.loopStart = this.get_header().comment.get_loopStart();
	this.loopLength = this.get_header().comment.get_loopLength();
};
$hxClasses["kha.audio2.ogg.vorbis.Reader"] = kha_audio2_ogg_vorbis_Reader;
kha_audio2_ogg_vorbis_Reader.__name__ = true;
kha_audio2_ogg_vorbis_Reader.openFromBytes = function(bytes) {
	var input = new haxe_io_BytesInput(bytes);
	var bytes1 = input;
	return new kha_audio2_ogg_vorbis_Reader(input,function(pos) {
		kha_audio2_ogg_vorbis_Reader.seekBytes(bytes1,pos);
	},bytes.length);
};
kha_audio2_ogg_vorbis_Reader.seekBytes = function(bytes,pos) {
	bytes.set_position(pos);
};
kha_audio2_ogg_vorbis_Reader.readAll = function(bytes,output,useFloat) {
	if(useFloat == null) {
		useFloat = false;
	}
	var input = new haxe_io_BytesInput(bytes);
	var decoder = kha_audio2_ogg_vorbis_VorbisDecoder.start(input);
	var bytes1 = input;
	decoder.setupSampleNumber(function(pos) {
		kha_audio2_ogg_vorbis_Reader.seekBytes(bytes1,pos);
	},bytes.length);
	var header = decoder.header;
	var count = 0;
	var bufferSize = 4096;
	var this1 = new Float32Array(bufferSize * header.channel);
	var buffer = this1;
	while(true) {
		var n = decoder.read(buffer,bufferSize,header.channel,header.sampleRate,useFloat);
		var _g = 0;
		var _g1 = n * header.channel;
		while(_g < _g1) {
			var i = _g++;
			output.writeFloat(buffer[i]);
		}
		if(n == 0) {
			break;
		}
		count += n;
	}
	return decoder.header;
};
kha_audio2_ogg_vorbis_Reader.prototype = {
	decoder: null
	,get_header: function() {
		return this.decoder.header;
	}
	,get_totalSample: function() {
		return this.decoder.totalSample;
	}
	,get_totalMillisecond: function() {
		var samples = this.decoder.totalSample;
		var b = this.get_header().sampleRate;
		return _$UInt_UInt_$Impl_$.toFloat(samples) / _$UInt_UInt_$Impl_$.toFloat(b) * 1000;
	}
	,get_currentSample: function() {
		return this.decoder.currentSample;
	}
	,set_currentSample: function(value) {
		this.decoder.seek(this.seekFunc,this.inputLength,value);
		return this.decoder.currentSample;
	}
	,get_currentMillisecond: function() {
		var samples = this.get_currentSample();
		var b = this.get_header().sampleRate;
		return _$UInt_UInt_$Impl_$.toFloat(samples) / _$UInt_UInt_$Impl_$.toFloat(b) * 1000;
	}
	,set_currentMillisecond: function(value) {
		this.set_currentSample(Math.floor(_$UInt_UInt_$Impl_$.toFloat(this.get_header().sampleRate) * (value / 1000)));
		return this.get_currentMillisecond();
	}
	,loopStart: null
	,loopLength: null
	,seekFunc: null
	,inputLength: null
	,read: function(output,samples,channels,sampleRate,useFloat) {
		if(useFloat == null) {
			useFloat = false;
		}
		this.decoder.ensurePosition(this.seekFunc);
		if(samples == null) {
			samples = this.decoder.totalSample;
		}
		if(channels == null) {
			channels = this.get_header().channel;
		}
		if(sampleRate == null) {
			sampleRate = this.get_header().sampleRate;
		}
		return this.decoder.read(output,samples,channels,sampleRate,useFloat);
	}
	,clone: function() {
		var reader = Object.create(kha_audio2_ogg_vorbis_Reader.prototype);
		reader.seekFunc = this.seekFunc;
		reader.inputLength = this.inputLength;
		reader.decoder = this.decoder.clone(this.seekFunc);
		reader.loopStart = this.loopStart;
		reader.loopLength = this.loopLength;
		return reader;
	}
	,sampleToMillisecond: function(samples) {
		var b = this.get_header().sampleRate;
		return _$UInt_UInt_$Impl_$.toFloat(samples) / _$UInt_UInt_$Impl_$.toFloat(b) * 1000;
	}
	,millisecondToSample: function(millseconds) {
		return Math.floor(_$UInt_UInt_$Impl_$.toFloat(this.get_header().sampleRate) * (millseconds / 1000));
	}
	,__class__: kha_audio2_ogg_vorbis_Reader
};
var kha_audio2_ogg_vorbis_VorbisDecodeState = function(input) {
	this.nextSeg = 0;
	this.firstDecode = false;
	this.bytesInSeg = 0;
	this.validBits = 0;
	this.input = input;
	this.inputPosition = 0;
	this.page = new kha_audio2_ogg_vorbis_data_Page();
	kha_audio2_ogg_tools_Crc32.init();
};
$hxClasses["kha.audio2.ogg.vorbis.VorbisDecodeState"] = kha_audio2_ogg_vorbis_VorbisDecodeState;
kha_audio2_ogg_vorbis_VorbisDecodeState.__name__ = true;
kha_audio2_ogg_vorbis_VorbisDecodeState.prototype = {
	page: null
	,eof: null
	,pFirst: null
	,pLast: null
	,validBits: null
	,inputPosition: null
	,input: null
	,discardSamplesDeferred: null
	,segments: null
	,bytesInSeg: null
	,channelBuffers: null
	,channelBufferStart: null
	,channelBufferEnd: null
	,currentSample: null
	,previousWindow: null
	,previousLength: null
	,finalY: null
	,firstDecode: null
	,nextSeg: null
	,acc: null
	,lastSeg: null
	,lastSegWhich: null
	,endSegWithKnownLoc: null
	,knownLocForPacket: null
	,error: null
	,currentLoc: null
	,currentLocValid: null
	,firstAudioPageOffset: null
	,setup: function(loc0,loc1) {
		this.inputPosition += 1;
		var segmentCount = this.input.readByte();
		this.inputPosition += segmentCount;
		var this1 = new Array(segmentCount);
		var vec = this1;
		var _g = 0;
		var _g1 = segmentCount;
		while(_g < _g1) {
			var i = _g++;
			vec[i] = this.input.readByte();
		}
		this.segments = vec;
		this.endSegWithKnownLoc = -2;
		if(loc0 != -1 || loc1 != -1) {
			var i1 = segmentCount - 1;
			while(i1 >= 0) {
				if(this.segments[i1] < 255) {
					break;
				}
				if(i1 >= 0) {
					this.endSegWithKnownLoc = i1;
					this.knownLocForPacket = loc0;
				}
				--i1;
			}
		}
		if(this.firstDecode) {
			var i2 = 0;
			var len = 0;
			var p = new kha_audio2_ogg_vorbis_data_ProbedPage();
			var _g2 = 0;
			var _g11 = segmentCount;
			while(_g2 < _g11) {
				var i3 = _g2++;
				len += this.segments[i3];
			}
			len += 27 + segmentCount;
			p.pageStart = this.firstAudioPageOffset;
			p.pageEnd = p.pageStart + len;
			p.firstDecodedSample = 0;
			p.lastDecodedSample = loc0;
			this.pFirst = p;
		}
		this.nextSeg = 0;
	}
	,clone: function(seekFunc) {
		var state = Object.create(kha_audio2_ogg_vorbis_VorbisDecodeState.prototype);
		seekFunc(this.inputPosition);
		state.input = this.input;
		state.eof = this.eof;
		state.validBits = this.validBits;
		state.discardSamplesDeferred = this.discardSamplesDeferred;
		state.firstDecode = this.firstDecode;
		state.nextSeg = this.nextSeg;
		state.bytesInSeg = this.bytesInSeg;
		state.acc = state.acc;
		state.lastSeg = this.lastSeg;
		state.lastSegWhich = this.lastSegWhich;
		state.currentLoc = this.currentLoc;
		state.currentLocValid = this.currentLocValid;
		state.inputPosition = this.inputPosition;
		state.firstAudioPageOffset = this.firstAudioPageOffset;
		state.error = this.error;
		state.segments = this.segments;
		state.pFirst = this.pFirst;
		state.pLast = this.pLast;
		state.page = this.page.clone();
		return state;
	}
	,next: function() {
		if(this.lastSeg) {
			return 0;
		}
		if(this.nextSeg == -1) {
			this.lastSegWhich = this.segments.length - 1;
			try {
				this.page.start(this);
			} catch( e ) {
				var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
				if((e1 instanceof kha_audio2_ogg_vorbis_data_ReaderError)) {
					this.lastSeg = true;
					this.error = e1;
					return 0;
				} else {
					throw e;
				}
			}
			if((this.page.flag & 1) == 0) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CONTINUED_PACKET_FLAG_INVALID,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 171, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "next"}));
			}
		}
		var len = this.segments[this.nextSeg++];
		if(len < 255) {
			this.lastSeg = true;
			this.lastSegWhich = this.nextSeg - 1;
		}
		if(this.nextSeg >= this.segments.length) {
			this.nextSeg = -1;
		}
		this.bytesInSeg = len;
		return len;
	}
	,startPacket: function() {
		while(this.nextSeg == -1) {
			this.page.start(this);
			if((this.page.flag & 1) != 0) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 193, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "startPacket"}));
			}
		}
		this.lastSeg = false;
		this.validBits = 0;
		this.bytesInSeg = 0;
	}
	,maybeStartPacket: function() {
		if(this.nextSeg == -1) {
			var eof = false;
			var x;
			try {
				this.inputPosition += 1;
				x = this.input.readByte();
			} catch( e ) {
				var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
				if((e1 instanceof haxe_io_Eof)) {
					var e2 = e1;
					eof = true;
					x = 0;
				} else {
					throw e;
				}
			}
			if(eof) {
				return false;
			}
			var tmp;
			var tmp1;
			var tmp2;
			if(x == 79) {
				this.inputPosition += 1;
				tmp2 = this.input.readByte() != 103;
			} else {
				tmp2 = true;
			}
			if(!tmp2) {
				this.inputPosition += 1;
				tmp1 = this.input.readByte() != 103;
			} else {
				tmp1 = true;
			}
			if(!tmp1) {
				this.inputPosition += 1;
				tmp = this.input.readByte() != 83;
			} else {
				tmp = true;
			}
			if(tmp) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 218, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "maybeStartPacket"}));
			}
			this.page.startWithoutCapturePattern(this);
		}
		this.startPacket();
		return true;
	}
	,readBits: function(n) {
		if(this.validBits < 0) {
			return 0;
		} else if(this.validBits < n) {
			if(n > 24) {
				return this.readBits(24) + (this.readBits(n - 24) << 24);
			} else {
				if(this.validBits == 0) {
					this.acc = 0;
				}
				while(true) {
					if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
						this.validBits = -1;
						break;
					} else {
						this.bytesInSeg--;
						this.inputPosition += 1;
						this.acc = this.acc + (this.input.readByte() << this.validBits);
						this.validBits += 8;
					}
					if(!(this.validBits < n)) {
						break;
					}
				}
				if(this.validBits < 0) {
					return 0;
				} else {
					var z = this.acc & (1 << n) - 1;
					this.acc = this.acc >>> n;
					this.validBits -= n;
					return z;
				}
			}
		} else {
			var z1 = this.acc & (1 << n) - 1;
			this.acc = this.acc >>> n;
			this.validBits -= n;
			return z1;
		}
	}
	,readPacketRaw: function() {
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			return -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			return this.input.readByte();
		}
	}
	,readPacket: function() {
		var x;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x = this.input.readByte();
		}
		this.validBits = 0;
		return x;
	}
	,flushPacket: function() {
		while(this.bytesInSeg != 0 || !this.lastSeg && this.next() != 0) {
			this.bytesInSeg--;
			this.inputPosition += 1;
			this.input.readByte();
		}
	}
	,vorbisValidate: function() {
		var header = new haxe_io_Bytes(new ArrayBuffer(6));
		var x;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x = this.input.readByte();
		}
		this.validBits = 0;
		header.b[0] = x;
		var x1;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x1 = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x1 = this.input.readByte();
		}
		this.validBits = 0;
		header.b[1] = x1;
		var x2;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x2 = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x2 = this.input.readByte();
		}
		this.validBits = 0;
		header.b[2] = x2;
		var x3;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x3 = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x3 = this.input.readByte();
		}
		this.validBits = 0;
		header.b[3] = x3;
		var x4;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x4 = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x4 = this.input.readByte();
		}
		this.validBits = 0;
		header.b[4] = x4;
		var x5;
		if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
			x5 = -1;
		} else {
			this.bytesInSeg--;
			this.inputPosition += 1;
			x5 = this.input.readByte();
		}
		this.validBits = 0;
		header.b[5] = x5;
		if(header.toString() != "vorbis") {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 301, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "vorbisValidate"}));
		}
	}
	,firstPageValidate: function() {
		if(this.segments.length != 1) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"segmentCount",{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 308, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "firstPageValidate"}));
		}
		if(this.segments[0] != 30) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 311, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "firstPageValidate"}));
		}
	}
	,startFirstDecode: function() {
		this.firstAudioPageOffset = this.inputPosition;
		this.firstDecode = true;
	}
	,capturePattern: function() {
		var tmp;
		var tmp1;
		var tmp2;
		this.inputPosition += 1;
		if(this.input.readByte() == 79) {
			this.inputPosition += 1;
			tmp2 = this.input.readByte() != 103;
		} else {
			tmp2 = true;
		}
		if(!tmp2) {
			this.inputPosition += 1;
			tmp1 = this.input.readByte() != 103;
		} else {
			tmp1 = true;
		}
		if(!tmp1) {
			this.inputPosition += 1;
			tmp = this.input.readByte() != 83;
		} else {
			tmp = true;
		}
		if(tmp) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 324, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "capturePattern"}));
		}
	}
	,skip: function(len) {
		this.inputPosition += len;
		var this1 = new Array(len);
		var vec = this1;
		var _g = 0;
		var _g1 = len;
		while(_g < _g1) {
			var i = _g++;
			vec[i] = this.input.readByte();
		}
	}
	,prepHuffman: function() {
		if(this.validBits <= 24) {
			if(this.validBits == 0) {
				this.acc = 0;
			}
			while(true) {
				if(this.bytesInSeg == 0 && (this.lastSeg || this.next() == 0)) {
					return;
				} else {
					this.bytesInSeg--;
					this.inputPosition += 1;
					this.acc = this.acc + (this.input.readByte() << this.validBits);
					this.validBits += 8;
				}
				if(!(this.validBits <= 24)) {
					break;
				}
			}
		}
	}
	,decode: function(c) {
		if(this.validBits < 10) {
			this.prepHuffman();
		}
		var i = c.fastHuffman[this.acc & 1023];
		var val;
		if(i >= 0) {
			var l = c.codewordLengths[i];
			this.acc = this.acc >>> l;
			this.validBits -= l;
			if(this.validBits < 0) {
				this.validBits = 0;
				val = -1;
			} else {
				val = i;
			}
		} else {
			val = this.decodeScalarRaw(c);
		}
		if(c.sparse) {
			val = c.sortedValues[val];
		}
		return val;
	}
	,decodeRaw: function(c) {
		if(this.validBits < 10) {
			this.prepHuffman();
		}
		var i = c.fastHuffman[this.acc & 1023];
		if(i >= 0) {
			var l = c.codewordLengths[i];
			this.acc = this.acc >>> l;
			this.validBits -= l;
			if(this.validBits < 0) {
				this.validBits = 0;
				return -1;
			} else {
				return i;
			}
		} else {
			return this.decodeScalarRaw(c);
		}
	}
	,isLastByte: function() {
		if(this.bytesInSeg == 0) {
			return this.lastSeg;
		} else {
			return false;
		}
	}
	,finishDecodePacket: function(previousLength,n,r) {
		var left = r.left.start;
		var currentLocValid = false;
		var n2 = n >> 1;
		if(this.firstDecode) {
			this.currentLoc = -n2;
			this.discardSamplesDeferred = n - r.right.end;
			currentLocValid = true;
			this.firstDecode = false;
		} else if(this.discardSamplesDeferred != 0) {
			r.left.start += this.discardSamplesDeferred;
			left = r.left.start;
			this.discardSamplesDeferred = 0;
		} else {
			var tmp = previousLength == 0 && currentLocValid;
		}
		if(this.lastSegWhich == this.endSegWithKnownLoc) {
			if(currentLocValid && (this.page.flag & 4) != 0) {
				var currentEnd = this.knownLocForPacket - (n - r.right.end);
				if(currentEnd < this.currentLoc + r.right.end) {
					var len = currentEnd < this.currentLoc ? 0 : currentEnd - this.currentLoc;
					len += r.left.start;
					this.currentLoc += len;
					return { len : len, left : left, right : r.right.start};
				}
			}
			this.currentLoc = this.knownLocForPacket - (n2 - r.left.start);
			currentLocValid = true;
		}
		if(currentLocValid) {
			this.currentLoc += r.right.start - r.left.start;
		}
		return { len : r.right.end, left : left, right : r.right.start};
	}
	,readInt32: function() {
		this.inputPosition += 4;
		return this.input.readInt32();
	}
	,readByte: function() {
		this.inputPosition += 1;
		return this.input.readByte();
	}
	,read: function(n) {
		this.inputPosition += n;
		var this1 = new Array(n);
		var vec = this1;
		var _g = 0;
		var _g1 = n;
		while(_g < _g1) {
			var i = _g++;
			vec[i] = this.input.readByte();
		}
		return vec;
	}
	,readBytes: function(n) {
		this.inputPosition += n;
		return this.input.read(n);
	}
	,readString: function(n) {
		this.inputPosition += n;
		return this.input.readString(n);
	}
	,getSampleNumber: function(seekFunc,inputLength) {
		var restoreOffset = this.inputPosition;
		var previousSafe = _$UInt_UInt_$Impl_$.gte(inputLength,65536) && _$UInt_UInt_$Impl_$.gte(inputLength - 65536,this.firstAudioPageOffset) ? inputLength - 65536 : this.firstAudioPageOffset;
		seekFunc(this.inputPosition = previousSafe);
		var end = 0;
		var last = false;
		var _g = this.findPage(seekFunc,inputLength);
		switch(_g._hx_index) {
		case 0:
			var l = _g.last;
			var e = _g.end;
			end = e;
			last = l;
			break;
		case 1:
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 519, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "getSampleNumber"}));
		}
		var lastPageLoc = this.inputPosition;
		_hx_loop1: while(!last) {
			seekFunc(this.inputPosition = end);
			var _g1 = this.findPage(seekFunc,inputLength);
			switch(_g1._hx_index) {
			case 0:
				var l1 = _g1.last;
				var e1 = _g1.end;
				end = e1;
				last = l1;
				break;
			case 1:
				break _hx_loop1;
			}
			previousSafe = lastPageLoc + 1;
			lastPageLoc = this.inputPosition;
		}
		seekFunc(this.inputPosition = lastPageLoc);
		this.inputPosition += 6;
		var this1 = new Array(6);
		var vec = this1;
		var _g2 = 0;
		var _g11 = 6;
		while(_g2 < _g11) {
			var i = _g2++;
			vec[i] = this.input.readByte();
		}
		var vorbisHeader = vec;
		this.inputPosition += 4;
		var lo = this.input.readInt32();
		this.inputPosition += 4;
		var hi = this.input.readInt32();
		if(lo == -1 && hi == -1 || hi > 0) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 553, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "getSampleNumber"}));
		}
		this.pLast = new kha_audio2_ogg_vorbis_data_ProbedPage();
		this.pLast.pageStart = lastPageLoc;
		this.pLast.pageEnd = end;
		this.pLast.lastDecodedSample = lo;
		this.pLast.firstDecodedSample = null;
		this.pLast.afterPreviousPageStart = previousSafe;
		seekFunc(this.inputPosition = restoreOffset);
		return lo;
	}
	,forcePageResync: function() {
		this.nextSeg = -1;
	}
	,setInputOffset: function(seekFunc,n) {
		seekFunc(this.inputPosition = n);
	}
	,findPage: function(seekFunc,inputLength) {
		try {
			while(true) {
				this.inputPosition += 1;
				var n = this.input.readByte();
				if(n == 79) {
					var retryLoc = this.inputPosition;
					if(retryLoc - 25 > inputLength) {
						return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;
					}
					var tmp;
					var tmp1;
					this.inputPosition += 1;
					if(this.input.readByte() == 103) {
						this.inputPosition += 1;
						tmp1 = this.input.readByte() != 103;
					} else {
						tmp1 = true;
					}
					if(!tmp1) {
						this.inputPosition += 1;
						tmp = this.input.readByte() != 83;
					} else {
						tmp = true;
					}
					if(tmp) {
						continue;
					}
					var this1 = new Array(27);
					var header = this1;
					header[0] = 79;
					header[1] = 103;
					header[2] = 103;
					header[3] = 83;
					this.inputPosition += 1;
					header[4] = this.input.readByte();
					this.inputPosition += 1;
					header[5] = this.input.readByte();
					this.inputPosition += 1;
					header[6] = this.input.readByte();
					this.inputPosition += 1;
					header[7] = this.input.readByte();
					this.inputPosition += 1;
					header[8] = this.input.readByte();
					this.inputPosition += 1;
					header[9] = this.input.readByte();
					this.inputPosition += 1;
					header[10] = this.input.readByte();
					this.inputPosition += 1;
					header[11] = this.input.readByte();
					this.inputPosition += 1;
					header[12] = this.input.readByte();
					this.inputPosition += 1;
					header[13] = this.input.readByte();
					this.inputPosition += 1;
					header[14] = this.input.readByte();
					this.inputPosition += 1;
					header[15] = this.input.readByte();
					this.inputPosition += 1;
					header[16] = this.input.readByte();
					this.inputPosition += 1;
					header[17] = this.input.readByte();
					this.inputPosition += 1;
					header[18] = this.input.readByte();
					this.inputPosition += 1;
					header[19] = this.input.readByte();
					this.inputPosition += 1;
					header[20] = this.input.readByte();
					this.inputPosition += 1;
					header[21] = this.input.readByte();
					this.inputPosition += 1;
					header[22] = this.input.readByte();
					this.inputPosition += 1;
					header[23] = this.input.readByte();
					this.inputPosition += 1;
					header[24] = this.input.readByte();
					this.inputPosition += 1;
					header[25] = this.input.readByte();
					this.inputPosition += 1;
					header[26] = this.input.readByte();
					if(header[4] != 0) {
						seekFunc(this.inputPosition = retryLoc);
						continue;
					}
					var goal = header[22] + (header[23] << 8) + (header[24] << 16) + (header[25] << 24);
					header[22] = 0;
					header[23] = 0;
					header[24] = 0;
					header[25] = 0;
					var crc = 0;
					var _g = 0;
					while(_g < 27) {
						var i = _g++;
						crc = crc << 8 ^ kha_audio2_ogg_tools_Crc32.table[header[i] ^ crc >>> 24];
					}
					var len = 0;
					try {
						var _g1 = 0;
						var _g2 = header[26];
						while(_g1 < _g2) {
							var i1 = _g1++;
							this.inputPosition += 1;
							var s = this.input.readByte();
							crc = crc << 8 ^ kha_audio2_ogg_tools_Crc32.table[s ^ crc >>> 24];
							len += s;
						}
						var _g3 = 0;
						var _g4 = len;
						while(_g3 < _g4) {
							var i2 = _g3++;
							this.inputPosition += 1;
							var byte = this.input.readByte();
							crc = crc << 8 ^ kha_audio2_ogg_tools_Crc32.table[byte ^ crc >>> 24];
						}
					} catch( e ) {
						var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
						if((e1 instanceof haxe_io_Eof)) {
							var e2 = e1;
							return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;
						} else {
							throw e;
						}
					}
					if(crc == goal) {
						var end = this.inputPosition;
						seekFunc(this.inputPosition = retryLoc - 1);
						return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.Found(end,(header[5] & 4) != 0);
					}
				}
			}
		} catch( e3 ) {
			var e4 = (e3 instanceof js__$Boot_HaxeError) ? e3.val : e3;
			if((e4 instanceof haxe_io_Eof)) {
				var e5 = e4;
				return kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult.NotFound;
			} else {
				throw e3;
			}
		}
	}
	,analyzePage: function(seekFunc,h) {
		var z = new kha_audio2_ogg_vorbis_data_ProbedPage();
		var this1 = new Array(255);
		var packetType = this1;
		z.pageStart = this.inputPosition;
		this.inputPosition += 27;
		var this2 = new Array(27);
		var vec = this2;
		var _g = 0;
		var _g1 = 27;
		while(_g < _g1) {
			var i = _g++;
			vec[i] = this.input.readByte();
		}
		var pageHeader = vec;
		var n = pageHeader[26];
		this.inputPosition += n;
		var this3 = new Array(n);
		var vec1 = this3;
		var _g2 = 0;
		var _g11 = n;
		while(_g2 < _g11) {
			var i1 = _g2++;
			vec1[i1] = this.input.readByte();
		}
		var lacing = vec1;
		var len = 0;
		var _g3 = 0;
		var _g12 = pageHeader[26];
		while(_g3 < _g12) {
			var i2 = _g3++;
			len += lacing[i2];
		}
		z.pageEnd = z.pageStart + 27 + pageHeader[26] + len;
		z.lastDecodedSample = pageHeader[6] + (pageHeader[7] << 8) + (pageHeader[8] << 16) + (pageHeader[9] << 16);
		if((pageHeader[5] & 4) != 0) {
			z.firstDecodedSample = null;
			seekFunc(this.inputPosition = z.pageStart);
			return z;
		}
		var numPacket = 0;
		var packetStart = (pageHeader[5] & 1) == 0;
		var modeCount = h.modes.length;
		var _g21 = 0;
		var _g31 = pageHeader[26];
		while(_g21 < _g31) {
			var i3 = _g21++;
			if(packetStart) {
				if(lacing[i3] == 0) {
					seekFunc(this.inputPosition = z.pageStart);
					return null;
				}
				this.inputPosition += 1;
				var n1 = this.input.readByte();
				if((n1 & 1) != 0) {
					seekFunc(this.inputPosition = z.pageStart);
					return null;
				}
				n1 >>= 1;
				var n2 = modeCount - 1;
				var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
				var b = n2 < 16384 ? n2 < 16 ? log2_4[n2] : n2 < 512 ? 5 + log2_4[n2 >> 5] : 10 + log2_4[n2 >> 10] : n2 < 16777216 ? n2 < 524288 ? 15 + log2_4[n2 >> 15] : 20 + log2_4[n2 >> 20] : n2 < 536870912 ? 25 + log2_4[n2 >> 25] : n2 < -2147483648 ? 30 + log2_4[n2 >> 30] : 0;
				n1 &= (1 << b) - 1;
				if(n1 >= modeCount) {
					seekFunc(this.inputPosition = z.pageStart);
					return null;
				}
				packetType[numPacket++] = h.modes[n1].blockflag;
				var len1 = lacing[i3] - 1;
				this.inputPosition += len1;
				var this4 = new Array(len1);
				var vec2 = this4;
				var _g4 = 0;
				var _g13 = len1;
				while(_g4 < _g13) {
					var i4 = _g4++;
					vec2[i4] = this.input.readByte();
				}
			} else {
				var len2 = lacing[i3];
				this.inputPosition += len2;
				var this5 = new Array(len2);
				var vec3 = this5;
				var _g5 = 0;
				var _g14 = len2;
				while(_g5 < _g14) {
					var i5 = _g5++;
					vec3[i5] = this.input.readByte();
				}
			}
			packetStart = lacing[i3] < 255;
		}
		var samples = 0;
		if(numPacket > 1) {
			samples += packetType[numPacket - 1] ? h.blocksize1 : h.blocksize0;
		}
		var i6 = numPacket - 2;
		while(i6 >= 1) {
			--i6;
			if(packetType[i6]) {
				if(packetType[i6 + 1]) {
					samples += h.blocksize1 >> 1;
				} else {
					samples += (h.blocksize1 - h.blocksize0 >> 2) + (h.blocksize0 >> 1);
				}
			} else {
				samples += h.blocksize0 >> 1;
			}
			--i6;
		}
		z.firstDecodedSample = z.lastDecodedSample - samples;
		seekFunc(this.inputPosition = z.pageStart);
		return z;
	}
	,decodeScalarRaw: function(c) {
		this.prepHuffman();
		var codewordLengths = c.codewordLengths;
		var codewords = c.codewords;
		var sortedCodewords = c.sortedCodewords;
		if(c.entries > 8 ? sortedCodewords != null : codewords != null) {
			var n = this.acc;
			n = (n & -1431655766) >>> 1 | (n & 1431655765) << 1;
			n = (n & -858993460) >>> 2 | (n & 858993459) << 2;
			n = (n & -252645136) >>> 4 | (n & 252645135) << 4;
			n = (n & -16711936) >>> 8 | (n & 16711935) << 8;
			var code = n >>> 16 | n << 16;
			var x = 0;
			var n1 = c.sortedEntries;
			while(n1 > 1) {
				var m = x + (n1 >> 1);
				if(_$UInt_UInt_$Impl_$.gte(code,sortedCodewords[m])) {
					x = m;
					n1 -= n1 >> 1;
				} else {
					n1 >>= 1;
				}
			}
			if(!c.sparse) {
				x = c.sortedValues[x];
			}
			var len = codewordLengths[x];
			if(this.validBits >= len) {
				this.acc = this.acc >>> len;
				this.validBits -= len;
				return x;
			}
			this.validBits = 0;
			return -1;
		}
		var _g = 0;
		var _g1 = c.entries;
		while(_g < _g1) {
			var i = _g++;
			var cl = codewordLengths[i];
			if(cl == 255) {
				continue;
			}
			if(codewords[i] == (this.acc & (1 << cl) - 1)) {
				if(this.validBits >= cl) {
					this.acc = this.acc >>> cl;
					this.validBits -= cl;
					return i;
				}
				this.validBits = 0;
				return -1;
			}
		}
		this.error = new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 847, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "decodeScalarRaw"});
		this.validBits = 0;
		return -1;
	}
	,__class__: kha_audio2_ogg_vorbis_VorbisDecodeState
};
var kha_audio2_ogg_vorbis__$VorbisDecodeState_FindPageResult = $hxEnums["kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult"] = { __ename__ : true, __constructs__ : ["Found","NotFound"]
	,Found: ($_=function(end,last) { return {_hx_index:0,end:end,last:last,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}; },$_.__params__ = ["end","last"],$_)
	,NotFound: {_hx_index:1,__enum__:"kha.audio2.ogg.vorbis._VorbisDecodeState.FindPageResult",toString:$estr}
};
var kha_audio2_ogg_vorbis_VorbisDecoder = function(header,decodeState) {
	this.header = header;
	this.decodeState = decodeState;
	this.totalSample = null;
	this.currentSample = 0;
	this.previousLength = 0;
	var this1 = new Array(header.channel);
	this.channelBuffers = this1;
	var this2 = new Array(header.channel);
	this.previousWindow = this2;
	var this3 = new Array(header.channel);
	this.finalY = this3;
	var _g = 0;
	var _g1 = header.channel;
	while(_g < _g1) {
		var i = _g++;
		var this4 = this.channelBuffers;
		var this5 = new Array(header.blocksize1);
		var vec = this5;
		this4[i] = vec;
		var this6 = this.previousWindow;
		var this7 = new Array(header.blocksize1 / 2 | 0);
		var vec1 = this7;
		this6[i] = vec1;
		this.finalY[i] = [];
	}
	var this8 = new Array(2);
	this.a = this8;
	var this9 = new Array(2);
	this.b = this9;
	var this10 = new Array(2);
	this.c = this10;
	var this11 = new Array(2);
	this.window = this11;
	var this12 = new Array(2);
	this.bitReverseData = this12;
	this.initBlocksize(0,header.blocksize0);
	this.initBlocksize(1,header.blocksize1);
};
$hxClasses["kha.audio2.ogg.vorbis.VorbisDecoder"] = kha_audio2_ogg_vorbis_VorbisDecoder;
kha_audio2_ogg_vorbis_VorbisDecoder.__name__ = true;
kha_audio2_ogg_vorbis_VorbisDecoder.start = function(input) {
	var decodeState = new kha_audio2_ogg_vorbis_VorbisDecodeState(input);
	var header = kha_audio2_ogg_vorbis_data_Header.read(decodeState);
	var decoder = new kha_audio2_ogg_vorbis_VorbisDecoder(header,decodeState);
	decodeState.startFirstDecode();
	decoder.pumpFirstFrame();
	return decoder;
};
kha_audio2_ogg_vorbis_VorbisDecoder.prototype = {
	previousWindow: null
	,previousLength: null
	,finalY: null
	,a: null
	,b: null
	,c: null
	,window: null
	,bitReverseData: null
	,channelBuffers: null
	,channelBufferStart: null
	,channelBufferEnd: null
	,header: null
	,currentSample: null
	,totalSample: null
	,decodeState: null
	,read: function(output,samples,channels,sampleRate,useFloat) {
		var b = this.header.sampleRate;
		if((_$UInt_UInt_$Impl_$.toFloat(sampleRate) % _$UInt_UInt_$Impl_$.toFloat(b) | 0) != 0) {
			throw new js__$Boot_HaxeError("Unsupported sampleRate : can't convert " + Std.string(_$UInt_UInt_$Impl_$.toFloat(this.header.sampleRate)) + " to " + sampleRate);
		}
		if(channels % this.header.channel != 0) {
			throw new js__$Boot_HaxeError("Unsupported channels : can't convert " + this.header.channel + " to " + channels);
		}
		var b1 = this.header.sampleRate;
		var sampleRepeat = _$UInt_UInt_$Impl_$.toFloat(sampleRate) / _$UInt_UInt_$Impl_$.toFloat(b1) | 0;
		var channelRepeat = channels / this.header.channel | 0;
		var n = 0;
		var len = Math.floor(samples / sampleRepeat);
		if(this.totalSample != null && len > this.totalSample - this.currentSample) {
			len = this.totalSample - this.currentSample;
		}
		var index = 0;
		while(n < len) {
			var k = this.channelBufferEnd - this.channelBufferStart;
			if(k >= len - n) {
				k = len - n;
			}
			var _g = this.channelBufferStart;
			var _g1 = this.channelBufferStart + k;
			while(_g < _g1) {
				var j = _g++;
				var _g2 = 0;
				var _g11 = sampleRepeat;
				while(_g2 < _g11) {
					var sr = _g2++;
					var _g3 = 0;
					var _g12 = this.header.channel;
					while(_g3 < _g12) {
						var i = _g3++;
						var _g4 = 0;
						var _g13 = channelRepeat;
						while(_g4 < _g13) {
							var cr = _g4++;
							var value = this.channelBuffers[i][j];
							if(value > 1) {
								value = 1;
							} else if(value < -1) {
								value = -1;
							}
							if(useFloat) {
								output[index] = value;
								++index;
							}
						}
					}
				}
			}
			n += k;
			this.channelBufferStart += k;
			if(n == len || this.getFrameFloat() == 0) {
				break;
			}
		}
		var _g5 = n;
		var _g14 = len;
		while(_g5 < _g14) {
			var j1 = _g5++;
			var _g6 = 0;
			var _g15 = sampleRepeat;
			while(_g6 < _g15) {
				var sr1 = _g6++;
				var _g7 = 0;
				var _g16 = this.header.channel;
				while(_g7 < _g16) {
					var i1 = _g7++;
					var _g8 = 0;
					var _g17 = channelRepeat;
					while(_g8 < _g17) {
						var cr1 = _g8++;
						if(useFloat) {
							output[index] = 0;
							++index;
						}
					}
				}
			}
		}
		this.currentSample += len;
		return len * sampleRepeat;
	}
	,skipSamples: function(len) {
		var n = 0;
		if(this.totalSample != null && len > this.totalSample - this.currentSample) {
			len = this.totalSample - this.currentSample;
		}
		while(n < len) {
			var k = this.channelBufferEnd - this.channelBufferStart;
			if(k >= len - n) {
				k = len - n;
			}
			n += k;
			this.channelBufferStart += k;
			if(n == len || this.getFrameFloat() == 0) {
				break;
			}
		}
		this.currentSample += len;
		return len;
	}
	,setupSampleNumber: function(seekFunc,inputLength) {
		if(this.totalSample == null) {
			this.totalSample = this.decodeState.getSampleNumber(seekFunc,inputLength);
		}
	}
	,seek: function(seekFunc,inputLength,sampleNumber) {
		if(this.currentSample == sampleNumber) {
			return;
		}
		if(this.totalSample == null) {
			this.setupSampleNumber(seekFunc,inputLength);
			if(this.totalSample == 0) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.CANT_FIND_LAST_PAGE,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 187, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "seek"}));
			}
		}
		if(sampleNumber < 0) {
			sampleNumber = 0;
		}
		var p0 = this.decodeState.pFirst;
		var p1 = this.decodeState.pLast;
		if(sampleNumber >= p1.lastDecodedSample) {
			sampleNumber = p1.lastDecodedSample - 1;
		}
		if(sampleNumber < p0.lastDecodedSample) {
			this.seekFrameFromPage(seekFunc,p0.pageStart,0,sampleNumber);
		} else {
			var attempts = 0;
			while(p0.pageEnd < p1.pageStart) {
				var startOffset = p0.pageEnd;
				var endOffset = p1.afterPreviousPageStart;
				var startSample = p0.lastDecodedSample;
				var endSample = p1.lastDecodedSample;
				if(startSample == null || endSample == null) {
					throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 219, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "seek"}));
				}
				if(_$UInt_UInt_$Impl_$.gt(endOffset,startOffset + 4000)) {
					endOffset = endOffset - 4000;
				}
				var probe = startOffset + Math.floor(_$UInt_UInt_$Impl_$.toFloat(endOffset - startOffset) / _$UInt_UInt_$Impl_$.toFloat(endSample - startSample) * (sampleNumber - startSample));
				if(attempts >= 4) {
					var probe2 = startOffset + (endOffset - startOffset >>> 1);
					probe = attempts >= 8 ? probe2 : _$UInt_UInt_$Impl_$.gt(probe2,probe) ? probe + (probe2 - probe >>> 1) : probe2 + (probe - probe2 >>> 1);
				}
				++attempts;
				seekFunc(this.decodeState.inputPosition = probe);
				switch(this.decodeState.findPage(seekFunc,inputLength)._hx_index) {
				case 0:
					break;
				case 1:
					throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 249, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "seek"}));
				}
				var q = this.decodeState.analyzePage(seekFunc,this.header);
				if(q == null) {
					throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 255, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "seek"}));
				}
				q.afterPreviousPageStart = probe;
				if(q.pageStart == p1.pageStart) {
					p1 = q;
					continue;
				}
				if(sampleNumber < q.lastDecodedSample) {
					p1 = q;
				} else {
					p0 = q;
				}
			}
			if(p0.lastDecodedSample <= sampleNumber && sampleNumber < p1.lastDecodedSample) {
				this.seekFrameFromPage(seekFunc,p1.pageStart,p0.lastDecodedSample,sampleNumber);
			} else {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 275, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "seek"}));
			}
		}
	}
	,seekFrameFromPage: function(seekFunc,pageStart,firstSample,targetSample) {
		var frame = 0;
		var frameStart = firstSample;
		seekFunc(this.decodeState.inputPosition = pageStart);
		this.decodeState.nextSeg = -1;
		var leftEnd = 0;
		var leftStart = 0;
		var prevState = null;
		var lastState = null;
		while(true) {
			prevState = lastState;
			lastState = this.decodeState.clone(seekFunc);
			var initialResult = this.decodeInitial();
			if(initialResult == null) {
				lastState = prevState;
				break;
			}
			leftStart = initialResult.left.start;
			leftEnd = initialResult.left.end;
			var start = frame == 0 ? leftEnd : leftStart;
			if(targetSample < frameStart + initialResult.right.start - start) {
				break;
			}
			var _this = this.decodeState;
			while(_this.bytesInSeg != 0 || !_this.lastSeg && _this.next() != 0) {
				_this.bytesInSeg--;
				_this.inputPosition += 1;
				_this.input.readByte();
			}
			frameStart += initialResult.right.start - start;
			++frame;
		}
		this.decodeState = lastState;
		seekFunc(this.decodeState.inputPosition);
		this.previousLength = 0;
		this.pumpFirstFrame();
		this.currentSample = frameStart;
		this.skipSamples(targetSample - frameStart);
	}
	,clone: function(seekFunc) {
		var decoder = Object.create(kha_audio2_ogg_vorbis_VorbisDecoder.prototype);
		decoder.currentSample = this.currentSample;
		decoder.totalSample = this.totalSample;
		decoder.previousLength = this.previousLength;
		decoder.channelBufferStart = this.channelBufferStart;
		decoder.channelBufferEnd = this.channelBufferEnd;
		decoder.a = this.a;
		decoder.b = this.b;
		decoder.c = this.c;
		decoder.window = this.window;
		decoder.bitReverseData = this.bitReverseData;
		decoder.header = this.header;
		decoder.decodeState = this.decodeState.clone(seekFunc);
		var this1 = new Array(this.header.channel);
		decoder.channelBuffers = this1;
		var this2 = new Array(this.header.channel);
		decoder.previousWindow = this2;
		var this3 = new Array(this.header.channel);
		decoder.finalY = this3;
		var _g = 0;
		var _g1 = this.header.channel;
		while(_g < _g1) {
			var i = _g++;
			decoder.channelBuffers[i] = kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.channelBuffers[i]);
			decoder.previousWindow[i] = kha_audio2_ogg_vorbis_VorbisTools.copyVector(this.previousWindow[i]);
			decoder.finalY[i] = Lambda.array(this.finalY[i]);
		}
		return decoder;
	}
	,ensurePosition: function(seekFunc) {
		seekFunc(this.decodeState.inputPosition);
	}
	,getFrameFloat: function() {
		var result = this.decodePacket();
		if(result == null) {
			this.channelBufferStart = this.channelBufferEnd = 0;
			return 0;
		}
		var len = this.finishFrame(result);
		this.channelBufferStart = result.left;
		this.channelBufferEnd = result.left + len;
		return len;
	}
	,pumpFirstFrame: function() {
		this.finishFrame(this.decodePacket());
	}
	,finishFrame: function(r) {
		var len = r.len;
		var right = r.right;
		var left = r.left;
		if(this.previousLength != 0) {
			var n = this.previousLength;
			var w = this.getWindow(n);
			var _g = 0;
			var _g1 = this.header.channel;
			while(_g < _g1) {
				var i = _g++;
				var cb = this.channelBuffers[i];
				var pw = this.previousWindow[i];
				var _g2 = 0;
				var _g11 = n;
				while(_g2 < _g11) {
					var j = _g2++;
					cb[left + j] = cb[left + j] * w[j] + pw[j] * w[n - 1 - j];
				}
			}
		}
		var prev = this.previousLength;
		this.previousLength = len - right;
		var _g3 = 0;
		var _g12 = this.header.channel;
		while(_g3 < _g12) {
			var i1 = _g3++;
			var pw1 = this.previousWindow[i1];
			var cb1 = this.channelBuffers[i1];
			var _g4 = 0;
			var _g13 = len - right;
			while(_g4 < _g13) {
				var j1 = _g4++;
				pw1[j1] = cb1[right + j1];
			}
		}
		if(prev == 0) {
			return 0;
		}
		if(len < right) {
			right = len;
		}
		return right - left;
	}
	,getWindow: function(len) {
		len <<= 1;
		if(len == this.header.blocksize0) {
			return this.window[0];
		} else if(len == this.header.blocksize1) {
			return this.window[1];
		} else {
			return null;
		}
	}
	,initBlocksize: function(bs,n) {
		var n2 = n >> 1;
		var n4 = n >> 2;
		var n8 = n >> 3;
		var this1 = this.a;
		var this2 = new Array(n2);
		this1[bs] = this2;
		var this3 = this.b;
		var this4 = new Array(n2);
		this3[bs] = this4;
		var this5 = this.c;
		var this6 = new Array(n4);
		this5[bs] = this6;
		var this7 = this.window;
		var this8 = new Array(n2);
		this7[bs] = this8;
		var this9 = this.bitReverseData;
		var this10 = new Array(n8);
		this9[bs] = this10;
		kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors(n,this.a[bs],this.b[bs],this.c[bs]);
		kha_audio2_ogg_vorbis_VorbisTools.computeWindow(n,this.window[bs]);
		kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse(n,this.bitReverseData[bs]);
	}
	,inverseMdct: function(buffer,n,blocktype) {
		var bt = blocktype ? 1 : 0;
		var a = this.a[bt];
		var b = this.b[bt];
		var c = this.c[bt];
		var bitReverse = this.bitReverseData[bt];
		var n2 = n >> 1;
		var n4 = n >> 2;
		var n8 = n >> 3;
		var this1 = new Array(n2);
		var buf2 = this1;
		var dOffset = n2 - 2;
		var aaOffset = 0;
		var eOffset = 0;
		var eStopOffset = n2;
		while(eOffset != eStopOffset) {
			buf2[dOffset + 1] = buffer[eOffset] * a[aaOffset] - buffer[eOffset + 2] * a[aaOffset + 1];
			buf2[dOffset] = buffer[eOffset] * a[aaOffset + 1] + buffer[eOffset + 2] * a[aaOffset];
			dOffset -= 2;
			aaOffset += 2;
			eOffset += 4;
		}
		eOffset = n2 - 3;
		while(dOffset >= 0) {
			buf2[dOffset + 1] = -buffer[eOffset + 2] * a[aaOffset] - -buffer[eOffset] * a[aaOffset + 1];
			buf2[dOffset] = -buffer[eOffset + 2] * a[aaOffset + 1] + -buffer[eOffset] * a[aaOffset];
			dOffset -= 2;
			aaOffset += 2;
			eOffset -= 4;
		}
		var u = buffer;
		var v = buf2;
		var aaOffset1 = n2 - 8;
		var eOffset0 = n4;
		var eOffset1 = 0;
		var dOffset0 = n4;
		var dOffset1 = 0;
		while(aaOffset1 >= 0) {
			var v41_21 = v[eOffset0 + 1] - v[eOffset1 + 1];
			var v40_20 = v[eOffset0] - v[eOffset1];
			u[dOffset0 + 1] = v[eOffset0 + 1] + v[eOffset1 + 1];
			u[dOffset0] = v[eOffset0] + v[eOffset1];
			u[dOffset1 + 1] = v41_21 * a[aaOffset1 + 4] - v40_20 * a[aaOffset1 + 5];
			u[dOffset1] = v40_20 * a[aaOffset1 + 4] + v41_21 * a[aaOffset1 + 5];
			v41_21 = v[eOffset0 + 3] - v[eOffset1 + 3];
			v40_20 = v[eOffset0 + 2] - v[eOffset1 + 2];
			u[dOffset0 + 3] = v[eOffset0 + 3] + v[eOffset1 + 3];
			u[dOffset0 + 2] = v[eOffset0 + 2] + v[eOffset1 + 2];
			u[dOffset1 + 3] = v41_21 * a[aaOffset1] - v40_20 * a[aaOffset1 + 1];
			u[dOffset1 + 2] = v40_20 * a[aaOffset1] + v41_21 * a[aaOffset1 + 1];
			aaOffset1 -= 8;
			dOffset0 += 4;
			dOffset1 += 4;
			eOffset0 += 4;
			eOffset1 += 4;
		}
		var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
		var ld = (n < 16384 ? n < 16 ? log2_4[n] : n < 512 ? 5 + log2_4[n >> 5] : 10 + log2_4[n >> 10] : n < 16777216 ? n < 524288 ? 15 + log2_4[n >> 15] : 20 + log2_4[n >> 20] : n < 536870912 ? 25 + log2_4[n >> 25] : n < -2147483648 ? 30 + log2_4[n >> 30] : 0) - 1;
		var i_off = n2 - 1 - n4 * 0;
		var eeOffset0 = i_off;
		var eeOffset2 = i_off + -(n >> 3);
		var aOffset = 0;
		var i = (n >> 4 >> 2) + 1;
		while(--i > 0) {
			var k00_20 = u[eeOffset0] - u[eeOffset2];
			var k01_21 = u[eeOffset0 + -1] - u[eeOffset2 + -1];
			var _g = eeOffset0;
			var _g1 = u;
			_g1[_g] = _g1[_g] + u[eeOffset2];
			var _g2 = eeOffset0 + -1;
			var _g11 = u;
			_g11[_g2] = _g11[_g2] + u[eeOffset2 + -1];
			u[eeOffset2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
			u[eeOffset2 + -1] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
			aOffset += 8;
			k00_20 = u[eeOffset0 + -2] - u[eeOffset2 + -2];
			k01_21 = u[eeOffset0 + -3] - u[eeOffset2 + -3];
			var _g3 = eeOffset0 + -2;
			var _g12 = u;
			_g12[_g3] = _g12[_g3] + u[eeOffset2 + -2];
			var _g4 = eeOffset0 + -3;
			var _g13 = u;
			_g13[_g4] = _g13[_g4] + u[eeOffset2 + -3];
			u[eeOffset2 + -2] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
			u[eeOffset2 + -3] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
			aOffset += 8;
			k00_20 = u[eeOffset0 + -4] - u[eeOffset2 + -4];
			k01_21 = u[eeOffset0 + -5] - u[eeOffset2 + -5];
			var _g5 = eeOffset0 + -4;
			var _g14 = u;
			_g14[_g5] = _g14[_g5] + u[eeOffset2 + -4];
			var _g6 = eeOffset0 + -5;
			var _g15 = u;
			_g15[_g6] = _g15[_g6] + u[eeOffset2 + -5];
			u[eeOffset2 + -4] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
			u[eeOffset2 + -5] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
			aOffset += 8;
			k00_20 = u[eeOffset0 + -6] - u[eeOffset2 + -6];
			k01_21 = u[eeOffset0 + -7] - u[eeOffset2 + -7];
			var _g7 = eeOffset0 + -6;
			var _g16 = u;
			_g16[_g7] = _g16[_g7] + u[eeOffset2 + -6];
			var _g8 = eeOffset0 + -7;
			var _g17 = u;
			_g17[_g8] = _g17[_g8] + u[eeOffset2 + -7];
			u[eeOffset2 + -6] = k00_20 * a[aOffset] - k01_21 * a[aOffset + 1];
			u[eeOffset2 + -7] = k01_21 * a[aOffset] + k00_20 * a[aOffset + 1];
			aOffset += 8;
			eeOffset0 -= 8;
			eeOffset2 -= 8;
		}
		var i_off1 = n2 - 1 - n4;
		var eeOffset01 = i_off1;
		var eeOffset21 = i_off1 + -(n >> 3);
		var aOffset1 = 0;
		var i1 = (n >> 4 >> 2) + 1;
		while(--i1 > 0) {
			var k00_201 = u[eeOffset01] - u[eeOffset21];
			var k01_211 = u[eeOffset01 + -1] - u[eeOffset21 + -1];
			var _g9 = eeOffset01;
			var _g18 = u;
			_g18[_g9] = _g18[_g9] + u[eeOffset21];
			var _g10 = eeOffset01 + -1;
			var _g19 = u;
			_g19[_g10] = _g19[_g10] + u[eeOffset21 + -1];
			u[eeOffset21] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
			u[eeOffset21 + -1] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
			aOffset1 += 8;
			k00_201 = u[eeOffset01 + -2] - u[eeOffset21 + -2];
			k01_211 = u[eeOffset01 + -3] - u[eeOffset21 + -3];
			var _g20 = eeOffset01 + -2;
			var _g110 = u;
			_g110[_g20] = _g110[_g20] + u[eeOffset21 + -2];
			var _g21 = eeOffset01 + -3;
			var _g111 = u;
			_g111[_g21] = _g111[_g21] + u[eeOffset21 + -3];
			u[eeOffset21 + -2] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
			u[eeOffset21 + -3] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
			aOffset1 += 8;
			k00_201 = u[eeOffset01 + -4] - u[eeOffset21 + -4];
			k01_211 = u[eeOffset01 + -5] - u[eeOffset21 + -5];
			var _g22 = eeOffset01 + -4;
			var _g112 = u;
			_g112[_g22] = _g112[_g22] + u[eeOffset21 + -4];
			var _g23 = eeOffset01 + -5;
			var _g113 = u;
			_g113[_g23] = _g113[_g23] + u[eeOffset21 + -5];
			u[eeOffset21 + -4] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
			u[eeOffset21 + -5] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
			aOffset1 += 8;
			k00_201 = u[eeOffset01 + -6] - u[eeOffset21 + -6];
			k01_211 = u[eeOffset01 + -7] - u[eeOffset21 + -7];
			var _g24 = eeOffset01 + -6;
			var _g114 = u;
			_g114[_g24] = _g114[_g24] + u[eeOffset21 + -6];
			var _g25 = eeOffset01 + -7;
			var _g115 = u;
			_g115[_g25] = _g115[_g25] + u[eeOffset21 + -7];
			u[eeOffset21 + -6] = k00_201 * a[aOffset1] - k01_211 * a[aOffset1 + 1];
			u[eeOffset21 + -7] = k01_211 * a[aOffset1] + k00_201 * a[aOffset1 + 1];
			aOffset1 += 8;
			eeOffset01 -= 8;
			eeOffset21 -= 8;
		}
		var d0 = n2 - 1 - n8 * 0;
		var aOffset2 = 0;
		var eOffset01 = d0;
		var eOffset2 = d0 + -(n >> 4);
		var i2 = (n >> 5 >> 2) + 1;
		while(--i2 > 0) {
			var k00_202 = u[eOffset01] - u[eOffset2];
			var k01_212 = u[eOffset01 + -1] - u[eOffset2 + -1];
			var _g26 = eOffset01;
			var _g116 = u;
			_g116[_g26] = _g116[_g26] + u[eOffset2];
			var _g27 = eOffset01 + -1;
			var _g117 = u;
			_g117[_g27] = _g117[_g27] + u[eOffset2 + -1];
			u[eOffset2] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
			u[eOffset2 + -1] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
			aOffset2 += 16;
			k00_202 = u[eOffset01 + -2] - u[eOffset2 + -2];
			k01_212 = u[eOffset01 + -3] - u[eOffset2 + -3];
			var _g28 = eOffset01 + -2;
			var _g118 = u;
			_g118[_g28] = _g118[_g28] + u[eOffset2 + -2];
			var _g29 = eOffset01 + -3;
			var _g119 = u;
			_g119[_g29] = _g119[_g29] + u[eOffset2 + -3];
			u[eOffset2 + -2] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
			u[eOffset2 + -3] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
			aOffset2 += 16;
			k00_202 = u[eOffset01 + -4] - u[eOffset2 + -4];
			k01_212 = u[eOffset01 + -5] - u[eOffset2 + -5];
			var _g30 = eOffset01 + -4;
			var _g120 = u;
			_g120[_g30] = _g120[_g30] + u[eOffset2 + -4];
			var _g31 = eOffset01 + -5;
			var _g121 = u;
			_g121[_g31] = _g121[_g31] + u[eOffset2 + -5];
			u[eOffset2 + -4] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
			u[eOffset2 + -5] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
			aOffset2 += 16;
			k00_202 = u[eOffset01 + -6] - u[eOffset2 + -6];
			k01_212 = u[eOffset01 + -7] - u[eOffset2 + -7];
			var _g32 = eOffset01 + -6;
			var _g122 = u;
			_g122[_g32] = _g122[_g32] + u[eOffset2 + -6];
			var _g33 = eOffset01 + -7;
			var _g123 = u;
			_g123[_g33] = _g123[_g33] + u[eOffset2 + -7];
			u[eOffset2 + -6] = k00_202 * a[aOffset2] - k01_212 * a[aOffset2 + 1];
			u[eOffset2 + -7] = k01_212 * a[aOffset2] + k00_202 * a[aOffset2 + 1];
			eOffset01 -= 8;
			eOffset2 -= 8;
			aOffset2 += 16;
		}
		var d01 = n2 - 1 - n8;
		var aOffset3 = 0;
		var eOffset02 = d01;
		var eOffset21 = d01 + -(n >> 4);
		var i3 = (n >> 5 >> 2) + 1;
		while(--i3 > 0) {
			var k00_203 = u[eOffset02] - u[eOffset21];
			var k01_213 = u[eOffset02 + -1] - u[eOffset21 + -1];
			var _g34 = eOffset02;
			var _g124 = u;
			_g124[_g34] = _g124[_g34] + u[eOffset21];
			var _g35 = eOffset02 + -1;
			var _g125 = u;
			_g125[_g35] = _g125[_g35] + u[eOffset21 + -1];
			u[eOffset21] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
			u[eOffset21 + -1] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
			aOffset3 += 16;
			k00_203 = u[eOffset02 + -2] - u[eOffset21 + -2];
			k01_213 = u[eOffset02 + -3] - u[eOffset21 + -3];
			var _g36 = eOffset02 + -2;
			var _g126 = u;
			_g126[_g36] = _g126[_g36] + u[eOffset21 + -2];
			var _g37 = eOffset02 + -3;
			var _g127 = u;
			_g127[_g37] = _g127[_g37] + u[eOffset21 + -3];
			u[eOffset21 + -2] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
			u[eOffset21 + -3] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
			aOffset3 += 16;
			k00_203 = u[eOffset02 + -4] - u[eOffset21 + -4];
			k01_213 = u[eOffset02 + -5] - u[eOffset21 + -5];
			var _g38 = eOffset02 + -4;
			var _g128 = u;
			_g128[_g38] = _g128[_g38] + u[eOffset21 + -4];
			var _g39 = eOffset02 + -5;
			var _g129 = u;
			_g129[_g39] = _g129[_g39] + u[eOffset21 + -5];
			u[eOffset21 + -4] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
			u[eOffset21 + -5] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
			aOffset3 += 16;
			k00_203 = u[eOffset02 + -6] - u[eOffset21 + -6];
			k01_213 = u[eOffset02 + -7] - u[eOffset21 + -7];
			var _g40 = eOffset02 + -6;
			var _g130 = u;
			_g130[_g40] = _g130[_g40] + u[eOffset21 + -6];
			var _g41 = eOffset02 + -7;
			var _g131 = u;
			_g131[_g41] = _g131[_g41] + u[eOffset21 + -7];
			u[eOffset21 + -6] = k00_203 * a[aOffset3] - k01_213 * a[aOffset3 + 1];
			u[eOffset21 + -7] = k01_213 * a[aOffset3] + k00_203 * a[aOffset3 + 1];
			eOffset02 -= 8;
			eOffset21 -= 8;
			aOffset3 += 16;
		}
		var d02 = n2 - 1 - n8 * 2;
		var aOffset4 = 0;
		var eOffset03 = d02;
		var eOffset22 = d02 + -(n >> 4);
		var i4 = (n >> 5 >> 2) + 1;
		while(--i4 > 0) {
			var k00_204 = u[eOffset03] - u[eOffset22];
			var k01_214 = u[eOffset03 + -1] - u[eOffset22 + -1];
			var _g42 = eOffset03;
			var _g132 = u;
			_g132[_g42] = _g132[_g42] + u[eOffset22];
			var _g43 = eOffset03 + -1;
			var _g133 = u;
			_g133[_g43] = _g133[_g43] + u[eOffset22 + -1];
			u[eOffset22] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
			u[eOffset22 + -1] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
			aOffset4 += 16;
			k00_204 = u[eOffset03 + -2] - u[eOffset22 + -2];
			k01_214 = u[eOffset03 + -3] - u[eOffset22 + -3];
			var _g44 = eOffset03 + -2;
			var _g134 = u;
			_g134[_g44] = _g134[_g44] + u[eOffset22 + -2];
			var _g45 = eOffset03 + -3;
			var _g135 = u;
			_g135[_g45] = _g135[_g45] + u[eOffset22 + -3];
			u[eOffset22 + -2] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
			u[eOffset22 + -3] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
			aOffset4 += 16;
			k00_204 = u[eOffset03 + -4] - u[eOffset22 + -4];
			k01_214 = u[eOffset03 + -5] - u[eOffset22 + -5];
			var _g46 = eOffset03 + -4;
			var _g136 = u;
			_g136[_g46] = _g136[_g46] + u[eOffset22 + -4];
			var _g47 = eOffset03 + -5;
			var _g137 = u;
			_g137[_g47] = _g137[_g47] + u[eOffset22 + -5];
			u[eOffset22 + -4] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
			u[eOffset22 + -5] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
			aOffset4 += 16;
			k00_204 = u[eOffset03 + -6] - u[eOffset22 + -6];
			k01_214 = u[eOffset03 + -7] - u[eOffset22 + -7];
			var _g48 = eOffset03 + -6;
			var _g138 = u;
			_g138[_g48] = _g138[_g48] + u[eOffset22 + -6];
			var _g49 = eOffset03 + -7;
			var _g139 = u;
			_g139[_g49] = _g139[_g49] + u[eOffset22 + -7];
			u[eOffset22 + -6] = k00_204 * a[aOffset4] - k01_214 * a[aOffset4 + 1];
			u[eOffset22 + -7] = k01_214 * a[aOffset4] + k00_204 * a[aOffset4 + 1];
			eOffset03 -= 8;
			eOffset22 -= 8;
			aOffset4 += 16;
		}
		var d03 = n2 - 1 - n8 * 3;
		var aOffset5 = 0;
		var eOffset04 = d03;
		var eOffset23 = d03 + -(n >> 4);
		var i5 = (n >> 5 >> 2) + 1;
		while(--i5 > 0) {
			var k00_205 = u[eOffset04] - u[eOffset23];
			var k01_215 = u[eOffset04 + -1] - u[eOffset23 + -1];
			var _g50 = eOffset04;
			var _g140 = u;
			_g140[_g50] = _g140[_g50] + u[eOffset23];
			var _g51 = eOffset04 + -1;
			var _g141 = u;
			_g141[_g51] = _g141[_g51] + u[eOffset23 + -1];
			u[eOffset23] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
			u[eOffset23 + -1] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
			aOffset5 += 16;
			k00_205 = u[eOffset04 + -2] - u[eOffset23 + -2];
			k01_215 = u[eOffset04 + -3] - u[eOffset23 + -3];
			var _g52 = eOffset04 + -2;
			var _g142 = u;
			_g142[_g52] = _g142[_g52] + u[eOffset23 + -2];
			var _g53 = eOffset04 + -3;
			var _g143 = u;
			_g143[_g53] = _g143[_g53] + u[eOffset23 + -3];
			u[eOffset23 + -2] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
			u[eOffset23 + -3] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
			aOffset5 += 16;
			k00_205 = u[eOffset04 + -4] - u[eOffset23 + -4];
			k01_215 = u[eOffset04 + -5] - u[eOffset23 + -5];
			var _g54 = eOffset04 + -4;
			var _g144 = u;
			_g144[_g54] = _g144[_g54] + u[eOffset23 + -4];
			var _g55 = eOffset04 + -5;
			var _g145 = u;
			_g145[_g55] = _g145[_g55] + u[eOffset23 + -5];
			u[eOffset23 + -4] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
			u[eOffset23 + -5] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
			aOffset5 += 16;
			k00_205 = u[eOffset04 + -6] - u[eOffset23 + -6];
			k01_215 = u[eOffset04 + -7] - u[eOffset23 + -7];
			var _g56 = eOffset04 + -6;
			var _g146 = u;
			_g146[_g56] = _g146[_g56] + u[eOffset23 + -6];
			var _g57 = eOffset04 + -7;
			var _g147 = u;
			_g147[_g57] = _g147[_g57] + u[eOffset23 + -7];
			u[eOffset23 + -6] = k00_205 * a[aOffset5] - k01_215 * a[aOffset5 + 1];
			u[eOffset23 + -7] = k01_215 * a[aOffset5] + k00_205 * a[aOffset5 + 1];
			eOffset04 -= 8;
			eOffset23 -= 8;
			aOffset5 += 16;
		}
		var _g58 = 2;
		var _g148 = ld - 3 >> 1;
		while(_g58 < _g148) {
			var l = _g58++;
			var k0 = n >> l + 2;
			var k0_2 = k0 >> 1;
			var lim = 1 << l + 1;
			var _g59 = 0;
			var _g149 = lim;
			while(_g59 < _g149) {
				var i6 = _g59++;
				var d04 = n2 - 1 - k0 * i6;
				var k1 = 1 << l + 3;
				var aOffset6 = 0;
				var eOffset05 = d04;
				var eOffset24 = d04 + -k0_2;
				var i7 = (n >> l + 4 >> 2) + 1;
				while(--i7 > 0) {
					var k00_206 = u[eOffset05] - u[eOffset24];
					var k01_216 = u[eOffset05 + -1] - u[eOffset24 + -1];
					var _g60 = eOffset05;
					var _g150 = u;
					_g150[_g60] = _g150[_g60] + u[eOffset24];
					var _g61 = eOffset05 + -1;
					var _g151 = u;
					_g151[_g61] = _g151[_g61] + u[eOffset24 + -1];
					u[eOffset24] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
					u[eOffset24 + -1] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
					aOffset6 += k1;
					k00_206 = u[eOffset05 + -2] - u[eOffset24 + -2];
					k01_216 = u[eOffset05 + -3] - u[eOffset24 + -3];
					var _g62 = eOffset05 + -2;
					var _g152 = u;
					_g152[_g62] = _g152[_g62] + u[eOffset24 + -2];
					var _g63 = eOffset05 + -3;
					var _g153 = u;
					_g153[_g63] = _g153[_g63] + u[eOffset24 + -3];
					u[eOffset24 + -2] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
					u[eOffset24 + -3] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
					aOffset6 += k1;
					k00_206 = u[eOffset05 + -4] - u[eOffset24 + -4];
					k01_216 = u[eOffset05 + -5] - u[eOffset24 + -5];
					var _g64 = eOffset05 + -4;
					var _g154 = u;
					_g154[_g64] = _g154[_g64] + u[eOffset24 + -4];
					var _g65 = eOffset05 + -5;
					var _g155 = u;
					_g155[_g65] = _g155[_g65] + u[eOffset24 + -5];
					u[eOffset24 + -4] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
					u[eOffset24 + -5] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
					aOffset6 += k1;
					k00_206 = u[eOffset05 + -6] - u[eOffset24 + -6];
					k01_216 = u[eOffset05 + -7] - u[eOffset24 + -7];
					var _g66 = eOffset05 + -6;
					var _g156 = u;
					_g156[_g66] = _g156[_g66] + u[eOffset24 + -6];
					var _g67 = eOffset05 + -7;
					var _g157 = u;
					_g157[_g67] = _g157[_g67] + u[eOffset24 + -7];
					u[eOffset24 + -6] = k00_206 * a[aOffset6] - k01_216 * a[aOffset6 + 1];
					u[eOffset24 + -7] = k01_216 * a[aOffset6] + k00_206 * a[aOffset6 + 1];
					eOffset05 -= 8;
					eOffset24 -= 8;
					aOffset6 += k1;
				}
			}
		}
		var _g210 = ld - 3 >> 1;
		var _g310 = ld - 6;
		while(_g210 < _g310) {
			var l1 = _g210++;
			var k01 = n >> l1 + 2;
			var k11 = 1 << l1 + 3;
			var k0_21 = k01 >> 1;
			var rlim = n >> l1 + 6;
			var lim1 = 1 << l1 + 1;
			var aOffset7 = 0;
			var i_off2 = n2 - 1;
			var r = rlim + 1;
			while(--r > 0) {
				var A0 = a[aOffset7];
				var A1 = a[aOffset7 + 1];
				var A2 = a[aOffset7 + k11];
				var A3 = a[aOffset7 + k11 + 1];
				var A4 = a[aOffset7 + k11 * 2];
				var A5 = a[aOffset7 + k11 * 2 + 1];
				var A6 = a[aOffset7 + k11 * 3];
				var A7 = a[aOffset7 + k11 * 3 + 1];
				var eeOffset02 = i_off2;
				var eeOffset22 = i_off2 + -k0_21;
				var i8 = lim1 + 1;
				while(--i8 > 0) {
					var k00 = u[eeOffset02] - u[eeOffset22];
					var k111 = u[eeOffset02 + -1] - u[eeOffset22 + -1];
					u[eeOffset02] = u[eeOffset02] + u[eeOffset22];
					u[eeOffset02 + -1] = u[eeOffset02 + -1] + u[eeOffset22 + -1];
					u[eeOffset22] = k00 * A0 - k111 * A1;
					u[eeOffset22 + -1] = k111 * A0 + k00 * A1;
					k00 = u[eeOffset02 + -2] - u[eeOffset22 + -2];
					k111 = u[eeOffset02 + -3] - u[eeOffset22 + -3];
					u[eeOffset02 + -2] = u[eeOffset02 + -2] + u[eeOffset22 + -2];
					u[eeOffset02 + -3] = u[eeOffset02 + -3] + u[eeOffset22 + -3];
					u[eeOffset22 + -2] = k00 * A2 - k111 * A3;
					u[eeOffset22 + -3] = k111 * A2 + k00 * A3;
					k00 = u[eeOffset02 + -4] - u[eeOffset22 + -4];
					k111 = u[eeOffset02 + -5] - u[eeOffset22 + -5];
					u[eeOffset02 + -4] = u[eeOffset02 + -4] + u[eeOffset22 + -4];
					u[eeOffset02 + -5] = u[eeOffset02 + -5] + u[eeOffset22 + -5];
					u[eeOffset22 + -4] = k00 * A4 - k111 * A5;
					u[eeOffset22 + -5] = k111 * A4 + k00 * A5;
					k00 = u[eeOffset02 + -6] - u[eeOffset22 + -6];
					k111 = u[eeOffset02 + -7] - u[eeOffset22 + -7];
					u[eeOffset02 + -6] = u[eeOffset02 + -6] + u[eeOffset22 + -6];
					u[eeOffset02 + -7] = u[eeOffset02 + -7] + u[eeOffset22 + -7];
					u[eeOffset22 + -6] = k00 * A6 - k111 * A7;
					u[eeOffset22 + -7] = k111 * A6 + k00 * A7;
					eeOffset02 -= k01;
					eeOffset22 -= k01;
				}
				aOffset7 += k11 * 4;
				i_off2 -= 8;
			}
		}
		var i_off3 = n2 - 1;
		var A21 = a[n >> 3];
		var zOffset = i_off3;
		var baseOffset = i_off3 - 16 * (n >> 5);
		while(zOffset > baseOffset) {
			var t0 = u[zOffset];
			var t1 = u[zOffset + -8];
			u[zOffset + -8] = t0 - t1;
			u[zOffset] = t0 + t1;
			t0 = u[zOffset + -1];
			t1 = u[zOffset + -9];
			u[zOffset + -9] = t0 - t1;
			u[zOffset + -1] = t0 + t1;
			t0 = u[zOffset + -2];
			t1 = u[zOffset + -10];
			var k001 = t0 - t1;
			u[zOffset + -2] = t0 + t1;
			t0 = u[zOffset + -3];
			t1 = u[zOffset + -11];
			var k112 = t0 - t1;
			u[zOffset + -3] = t0 + t1;
			u[zOffset + -10] = (k001 + k112) * A21;
			u[zOffset + -11] = (k112 - k001) * A21;
			t0 = u[zOffset + -4];
			t1 = u[zOffset + -12];
			k001 = t1 - t0;
			u[zOffset + -4] = t0 + t1;
			t0 = u[zOffset + -5];
			t1 = u[zOffset + -13];
			k112 = t0 - t1;
			u[zOffset + -5] = t0 + t1;
			u[zOffset + -12] = k112;
			u[zOffset + -13] = k001;
			t0 = u[zOffset + -6];
			t1 = u[zOffset + -14];
			k001 = t1 - t0;
			u[zOffset + -6] = t0 + t1;
			t0 = u[zOffset + -7];
			t1 = u[zOffset + -15];
			k112 = t0 - t1;
			u[zOffset + -7] = t0 + t1;
			u[zOffset + -14] = (k001 + k112) * A21;
			u[zOffset + -15] = (k001 - k112) * A21;
			var t01 = u[zOffset];
			var t11 = u[zOffset + -4];
			var k002 = t01 - t11;
			var y0 = t01 + t11;
			t01 = u[zOffset + -2];
			t11 = u[zOffset + -6];
			var y2 = t01 + t11;
			var k22 = t01 - t11;
			u[zOffset] = y0 + y2;
			u[zOffset + -2] = y0 - y2;
			var k33 = u[zOffset + -3] - u[zOffset + -7];
			u[zOffset + -4] = k002 + k33;
			u[zOffset + -6] = k002 - k33;
			t01 = u[zOffset + -1];
			t11 = u[zOffset + -5];
			var k113 = t01 - t11;
			var y1 = t01 + t11;
			var y3 = u[zOffset + -3] + u[zOffset + -7];
			u[zOffset + -1] = y1 + y3;
			u[zOffset + -3] = y1 - y3;
			u[zOffset + -5] = k113 - k22;
			u[zOffset + -7] = k113 + k22;
			var zOffset1 = zOffset - 8;
			var t02 = u[zOffset1];
			var t12 = u[zOffset1 + -4];
			var k003 = t02 - t12;
			var y01 = t02 + t12;
			t02 = u[zOffset1 + -2];
			t12 = u[zOffset1 + -6];
			var y21 = t02 + t12;
			var k221 = t02 - t12;
			u[zOffset1] = y01 + y21;
			u[zOffset1 + -2] = y01 - y21;
			var k331 = u[zOffset1 + -3] - u[zOffset1 + -7];
			u[zOffset1 + -4] = k003 + k331;
			u[zOffset1 + -6] = k003 - k331;
			t02 = u[zOffset1 + -1];
			t12 = u[zOffset1 + -5];
			var k114 = t02 - t12;
			var y11 = t02 + t12;
			var y31 = u[zOffset1 + -3] + u[zOffset1 + -7];
			u[zOffset1 + -1] = y11 + y31;
			u[zOffset1 + -3] = y11 - y31;
			u[zOffset1 + -5] = k114 - k221;
			u[zOffset1 + -7] = k114 + k221;
			zOffset -= 16;
		}
		var brOffset = 0;
		var dOffset01 = n4 - 4;
		var dOffset11 = n2 - 4;
		while(dOffset01 >= 0) {
			var k4 = bitReverse[brOffset];
			v[dOffset11 + 3] = u[k4];
			v[dOffset11 + 2] = u[k4 + 1];
			v[dOffset01 + 3] = u[k4 + 2];
			v[dOffset01 + 2] = u[k4 + 3];
			k4 = bitReverse[brOffset + 1];
			v[dOffset11 + 1] = u[k4];
			v[dOffset11] = u[k4 + 1];
			v[dOffset01 + 1] = u[k4 + 2];
			v[dOffset01] = u[k4 + 3];
			dOffset01 -= 4;
			dOffset11 -= 4;
			brOffset += 2;
		}
		var cOffset = 0;
		var dOffset2 = 0;
		var eOffset3 = n2 - 4;
		while(dOffset2 < eOffset3) {
			var a02 = v[dOffset2] - v[eOffset3 + 2];
			var a11 = v[dOffset2 + 1] + v[eOffset3 + 3];
			var b0 = c[cOffset + 1] * a02 + c[cOffset] * a11;
			var b1 = c[cOffset + 1] * a11 - c[cOffset] * a02;
			var b2 = v[dOffset2] + v[eOffset3 + 2];
			var b3 = v[dOffset2 + 1] - v[eOffset3 + 3];
			v[dOffset2] = b2 + b0;
			v[dOffset2 + 1] = b3 + b1;
			v[eOffset3 + 2] = b2 - b0;
			v[eOffset3 + 3] = b1 - b3;
			a02 = v[dOffset2 + 2] - v[eOffset3];
			a11 = v[dOffset2 + 3] + v[eOffset3 + 1];
			b0 = c[cOffset + 3] * a02 + c[cOffset + 2] * a11;
			b1 = c[cOffset + 3] * a11 - c[cOffset + 2] * a02;
			b2 = v[dOffset2 + 2] + v[eOffset3];
			b3 = v[dOffset2 + 3] - v[eOffset3 + 1];
			v[dOffset2 + 2] = b2 + b0;
			v[dOffset2 + 3] = b3 + b1;
			v[eOffset3] = b2 - b0;
			v[eOffset3 + 1] = b1 - b3;
			cOffset += 4;
			dOffset2 += 4;
			eOffset3 -= 4;
		}
		var bOffset = n2 - 8;
		var eOffset4 = n2 - 8;
		var dOffset02 = 0;
		var dOffset12 = n2 - 4;
		var dOffset21 = n2;
		var dOffset3 = n - 4;
		while(eOffset4 >= 0) {
			var p3 = buf2[eOffset4 + 6] * b[bOffset + 7] - buf2[eOffset4 + 7] * b[bOffset + 6];
			var p2 = -buf2[eOffset4 + 6] * b[bOffset + 6] - buf2[eOffset4 + 7] * b[bOffset + 7];
			buffer[dOffset02] = p3;
			buffer[dOffset12 + 3] = -p3;
			buffer[dOffset21] = p2;
			buffer[dOffset3 + 3] = p2;
			var p1 = buf2[eOffset4 + 4] * b[bOffset + 5] - buf2[eOffset4 + 5] * b[bOffset + 4];
			var p0 = -buf2[eOffset4 + 4] * b[bOffset + 4] - buf2[eOffset4 + 5] * b[bOffset + 5];
			buffer[dOffset02 + 1] = p1;
			buffer[dOffset12 + 2] = -p1;
			buffer[dOffset21 + 1] = p0;
			buffer[dOffset3 + 2] = p0;
			p3 = buf2[eOffset4 + 2] * b[bOffset + 3] - buf2[eOffset4 + 3] * b[bOffset + 2];
			p2 = -buf2[eOffset4 + 2] * b[bOffset + 2] - buf2[eOffset4 + 3] * b[bOffset + 3];
			buffer[dOffset02 + 2] = p3;
			buffer[dOffset12 + 1] = -p3;
			buffer[dOffset21 + 2] = p2;
			buffer[dOffset3 + 1] = p2;
			p1 = buf2[eOffset4] * b[bOffset + 1] - buf2[eOffset4 + 1] * b[bOffset];
			p0 = -buf2[eOffset4] * b[bOffset] - buf2[eOffset4 + 1] * b[bOffset + 1];
			buffer[dOffset02 + 3] = p1;
			buffer[dOffset12] = -p1;
			buffer[dOffset21 + 3] = p0;
			buffer[dOffset3] = p0;
			bOffset -= 8;
			eOffset4 -= 8;
			dOffset02 += 4;
			dOffset21 += 4;
			dOffset12 -= 4;
			dOffset3 -= 4;
		}
	}
	,decodePacket: function() {
		var result = this.decodeInitial();
		if(result == null) {
			return null;
		}
		var rest = this.decodePacketRest(result);
		return rest;
	}
	,decodeInitial: function() {
		this.channelBufferStart = this.channelBufferEnd = 0;
		while(true) {
			if(!this.decodeState.maybeStartPacket()) {
				return null;
			}
			if(this.decodeState.readBits(1) != 0) {
				while(true) {
					var _this = this.decodeState;
					var x;
					if(_this.bytesInSeg == 0 && (_this.lastSeg || _this.next() == 0)) {
						x = -1;
					} else {
						_this.bytesInSeg--;
						_this.inputPosition += 1;
						x = _this.input.readByte();
					}
					_this.validBits = 0;
					if(!(-1 != x)) {
						break;
					}
				}
				continue;
			}
			break;
		}
		var n = this.header.modes.length - 1;
		var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
		var i = this.decodeState.readBits(n < 16384 ? n < 16 ? log2_4[n] : n < 512 ? 5 + log2_4[n >> 5] : 10 + log2_4[n >> 10] : n < 16777216 ? n < 524288 ? 15 + log2_4[n >> 15] : 20 + log2_4[n >> 20] : n < 536870912 ? 25 + log2_4[n >> 25] : n < -2147483648 ? 30 + log2_4[n >> 30] : 0);
		if(i == -1 || i >= this.header.modes.length) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.SEEK_FAILED,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 519, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "decodeInitial"}));
		}
		var m = this.header.modes[i];
		var n1;
		var prev;
		var next;
		if(m.blockflag) {
			n1 = this.header.blocksize1;
			prev = this.decodeState.readBits(1);
			next = this.decodeState.readBits(1);
		} else {
			next = 0;
			prev = next;
			n1 = this.header.blocksize0;
		}
		var windowCenter = n1 >> 1;
		return { mode : i, left : m.blockflag && prev == 0 ? { start : n1 - this.header.blocksize0 >> 2, end : n1 + this.header.blocksize0 >> 2} : { start : 0, end : windowCenter}, right : m.blockflag && next == 0 ? { start : n1 * 3 - this.header.blocksize0 >> 2, end : n1 * 3 + this.header.blocksize0 >> 2} : { start : windowCenter, end : n1}};
	}
	,decodePacketRest: function(r) {
		var len = 0;
		var m = this.header.modes[r.mode];
		var this1 = new Array(256);
		var zeroChannel = this1;
		var this2 = new Array(256);
		var reallyZeroChannel = this2;
		var n = m.blockflag ? this.header.blocksize1 : this.header.blocksize0;
		var map = this.header.mapping[m.mapping];
		var n2 = n >> 1;
		var rangeList = [256,128,86,64];
		var codebooks = this.header.codebooks;
		var _g = 0;
		var _g1 = this.header.channel;
		while(_g < _g1) {
			var i = _g++;
			var s = map.chan[i].mux;
			zeroChannel[i] = false;
			var floor = this.header.floorConfig[map.submapFloor[s]];
			if(floor.type == 0) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecoder.hx", lineNumber : 581, className : "kha.audio2.ogg.vorbis.VorbisDecoder", methodName : "decodePacketRest"}));
			} else {
				var g = floor.floor1;
				if(this.decodeState.readBits(1) != 0) {
					var fy = [];
					var this3 = new Array(256);
					var step2Flag = this3;
					var range = rangeList[g.floor1Multiplier - 1];
					var offset = 2;
					fy = this.finalY[i];
					var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
					fy[0] = this.decodeState.readBits((range < 16384 ? range < 16 ? log2_4[range] : range < 512 ? 5 + log2_4[range >> 5] : 10 + log2_4[range >> 10] : range < 16777216 ? range < 524288 ? 15 + log2_4[range >> 15] : 20 + log2_4[range >> 20] : range < 536870912 ? 25 + log2_4[range >> 25] : range < -2147483648 ? 30 + log2_4[range >> 30] : 0) - 1);
					var log2_41 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
					fy[1] = this.decodeState.readBits((range < 16384 ? range < 16 ? log2_41[range] : range < 512 ? 5 + log2_41[range >> 5] : 10 + log2_41[range >> 10] : range < 16777216 ? range < 524288 ? 15 + log2_41[range >> 15] : 20 + log2_41[range >> 20] : range < 536870912 ? 25 + log2_41[range >> 25] : range < -2147483648 ? 30 + log2_41[range >> 30] : 0) - 1);
					var _g2 = 0;
					var _g11 = g.partitions;
					while(_g2 < _g11) {
						var j = _g2++;
						var pclass = g.partitionClassList[j];
						var cdim = g.classDimensions[pclass];
						var cbits = g.classSubclasses[pclass];
						var csub = (1 << cbits) - 1;
						var cval = 0;
						if(cbits != 0) {
							var c = codebooks[g.classMasterbooks[pclass]];
							var _this = this.decodeState;
							if(_this.validBits < 10) {
								_this.prepHuffman();
							}
							var i1 = c.fastHuffman[_this.acc & 1023];
							var val;
							if(i1 >= 0) {
								var l = c.codewordLengths[i1];
								_this.acc = _this.acc >>> l;
								_this.validBits -= l;
								if(_this.validBits < 0) {
									_this.validBits = 0;
									val = -1;
								} else {
									val = i1;
								}
							} else {
								val = _this.decodeScalarRaw(c);
							}
							if(c.sparse) {
								val = c.sortedValues[val];
							}
							cval = val;
						}
						var books = g.subclassBooks[pclass];
						var _g3 = 0;
						var _g12 = cdim;
						while(_g3 < _g12) {
							var k = _g3++;
							var book = books[cval & csub];
							cval >>= cbits;
							var tmp = offset++;
							var tmp1;
							if(book >= 0) {
								var _this1 = this.decodeState;
								var c1 = codebooks[book];
								if(_this1.validBits < 10) {
									_this1.prepHuffman();
								}
								var i2 = c1.fastHuffman[_this1.acc & 1023];
								var val1;
								if(i2 >= 0) {
									var l1 = c1.codewordLengths[i2];
									_this1.acc = _this1.acc >>> l1;
									_this1.validBits -= l1;
									if(_this1.validBits < 0) {
										_this1.validBits = 0;
										val1 = -1;
									} else {
										val1 = i2;
									}
								} else {
									val1 = _this1.decodeScalarRaw(c1);
								}
								if(c1.sparse) {
									val1 = c1.sortedValues[val1];
								}
								tmp1 = val1;
							} else {
								tmp1 = 0;
							}
							fy[tmp] = tmp1;
						}
					}
					if(this.decodeState.validBits == -1) {
						zeroChannel[i] = true;
						continue;
					}
					step2Flag[0] = step2Flag[1] = true;
					var naighbors = g.neighbors;
					var xlist = g.xlist;
					var _g21 = 2;
					var _g31 = g.values;
					while(_g21 < _g31) {
						var j1 = _g21++;
						var low = naighbors[j1][0];
						var high = naighbors[j1][1];
						var x0 = xlist[low];
						var y0 = fy[low];
						var dy = fy[high] - y0;
						var adx = xlist[high] - x0;
						var err = Math.abs(dy) * (xlist[j1] - x0);
						var off = err / adx | 0;
						var lowroom = dy < 0 ? y0 - off : y0 + off;
						var val2 = fy[j1];
						var highroom = range - lowroom;
						var room = highroom < lowroom ? highroom * 2 : lowroom * 2;
						if(val2 != 0) {
							step2Flag[low] = step2Flag[high] = true;
							step2Flag[j1] = true;
							if(val2 >= room) {
								if(highroom > lowroom) {
									fy[j1] = val2 - lowroom + lowroom;
								} else {
									fy[j1] = lowroom - val2 + highroom - 1;
								}
							} else if((val2 & 1) != 0) {
								fy[j1] = lowroom - (val2 + 1 >> 1);
							} else {
								fy[j1] = lowroom + (val2 >> 1);
							}
						} else {
							step2Flag[j1] = false;
							fy[j1] = lowroom;
						}
					}
					var _g4 = 0;
					var _g5 = g.values;
					while(_g4 < _g5) {
						var j2 = _g4++;
						if(!step2Flag[j2]) {
							fy[j2] = -1;
						}
					}
				} else {
					zeroChannel[i] = true;
				}
			}
		}
		var _g22 = 0;
		var _g32 = this.header.channel;
		while(_g22 < _g32) {
			var i3 = _g22++;
			reallyZeroChannel[i3] = zeroChannel[i3];
		}
		var _g41 = 0;
		var _g51 = map.couplingSteps;
		while(_g41 < _g51) {
			var i4 = _g41++;
			if(!zeroChannel[map.chan[i4].magnitude] || !zeroChannel[map.chan[i4].angle]) {
				zeroChannel[map.chan[i4].magnitude] = zeroChannel[map.chan[i4].angle] = false;
			}
		}
		var _g6 = 0;
		var _g7 = map.submaps;
		while(_g6 < _g7) {
			var i5 = _g6++;
			var this4 = new Array(this.header.channel);
			var residueBuffers = this4;
			var this5 = new Array(256);
			var doNotDecode = this5;
			var ch = 0;
			var _g61 = 0;
			var _g71 = this.header.channel;
			while(_g61 < _g71) {
				var j3 = _g61++;
				if(map.chan[j3].mux == i5) {
					if(zeroChannel[j3]) {
						doNotDecode[ch] = true;
						residueBuffers[ch] = null;
					} else {
						doNotDecode[ch] = false;
						residueBuffers[ch] = this.channelBuffers[j3];
					}
					++ch;
				}
			}
			var r1 = map.submapResidue[i5];
			var residue = this.header.residueConfig[r1];
			residue.decode(this.decodeState,this.header,residueBuffers,ch,n2,doNotDecode,this.channelBuffers);
		}
		var i6 = map.couplingSteps;
		var n21 = n >> 1;
		while(--i6 >= 0) {
			var m1 = this.channelBuffers[map.chan[i6].magnitude];
			var a = this.channelBuffers[map.chan[i6].angle];
			var _g8 = 0;
			var _g9 = n21;
			while(_g8 < _g9) {
				var j4 = _g8++;
				var a2;
				var m2;
				if(m1[j4] > 0) {
					if(a[j4] > 0) {
						m2 = m1[j4];
						a2 = m1[j4] - a[j4];
					} else {
						a2 = m1[j4];
						m2 = m1[j4] + a[j4];
					}
				} else if(a[j4] > 0) {
					m2 = m1[j4];
					a2 = m1[j4] + a[j4];
				} else {
					a2 = m1[j4];
					m2 = m1[j4] - a[j4];
				}
				m1[j4] = m2;
				a[j4] = a2;
			}
		}
		var _g81 = 0;
		var _g91 = this.header.channel;
		while(_g81 < _g91) {
			var i7 = _g81++;
			if(reallyZeroChannel[i7]) {
				var _g82 = 0;
				var _g92 = n21;
				while(_g82 < _g92) {
					var j5 = _g82++;
					this.channelBuffers[i7][j5] = 0;
				}
			} else {
				map.doFloor(this.header.floorConfig,i7,n,this.channelBuffers[i7],this.finalY[i7],null);
			}
		}
		var _g10 = 0;
		var _g111 = this.header.channel;
		while(_g10 < _g111) {
			var i8 = _g10++;
			this.inverseMdct(this.channelBuffers[i8],n,m.blockflag);
		}
		var _this2 = this.decodeState;
		while(_this2.bytesInSeg != 0 || !_this2.lastSeg && _this2.next() != 0) {
			_this2.bytesInSeg--;
			_this2.inputPosition += 1;
			_this2.input.readByte();
		}
		return this.decodeState.finishDecodePacket(this.previousLength,n,r);
	}
	,__class__: kha_audio2_ogg_vorbis_VorbisDecoder
};
var kha_audio2_ogg_vorbis_VorbisTools = function() { };
$hxClasses["kha.audio2.ogg.vorbis.VorbisTools"] = kha_audio2_ogg_vorbis_VorbisTools;
kha_audio2_ogg_vorbis_VorbisTools.__name__ = true;
kha_audio2_ogg_vorbis_VorbisTools.assert = function(b,p) {
};
kha_audio2_ogg_vorbis_VorbisTools.neighbors = function(x,n) {
	var low = -1;
	var high = 65536;
	var plow = 0;
	var phigh = 0;
	var _g = 0;
	var _g1 = n;
	while(_g < _g1) {
		var i = _g++;
		if(x[i] > low && x[i] < x[n]) {
			plow = i;
			low = x[i];
		}
		if(x[i] < high && x[i] > x[n]) {
			phigh = i;
			high = x[i];
		}
	}
	return { low : plow, high : phigh};
};
kha_audio2_ogg_vorbis_VorbisTools.floatUnpack = function(x) {
	var mantissa = _$UInt_UInt_$Impl_$.toFloat(x & 2097151);
	var sign = x & -2147483648;
	var exp = (x & 2145386496) >>> 21;
	var res = sign != 0 ? -mantissa : mantissa;
	return res * Math.pow(2,exp - 788);
};
kha_audio2_ogg_vorbis_VorbisTools.bitReverse = function(n) {
	n = (n & -1431655766) >>> 1 | (n & 1431655765) << 1;
	n = (n & -858993460) >>> 2 | (n & 858993459) << 2;
	n = (n & -252645136) >>> 4 | (n & 252645135) << 4;
	n = (n & -16711936) >>> 8 | (n & 16711935) << 8;
	return n >>> 16 | n << 16;
};
kha_audio2_ogg_vorbis_VorbisTools.pointCompare = function(a,b) {
	if(a.x < b.x) {
		return -1;
	} else if(a.x > b.x) {
		return 1;
	} else {
		return 0;
	}
};
kha_audio2_ogg_vorbis_VorbisTools.uintAsc = function(a,b) {
	if(_$UInt_UInt_$Impl_$.gt(b,a)) {
		return -1;
	} else if(a == b) {
		return 0;
	} else {
		return 1;
	}
};
kha_audio2_ogg_vorbis_VorbisTools.lookup1Values = function(entries,dim) {
	var r = Math.exp(Math.log(entries) / dim) | 0;
	if((Math.pow(r + 1,dim) | 0) <= entries) {
		++r;
	}
	return r;
};
kha_audio2_ogg_vorbis_VorbisTools.computeWindow = function(n,$window) {
	var n2 = n >> 1;
	var _g = 0;
	var _g1 = n2;
	while(_g < _g1) {
		var i = _g++;
		$window[i] = Math.sin(1.57079632679489656 * kha_audio2_ogg_vorbis_VorbisTools.square(Math.sin((i + 0.5) / n2 * 0.5 * 3.14159265358979323846264)));
	}
};
kha_audio2_ogg_vorbis_VorbisTools.square = function(f) {
	return f * f;
};
kha_audio2_ogg_vorbis_VorbisTools.computeBitReverse = function(n,rev) {
	var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
	var ld = (n < 16384 ? n < 16 ? log2_4[n] : n < 512 ? 5 + log2_4[n >> 5] : 10 + log2_4[n >> 10] : n < 16777216 ? n < 524288 ? 15 + log2_4[n >> 15] : 20 + log2_4[n >> 20] : n < 536870912 ? 25 + log2_4[n >> 25] : n < -2147483648 ? 30 + log2_4[n >> 30] : 0) - 1;
	var n8 = n >> 3;
	var _g = 0;
	var _g1 = n8;
	while(_g < _g1) {
		var i = _g++;
		var n1 = i;
		n1 = (n1 & -1431655766) >>> 1 | (n1 & 1431655765) << 1;
		n1 = (n1 & -858993460) >>> 2 | (n1 & 858993459) << 2;
		n1 = (n1 & -252645136) >>> 4 | (n1 & 252645135) << 4;
		n1 = (n1 & -16711936) >>> 8 | (n1 & 16711935) << 8;
		rev[i] = (n1 >>> 16 | n1 << 16) >>> 32 - ld + 3 << 2;
	}
};
kha_audio2_ogg_vorbis_VorbisTools.computeTwiddleFactors = function(n,af,bf,cf) {
	var n4 = n >> 2;
	var n8 = n >> 3;
	var k2 = 0;
	var _g = 0;
	var _g1 = n4;
	while(_g < _g1) {
		var k = _g++;
		af[k2] = Math.cos(4 * k * 3.14159265358979323846264 / n);
		af[k2 + 1] = -Math.sin(4 * k * 3.14159265358979323846264 / n);
		bf[k2] = Math.cos((k2 + 1) * 3.14159265358979323846264 / n / 2) * 0.5;
		bf[k2 + 1] = Math.sin((k2 + 1) * 3.14159265358979323846264 / n / 2) * 0.5;
		k2 += 2;
	}
	var k21 = 0;
	var _g2 = 0;
	var _g3 = n8;
	while(_g2 < _g3) {
		var k1 = _g2++;
		cf[k21] = Math.cos(2 * (k21 + 1) * 3.14159265358979323846264 / n);
		cf[k21 + 1] = -Math.sin(2 * (k21 + 1) * 3.14159265358979323846264 / n);
		k21 += 2;
	}
};
kha_audio2_ogg_vorbis_VorbisTools.drawLine = function(output,x0,y0,x1,y1,n) {
	if(kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable == null) {
		var this1 = new Array(32);
		kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable = this1;
		var _g = 0;
		while(_g < 32) {
			var i = _g++;
			var this2 = kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable;
			var this3 = new Array(64);
			this2[i] = this3;
			var _g1 = 1;
			while(_g1 < 64) {
				var j = _g1++;
				kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[i][j] = i / j | 0;
			}
		}
	}
	var dy = y1 - y0;
	var adx = x1 - x0;
	var ady = dy < 0 ? -dy : dy;
	var base;
	var x = x0;
	var y = y0;
	var err = 0;
	var sy;
	if(adx < 64 && ady < 32) {
		if(dy < 0) {
			base = -kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[ady][adx];
			sy = base - 1;
		} else {
			base = kha_audio2_ogg_vorbis_VorbisTools.integerDivideTable[ady][adx];
			sy = base + 1;
		}
	} else {
		base = dy / adx | 0;
		sy = dy < 0 ? base - 1 : base + 1;
	}
	ady -= (base < 0 ? -base : base) * adx;
	if(x1 > n) {
		x1 = n;
	}
	var _g2 = x;
	var _g11 = output;
	_g11[_g2] = _g11[_g2] * kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[y];
	var _g3 = x + 1;
	var _g12 = x1;
	while(_g3 < _g12) {
		var i1 = _g3++;
		err += ady;
		if(err >= adx) {
			err -= adx;
			y += sy;
		} else {
			y += base;
		}
		var _g4 = i1;
		var _g13 = output;
		_g13[_g4] = _g13[_g4] * kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[y];
	}
};
kha_audio2_ogg_vorbis_VorbisTools.predictPoint = function(x,x0,x1,y0,y1) {
	var dy = y1 - y0;
	var adx = x1 - x0;
	var err = Math.abs(dy) * (x - x0);
	var off = err / adx | 0;
	if(dy < 0) {
		return y0 - off;
	} else {
		return y0 + off;
	}
};
kha_audio2_ogg_vorbis_VorbisTools.emptyFloatVector = function(len) {
	var this1 = new Array(len);
	var vec = this1;
	return vec;
};
kha_audio2_ogg_vorbis_VorbisTools.copyVector = function(source) {
	var this1 = new Array(source.length);
	var dest = this1;
	var _g = 0;
	var _g1 = source.length;
	while(_g < _g1) {
		var i = _g++;
		dest[i] = source[i];
	}
	return dest;
};
var kha_audio2_ogg_vorbis_data_Codebook = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Codebook"] = kha_audio2_ogg_vorbis_data_Codebook;
kha_audio2_ogg_vorbis_data_Codebook.__name__ = true;
kha_audio2_ogg_vorbis_data_Codebook.read = function(decodeState) {
	var c = new kha_audio2_ogg_vorbis_data_Codebook();
	if(decodeState.readBits(8) != 66 || decodeState.readBits(8) != 67 || decodeState.readBits(8) != 86) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 40, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "read"}));
	}
	var x = decodeState.readBits(8);
	c.dimensions = (decodeState.readBits(8) << 8) + x;
	var x1 = decodeState.readBits(8);
	var y = decodeState.readBits(8);
	c.entries = (decodeState.readBits(8) << 16) + (y << 8) + x1;
	var ordered = decodeState.readBits(1);
	c.sparse = ordered != 0 ? false : decodeState.readBits(1) != 0;
	var this1 = new Array(c.entries);
	var lengths = this1;
	if(!c.sparse) {
		c.codewordLengths = lengths;
	}
	var total = 0;
	if(ordered != 0) {
		var currentEntry = 0;
		var currentLength = decodeState.readBits(5) + 1;
		while(currentEntry < c.entries) {
			var limit = c.entries - currentEntry;
			var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
			var n = decodeState.readBits(limit < 16384 ? limit < 16 ? log2_4[limit] : limit < 512 ? 5 + log2_4[limit >> 5] : 10 + log2_4[limit >> 10] : limit < 16777216 ? limit < 524288 ? 15 + log2_4[limit >> 15] : 20 + log2_4[limit >> 20] : limit < 536870912 ? 25 + log2_4[limit >> 25] : limit < -2147483648 ? 30 + log2_4[limit >> 30] : 0);
			if(currentEntry + n > c.entries) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook entrys",{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 67, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "read"}));
			}
			var _g = 0;
			var _g1 = n;
			while(_g < _g1) {
				var i = _g++;
				lengths[currentEntry + i] = currentLength;
			}
			currentEntry += n;
			++currentLength;
		}
	} else {
		var _g2 = 0;
		var _g11 = c.entries;
		while(_g2 < _g11) {
			var j = _g2++;
			var present = c.sparse ? decodeState.readBits(1) : 1;
			if(present != 0) {
				lengths[j] = decodeState.readBits(5) + 1;
				++total;
			} else {
				lengths[j] = 255;
			}
		}
	}
	if(c.sparse && total >= c.entries >> 2) {
		c.codewordLengths = lengths;
		c.sparse = false;
	}
	var tmp;
	if(c.sparse) {
		tmp = total;
	} else {
		var sortedCount = 0;
		var _g3 = 0;
		var _g12 = c.entries;
		while(_g3 < _g12) {
			var j1 = _g3++;
			var l = lengths[j1];
			if(l > 10 && l != 255) {
				++sortedCount;
			}
		}
		tmp = sortedCount;
	}
	c.sortedEntries = tmp;
	var values = null;
	if(!c.sparse) {
		var this2 = new Array(c.entries);
		c.codewords = this2;
	} else {
		if(c.sortedEntries != 0) {
			var this3 = new Array(c.sortedEntries);
			c.codewordLengths = this3;
			var this4 = new Array(c.entries);
			c.codewords = this4;
			var this5 = new Array(c.entries);
			values = this5;
		}
		var size = c.entries + 64 * c.sortedEntries;
	}
	if(!c.computeCodewords(lengths,c.entries,values)) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"compute codewords",{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 120, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "read"}));
	}
	if(c.sortedEntries != 0) {
		c.sortedCodewords = [];
		var this6 = new Array(c.sortedEntries);
		c.sortedValues = this6;
		c.computeSortedHuffman(lengths,values);
	}
	if(c.sparse) {
		values = null;
		c.codewords = null;
		lengths = null;
	}
	c.computeAcceleratedHuffman();
	c.lookupType = decodeState.readBits(4);
	if(c.lookupType > 2) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"codebook lookup type",{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 143, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "read"}));
	}
	if(c.lookupType > 0) {
		var x2 = decodeState.readBits(32);
		var mantissa = _$UInt_UInt_$Impl_$.toFloat(x2 & 2097151);
		var sign = x2 & -2147483648;
		var exp = (x2 & 2145386496) >>> 21;
		var res = sign != 0 ? -mantissa : mantissa;
		c.minimumValue = res * Math.pow(2,exp - 788);
		var x3 = decodeState.readBits(32);
		var mantissa1 = _$UInt_UInt_$Impl_$.toFloat(x3 & 2097151);
		var sign1 = x3 & -2147483648;
		var exp1 = (x3 & 2145386496) >>> 21;
		var res1 = sign1 != 0 ? -mantissa1 : mantissa1;
		c.deltaValue = res1 * Math.pow(2,exp1 - 788);
		c.valueBits = decodeState.readBits(4) + 1;
		c.sequenceP = decodeState.readBits(1) != 0;
		if(c.lookupType == 1) {
			c.lookupValues = kha_audio2_ogg_vorbis_VorbisTools.lookup1Values(c.entries,c.dimensions);
		} else {
			c.lookupValues = c.entries * c.dimensions;
		}
		var this7 = new Array(c.lookupValues);
		var mults = this7;
		var _g4 = 0;
		var _g13 = c.lookupValues;
		while(_g4 < _g13) {
			var j2 = _g4++;
			var q = decodeState.readBits(c.valueBits);
			if(q == -1) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"fail lookup",{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 161, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "read"}));
			}
			mults[j2] = q;
		}
		var this8 = new Array(c.lookupValues);
		c.multiplicands = this8;
		var _g21 = 0;
		var _g31 = c.lookupValues;
		while(_g21 < _g31) {
			var j3 = _g21++;
			c.multiplicands[j3] = mults[j3] * c.deltaValue + c.minimumValue;
		}
		if(c.lookupType == 2 && c.sequenceP) {
			var _g22 = 1;
			var _g32 = c.lookupValues;
			while(_g22 < _g32) {
				var j4 = _g22++;
				c.multiplicands[j4] = c.multiplicands[j4 - 1];
			}
			c.sequenceP = false;
		}
	}
	return c;
};
kha_audio2_ogg_vorbis_data_Codebook.prototype = {
	dimensions: null
	,entries: null
	,codewordLengths: null
	,minimumValue: null
	,deltaValue: null
	,valueBits: null
	,lookupType: null
	,sequenceP: null
	,sparse: null
	,lookupValues: null
	,multiplicands: null
	,codewords: null
	,fastHuffman: null
	,sortedCodewords: null
	,sortedValues: null
	,sortedEntries: null
	,addEntry: function(huffCode,symbol,count,len,values) {
		if(!this.sparse) {
			this.codewords[symbol] = huffCode;
		} else {
			this.codewords[count] = huffCode;
			this.codewordLengths[count] = len;
			values[count] = symbol;
		}
	}
	,includeInSort: function(len) {
		if(this.sparse) {
			return true;
		} else if(len == 255) {
			return false;
		} else if(len > 10) {
			return true;
		} else {
			return false;
		}
	}
	,computeCodewords: function(len,n,values) {
		var this1 = new Array(32);
		var available = this1;
		available[0] = 0;
		available[1] = 0;
		available[2] = 0;
		available[3] = 0;
		available[4] = 0;
		available[5] = 0;
		available[6] = 0;
		available[7] = 0;
		available[8] = 0;
		available[9] = 0;
		available[10] = 0;
		available[11] = 0;
		available[12] = 0;
		available[13] = 0;
		available[14] = 0;
		available[15] = 0;
		available[16] = 0;
		available[17] = 0;
		available[18] = 0;
		available[19] = 0;
		available[20] = 0;
		available[21] = 0;
		available[22] = 0;
		available[23] = 0;
		available[24] = 0;
		available[25] = 0;
		available[26] = 0;
		available[27] = 0;
		available[28] = 0;
		available[29] = 0;
		available[30] = 0;
		available[31] = 0;
		var k = 0;
		while(k < n) {
			if(len[k] < 255) {
				break;
			}
			++k;
		}
		if(k == n) {
			return true;
		}
		var m = 0;
		var count = m++;
		if(!this.sparse) {
			this.codewords[k] = 0;
		} else {
			this.codewords[count] = 0;
			this.codewordLengths[count] = len[k];
			values[count] = k;
		}
		var i = 0;
		while(++i <= len[k]) available[i] = 1 << 32 - i;
		i = k;
		while(++i < n) {
			var z = len[i];
			if(z == 255) {
				continue;
			}
			while(z > 0 && available[z] == 0) --z;
			if(z == 0) {
				return false;
			}
			var res = available[z];
			available[z] = 0;
			var n1 = res;
			n1 = (n1 & -1431655766) >>> 1 | (n1 & 1431655765) << 1;
			n1 = (n1 & -858993460) >>> 2 | (n1 & 858993459) << 2;
			n1 = (n1 & -252645136) >>> 4 | (n1 & 252645135) << 4;
			n1 = (n1 & -16711936) >>> 8 | (n1 & 16711935) << 8;
			var huffCode = n1 >>> 16 | n1 << 16;
			var count1 = m++;
			if(!this.sparse) {
				this.codewords[i] = huffCode;
			} else {
				this.codewords[count1] = huffCode;
				this.codewordLengths[count1] = len[i];
				values[count1] = i;
			}
			if(z != len[i]) {
				var y = len[i];
				while(y > z) {
					available[y] = res + (1 << 32 - y);
					--y;
				}
			}
		}
		return true;
	}
	,computeSortedHuffman: function(lengths,values) {
		if(!this.sparse) {
			var k = 0;
			var _g = 0;
			var _g1 = this.entries;
			while(_g < _g1) {
				var i = _g++;
				var len = lengths[i];
				if(this.sparse ? true : len == 255 ? false : len > 10) {
					var n = this.codewords[i];
					n = (n & -1431655766) >>> 1 | (n & 1431655765) << 1;
					n = (n & -858993460) >>> 2 | (n & 858993459) << 2;
					n = (n & -252645136) >>> 4 | (n & 252645135) << 4;
					n = (n & -16711936) >>> 8 | (n & 16711935) << 8;
					this.sortedCodewords[k++] = n >>> 16 | n << 16;
				}
			}
		} else {
			var _g2 = 0;
			var _g11 = this.sortedEntries;
			while(_g2 < _g11) {
				var i1 = _g2++;
				var n1 = this.codewords[i1];
				n1 = (n1 & -1431655766) >>> 1 | (n1 & 1431655765) << 1;
				n1 = (n1 & -858993460) >>> 2 | (n1 & 858993459) << 2;
				n1 = (n1 & -252645136) >>> 4 | (n1 & 252645135) << 4;
				n1 = (n1 & -16711936) >>> 8 | (n1 & 16711935) << 8;
				this.sortedCodewords[i1] = n1 >>> 16 | n1 << 16;
			}
		}
		this.sortedCodewords[this.sortedEntries] = -1;
		this.sortedCodewords.sort(kha_audio2_ogg_vorbis_VorbisTools.uintAsc);
		var len1 = this.sparse ? this.sortedEntries : this.entries;
		var _g3 = 0;
		var _g12 = len1;
		while(_g3 < _g12) {
			var i2 = _g3++;
			var huffLen = this.sparse ? lengths[values[i2]] : lengths[i2];
			if(this.sparse ? true : huffLen == 255 ? false : huffLen > 10) {
				var n2 = this.codewords[i2];
				n2 = (n2 & -1431655766) >>> 1 | (n2 & 1431655765) << 1;
				n2 = (n2 & -858993460) >>> 2 | (n2 & 858993459) << 2;
				n2 = (n2 & -252645136) >>> 4 | (n2 & 252645135) << 4;
				n2 = (n2 & -16711936) >>> 8 | (n2 & 16711935) << 8;
				var code = n2 >>> 16 | n2 << 16;
				var x = 0;
				var n3 = this.sortedEntries;
				while(n3 > 1) {
					var m = x + (n3 >> 1);
					if(_$UInt_UInt_$Impl_$.gte(code,this.sortedCodewords[m])) {
						x = m;
						n3 -= n3 >> 1;
					} else {
						n3 >>= 1;
					}
				}
				if(this.sparse) {
					this.sortedValues[x] = values[i2];
					this.codewordLengths[x] = huffLen;
				} else {
					this.sortedValues[x] = i2;
				}
			}
		}
	}
	,computeAcceleratedHuffman: function() {
		var this1 = new Array(1024);
		this.fastHuffman = this1;
		this.fastHuffman[0] = -1;
		var _g = 0;
		var _g1 = 1024;
		while(_g < _g1) {
			var i = _g++;
			this.fastHuffman[i] = -1;
		}
		var len = this.sparse ? this.sortedEntries : this.entries;
		var _g2 = 0;
		var _g3 = len;
		while(_g2 < _g3) {
			var i1 = _g2++;
			if(this.codewordLengths[i1] <= 10) {
				var z;
				if(this.sparse) {
					var n = this.sortedCodewords[i1];
					n = (n & -1431655766) >>> 1 | (n & 1431655765) << 1;
					n = (n & -858993460) >>> 2 | (n & 858993459) << 2;
					n = (n & -252645136) >>> 4 | (n & 252645135) << 4;
					n = (n & -16711936) >>> 8 | (n & 16711935) << 8;
					z = n >>> 16 | n << 16;
				} else {
					z = this.codewords[i1];
				}
				while(z < 1024) {
					this.fastHuffman[z] = i1;
					z += 1 << this.codewordLengths[i1];
				}
			}
		}
	}
	,codebookDecode: function(decodeState,output,offset,len) {
		if(decodeState.validBits < 10) {
			decodeState.prepHuffman();
		}
		var i = this.fastHuffman[decodeState.acc & 1023];
		var val;
		if(i >= 0) {
			var l = this.codewordLengths[i];
			decodeState.acc = decodeState.acc >>> l;
			decodeState.validBits -= l;
			if(decodeState.validBits < 0) {
				decodeState.validBits = 0;
				val = -1;
			} else {
				val = i;
			}
		} else {
			val = decodeState.decodeScalarRaw(this);
		}
		if(this.sparse) {
			val = this.sortedValues[val];
		}
		var z = val;
		var lookupValues = this.lookupValues;
		var sequenceP = this.sequenceP;
		var multiplicands = this.multiplicands;
		var minimumValue = this.minimumValue;
		if(z < 0) {
			return false;
		}
		if(len > this.dimensions) {
			len = this.dimensions;
		}
		if(this.lookupType == 1) {
			var div = 1;
			var last = 0.0;
			var _g = 0;
			var _g1 = len;
			while(_g < _g1) {
				var i1 = _g++;
				var off = _$UInt_UInt_$Impl_$.toFloat(z / div | 0) % _$UInt_UInt_$Impl_$.toFloat(lookupValues) | 0;
				var val1 = multiplicands[off] + last;
				var _g2 = offset + i1;
				var _g11 = output;
				_g11[_g2] = _g11[_g2] + val1;
				if(sequenceP) {
					last = val1 + minimumValue;
				}
				div = div * lookupValues;
			}
			return true;
		}
		z *= this.dimensions;
		if(sequenceP) {
			var last1 = 0.0;
			var _g3 = 0;
			var _g12 = len;
			while(_g3 < _g12) {
				var i2 = _g3++;
				var val2 = multiplicands[z + i2] + last1;
				var _g4 = offset + i2;
				var _g13 = output;
				_g13[_g4] = _g13[_g4] + val2;
				last1 = val2 + minimumValue;
			}
		} else {
			var last2 = 0.0;
			var _g5 = 0;
			var _g14 = len;
			while(_g5 < _g14) {
				var i3 = _g5++;
				var _g6 = offset + i3;
				var _g15 = output;
				_g15[_g6] = _g15[_g6] + (multiplicands[z + i3] + last2);
			}
		}
		return true;
	}
	,codebookDecodeStep: function(decodeState,output,offset,len,step) {
		if(decodeState.validBits < 10) {
			decodeState.prepHuffman();
		}
		var i = this.fastHuffman[decodeState.acc & 1023];
		var val;
		if(i >= 0) {
			var l = this.codewordLengths[i];
			decodeState.acc = decodeState.acc >>> l;
			decodeState.validBits -= l;
			if(decodeState.validBits < 0) {
				decodeState.validBits = 0;
				val = -1;
			} else {
				val = i;
			}
		} else {
			val = decodeState.decodeScalarRaw(this);
		}
		if(this.sparse) {
			val = this.sortedValues[val];
		}
		var z = val;
		var last = 0.0;
		if(z < 0) {
			return false;
		}
		if(len > this.dimensions) {
			len = this.dimensions;
		}
		var lookupValues = this.lookupValues;
		var sequenceP = this.sequenceP;
		var multiplicands = this.multiplicands;
		if(this.lookupType == 1) {
			var div = 1;
			var _g = 0;
			var _g1 = len;
			while(_g < _g1) {
				var i1 = _g++;
				var off = _$UInt_UInt_$Impl_$.toFloat(z / div | 0) % _$UInt_UInt_$Impl_$.toFloat(lookupValues) | 0;
				var val1 = multiplicands[off] + last;
				var _g2 = offset + i1 * step;
				var _g11 = output;
				_g11[_g2] = _g11[_g2] + val1;
				if(sequenceP) {
					last = val1;
				}
				div = div * lookupValues;
			}
			return true;
		}
		z *= this.dimensions;
		var _g3 = 0;
		var _g12 = len;
		while(_g3 < _g12) {
			var i2 = _g3++;
			var val2 = multiplicands[z + i2] + last;
			var _g4 = offset + i2 * step;
			var _g13 = output;
			_g13[_g4] = _g13[_g4] + val2;
			if(sequenceP) {
				last = val2;
			}
		}
		return true;
	}
	,decodeStart: function(decodeState) {
		if(decodeState.validBits < 10) {
			decodeState.prepHuffman();
		}
		var i = this.fastHuffman[decodeState.acc & 1023];
		var val;
		if(i >= 0) {
			var l = this.codewordLengths[i];
			decodeState.acc = decodeState.acc >>> l;
			decodeState.validBits -= l;
			if(decodeState.validBits < 0) {
				decodeState.validBits = 0;
				val = -1;
			} else {
				val = i;
			}
		} else {
			val = decodeState.decodeScalarRaw(this);
		}
		if(this.sparse) {
			val = this.sortedValues[val];
		}
		return val;
	}
	,decodeDeinterleaveRepeat: function(decodeState,residueBuffers,ch,cInter,pInter,len,totalDecode) {
		var effective = this.dimensions;
		if(this.lookupType == 0) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 488, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "decodeDeinterleaveRepeat"}));
		}
		var multiplicands = this.multiplicands;
		var sequenceP = this.sequenceP;
		var lookupValues = this.lookupValues;
		while(totalDecode > 0) {
			var last = 0.0;
			if(decodeState.validBits < 10) {
				decodeState.prepHuffman();
			}
			var i = this.fastHuffman[decodeState.acc & 1023];
			var val;
			if(i >= 0) {
				var l = this.codewordLengths[i];
				decodeState.acc = decodeState.acc >>> l;
				decodeState.validBits -= l;
				if(decodeState.validBits < 0) {
					decodeState.validBits = 0;
					val = -1;
				} else {
					val = i;
				}
			} else {
				val = decodeState.decodeScalarRaw(this);
			}
			if(this.sparse) {
				val = this.sortedValues[val];
			}
			var z = val;
			if(z < 0) {
				if(decodeState.bytesInSeg == 0 && decodeState.lastSeg) {
					return null;
				}
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{ fileName : "kha/audio2/ogg/vorbis/data/Codebook.hx", lineNumber : 503, className : "kha.audio2.ogg.vorbis.data.Codebook", methodName : "decodeDeinterleaveRepeat"}));
			}
			if(cInter + pInter * ch + effective > len * ch) {
				effective = len * ch - (pInter * ch - cInter);
			}
			if(this.lookupType == 1) {
				var div = 1;
				if(sequenceP) {
					var _g = 0;
					var _g1 = effective;
					while(_g < _g1) {
						var i1 = _g++;
						var off = _$UInt_UInt_$Impl_$.toFloat(z / div | 0) % _$UInt_UInt_$Impl_$.toFloat(lookupValues) | 0;
						var val1 = multiplicands[off] + last;
						var _g2 = pInter;
						var _g11 = residueBuffers[cInter];
						_g11[_g2] = _g11[_g2] + val1;
						if(++cInter == ch) {
							cInter = 0;
							++pInter;
						}
						last = val1;
						div = div * lookupValues;
					}
				} else {
					var _g3 = 0;
					var _g12 = effective;
					while(_g3 < _g12) {
						var i2 = _g3++;
						var off1 = _$UInt_UInt_$Impl_$.toFloat(z / div | 0) % _$UInt_UInt_$Impl_$.toFloat(lookupValues) | 0;
						var val2 = multiplicands[off1] + last;
						var _g4 = pInter;
						var _g13 = residueBuffers[cInter];
						_g13[_g4] = _g13[_g4] + val2;
						if(++cInter == ch) {
							cInter = 0;
							++pInter;
						}
						div = div * lookupValues;
					}
				}
			} else {
				z *= this.dimensions;
				if(sequenceP) {
					var _g5 = 0;
					var _g14 = effective;
					while(_g5 < _g14) {
						var i3 = _g5++;
						var val3 = multiplicands[z + i3] + last;
						var _g6 = pInter;
						var _g15 = residueBuffers[cInter];
						_g15[_g6] = _g15[_g6] + val3;
						if(++cInter == ch) {
							cInter = 0;
							++pInter;
						}
						last = val3;
					}
				} else {
					var _g7 = 0;
					var _g16 = effective;
					while(_g7 < _g16) {
						var i4 = _g7++;
						var val4 = multiplicands[z + i4] + last;
						var _g8 = pInter;
						var _g17 = residueBuffers[cInter];
						_g17[_g8] = _g17[_g8] + val4;
						if(++cInter == ch) {
							cInter = 0;
							++pInter;
						}
					}
				}
			}
			totalDecode -= effective;
		}
		return { cInter : cInter, pInter : pInter};
	}
	,residueDecode: function(decodeState,target,offset,n,rtype) {
		if(rtype == 0) {
			var step = n / this.dimensions | 0;
			var _g = 0;
			var _g1 = step;
			while(_g < _g1) {
				var k = _g++;
				if(!this.codebookDecodeStep(decodeState,target,offset + k,n - offset - k,step)) {
					return false;
				}
			}
		} else {
			var k1 = 0;
			while(k1 < n) {
				if(!this.codebookDecode(decodeState,target,offset,n - k1)) {
					return false;
				}
				k1 += this.dimensions;
				offset += this.dimensions;
			}
		}
		return true;
	}
	,__class__: kha_audio2_ogg_vorbis_data_Codebook
};
var kha_audio2_ogg_vorbis_data_Comment = function() {
	this.data = new haxe_ds_StringMap();
};
$hxClasses["kha.audio2.ogg.vorbis.data.Comment"] = kha_audio2_ogg_vorbis_data_Comment;
kha_audio2_ogg_vorbis_data_Comment.__name__ = true;
kha_audio2_ogg_vorbis_data_Comment.prototype = {
	data: null
	,get_title: function() {
		return this.getString("title");
	}
	,get_loopStart: function() {
		return Std.parseInt(this.getString("loopstart"));
	}
	,get_loopLength: function() {
		return Std.parseInt(this.getString("looplength"));
	}
	,get_version: function() {
		return this.getString("version");
	}
	,get_album: function() {
		return this.getString("album");
	}
	,get_organization: function() {
		return this.getString("organization");
	}
	,get_tracknumber: function() {
		return this.getString("tracknumber");
	}
	,get_performer: function() {
		return this.getString("performer");
	}
	,get_copyright: function() {
		return this.getString("copyright");
	}
	,get_license: function() {
		return this.getString("license");
	}
	,get_artist: function() {
		return this.getString("artist");
	}
	,get_description: function() {
		return this.getString("description");
	}
	,get_genre: function() {
		return this.getString("genre");
	}
	,get_date: function() {
		return this.getString("date");
	}
	,get_location: function() {
		return this.getString("location");
	}
	,get_contact: function() {
		return this.getString("contact");
	}
	,get_isrc: function() {
		return this.getString("isrc");
	}
	,get_artists: function() {
		return this.getArray("artist");
	}
	,add: function(key,value) {
		key = key.toLowerCase();
		var _this = this.data;
		if(__map_reserved[key] != null ? _this.existsReserved(key) : _this.h.hasOwnProperty(key)) {
			var _this1 = this.data;
			(__map_reserved[key] != null ? _this1.getReserved(key) : _this1.h[key]).push(value);
		} else {
			var v = [value];
			var _this2 = this.data;
			if(__map_reserved[key] != null) {
				_this2.setReserved(key,v);
			} else {
				_this2.h[key] = v;
			}
		}
	}
	,getString: function(key) {
		key = key.toLowerCase();
		var _this = this.data;
		if(__map_reserved[key] != null ? _this.existsReserved(key) : _this.h.hasOwnProperty(key)) {
			var _this1 = this.data;
			return (__map_reserved[key] != null ? _this1.getReserved(key) : _this1.h[key])[0];
		} else {
			return null;
		}
	}
	,getArray: function(key) {
		key = key.toLowerCase();
		var _this = this.data;
		if(__map_reserved[key] != null ? _this.existsReserved(key) : _this.h.hasOwnProperty(key)) {
			var _this1 = this.data;
			if(__map_reserved[key] != null) {
				return _this1.getReserved(key);
			} else {
				return _this1.h[key];
			}
		} else {
			return null;
		}
	}
	,__class__: kha_audio2_ogg_vorbis_data_Comment
};
var kha_audio2_ogg_vorbis_data_Floor = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Floor"] = kha_audio2_ogg_vorbis_data_Floor;
kha_audio2_ogg_vorbis_data_Floor.__name__ = true;
kha_audio2_ogg_vorbis_data_Floor.read = function(decodeState,codebooks) {
	var floor = new kha_audio2_ogg_vorbis_data_Floor();
	floor.type = decodeState.readBits(16);
	if(floor.type > 1) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Floor.hx", lineNumber : 28, className : "kha.audio2.ogg.vorbis.data.Floor", methodName : "read"}));
	}
	if(floor.type == 0) {
		var g = floor.floor0 = new kha_audio2_ogg_vorbis_data_Floor0();
		g.order = decodeState.readBits(8);
		g.rate = decodeState.readBits(16);
		g.barkMapSize = decodeState.readBits(16);
		g.amplitudeBits = decodeState.readBits(6);
		g.amplitudeOffset = decodeState.readBits(8);
		g.numberOfBooks = decodeState.readBits(4) + 1;
		var _g = 0;
		var _g1 = g.numberOfBooks;
		while(_g < _g1) {
			var j = _g++;
			g.bookList[j] = decodeState.readBits(8);
		}
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.FEATURE_NOT_SUPPORTED,null,{ fileName : "kha/audio2/ogg/vorbis/data/Floor.hx", lineNumber : 41, className : "kha.audio2.ogg.vorbis.data.Floor", methodName : "read"}));
	} else {
		var p = [];
		var g1 = floor.floor1 = new kha_audio2_ogg_vorbis_data_Floor1();
		var maxClass = -1;
		g1.partitions = decodeState.readBits(5);
		var this1 = new Array(g1.partitions);
		g1.partitionClassList = this1;
		var _g2 = 0;
		var _g11 = g1.partitions;
		while(_g2 < _g11) {
			var j1 = _g2++;
			g1.partitionClassList[j1] = decodeState.readBits(4);
			if(g1.partitionClassList[j1] > maxClass) {
				maxClass = g1.partitionClassList[j1];
			}
		}
		var this2 = new Array(maxClass + 1);
		g1.classDimensions = this2;
		var this3 = new Array(maxClass + 1);
		g1.classMasterbooks = this3;
		var this4 = new Array(maxClass + 1);
		g1.classSubclasses = this4;
		var this5 = new Array(maxClass + 1);
		g1.subclassBooks = this5;
		var _g21 = 0;
		var _g3 = maxClass + 1;
		while(_g21 < _g3) {
			var j2 = _g21++;
			g1.classDimensions[j2] = decodeState.readBits(3) + 1;
			g1.classSubclasses[j2] = decodeState.readBits(2);
			if(g1.classSubclasses[j2] != 0) {
				g1.classMasterbooks[j2] = decodeState.readBits(8);
				if(g1.classMasterbooks[j2] >= codebooks.length) {
					throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Floor.hx", lineNumber : 64, className : "kha.audio2.ogg.vorbis.data.Floor", methodName : "read"}));
				}
			}
			var kl = 1 << g1.classSubclasses[j2];
			var this6 = g1.subclassBooks;
			var this7 = new Array(kl);
			this6[j2] = this7;
			var _g22 = 0;
			var _g31 = kl;
			while(_g22 < _g31) {
				var k = _g22++;
				g1.subclassBooks[j2][k] = decodeState.readBits(8) - 1;
				if(g1.subclassBooks[j2][k] >= codebooks.length) {
					throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Floor.hx", lineNumber : 73, className : "kha.audio2.ogg.vorbis.data.Floor", methodName : "read"}));
				}
			}
		}
		g1.floor1Multiplier = decodeState.readBits(2) + 1;
		g1.rangebits = decodeState.readBits(4);
		var this8 = new Array(250);
		g1.xlist = this8;
		g1.xlist[0] = 0;
		g1.xlist[1] = 1 << g1.rangebits;
		g1.values = 2;
		var _g4 = 0;
		var _g5 = g1.partitions;
		while(_g4 < _g5) {
			var j3 = _g4++;
			var c = g1.partitionClassList[j3];
			var _g41 = 0;
			var _g51 = g1.classDimensions[c];
			while(_g41 < _g51) {
				var k1 = _g41++;
				g1.xlist[g1.values] = decodeState.readBits(g1.rangebits);
				g1.values++;
			}
		}
		var _g6 = 0;
		var _g7 = g1.values;
		while(_g6 < _g7) {
			var j4 = _g6++;
			p.push(new kha_audio2_ogg_vorbis_data_IntPoint());
			p[j4].x = g1.xlist[j4];
			p[j4].y = j4;
		}
		p.sort(kha_audio2_ogg_vorbis_VorbisTools.pointCompare);
		var this9 = new Array(g1.values);
		g1.sortedOrder = this9;
		var _g8 = 0;
		var _g9 = g1.values;
		while(_g8 < _g9) {
			var j5 = _g8++;
			g1.sortedOrder[j5] = p[j5].y;
		}
		var this10 = new Array(g1.values);
		g1.neighbors = this10;
		var _g10 = 2;
		var _g111 = g1.values;
		while(_g10 < _g111) {
			var j6 = _g10++;
			var x = g1.xlist;
			var low = -1;
			var high = 65536;
			var plow = 0;
			var phigh = 0;
			var _g12 = 0;
			var _g13 = j6;
			while(_g12 < _g13) {
				var i = _g12++;
				if(x[i] > low && x[i] < x[j6]) {
					plow = i;
					low = x[i];
				}
				if(x[i] < high && x[i] > x[j6]) {
					phigh = i;
					high = x[i];
				}
			}
			var ne_low = plow;
			var ne_high = phigh;
			var this11 = g1.neighbors;
			var this12 = new Array(g1.values);
			this11[j6] = this12;
			g1.neighbors[j6][0] = ne_low;
			g1.neighbors[j6][1] = ne_high;
		}
	}
	return floor;
};
kha_audio2_ogg_vorbis_data_Floor.prototype = {
	floor0: null
	,floor1: null
	,type: null
	,__class__: kha_audio2_ogg_vorbis_data_Floor
};
var kha_audio2_ogg_vorbis_data_Floor0 = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Floor0"] = kha_audio2_ogg_vorbis_data_Floor0;
kha_audio2_ogg_vorbis_data_Floor0.__name__ = true;
kha_audio2_ogg_vorbis_data_Floor0.prototype = {
	order: null
	,rate: null
	,barkMapSize: null
	,amplitudeBits: null
	,amplitudeOffset: null
	,numberOfBooks: null
	,bookList: null
	,__class__: kha_audio2_ogg_vorbis_data_Floor0
};
var kha_audio2_ogg_vorbis_data_Floor1 = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Floor1"] = kha_audio2_ogg_vorbis_data_Floor1;
kha_audio2_ogg_vorbis_data_Floor1.__name__ = true;
kha_audio2_ogg_vorbis_data_Floor1.prototype = {
	partitions: null
	,partitionClassList: null
	,classDimensions: null
	,classSubclasses: null
	,classMasterbooks: null
	,subclassBooks: null
	,xlist: null
	,sortedOrder: null
	,neighbors: null
	,floor1Multiplier: null
	,rangebits: null
	,values: null
	,__class__: kha_audio2_ogg_vorbis_data_Floor1
};
var kha_audio2_ogg_vorbis_data_Header = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Header"] = kha_audio2_ogg_vorbis_data_Header;
kha_audio2_ogg_vorbis_data_Header.__name__ = true;
kha_audio2_ogg_vorbis_data_Header.read = function(decodeState) {
	var page = decodeState.page;
	page.start(decodeState);
	if((page.flag & 2) == 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"not firstPage",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 46, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	if((page.flag & 4) != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"lastPage",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 49, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	if((page.flag & 1) != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"continuedPacket",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 52, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	decodeState.firstPageValidate();
	decodeState.inputPosition += 1;
	if(decodeState.input.readByte() != 1) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"decodeState head",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 57, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	var header = new haxe_io_Bytes(new ArrayBuffer(6));
	var x;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header.b[0] = x;
	var x1;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x1 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x1 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header.b[1] = x1;
	var x2;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x2 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x2 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header.b[2] = x2;
	var x3;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x3 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x3 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header.b[3] = x3;
	var x4;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x4 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x4 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header.b[4] = x4;
	var x5;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x5 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x5 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header.b[5] = x5;
	if(header.toString() != "vorbis") {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 301, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "vorbisValidate"}));
	}
	decodeState.inputPosition += 4;
	var version = decodeState.input.readInt32();
	if(version != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"vorbis version : " + version,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 66, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	var header1 = new kha_audio2_ogg_vorbis_data_Header();
	decodeState.inputPosition += 1;
	header1.channel = decodeState.input.readByte();
	if(header1.channel == 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no channel",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 73, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	} else if(header1.channel > 16) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.TOO_MANY_CHANNELS,"too many channels",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 75, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	decodeState.inputPosition += 4;
	header1.sampleRate = decodeState.input.readInt32();
	if(header1.sampleRate == 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,"no sampling rate",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 80, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	decodeState.inputPosition += 4;
	header1.maximumBitRate = decodeState.input.readInt32();
	decodeState.inputPosition += 4;
	header1.nominalBitRate = decodeState.input.readInt32();
	decodeState.inputPosition += 4;
	header1.minimumBitRate = decodeState.input.readInt32();
	decodeState.inputPosition += 1;
	var x6 = decodeState.input.readByte();
	var log0 = x6 & 15;
	var log1 = x6 >> 4;
	header1.blocksize0 = 1 << log0;
	header1.blocksize1 = 1 << log1;
	if(log0 < 6 || log0 > 13) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 93, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	if(log1 < 6 || log1 > 13) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 96, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	if(log0 > log1) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 99, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	decodeState.inputPosition += 1;
	var x7 = decodeState.input.readByte();
	if((x7 & 1) == 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_FIRST_PAGE,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 105, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	decodeState.page.start(decodeState);
	decodeState.startPacket();
	var len = 0;
	var output = new haxe_io_BytesOutput();
	while(true) {
		len = decodeState.next();
		if(!(len != 0)) {
			break;
		}
		decodeState.inputPosition += len;
		output.write(decodeState.input.read(len));
		decodeState.bytesInSeg = 0;
	}
	var packetInput = new haxe_io_BytesInput(output.getBytes());
	packetInput.readByte();
	packetInput.read(6);
	var vendorLength = packetInput.readInt32();
	header1.vendor = packetInput.readString(vendorLength);
	header1.comment = new kha_audio2_ogg_vorbis_data_Comment();
	var commentCount = packetInput.readInt32();
	var _g = 0;
	var _g1 = commentCount;
	while(_g < _g1) {
		var i = _g++;
		var n = packetInput.readInt32();
		var str = packetInput.readString(n);
		var splitter = str.indexOf("=");
		if(splitter != -1) {
			header1.comment.add(str.substring(0,splitter),str.substring(splitter + 1));
		}
	}
	var x8 = packetInput.readByte();
	if((x8 & 1) == 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 141, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	decodeState.startPacket();
	var x9;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x9 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x9 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	if(x9 != 5) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"setup packet",{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 149, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
	}
	var header2 = new haxe_io_Bytes(new ArrayBuffer(6));
	var x10;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x10 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x10 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header2.b[0] = x10;
	var x11;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x11 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x11 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header2.b[1] = x11;
	var x12;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x12 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x12 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header2.b[2] = x12;
	var x13;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x13 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x13 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header2.b[3] = x13;
	var x14;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x14 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x14 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header2.b[4] = x14;
	var x15;
	if(decodeState.bytesInSeg == 0 && (decodeState.lastSeg || decodeState.next() == 0)) {
		x15 = -1;
	} else {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		x15 = decodeState.input.readByte();
	}
	decodeState.validBits = 0;
	header2.b[5] = x15;
	if(header2.toString() != "vorbis") {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"vorbis header",{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 301, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "vorbisValidate"}));
	}
	var codebookCount = decodeState.readBits(8) + 1;
	var this1 = new Array(codebookCount);
	header1.codebooks = this1;
	var _g2 = 0;
	var _g11 = codebookCount;
	while(_g2 < _g11) {
		var i1 = _g2++;
		header1.codebooks[i1] = kha_audio2_ogg_vorbis_data_Codebook.read(decodeState);
	}
	x7 = decodeState.readBits(6) + 1;
	var _g21 = 0;
	var _g3 = x7;
	while(_g21 < _g3) {
		var i2 = _g21++;
		if(decodeState.readBits(16) != 0) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 165, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
		}
	}
	var floorCount = decodeState.readBits(6) + 1;
	var this2 = new Array(floorCount);
	header1.floorConfig = this2;
	var _g4 = 0;
	var _g5 = floorCount;
	while(_g4 < _g5) {
		var i3 = _g4++;
		header1.floorConfig[i3] = kha_audio2_ogg_vorbis_data_Floor.read(decodeState,header1.codebooks);
	}
	var residueCount = decodeState.readBits(6) + 1;
	var this3 = new Array(residueCount);
	header1.residueConfig = this3;
	var _g6 = 0;
	var _g7 = residueCount;
	while(_g6 < _g7) {
		var i4 = _g6++;
		header1.residueConfig[i4] = kha_audio2_ogg_vorbis_data_Residue.read(decodeState,header1.codebooks);
	}
	var mappingCount = decodeState.readBits(6) + 1;
	var this4 = new Array(mappingCount);
	header1.mapping = this4;
	var _g8 = 0;
	var _g9 = mappingCount;
	while(_g8 < _g9) {
		var i5 = _g8++;
		var map = kha_audio2_ogg_vorbis_data_Mapping.read(decodeState,header1.channel);
		header1.mapping[i5] = map;
		var _g81 = 0;
		var _g91 = map.submaps;
		while(_g81 < _g91) {
			var j = _g81++;
			if(map.submapFloor[j] >= header1.floorConfig.length) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 191, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
			}
			if(map.submapResidue[j] >= header1.residueConfig.length) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 194, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
			}
		}
	}
	var modeCount = decodeState.readBits(6) + 1;
	var this5 = new Array(modeCount);
	header1.modes = this5;
	var _g10 = 0;
	var _g111 = modeCount;
	while(_g10 < _g111) {
		var i6 = _g10++;
		var mode = kha_audio2_ogg_vorbis_data_Mode.read(decodeState);
		header1.modes[i6] = mode;
		if(mode.mapping >= header1.mapping.length) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Header.hx", lineNumber : 205, className : "kha.audio2.ogg.vorbis.data.Header", methodName : "read"}));
		}
	}
	while(decodeState.bytesInSeg != 0 || !decodeState.lastSeg && decodeState.next() != 0) {
		decodeState.bytesInSeg--;
		decodeState.inputPosition += 1;
		decodeState.input.readByte();
	}
	return header1;
};
kha_audio2_ogg_vorbis_data_Header.prototype = {
	maximumBitRate: null
	,nominalBitRate: null
	,minimumBitRate: null
	,sampleRate: null
	,channel: null
	,blocksize0: null
	,blocksize1: null
	,codebooks: null
	,floorConfig: null
	,residueConfig: null
	,mapping: null
	,modes: null
	,comment: null
	,vendor: null
	,__class__: kha_audio2_ogg_vorbis_data_Header
};
var kha_audio2_ogg_vorbis_data_IntPoint = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.IntPoint"] = kha_audio2_ogg_vorbis_data_IntPoint;
kha_audio2_ogg_vorbis_data_IntPoint.__name__ = true;
kha_audio2_ogg_vorbis_data_IntPoint.prototype = {
	x: null
	,y: null
	,__class__: kha_audio2_ogg_vorbis_data_IntPoint
};
var kha_audio2_ogg_vorbis_data_Mapping = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Mapping"] = kha_audio2_ogg_vorbis_data_Mapping;
kha_audio2_ogg_vorbis_data_Mapping.__name__ = true;
kha_audio2_ogg_vorbis_data_Mapping.read = function(decodeState,channels) {
	var m = new kha_audio2_ogg_vorbis_data_Mapping();
	var mappingType = decodeState.readBits(16);
	if(mappingType != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,"mapping type " + mappingType,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 22, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "read"}));
	}
	var this1 = new Array(channels);
	m.chan = this1;
	var _g = 0;
	var _g1 = channels;
	while(_g < _g1) {
		var j = _g++;
		m.chan[j] = new kha_audio2_ogg_vorbis_data_MappingChannel();
	}
	if(decodeState.readBits(1) != 0) {
		m.submaps = decodeState.readBits(4) + 1;
	} else {
		m.submaps = 1;
	}
	if(decodeState.readBits(1) != 0) {
		m.couplingSteps = decodeState.readBits(8) + 1;
		var _g2 = 0;
		var _g3 = m.couplingSteps;
		while(_g2 < _g3) {
			var k = _g2++;
			var n = channels - 1;
			var log2_4 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
			m.chan[k].magnitude = decodeState.readBits(n < 16384 ? n < 16 ? log2_4[n] : n < 512 ? 5 + log2_4[n >> 5] : 10 + log2_4[n >> 10] : n < 16777216 ? n < 524288 ? 15 + log2_4[n >> 15] : 20 + log2_4[n >> 20] : n < 536870912 ? 25 + log2_4[n >> 25] : n < -2147483648 ? 30 + log2_4[n >> 30] : 0);
			var n1 = channels - 1;
			var log2_41 = [0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];
			m.chan[k].angle = decodeState.readBits(n1 < 16384 ? n1 < 16 ? log2_41[n1] : n1 < 512 ? 5 + log2_41[n1 >> 5] : 10 + log2_41[n1 >> 10] : n1 < 16777216 ? n1 < 524288 ? 15 + log2_41[n1 >> 15] : 20 + log2_41[n1 >> 20] : n1 < 536870912 ? 25 + log2_41[n1 >> 25] : n1 < -2147483648 ? 30 + log2_41[n1 >> 30] : 0);
			if(m.chan[k].magnitude >= channels) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 46, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "read"}));
			}
			if(m.chan[k].angle >= channels) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 49, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "read"}));
			}
			if(m.chan[k].magnitude == m.chan[k].angle) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 52, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "read"}));
			}
		}
	} else {
		m.couplingSteps = 0;
	}
	if(decodeState.readBits(2) != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 61, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "read"}));
	}
	if(m.submaps > 1) {
		var _g21 = 0;
		var _g31 = channels;
		while(_g21 < _g31) {
			var j1 = _g21++;
			m.chan[j1].mux = decodeState.readBits(4);
			if(m.chan[j1].mux >= m.submaps) {
				throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 67, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "read"}));
			}
		}
	} else {
		var _g22 = 0;
		var _g32 = channels;
		while(_g22 < _g32) {
			var j2 = _g22++;
			m.chan[j2].mux = 0;
		}
	}
	var this2 = new Array(m.submaps);
	m.submapFloor = this2;
	var this3 = new Array(m.submaps);
	m.submapResidue = this3;
	var _g23 = 0;
	var _g33 = m.submaps;
	while(_g23 < _g33) {
		var j3 = _g23++;
		decodeState.readBits(8);
		m.submapFloor[j3] = decodeState.readBits(8);
		m.submapResidue[j3] = decodeState.readBits(8);
	}
	return m;
};
kha_audio2_ogg_vorbis_data_Mapping.prototype = {
	couplingSteps: null
	,chan: null
	,submaps: null
	,submapFloor: null
	,submapResidue: null
	,doFloor: function(floors,i,n,target,finalY,step2Flag) {
		var n2 = n >> 1;
		var s = this.chan[i].mux;
		var floor;
		var floor1 = floors[this.submapFloor[s]];
		if(floor1.type == 0) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mapping.hx", lineNumber : 94, className : "kha.audio2.ogg.vorbis.data.Mapping", methodName : "doFloor"}));
		} else {
			var g = floor1.floor1;
			var lx = 0;
			var ly = finalY[0] * g.floor1Multiplier;
			var _g = 1;
			var _g1 = g.values;
			while(_g < _g1) {
				var q = _g++;
				var j = g.sortedOrder[q];
				if(finalY[j] >= 0) {
					var hy = finalY[j] * g.floor1Multiplier;
					var hx = g.xlist[j];
					kha_audio2_ogg_vorbis_VorbisTools.drawLine(target,lx,ly,hx,hy,n2);
					lx = hx;
					ly = hy;
				}
			}
			if(lx < n2) {
				var _g2 = lx;
				var _g3 = n2;
				while(_g2 < _g3) {
					var j1 = _g2++;
					var _g21 = j1;
					var _g31 = target;
					_g31[_g21] = _g31[_g21] * kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE[ly];
				}
			}
		}
	}
	,__class__: kha_audio2_ogg_vorbis_data_Mapping
};
var kha_audio2_ogg_vorbis_data_MappingChannel = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.MappingChannel"] = kha_audio2_ogg_vorbis_data_MappingChannel;
kha_audio2_ogg_vorbis_data_MappingChannel.__name__ = true;
kha_audio2_ogg_vorbis_data_MappingChannel.prototype = {
	magnitude: null
	,angle: null
	,mux: null
	,__class__: kha_audio2_ogg_vorbis_data_MappingChannel
};
var kha_audio2_ogg_vorbis_data_Mode = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Mode"] = kha_audio2_ogg_vorbis_data_Mode;
kha_audio2_ogg_vorbis_data_Mode.__name__ = true;
kha_audio2_ogg_vorbis_data_Mode.read = function(decodeState) {
	var m = new kha_audio2_ogg_vorbis_data_Mode();
	m.blockflag = decodeState.readBits(1) != 0;
	m.windowtype = decodeState.readBits(16);
	m.transformtype = decodeState.readBits(16);
	m.mapping = decodeState.readBits(8);
	if(m.windowtype != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mode.hx", lineNumber : 22, className : "kha.audio2.ogg.vorbis.data.Mode", methodName : "read"}));
	}
	if(m.transformtype != 0) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Mode.hx", lineNumber : 25, className : "kha.audio2.ogg.vorbis.data.Mode", methodName : "read"}));
	}
	return m;
};
kha_audio2_ogg_vorbis_data_Mode.prototype = {
	blockflag: null
	,mapping: null
	,windowtype: null
	,transformtype: null
	,__class__: kha_audio2_ogg_vorbis_data_Mode
};
var kha_audio2_ogg_vorbis_data_Page = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Page"] = kha_audio2_ogg_vorbis_data_Page;
kha_audio2_ogg_vorbis_data_Page.__name__ = true;
kha_audio2_ogg_vorbis_data_Page.prototype = {
	flag: null
	,clone: function() {
		var page = new kha_audio2_ogg_vorbis_data_Page();
		page.flag = this.flag;
		return page;
	}
	,start: function(decodeState) {
		var tmp;
		var tmp1;
		var tmp2;
		decodeState.inputPosition += 1;
		if(decodeState.input.readByte() == 79) {
			decodeState.inputPosition += 1;
			tmp2 = decodeState.input.readByte() != 103;
		} else {
			tmp2 = true;
		}
		if(!tmp2) {
			decodeState.inputPosition += 1;
			tmp1 = decodeState.input.readByte() != 103;
		} else {
			tmp1 = true;
		}
		if(!tmp1) {
			decodeState.inputPosition += 1;
			tmp = decodeState.input.readByte() != 83;
		} else {
			tmp = true;
		}
		if(tmp) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.MISSING_CAPTURE_PATTERN,null,{ fileName : "kha/audio2/ogg/vorbis/VorbisDecodeState.hx", lineNumber : 324, className : "kha.audio2.ogg.vorbis.VorbisDecodeState", methodName : "capturePattern"}));
		}
		this.startWithoutCapturePattern(decodeState);
	}
	,startWithoutCapturePattern: function(decodeState) {
		decodeState.inputPosition += 1;
		var version = decodeState.input.readByte();
		if(version != 0) {
			throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_STREAM_STRUCTURE_VERSION,"" + version,{ fileName : "kha/audio2/ogg/vorbis/data/Page.hx", lineNumber : 34, className : "kha.audio2.ogg.vorbis.data.Page", methodName : "startWithoutCapturePattern"}));
		}
		decodeState.inputPosition += 1;
		this.flag = decodeState.input.readByte();
		decodeState.inputPosition += 4;
		var loc0 = decodeState.input.readInt32();
		decodeState.inputPosition += 4;
		var loc1 = decodeState.input.readInt32();
		decodeState.inputPosition += 4;
		decodeState.input.readInt32();
		decodeState.inputPosition += 4;
		decodeState.input.readInt32();
		decodeState.inputPosition += 4;
		decodeState.input.readInt32();
		decodeState.setup(loc0,loc1);
	}
	,__class__: kha_audio2_ogg_vorbis_data_Page
};
var kha_audio2_ogg_vorbis_data_PageFlag = function() { };
$hxClasses["kha.audio2.ogg.vorbis.data.PageFlag"] = kha_audio2_ogg_vorbis_data_PageFlag;
kha_audio2_ogg_vorbis_data_PageFlag.__name__ = true;
var kha_audio2_ogg_vorbis_data_ProbedPage = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.ProbedPage"] = kha_audio2_ogg_vorbis_data_ProbedPage;
kha_audio2_ogg_vorbis_data_ProbedPage.__name__ = true;
kha_audio2_ogg_vorbis_data_ProbedPage.prototype = {
	pageStart: null
	,pageEnd: null
	,afterPreviousPageStart: null
	,firstDecodedSample: null
	,lastDecodedSample: null
	,__class__: kha_audio2_ogg_vorbis_data_ProbedPage
};
var kha_audio2_ogg_vorbis_data_ReaderError = function(type,message,posInfos) {
	if(message == null) {
		message = "";
	}
	this.type = type;
	this.message = message;
	this.posInfos = posInfos;
};
$hxClasses["kha.audio2.ogg.vorbis.data.ReaderError"] = kha_audio2_ogg_vorbis_data_ReaderError;
kha_audio2_ogg_vorbis_data_ReaderError.__name__ = true;
kha_audio2_ogg_vorbis_data_ReaderError.prototype = {
	type: null
	,message: null
	,posInfos: null
	,__class__: kha_audio2_ogg_vorbis_data_ReaderError
};
var kha_audio2_ogg_vorbis_data_ReaderErrorType = $hxEnums["kha.audio2.ogg.vorbis.data.ReaderErrorType"] = { __ename__ : true, __constructs__ : ["NEED_MORE_DATA","INVALID_API_MIXING","OUTOFMEM","FEATURE_NOT_SUPPORTED","TOO_MANY_CHANNELS","FILE_OPEN_FAILURE","SEEK_WITHOUT_LENGTH","UNEXPECTED_EOF","SEEK_INVALID","INVALID_SETUP","INVALID_STREAM","MISSING_CAPTURE_PATTERN","INVALID_STREAM_STRUCTURE_VERSION","CONTINUED_PACKET_FLAG_INVALID","INCORRECT_STREAM_SERIAL_NUMBER","INVALID_FIRST_PAGE","BAD_PACKET_TYPE","CANT_FIND_LAST_PAGE","SEEK_FAILED","OTHER"]
	,NEED_MORE_DATA: {_hx_index:0,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,INVALID_API_MIXING: {_hx_index:1,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,OUTOFMEM: {_hx_index:2,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,FEATURE_NOT_SUPPORTED: {_hx_index:3,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,TOO_MANY_CHANNELS: {_hx_index:4,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,FILE_OPEN_FAILURE: {_hx_index:5,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,SEEK_WITHOUT_LENGTH: {_hx_index:6,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,UNEXPECTED_EOF: {_hx_index:7,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,SEEK_INVALID: {_hx_index:8,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,INVALID_SETUP: {_hx_index:9,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,INVALID_STREAM: {_hx_index:10,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,MISSING_CAPTURE_PATTERN: {_hx_index:11,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,INVALID_STREAM_STRUCTURE_VERSION: {_hx_index:12,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,CONTINUED_PACKET_FLAG_INVALID: {_hx_index:13,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,INCORRECT_STREAM_SERIAL_NUMBER: {_hx_index:14,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,INVALID_FIRST_PAGE: {_hx_index:15,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,BAD_PACKET_TYPE: {_hx_index:16,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,CANT_FIND_LAST_PAGE: {_hx_index:17,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,SEEK_FAILED: {_hx_index:18,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
	,OTHER: {_hx_index:19,__enum__:"kha.audio2.ogg.vorbis.data.ReaderErrorType",toString:$estr}
};
var kha_audio2_ogg_vorbis_data_Residue = function() {
};
$hxClasses["kha.audio2.ogg.vorbis.data.Residue"] = kha_audio2_ogg_vorbis_data_Residue;
kha_audio2_ogg_vorbis_data_Residue.__name__ = true;
kha_audio2_ogg_vorbis_data_Residue.read = function(decodeState,codebooks) {
	var r = new kha_audio2_ogg_vorbis_data_Residue();
	r.type = decodeState.readBits(16);
	if(r.type > 2) {
		throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Residue.hx", lineNumber : 29, className : "kha.audio2.ogg.vorbis.data.Residue", methodName : "read"}));
	}
	var this1 = new Array(64);
	var residueCascade = this1;
	r.begin = decodeState.readBits(24);
	r.end = decodeState.readBits(24);
	r.partSize = decodeState.readBits(24) + 1;
	var classifications = r.classifications = decodeState.readBits(6) + 1;
	r.classbook = decodeState.readBits(8);
	var _g = 0;
	var _g1 = r.classifications;
	while(_g < _g1) {
		var j = _g++;
		var highBits = 0;
		var lowBits = decodeState.readBits(3);
		if(decodeState.readBits(1) != 0) {
			highBits = decodeState.readBits(5);
		}
		residueCascade[j] = highBits * 8 + lowBits;
	}
	var this2 = new Array(r.classifications);
	r.residueBooks = this2;
	var _g2 = 0;
	var _g3 = r.classifications;
	while(_g2 < _g3) {
		var j1 = _g2++;
		var this3 = r.residueBooks;
		var this4 = new Array(8);
		this3[j1] = this4;
		var _g21 = 0;
		while(_g21 < 8) {
			var k = _g21++;
			if((residueCascade[j1] & 1 << k) != 0) {
				r.residueBooks[j1][k] = decodeState.readBits(8);
				if(r.residueBooks[j1][k] >= codebooks.length) {
					throw new js__$Boot_HaxeError(new kha_audio2_ogg_vorbis_data_ReaderError(kha_audio2_ogg_vorbis_data_ReaderErrorType.INVALID_SETUP,null,{ fileName : "kha/audio2/ogg/vorbis/data/Residue.hx", lineNumber : 55, className : "kha.audio2.ogg.vorbis.data.Residue", methodName : "read"}));
				}
			} else {
				r.residueBooks[j1][k] = -1;
			}
		}
	}
	var el = codebooks[r.classbook].entries;
	var classwords = codebooks[r.classbook].dimensions;
	var this5 = new Array(el);
	r.classdata = this5;
	var _g4 = 0;
	var _g5 = el;
	while(_g4 < _g5) {
		var j2 = _g4++;
		var temp = j2;
		var k1 = classwords;
		var this6 = r.classdata;
		var this7 = new Array(classwords);
		var cd = this6[j2] = this7;
		while(--k1 >= 0) {
			cd[k1] = temp % classifications;
			temp = temp / classifications | 0;
		}
	}
	return r;
};
kha_audio2_ogg_vorbis_data_Residue.prototype = {
	begin: null
	,end: null
	,partSize: null
	,classifications: null
	,classbook: null
	,classdata: null
	,residueBooks: null
	,type: null
	,decode: function(decodeState,header,residueBuffers,ch,n,doNotDecode,channelBuffers) {
		var codebooks = header.codebooks;
		var classwords = codebooks[this.classbook].dimensions;
		var nRead = this.end - this.begin;
		var partSize = this.partSize;
		var partRead = _$UInt_UInt_$Impl_$.toFloat(nRead) / _$UInt_UInt_$Impl_$.toFloat(partSize) | 0;
		var this1 = new Array(header.channel * partRead + 1);
		var classifications = this1;
		var _g = 0;
		var _g1 = ch;
		while(_g < _g1) {
			var i = _g++;
			if(!doNotDecode[i]) {
				var buffer = residueBuffers[i];
				var _g2 = 0;
				var _g11 = buffer.length;
				while(_g2 < _g11) {
					var j = _g2++;
					buffer[j] = 0;
				}
			}
		}
		if(this.type == 2 && ch != 1) {
			var _g21 = 0;
			var _g3 = ch;
			while(_g21 < _g3) {
				var j1 = _g21++;
				if(!doNotDecode[j1]) {
					break;
				} else if(j1 == ch - 1) {
					return;
				}
			}
			var _g4 = 0;
			while(_g4 < 8) {
				var pass = _g4++;
				var pcount = 0;
				var classSet = 0;
				if(ch == 2) {
					while(pcount < partRead) {
						var z = this.begin + pcount * partSize;
						var cInter = z & 1;
						var pInter = z >>> 1;
						if(pass == 0) {
							var c = codebooks[this.classbook];
							if(decodeState.validBits < 10) {
								decodeState.prepHuffman();
							}
							var i1 = c.fastHuffman[decodeState.acc & 1023];
							var val;
							if(i1 >= 0) {
								var l = c.codewordLengths[i1];
								decodeState.acc = decodeState.acc >>> l;
								decodeState.validBits -= l;
								if(decodeState.validBits < 0) {
									decodeState.validBits = 0;
									val = -1;
								} else {
									val = i1;
								}
							} else {
								val = decodeState.decodeScalarRaw(c);
							}
							if(c.sparse) {
								val = c.sortedValues[val];
							}
							var q = val;
							if(q == -1) {
								return;
							}
							var i2 = classwords;
							while(--i2 >= 0) {
								classifications[i2 + pcount] = q % this.classifications;
								q = q / this.classifications | 0;
							}
						}
						var _g41 = 0;
						var _g5 = classwords;
						while(_g41 < _g5) {
							var i3 = _g41++;
							if(pcount >= partRead) {
								break;
							}
							var z1 = this.begin + pcount * partSize;
							var c1 = classifications[pcount];
							var b = this.residueBooks[c1][pass];
							if(b >= 0) {
								var book = codebooks[b];
								var result = book.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter,pInter,n,partSize);
								if(result == null) {
									return;
								} else {
									cInter = result.cInter;
									pInter = result.pInter;
								}
							} else {
								z1 = z1 + partSize;
								cInter = z1 & 1;
								pInter = z1 >>> 1;
							}
							++pcount;
						}
					}
				} else if(ch == 1) {
					while(pcount < partRead) {
						var z2 = this.begin + pcount * partSize;
						var cInter1 = 0;
						var pInter1 = z2;
						if(pass == 0) {
							var c2 = codebooks[this.classbook];
							if(decodeState.validBits < 10) {
								decodeState.prepHuffman();
							}
							var i4 = c2.fastHuffman[decodeState.acc & 1023];
							var val1;
							if(i4 >= 0) {
								var l1 = c2.codewordLengths[i4];
								decodeState.acc = decodeState.acc >>> l1;
								decodeState.validBits -= l1;
								if(decodeState.validBits < 0) {
									decodeState.validBits = 0;
									val1 = -1;
								} else {
									val1 = i4;
								}
							} else {
								val1 = decodeState.decodeScalarRaw(c2);
							}
							if(c2.sparse) {
								val1 = c2.sortedValues[val1];
							}
							var q1 = val1;
							if(q1 == -1) {
								return;
							}
							var i5 = classwords;
							while(--i5 >= 0) {
								classifications[i5 + pcount] = q1 % this.classifications;
								q1 = q1 / this.classifications | 0;
							}
						}
						var _g42 = 0;
						var _g51 = classwords;
						while(_g42 < _g51) {
							var i6 = _g42++;
							if(pcount >= partRead) {
								break;
							}
							var z3 = this.begin + pcount * partSize;
							var b1 = this.residueBooks[classifications[pcount]][pass];
							if(b1 >= 0) {
								var book1 = codebooks[b1];
								var result1 = book1.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter1,pInter1,n,partSize);
								if(result1 == null) {
									return;
								} else {
									cInter1 = result1.cInter;
									pInter1 = result1.pInter;
								}
							} else {
								z3 = z3 + partSize;
								cInter1 = 0;
								pInter1 = z3;
							}
							++pcount;
						}
					}
				} else {
					while(pcount < partRead) {
						var z4 = this.begin + pcount * partSize;
						var cInter2 = _$UInt_UInt_$Impl_$.toFloat(z4) % _$UInt_UInt_$Impl_$.toFloat(ch) | 0;
						var pInter2 = _$UInt_UInt_$Impl_$.toFloat(z4) / _$UInt_UInt_$Impl_$.toFloat(ch) | 0;
						if(pass == 0) {
							var c3 = codebooks[this.classbook];
							if(decodeState.validBits < 10) {
								decodeState.prepHuffman();
							}
							var i7 = c3.fastHuffman[decodeState.acc & 1023];
							var val2;
							if(i7 >= 0) {
								var l2 = c3.codewordLengths[i7];
								decodeState.acc = decodeState.acc >>> l2;
								decodeState.validBits -= l2;
								if(decodeState.validBits < 0) {
									decodeState.validBits = 0;
									val2 = -1;
								} else {
									val2 = i7;
								}
							} else {
								val2 = decodeState.decodeScalarRaw(c3);
							}
							if(c3.sparse) {
								val2 = c3.sortedValues[val2];
							}
							var q2 = val2;
							if(q2 == -1) {
								return;
							}
							var i8 = classwords;
							while(--i8 >= 0) {
								classifications[i8 + pcount] = q2 % this.classifications;
								q2 = q2 / this.classifications | 0;
							}
						}
						var _g43 = 0;
						var _g52 = classwords;
						while(_g43 < _g52) {
							var i9 = _g43++;
							if(pcount >= partRead) {
								break;
							}
							var z5 = this.begin + pcount * partSize;
							var b2 = this.residueBooks[classifications[pcount]][pass];
							if(b2 >= 0) {
								var book2 = codebooks[b2];
								var result2 = book2.decodeDeinterleaveRepeat(decodeState,residueBuffers,ch,cInter2,pInter2,n,partSize);
								if(result2 == null) {
									return;
								} else {
									cInter2 = result2.cInter;
									pInter2 = result2.pInter;
								}
							} else {
								z5 = z5 + partSize;
								cInter2 = _$UInt_UInt_$Impl_$.toFloat(z5) % _$UInt_UInt_$Impl_$.toFloat(ch) | 0;
								pInter2 = _$UInt_UInt_$Impl_$.toFloat(z5) / _$UInt_UInt_$Impl_$.toFloat(ch) | 0;
							}
							++pcount;
						}
					}
				}
			}
			return;
		}
		var _g22 = 0;
		while(_g22 < 8) {
			var pass1 = _g22++;
			var pcount1 = 0;
			var classSet1 = 0;
			while(pcount1 < partRead) {
				if(pass1 == 0) {
					var _g23 = 0;
					var _g31 = ch;
					while(_g23 < _g31) {
						var j2 = _g23++;
						if(!doNotDecode[j2]) {
							var c4 = codebooks[this.classbook];
							if(decodeState.validBits < 10) {
								decodeState.prepHuffman();
							}
							var i10 = c4.fastHuffman[decodeState.acc & 1023];
							var val3;
							if(i10 >= 0) {
								var l3 = c4.codewordLengths[i10];
								decodeState.acc = decodeState.acc >>> l3;
								decodeState.validBits -= l3;
								if(decodeState.validBits < 0) {
									decodeState.validBits = 0;
									val3 = -1;
								} else {
									val3 = i10;
								}
							} else {
								val3 = decodeState.decodeScalarRaw(c4);
							}
							if(c4.sparse) {
								val3 = c4.sortedValues[val3];
							}
							var temp = val3;
							if(temp == -1) {
								return;
							}
							var i11 = classwords;
							while(--i11 >= 0) {
								classifications[j2 * partRead + i11 + pcount1] = temp % this.classifications;
								temp = temp / this.classifications | 0;
							}
						}
					}
				}
				var _g24 = 0;
				var _g32 = classwords;
				while(_g24 < _g32) {
					var i12 = _g24++;
					if(pcount1 >= partRead) {
						break;
					}
					var _g25 = 0;
					var _g33 = ch;
					while(_g25 < _g33) {
						var j3 = _g25++;
						if(!doNotDecode[j3]) {
							var c5 = classifications[j3 * partRead + pcount1];
							var b3 = this.residueBooks[c5][pass1];
							if(b3 >= 0) {
								var target = residueBuffers[j3];
								var offset = this.begin + pcount1 * partSize;
								var n1 = partSize;
								var book3 = codebooks[b3];
								if(!book3.residueDecode(decodeState,target,offset,n1,this.type)) {
									return;
								}
							}
						}
					}
					++pcount1;
				}
			}
		}
	}
	,__class__: kha_audio2_ogg_vorbis_data_Residue
};
var kha_audio2_ogg_vorbis_data_Setting = function() { };
$hxClasses["kha.audio2.ogg.vorbis.data.Setting"] = kha_audio2_ogg_vorbis_data_Setting;
kha_audio2_ogg_vorbis_data_Setting.__name__ = true;
var kha_graphics1_Graphics = function() { };
$hxClasses["kha.graphics1.Graphics"] = kha_graphics1_Graphics;
kha_graphics1_Graphics.__name__ = true;
kha_graphics1_Graphics.prototype = {
	begin: null
	,end: null
	,setPixel: null
	,__class__: kha_graphics1_Graphics
};
var kha_graphics2_Graphics = function() {
	this.transformations = [];
	this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1));
	this.opacities = [];
	this.opacities.push(1);
	this.myFontSize = 12;
	this.pipe = null;
};
$hxClasses["kha.graphics2.Graphics"] = kha_graphics2_Graphics;
kha_graphics2_Graphics.__name__ = true;
kha_graphics2_Graphics.prototype = {
	begin: function(clear,clearColor) {
		if(clear == null) {
			clear = true;
		}
	}
	,end: function() {
	}
	,flush: function() {
	}
	,clear: function(color) {
	}
	,drawImage: function(img,x,y) {
		this.drawSubImage(img,x,y,0,0,img.get_width(),img.get_height());
	}
	,drawSubImage: function(img,x,y,sx,sy,sw,sh) {
		this.drawScaledSubImage(img,sx,sy,sw,sh,x,y,sw,sh);
	}
	,drawScaledImage: function(img,dx,dy,dw,dh) {
		this.drawScaledSubImage(img,0,0,img.get_width(),img.get_height(),dx,dy,dw,dh);
	}
	,drawScaledSubImage: function(image,sx,sy,sw,sh,dx,dy,dw,dh) {
	}
	,drawRect: function(x,y,width,height,strength) {
		if(strength == null) {
			strength = 1.0;
		}
	}
	,fillRect: function(x,y,width,height) {
	}
	,drawString: function(text,x,y) {
	}
	,drawCharacters: function(text,start,length,x,y) {
	}
	,drawLine: function(x1,y1,x2,y2,strength) {
		if(strength == null) {
			strength = 1.0;
		}
	}
	,drawVideo: function(video,x,y,width,height) {
	}
	,fillTriangle: function(x1,y1,x2,y2,x3,y3) {
	}
	,get_imageScaleQuality: function() {
		return kha_graphics2_ImageScaleQuality.Low;
	}
	,set_imageScaleQuality: function(value) {
		return kha_graphics2_ImageScaleQuality.High;
	}
	,get_mipmapScaleQuality: function() {
		return kha_graphics2_ImageScaleQuality.Low;
	}
	,set_mipmapScaleQuality: function(value) {
		return kha_graphics2_ImageScaleQuality.High;
	}
	,get_color: function() {
		return -16777216;
	}
	,set_color: function(color) {
		return -16777216;
	}
	,get_font: function() {
		return null;
	}
	,set_font: function(font) {
		return null;
	}
	,get_fontSize: function() {
		return this.myFontSize;
	}
	,set_fontSize: function(value) {
		return this.myFontSize = value;
	}
	,pushTransformation: function(transformation) {
		var trans = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
		trans._00 = transformation._00;
		trans._10 = transformation._10;
		trans._20 = transformation._20;
		trans._01 = transformation._01;
		trans._11 = transformation._11;
		trans._21 = transformation._21;
		trans._02 = transformation._02;
		trans._12 = transformation._12;
		trans._22 = transformation._22;
		this.setTransformation(trans);
		this.transformations.push(trans);
	}
	,popTransformation: function() {
		var ret = this.transformations.pop();
		this.setTransformation(this.transformations[this.transformations.length - 1]);
		return ret;
	}
	,get_transformation: function() {
		return this.transformations[this.transformations.length - 1];
	}
	,set_transformation: function(transformation) {
		this.setTransformation(transformation);
		var _this = this.transformations[this.transformations.length - 1];
		_this._00 = transformation._00;
		_this._10 = transformation._10;
		_this._20 = transformation._20;
		_this._01 = transformation._01;
		_this._11 = transformation._11;
		_this._21 = transformation._21;
		_this._02 = transformation._02;
		_this._12 = transformation._12;
		_this._22 = transformation._22;
		return transformation;
	}
	,translation: function(tx,ty) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = tx;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = ty;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var m = this.transformations[this.transformations.length - 1];
		return new kha_math_FastMatrix3(_this__00 * m._00 + _this__10 * m._01 + _this__20 * m._02,_this__00 * m._10 + _this__10 * m._11 + _this__20 * m._12,_this__00 * m._20 + _this__10 * m._21 + _this__20 * m._22,_this__01 * m._00 + _this__11 * m._01 + _this__21 * m._02,_this__01 * m._10 + _this__11 * m._11 + _this__21 * m._12,_this__01 * m._20 + _this__11 * m._21 + _this__21 * m._22,_this__02 * m._00 + _this__12 * m._01 + _this__22 * m._02,_this__02 * m._10 + _this__12 * m._11 + _this__22 * m._12,_this__02 * m._20 + _this__12 * m._21 + _this__22 * m._22);
	}
	,translate: function(tx,ty) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = tx;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = ty;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var m = this.transformations[this.transformations.length - 1];
		var transformation = new kha_math_FastMatrix3(_this__00 * m._00 + _this__10 * m._01 + _this__20 * m._02,_this__00 * m._10 + _this__10 * m._11 + _this__20 * m._12,_this__00 * m._20 + _this__10 * m._21 + _this__20 * m._22,_this__01 * m._00 + _this__11 * m._01 + _this__21 * m._02,_this__01 * m._10 + _this__11 * m._11 + _this__21 * m._12,_this__01 * m._20 + _this__11 * m._21 + _this__21 * m._22,_this__02 * m._00 + _this__12 * m._01 + _this__22 * m._02,_this__02 * m._10 + _this__12 * m._11 + _this__22 * m._12,_this__02 * m._20 + _this__12 * m._21 + _this__22 * m._22);
		this.setTransformation(transformation);
		var _this = this.transformations[this.transformations.length - 1];
		_this._00 = transformation._00;
		_this._10 = transformation._10;
		_this._20 = transformation._20;
		_this._01 = transformation._01;
		_this._11 = transformation._11;
		_this._21 = transformation._21;
		_this._02 = transformation._02;
		_this._12 = transformation._12;
		_this._22 = transformation._22;
	}
	,pushTranslation: function(tx,ty) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = tx;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = ty;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var m = this.transformations[this.transformations.length - 1];
		this.pushTransformation(new kha_math_FastMatrix3(_this__00 * m._00 + _this__10 * m._01 + _this__20 * m._02,_this__00 * m._10 + _this__10 * m._11 + _this__20 * m._12,_this__00 * m._20 + _this__10 * m._21 + _this__20 * m._22,_this__01 * m._00 + _this__11 * m._01 + _this__21 * m._02,_this__01 * m._10 + _this__11 * m._11 + _this__21 * m._12,_this__01 * m._20 + _this__11 * m._21 + _this__21 * m._22,_this__02 * m._00 + _this__12 * m._01 + _this__22 * m._02,_this__02 * m._10 + _this__12 * m._11 + _this__22 * m._12,_this__02 * m._20 + _this__12 * m._21 + _this__22 * m._22));
	}
	,rotation: function(angle,centerx,centery) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = centerx;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = centery;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var m__00 = Math.cos(angle);
		var m__10 = -Math.sin(angle);
		var m__20 = 0;
		var m__01 = Math.sin(angle);
		var m__11 = Math.cos(angle);
		var m__21 = 0;
		var m__02 = 0;
		var m__12 = 0;
		var m__22 = 1;
		var _this__001 = _this__00 * m__00 + _this__10 * m__01 + _this__20 * m__02;
		var _this__101 = _this__00 * m__10 + _this__10 * m__11 + _this__20 * m__12;
		var _this__201 = _this__00 * m__20 + _this__10 * m__21 + _this__20 * m__22;
		var _this__011 = _this__01 * m__00 + _this__11 * m__01 + _this__21 * m__02;
		var _this__111 = _this__01 * m__10 + _this__11 * m__11 + _this__21 * m__12;
		var _this__211 = _this__01 * m__20 + _this__11 * m__21 + _this__21 * m__22;
		var _this__021 = _this__02 * m__00 + _this__12 * m__01 + _this__22 * m__02;
		var _this__121 = _this__02 * m__10 + _this__12 * m__11 + _this__22 * m__12;
		var _this__221 = _this__02 * m__20 + _this__12 * m__21 + _this__22 * m__22;
		var m__001 = 1;
		var m__101 = 0;
		var m__201 = -centerx;
		var m__011 = 0;
		var m__111 = 1;
		var m__211 = -centery;
		var m__021 = 0;
		var m__121 = 0;
		var m__221 = 1;
		var _this__002 = _this__001 * m__001 + _this__101 * m__011 + _this__201 * m__021;
		var _this__102 = _this__001 * m__101 + _this__101 * m__111 + _this__201 * m__121;
		var _this__202 = _this__001 * m__201 + _this__101 * m__211 + _this__201 * m__221;
		var _this__012 = _this__011 * m__001 + _this__111 * m__011 + _this__211 * m__021;
		var _this__112 = _this__011 * m__101 + _this__111 * m__111 + _this__211 * m__121;
		var _this__212 = _this__011 * m__201 + _this__111 * m__211 + _this__211 * m__221;
		var _this__022 = _this__021 * m__001 + _this__121 * m__011 + _this__221 * m__021;
		var _this__122 = _this__021 * m__101 + _this__121 * m__111 + _this__221 * m__121;
		var _this__222 = _this__021 * m__201 + _this__121 * m__211 + _this__221 * m__221;
		var m = this.transformations[this.transformations.length - 1];
		return new kha_math_FastMatrix3(_this__002 * m._00 + _this__102 * m._01 + _this__202 * m._02,_this__002 * m._10 + _this__102 * m._11 + _this__202 * m._12,_this__002 * m._20 + _this__102 * m._21 + _this__202 * m._22,_this__012 * m._00 + _this__112 * m._01 + _this__212 * m._02,_this__012 * m._10 + _this__112 * m._11 + _this__212 * m._12,_this__012 * m._20 + _this__112 * m._21 + _this__212 * m._22,_this__022 * m._00 + _this__122 * m._01 + _this__222 * m._02,_this__022 * m._10 + _this__122 * m._11 + _this__222 * m._12,_this__022 * m._20 + _this__122 * m._21 + _this__222 * m._22);
	}
	,rotate: function(angle,centerx,centery) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = centerx;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = centery;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var m__00 = Math.cos(angle);
		var m__10 = -Math.sin(angle);
		var m__20 = 0;
		var m__01 = Math.sin(angle);
		var m__11 = Math.cos(angle);
		var m__21 = 0;
		var m__02 = 0;
		var m__12 = 0;
		var m__22 = 1;
		var _this__001 = _this__00 * m__00 + _this__10 * m__01 + _this__20 * m__02;
		var _this__101 = _this__00 * m__10 + _this__10 * m__11 + _this__20 * m__12;
		var _this__201 = _this__00 * m__20 + _this__10 * m__21 + _this__20 * m__22;
		var _this__011 = _this__01 * m__00 + _this__11 * m__01 + _this__21 * m__02;
		var _this__111 = _this__01 * m__10 + _this__11 * m__11 + _this__21 * m__12;
		var _this__211 = _this__01 * m__20 + _this__11 * m__21 + _this__21 * m__22;
		var _this__021 = _this__02 * m__00 + _this__12 * m__01 + _this__22 * m__02;
		var _this__121 = _this__02 * m__10 + _this__12 * m__11 + _this__22 * m__12;
		var _this__221 = _this__02 * m__20 + _this__12 * m__21 + _this__22 * m__22;
		var m__001 = 1;
		var m__101 = 0;
		var m__201 = -centerx;
		var m__011 = 0;
		var m__111 = 1;
		var m__211 = -centery;
		var m__021 = 0;
		var m__121 = 0;
		var m__221 = 1;
		var _this__002 = _this__001 * m__001 + _this__101 * m__011 + _this__201 * m__021;
		var _this__102 = _this__001 * m__101 + _this__101 * m__111 + _this__201 * m__121;
		var _this__202 = _this__001 * m__201 + _this__101 * m__211 + _this__201 * m__221;
		var _this__012 = _this__011 * m__001 + _this__111 * m__011 + _this__211 * m__021;
		var _this__112 = _this__011 * m__101 + _this__111 * m__111 + _this__211 * m__121;
		var _this__212 = _this__011 * m__201 + _this__111 * m__211 + _this__211 * m__221;
		var _this__022 = _this__021 * m__001 + _this__121 * m__011 + _this__221 * m__021;
		var _this__122 = _this__021 * m__101 + _this__121 * m__111 + _this__221 * m__121;
		var _this__222 = _this__021 * m__201 + _this__121 * m__211 + _this__221 * m__221;
		var m = this.transformations[this.transformations.length - 1];
		var temp__00 = _this__002 * m._00 + _this__102 * m._01 + _this__202 * m._02;
		var temp__10 = _this__002 * m._10 + _this__102 * m._11 + _this__202 * m._12;
		var temp__20 = _this__002 * m._20 + _this__102 * m._21 + _this__202 * m._22;
		var temp__01 = _this__012 * m._00 + _this__112 * m._01 + _this__212 * m._02;
		var temp__11 = _this__012 * m._10 + _this__112 * m._11 + _this__212 * m._12;
		var temp__21 = _this__012 * m._20 + _this__112 * m._21 + _this__212 * m._22;
		var temp__02 = _this__022 * m._00 + _this__122 * m._01 + _this__222 * m._02;
		var temp__12 = _this__022 * m._10 + _this__122 * m._11 + _this__222 * m._12;
		var temp__22 = _this__022 * m._20 + _this__122 * m._21 + _this__222 * m._22;
		this.transformations[this.transformations.length - 1]._00 = temp__00;
		this.transformations[this.transformations.length - 1]._01 = temp__01;
		this.transformations[this.transformations.length - 1]._02 = temp__02;
		this.transformations[this.transformations.length - 1]._10 = temp__10;
		this.transformations[this.transformations.length - 1]._11 = temp__11;
		this.transformations[this.transformations.length - 1]._12 = temp__12;
		this.transformations[this.transformations.length - 1]._20 = temp__20;
		this.transformations[this.transformations.length - 1]._21 = temp__21;
		this.transformations[this.transformations.length - 1]._22 = temp__22;
	}
	,pushRotation: function(angle,centerx,centery) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = centerx;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = centery;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var m__00 = Math.cos(angle);
		var m__10 = -Math.sin(angle);
		var m__20 = 0;
		var m__01 = Math.sin(angle);
		var m__11 = Math.cos(angle);
		var m__21 = 0;
		var m__02 = 0;
		var m__12 = 0;
		var m__22 = 1;
		var _this__001 = _this__00 * m__00 + _this__10 * m__01 + _this__20 * m__02;
		var _this__101 = _this__00 * m__10 + _this__10 * m__11 + _this__20 * m__12;
		var _this__201 = _this__00 * m__20 + _this__10 * m__21 + _this__20 * m__22;
		var _this__011 = _this__01 * m__00 + _this__11 * m__01 + _this__21 * m__02;
		var _this__111 = _this__01 * m__10 + _this__11 * m__11 + _this__21 * m__12;
		var _this__211 = _this__01 * m__20 + _this__11 * m__21 + _this__21 * m__22;
		var _this__021 = _this__02 * m__00 + _this__12 * m__01 + _this__22 * m__02;
		var _this__121 = _this__02 * m__10 + _this__12 * m__11 + _this__22 * m__12;
		var _this__221 = _this__02 * m__20 + _this__12 * m__21 + _this__22 * m__22;
		var m__001 = 1;
		var m__101 = 0;
		var m__201 = -centerx;
		var m__011 = 0;
		var m__111 = 1;
		var m__211 = -centery;
		var m__021 = 0;
		var m__121 = 0;
		var m__221 = 1;
		var _this__002 = _this__001 * m__001 + _this__101 * m__011 + _this__201 * m__021;
		var _this__102 = _this__001 * m__101 + _this__101 * m__111 + _this__201 * m__121;
		var _this__202 = _this__001 * m__201 + _this__101 * m__211 + _this__201 * m__221;
		var _this__012 = _this__011 * m__001 + _this__111 * m__011 + _this__211 * m__021;
		var _this__112 = _this__011 * m__101 + _this__111 * m__111 + _this__211 * m__121;
		var _this__212 = _this__011 * m__201 + _this__111 * m__211 + _this__211 * m__221;
		var _this__022 = _this__021 * m__001 + _this__121 * m__011 + _this__221 * m__021;
		var _this__122 = _this__021 * m__101 + _this__121 * m__111 + _this__221 * m__121;
		var _this__222 = _this__021 * m__201 + _this__121 * m__211 + _this__221 * m__221;
		var m = this.transformations[this.transformations.length - 1];
		this.pushTransformation(new kha_math_FastMatrix3(_this__002 * m._00 + _this__102 * m._01 + _this__202 * m._02,_this__002 * m._10 + _this__102 * m._11 + _this__202 * m._12,_this__002 * m._20 + _this__102 * m._21 + _this__202 * m._22,_this__012 * m._00 + _this__112 * m._01 + _this__212 * m._02,_this__012 * m._10 + _this__112 * m._11 + _this__212 * m._12,_this__012 * m._20 + _this__112 * m._21 + _this__212 * m._22,_this__022 * m._00 + _this__122 * m._01 + _this__222 * m._02,_this__022 * m._10 + _this__122 * m._11 + _this__222 * m._12,_this__022 * m._20 + _this__122 * m._21 + _this__222 * m._22));
	}
	,pushOpacity: function(opacity) {
		this.setOpacity(opacity);
		this.opacities.push(opacity);
	}
	,popOpacity: function() {
		var ret = this.opacities.pop();
		this.setOpacity(this.get_opacity());
		return ret;
	}
	,get_opacity: function() {
		return this.opacities[this.opacities.length - 1];
	}
	,set_opacity: function(opacity) {
		this.setOpacity(opacity);
		return this.opacities[this.opacities.length - 1] = opacity;
	}
	,scissor: function(x,y,width,height) {
	}
	,disableScissor: function() {
	}
	,pipe: null
	,get_pipeline: function() {
		return this.pipe;
	}
	,set_pipeline: function(pipeline) {
		this.setPipeline(pipeline);
		return this.pipe = pipeline;
	}
	,transformations: null
	,opacities: null
	,myFontSize: null
	,setTransformation: function(transformation) {
	}
	,setOpacity: function(opacity) {
	}
	,setPipeline: function(pipeline) {
	}
	,__class__: kha_graphics2_Graphics
};
var kha_graphics2_Graphics1 = function(canvas) {
	this.canvas = canvas;
};
$hxClasses["kha.graphics2.Graphics1"] = kha_graphics2_Graphics1;
kha_graphics2_Graphics1.__name__ = true;
kha_graphics2_Graphics1.__interfaces__ = [kha_graphics1_Graphics];
kha_graphics2_Graphics1.prototype = {
	canvas: null
	,texture: null
	,pixels: null
	,begin: function() {
		if(this.texture == null) {
			this.texture = kha_Image.create(this.canvas.get_width(),this.canvas.get_height(),kha_graphics4_TextureFormat.RGBA32,kha_graphics4_Usage.ReadableUsage);
		}
		this.pixels = this.texture.lock();
	}
	,end: function() {
		this.texture.unlock();
		this.canvas.get_g2().begin();
		this.canvas.get_g2().drawImage(this.texture,0,0);
		this.canvas.get_g2().end();
	}
	,setPixel: function(x,y,color) {
		this.pixels.setInt32(y * this.texture.get_realWidth() * 4 + x * 4,kha__$Color_Color_$Impl_$.fromBytes(color & 255,(color & 65280) >>> 8,(color & 16711680) >>> 16,color >>> 24));
	}
	,__class__: kha_graphics2_Graphics1
};
var kha_graphics2_ImageScaleQuality = $hxEnums["kha.graphics2.ImageScaleQuality"] = { __ename__ : true, __constructs__ : ["Low","High"]
	,Low: {_hx_index:0,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr}
	,High: {_hx_index:1,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr}
};
var kha_graphics2_truetype_VectorOfIntPointer = function() {
};
$hxClasses["kha.graphics2.truetype.VectorOfIntPointer"] = kha_graphics2_truetype_VectorOfIntPointer;
kha_graphics2_truetype_VectorOfIntPointer.__name__ = true;
kha_graphics2_truetype_VectorOfIntPointer.prototype = {
	value: null
	,__class__: kha_graphics2_truetype_VectorOfIntPointer
};
var kha_graphics2_truetype_Stbtt_$temp_$rect = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_rect"] = kha_graphics2_truetype_Stbtt_$temp_$rect;
kha_graphics2_truetype_Stbtt_$temp_$rect.__name__ = true;
kha_graphics2_truetype_Stbtt_$temp_$rect.prototype = {
	x0: null
	,y0: null
	,x1: null
	,y1: null
	,__class__: kha_graphics2_truetype_Stbtt_$temp_$rect
};
var kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"] = kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;
kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.__name__ = true;
kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.prototype = {
	advanceWidth: null
	,leftSideBearing: null
	,__class__: kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics
};
var kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"] = kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics;
kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.__name__ = true;
kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.prototype = {
	ascent: null
	,descent: null
	,lineGap: null
	,__class__: kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics
};
var kha_graphics2_truetype_Stbtt_$temp_$region = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_region"] = kha_graphics2_truetype_Stbtt_$temp_$region;
kha_graphics2_truetype_Stbtt_$temp_$region.__name__ = true;
kha_graphics2_truetype_Stbtt_$temp_$region.prototype = {
	width: null
	,height: null
	,xoff: null
	,yoff: null
	,__class__: kha_graphics2_truetype_Stbtt_$temp_$region
};
var kha_graphics2_truetype_Stbtt_$bakedchar = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_bakedchar"] = kha_graphics2_truetype_Stbtt_$bakedchar;
kha_graphics2_truetype_Stbtt_$bakedchar.__name__ = true;
kha_graphics2_truetype_Stbtt_$bakedchar.prototype = {
	x0: null
	,y0: null
	,x1: null
	,y1: null
	,xoff: null
	,yoff: null
	,xadvance: null
	,__class__: kha_graphics2_truetype_Stbtt_$bakedchar
};
var kha_graphics2_truetype_Stbtt_$aligned_$quad = function() { };
$hxClasses["kha.graphics2.truetype.Stbtt_aligned_quad"] = kha_graphics2_truetype_Stbtt_$aligned_$quad;
kha_graphics2_truetype_Stbtt_$aligned_$quad.__name__ = true;
kha_graphics2_truetype_Stbtt_$aligned_$quad.prototype = {
	x0: null
	,y0: null
	,s0: null
	,t0: null
	,x1: null
	,y1: null
	,s1: null
	,t1: null
	,__class__: kha_graphics2_truetype_Stbtt_$aligned_$quad
};
var kha_graphics2_truetype_Stbtt_$packedchar = function() { };
$hxClasses["kha.graphics2.truetype.Stbtt_packedchar"] = kha_graphics2_truetype_Stbtt_$packedchar;
kha_graphics2_truetype_Stbtt_$packedchar.__name__ = true;
kha_graphics2_truetype_Stbtt_$packedchar.prototype = {
	x0: null
	,y0: null
	,x1: null
	,y1: null
	,xoff: null
	,yoff: null
	,xadvance: null
	,xoff2: null
	,yoff2: null
	,__class__: kha_graphics2_truetype_Stbtt_$packedchar
};
var kha_graphics2_truetype_Stbtt_$pack_$range = function() { };
$hxClasses["kha.graphics2.truetype.Stbtt_pack_range"] = kha_graphics2_truetype_Stbtt_$pack_$range;
kha_graphics2_truetype_Stbtt_$pack_$range.__name__ = true;
kha_graphics2_truetype_Stbtt_$pack_$range.prototype = {
	font_size: null
	,first_unicode_codepoint_in_range: null
	,array_of_unicode_codepoints: null
	,num_chars: null
	,chardata_for_range: null
	,h_oversample: null
	,v_oversample: null
	,__class__: kha_graphics2_truetype_Stbtt_$pack_$range
};
var kha_graphics2_truetype_Stbtt_$pack_$context = function() { };
$hxClasses["kha.graphics2.truetype.Stbtt_pack_context"] = kha_graphics2_truetype_Stbtt_$pack_$context;
kha_graphics2_truetype_Stbtt_$pack_$context.__name__ = true;
kha_graphics2_truetype_Stbtt_$pack_$context.prototype = {
	width: null
	,height: null
	,stride_in_bytes: null
	,padding: null
	,h_oversample: null
	,v_oversample: null
	,pixels: null
	,__class__: kha_graphics2_truetype_Stbtt_$pack_$context
};
var kha_graphics2_truetype_Stbtt_$fontinfo = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_fontinfo"] = kha_graphics2_truetype_Stbtt_$fontinfo;
kha_graphics2_truetype_Stbtt_$fontinfo.__name__ = true;
kha_graphics2_truetype_Stbtt_$fontinfo.prototype = {
	data: null
	,fontstart: null
	,numGlyphs: null
	,loca: null
	,head: null
	,glyf: null
	,hhea: null
	,hmtx: null
	,kern: null
	,index_map: null
	,indexToLocFormat: null
	,__class__: kha_graphics2_truetype_Stbtt_$fontinfo
};
var kha_graphics2_truetype_Stbtt_$vertex = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_vertex"] = kha_graphics2_truetype_Stbtt_$vertex;
kha_graphics2_truetype_Stbtt_$vertex.__name__ = true;
kha_graphics2_truetype_Stbtt_$vertex.prototype = {
	x: null
	,y: null
	,cx: null
	,cy: null
	,type: null
	,padding: null
	,__class__: kha_graphics2_truetype_Stbtt_$vertex
};
var kha_graphics2_truetype_Stbtt_$_$bitmap = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__bitmap"] = kha_graphics2_truetype_Stbtt_$_$bitmap;
kha_graphics2_truetype_Stbtt_$_$bitmap.__name__ = true;
kha_graphics2_truetype_Stbtt_$_$bitmap.prototype = {
	w: null
	,h: null
	,stride: null
	,pixels: null
	,pixels_offset: null
	,__class__: kha_graphics2_truetype_Stbtt_$_$bitmap
};
var kha_graphics2_truetype_Stbtt_$_$edge = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__edge"] = kha_graphics2_truetype_Stbtt_$_$edge;
kha_graphics2_truetype_Stbtt_$_$edge.__name__ = true;
kha_graphics2_truetype_Stbtt_$_$edge.prototype = {
	x0: null
	,y0: null
	,x1: null
	,y1: null
	,invert: null
	,__class__: kha_graphics2_truetype_Stbtt_$_$edge
};
var kha_graphics2_truetype_Stbtt_$_$active_$edge = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__active_edge"] = kha_graphics2_truetype_Stbtt_$_$active_$edge;
kha_graphics2_truetype_Stbtt_$_$active_$edge.__name__ = true;
kha_graphics2_truetype_Stbtt_$_$active_$edge.prototype = {
	next: null
	,fx: null
	,fdx: null
	,fdy: null
	,direction: null
	,sy: null
	,ey: null
	,__class__: kha_graphics2_truetype_Stbtt_$_$active_$edge
};
var kha_graphics2_truetype_Stbtt_$_$point = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__point"] = kha_graphics2_truetype_Stbtt_$_$point;
kha_graphics2_truetype_Stbtt_$_$point.__name__ = true;
kha_graphics2_truetype_Stbtt_$_$point.prototype = {
	x: null
	,y: null
	,__class__: kha_graphics2_truetype_Stbtt_$_$point
};
var kha_graphics2_truetype_StbTruetype = function() { };
$hxClasses["kha.graphics2.truetype.StbTruetype"] = kha_graphics2_truetype_StbTruetype;
kha_graphics2_truetype_StbTruetype.__name__ = true;
kha_graphics2_truetype_StbTruetype.STBTT_assert = function(value) {
	if(!value) {
		throw new js__$Boot_HaxeError("Error");
	}
};
kha_graphics2_truetype_StbTruetype.STBTT_POINT_SIZE = function(x) {
	return -x;
};
kha_graphics2_truetype_StbTruetype.ttBYTE = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	return p.readU8(pos);
};
kha_graphics2_truetype_StbTruetype.ttCHAR = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var n = p.readU8(pos);
	if(n >= 128) {
		return n - 256;
	}
	return n;
};
kha_graphics2_truetype_StbTruetype.ttUSHORT = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	return ch2 | ch1 << 8;
};
kha_graphics2_truetype_StbTruetype.ttSHORT = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var n = ch2 | ch1 << 8;
	if((n & 32768) != 0) {
		return n - 65536;
	}
	return n;
};
kha_graphics2_truetype_StbTruetype.ttULONG = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var ch3 = p.readU8(pos + 2);
	var ch4 = p.readU8(pos + 3);
	return ch4 | ch3 << 8 | ch2 << 16 | ch1 << 24;
};
kha_graphics2_truetype_StbTruetype.ttLONG = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var ch3 = p.readU8(pos + 2);
	var ch4 = p.readU8(pos + 3);
	return ch4 | ch3 << 8 | ch2 << 16 | ch1 << 24;
};
kha_graphics2_truetype_StbTruetype.ttFixed = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var ch3 = p.readU8(pos + 2);
	var ch4 = p.readU8(pos + 3);
	return ch4 | ch3 << 8 | ch2 << 16 | ch1 << 24;
};
kha_graphics2_truetype_StbTruetype.stbtt_tag4 = function(p,pos,c0,c1,c2,c3) {
	if(p.readU8(pos) == c0 && p.readU8(pos + 1) == c1 && p.readU8(pos + 2) == c2) {
		return p.readU8(pos + 3) == c3;
	} else {
		return false;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_tag = function(p,pos,str) {
	var c0 = HxOverrides.cca(str,0);
	var c1 = HxOverrides.cca(str,1);
	var c2 = HxOverrides.cca(str,2);
	var c3 = HxOverrides.cca(str,3);
	if(p.readU8(pos) == c0 && p.readU8(pos + 1) == c1 && p.readU8(pos + 2) == c2) {
		return p.readU8(pos + 3) == c3;
	} else {
		return false;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__isfont = function(font) {
	var c0 = HxOverrides.cca("1",0);
	if(font.readU8(0) == c0 && font.readU8(1) == 0 && font.readU8(2) == 0 && font.readU8(3) == 0) {
		return true;
	}
	var c01 = HxOverrides.cca("typ1",0);
	var c1 = HxOverrides.cca("typ1",1);
	var c2 = HxOverrides.cca("typ1",2);
	var c3 = HxOverrides.cca("typ1",3);
	if(font.readU8(0) == c01 && font.readU8(1) == c1 && font.readU8(2) == c2 && font.readU8(3) == c3) {
		return true;
	}
	var c02 = HxOverrides.cca("OTTO",0);
	var c11 = HxOverrides.cca("OTTO",1);
	var c21 = HxOverrides.cca("OTTO",2);
	var c31 = HxOverrides.cca("OTTO",3);
	if(font.readU8(0) == c02 && font.readU8(1) == c11 && font.readU8(2) == c21 && font.readU8(3) == c31) {
		return true;
	}
	if(font.readU8(0) == 0 && font.readU8(1) == 1 && font.readU8(2) == 0 && font.readU8(3) == 0) {
		return true;
	}
	return false;
};
kha_graphics2_truetype_StbTruetype.stbtt__find_table = function(data,fontstart,tag) {
	var pos = fontstart + 4;
	var ch1 = data.readU8(pos);
	var ch2 = data.readU8(pos + 1);
	var num_tables = ch2 | ch1 << 8;
	var tabledir = fontstart + 12;
	var _g = 0;
	var _g1 = num_tables;
	while(_g < _g1) {
		var i = _g++;
		var loc = tabledir + 16 * i;
		var c0 = HxOverrides.cca(tag,0);
		var c1 = HxOverrides.cca(tag,1);
		var c2 = HxOverrides.cca(tag,2);
		var c3 = HxOverrides.cca(tag,3);
		if(data.readU8(loc) == c0 && data.readU8(loc + 1) == c1 && data.readU8(loc + 2) == c2 && data.readU8(loc + 3) == c3) {
			var pos1 = loc + 8;
			var ch11 = data.readU8(pos1);
			var ch21 = data.readU8(pos1 + 1);
			var ch3 = data.readU8(pos1 + 2);
			var ch4 = data.readU8(pos1 + 3);
			return ch4 | ch3 << 8 | ch21 << 16 | ch11 << 24;
		}
	}
	return 0;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex = function(font_collection,index) {
	if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(font_collection)) {
		if(index == 0) {
			return 0;
		} else {
			return -1;
		}
	}
	var c0 = HxOverrides.cca("ttcf",0);
	var c1 = HxOverrides.cca("ttcf",1);
	var c2 = HxOverrides.cca("ttcf",2);
	var c3 = HxOverrides.cca("ttcf",3);
	if(font_collection.readU8(0) == c0 && font_collection.readU8(1) == c1 && font_collection.readU8(2) == c2 && font_collection.readU8(3) == c3) {
		var tmp;
		var ch1 = font_collection.readU8(4);
		var ch2 = font_collection.readU8(5);
		var ch3 = font_collection.readU8(6);
		var ch4 = font_collection.readU8(7);
		if((ch4 | ch3 << 8 | ch2 << 16 | ch1 << 24) != 65536) {
			var ch11 = font_collection.readU8(4);
			var ch21 = font_collection.readU8(5);
			var ch31 = font_collection.readU8(6);
			var ch41 = font_collection.readU8(7);
			tmp = (ch41 | ch31 << 8 | ch21 << 16 | ch11 << 24) == 131072;
		} else {
			tmp = true;
		}
		if(tmp) {
			var ch12 = font_collection.readU8(8);
			var ch22 = font_collection.readU8(9);
			var ch32 = font_collection.readU8(10);
			var ch42 = font_collection.readU8(11);
			var n = ch42 | ch32 << 8 | ch22 << 16 | ch12 << 24;
			if(index >= n) {
				return -1;
			}
			var pos = 12 + index * 4;
			var ch13 = font_collection.readU8(pos);
			var ch23 = font_collection.readU8(pos + 1);
			var ch33 = font_collection.readU8(pos + 2);
			var ch43 = font_collection.readU8(pos + 3);
			return ch43 | ch33 << 8 | ch23 << 16 | ch13 << 24;
		}
	}
	return -1;
};
kha_graphics2_truetype_StbTruetype.stbtt_InitFont = function(info,data,fontstart) {
	info.data = data;
	info.fontstart = fontstart;
	var cmap = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"cmap");
	info.loca = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"loca");
	info.head = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"head");
	info.glyf = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"glyf");
	info.hhea = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"hhea");
	info.hmtx = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"hmtx");
	info.kern = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"kern");
	if(cmap == 0 || info.loca == 0 || info.head == 0 || info.glyf == 0 || info.hhea == 0 || info.hmtx == 0) {
		return false;
	}
	var t = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"maxp");
	if(t != 0) {
		var pos = t + 4;
		var ch1 = data.readU8(pos);
		var ch2 = data.readU8(pos + 1);
		info.numGlyphs = ch2 | ch1 << 8;
	} else {
		info.numGlyphs = 65535;
	}
	var pos1 = cmap + 2;
	var ch11 = data.readU8(pos1);
	var ch21 = data.readU8(pos1 + 1);
	var numTables = ch21 | ch11 << 8;
	info.index_map = 0;
	var _g = 0;
	var _g1 = numTables;
	while(_g < _g1) {
		var i = _g++;
		var encoding_record = cmap + 4 + 8 * i;
		var ch12 = data.readU8(encoding_record);
		var ch22 = data.readU8(encoding_record + 1);
		switch(ch22 | ch12 << 8) {
		case 0:
			var pos2 = encoding_record + 4;
			var ch13 = data.readU8(pos2);
			var ch23 = data.readU8(pos2 + 1);
			var ch3 = data.readU8(pos2 + 2);
			var ch4 = data.readU8(pos2 + 3);
			info.index_map = cmap + (ch4 | ch3 << 8 | ch23 << 16 | ch13 << 24);
			break;
		case 3:
			var pos3 = encoding_record + 2;
			var ch14 = data.readU8(pos3);
			var ch24 = data.readU8(pos3 + 1);
			switch(ch24 | ch14 << 8) {
			case 1:case 10:
				var pos4 = encoding_record + 4;
				var ch15 = data.readU8(pos4);
				var ch25 = data.readU8(pos4 + 1);
				var ch31 = data.readU8(pos4 + 2);
				var ch41 = data.readU8(pos4 + 3);
				info.index_map = cmap + (ch41 | ch31 << 8 | ch25 << 16 | ch15 << 24);
				break;
			}
			break;
		}
	}
	if(info.index_map == 0) {
		return false;
	}
	var pos5 = info.head + 50;
	var ch16 = data.readU8(pos5);
	var ch26 = data.readU8(pos5 + 1);
	info.indexToLocFormat = ch26 | ch16 << 8;
	return true;
};
kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex = function(info,unicode_codepoint) {
	var data = info.data;
	var index_map = info.index_map;
	var ch1 = data.readU8(index_map);
	var ch2 = data.readU8(index_map + 1);
	var format = ch2 | ch1 << 8;
	if(format == 0) {
		var pos = index_map + 2;
		var ch11 = data.readU8(pos);
		var ch21 = data.readU8(pos + 1);
		var bytes = ch21 | ch11 << 8;
		if(unicode_codepoint < bytes - 6) {
			return data.readU8(index_map + 6 + unicode_codepoint);
		}
		return 0;
	} else if(format == 6) {
		var pos1 = index_map + 6;
		var ch12 = data.readU8(pos1);
		var ch22 = data.readU8(pos1 + 1);
		var first = ch22 | ch12 << 8;
		var pos2 = index_map + 8;
		var ch13 = data.readU8(pos2);
		var ch23 = data.readU8(pos2 + 1);
		var count = ch23 | ch13 << 8;
		if(unicode_codepoint >= first && unicode_codepoint < first + count) {
			var pos3 = index_map + 10 + (unicode_codepoint - first) * 2;
			var ch14 = data.readU8(pos3);
			var ch24 = data.readU8(pos3 + 1);
			return ch24 | ch14 << 8;
		}
		return 0;
	} else if(format == 2) {
		throw new js__$Boot_HaxeError("Error");
	} else if(format == 4) {
		var pos4 = index_map + 6;
		var ch15 = data.readU8(pos4);
		var ch25 = data.readU8(pos4 + 1);
		var segcount = (ch25 | ch15 << 8) >> 1;
		var pos5 = index_map + 8;
		var ch16 = data.readU8(pos5);
		var ch26 = data.readU8(pos5 + 1);
		var searchRange = (ch26 | ch16 << 8) >> 1;
		var pos6 = index_map + 10;
		var ch17 = data.readU8(pos6);
		var ch27 = data.readU8(pos6 + 1);
		var entrySelector = ch27 | ch17 << 8;
		var pos7 = index_map + 12;
		var ch18 = data.readU8(pos7);
		var ch28 = data.readU8(pos7 + 1);
		var rangeShift = (ch28 | ch18 << 8) >> 1;
		var endCount = index_map + 14;
		var search = endCount;
		if(unicode_codepoint > 65535) {
			return 0;
		}
		var pos8 = search + rangeShift * 2;
		var ch19 = data.readU8(pos8);
		var ch29 = data.readU8(pos8 + 1);
		if(unicode_codepoint >= (ch29 | ch19 << 8)) {
			search += rangeShift * 2;
		}
		search -= 2;
		while(entrySelector != 0) {
			searchRange >>= 1;
			var pos9 = search + searchRange * 2;
			var ch110 = data.readU8(pos9);
			var ch210 = data.readU8(pos9 + 1);
			var end = ch210 | ch110 << 8;
			if(unicode_codepoint > end) {
				search += searchRange * 2;
			}
			--entrySelector;
		}
		search += 2;
		var item = search - endCount >> 1;
		var pos10 = endCount + 2 * item;
		var ch111 = data.readU8(pos10);
		var ch211 = data.readU8(pos10 + 1);
		if(unicode_codepoint > (ch211 | ch111 << 8)) {
			throw new js__$Boot_HaxeError("Error");
		}
		var pos11 = index_map + 14 + segcount * 2 + 2 + 2 * item;
		var ch112 = data.readU8(pos11);
		var ch212 = data.readU8(pos11 + 1);
		var start = ch212 | ch112 << 8;
		if(unicode_codepoint < start) {
			return 0;
		}
		var pos12 = index_map + 14 + segcount * 6 + 2 + 2 * item;
		var ch113 = data.readU8(pos12);
		var ch213 = data.readU8(pos12 + 1);
		var offset = ch213 | ch113 << 8;
		if(offset == 0) {
			var pos13 = index_map + 14 + segcount * 4 + 2 + 2 * item;
			var ch114 = data.readU8(pos13);
			var ch214 = data.readU8(pos13 + 1);
			var n = ch214 | ch114 << 8;
			return unicode_codepoint + ((n & 32768) != 0 ? n - 65536 : n);
		}
		var pos14 = offset + (unicode_codepoint - start) * 2 + index_map + 14 + segcount * 6 + 2 + 2 * item;
		var ch115 = data.readU8(pos14);
		var ch215 = data.readU8(pos14 + 1);
		return ch215 | ch115 << 8;
	} else if(format == 12 || format == 13) {
		var pos15 = index_map + 12;
		var ch116 = data.readU8(pos15);
		var ch216 = data.readU8(pos15 + 1);
		var ch3 = data.readU8(pos15 + 2);
		var ch4 = data.readU8(pos15 + 3);
		var ngroups = ch4 | ch3 << 8 | ch216 << 16 | ch116 << 24;
		var low = 0;
		var high = ngroups;
		while(low < high) {
			var mid = low + (high - low >> 1);
			var pos16 = index_map + 16 + mid * 12;
			var ch117 = data.readU8(pos16);
			var ch217 = data.readU8(pos16 + 1);
			var ch31 = data.readU8(pos16 + 2);
			var ch41 = data.readU8(pos16 + 3);
			var start_char = ch41 | ch31 << 8 | ch217 << 16 | ch117 << 24;
			var pos17 = index_map + 16 + mid * 12 + 4;
			var ch118 = data.readU8(pos17);
			var ch218 = data.readU8(pos17 + 1);
			var ch32 = data.readU8(pos17 + 2);
			var ch42 = data.readU8(pos17 + 3);
			var end_char = ch42 | ch32 << 8 | ch218 << 16 | ch118 << 24;
			if(unicode_codepoint < start_char) {
				high = mid;
			} else if(unicode_codepoint > end_char) {
				low = mid + 1;
			} else {
				var pos18 = index_map + 16 + mid * 12 + 8;
				var ch119 = data.readU8(pos18);
				var ch219 = data.readU8(pos18 + 1);
				var ch33 = data.readU8(pos18 + 2);
				var ch43 = data.readU8(pos18 + 3);
				var start_glyph = ch43 | ch33 << 8 | ch219 << 16 | ch119 << 24;
				if(format == 12) {
					return start_glyph + unicode_codepoint - start_char;
				} else {
					return start_glyph;
				}
			}
		}
		return 0;
	}
	throw new js__$Boot_HaxeError("Error");
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointShape = function(info,unicode_codepoint) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,unicode_codepoint));
};
kha_graphics2_truetype_StbTruetype.stbtt_setvertex = function(v,type,x,y,cx,cy) {
	v.type = type;
	v.x = x;
	v.y = y;
	v.cx = cx;
	v.cy = cy;
};
kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset = function(info,glyph_index) {
	var g1;
	var g2;
	if(glyph_index >= info.numGlyphs) {
		return -1;
	}
	if(info.indexToLocFormat >= 2) {
		return -1;
	}
	if(info.indexToLocFormat == 0) {
		var info1 = info.glyf;
		var p = info.data;
		var pos = info.loca + glyph_index * 2;
		var ch1 = p.readU8(pos);
		var ch2 = p.readU8(pos + 1);
		g1 = info1 + (ch2 | ch1 << 8) * 2;
		var info2 = info.glyf;
		var p1 = info.data;
		var pos1 = info.loca + glyph_index * 2 + 2;
		var ch11 = p1.readU8(pos1);
		var ch21 = p1.readU8(pos1 + 1);
		g2 = info2 + (ch21 | ch11 << 8) * 2;
	} else {
		var info3 = info.glyf;
		var p2 = info.data;
		var pos2 = info.loca + glyph_index * 4;
		var ch12 = p2.readU8(pos2);
		var ch22 = p2.readU8(pos2 + 1);
		var ch3 = p2.readU8(pos2 + 2);
		var ch4 = p2.readU8(pos2 + 3);
		g1 = info3 + (ch4 | ch3 << 8 | ch22 << 16 | ch12 << 24);
		var info4 = info.glyf;
		var p3 = info.data;
		var pos3 = info.loca + glyph_index * 4 + 4;
		var ch13 = p3.readU8(pos3);
		var ch23 = p3.readU8(pos3 + 1);
		var ch31 = p3.readU8(pos3 + 2);
		var ch41 = p3.readU8(pos3 + 3);
		g2 = info4 + (ch41 | ch31 << 8 | ch23 << 16 | ch13 << 24);
	}
	if(g1 == g2) {
		return -1;
	} else {
		return g1;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox = function(info,glyph_index,rect) {
	var g = kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);
	if(g < 0) {
		return false;
	}
	var p = info.data;
	var pos = g + 2;
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var n = ch2 | ch1 << 8;
	rect.x0 = (n & 32768) != 0 ? n - 65536 : n;
	var p1 = info.data;
	var pos1 = g + 4;
	var ch11 = p1.readU8(pos1);
	var ch21 = p1.readU8(pos1 + 1);
	var n1 = ch21 | ch11 << 8;
	rect.y0 = (n1 & 32768) != 0 ? n1 - 65536 : n1;
	var p2 = info.data;
	var pos2 = g + 6;
	var ch12 = p2.readU8(pos2);
	var ch22 = p2.readU8(pos2 + 1);
	var n2 = ch22 | ch12 << 8;
	rect.x1 = (n2 & 32768) != 0 ? n2 - 65536 : n2;
	var p3 = info.data;
	var pos3 = g + 8;
	var ch13 = p3.readU8(pos3);
	var ch23 = p3.readU8(pos3 + 1);
	var n3 = ch23 | ch13 << 8;
	rect.y1 = (n3 & 32768) != 0 ? n3 - 65536 : n3;
	return true;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBox = function(info,codepoint,rect) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(info,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,codepoint),rect);
};
kha_graphics2_truetype_StbTruetype.stbtt_IsGlyphEmpty = function(info,glyph_index) {
	var g = kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);
	if(g < 0) {
		return true;
	}
	var p = info.data;
	var ch1 = p.readU8(g);
	var ch2 = p.readU8(g + 1);
	var n = ch2 | ch1 << 8;
	var numberOfContours = (n & 32768) != 0 ? n - 65536 : n;
	return numberOfContours == 0;
};
kha_graphics2_truetype_StbTruetype.stbtt__close_shape = function(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy) {
	if(start_off) {
		if(was_off) {
			kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,cx + scx >> 1,cy + scy >> 1,cx,cy);
		}
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,sx,sy,scx,scy);
	} else if(was_off) {
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,sx,sy,cx,cy);
	} else {
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],2,sx,sy,0,0);
	}
	return num_vertices;
};
kha_graphics2_truetype_StbTruetype.copyVertices = function(from,to,offset,count) {
	var _g = 0;
	var _g1 = count;
	while(_g < _g1) {
		var i = _g++;
		to[offset + i] = from[i];
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape = function(info,glyph_index) {
	var endPtsOfContours;
	var data = info.data;
	var vertices = null;
	var num_vertices = 0;
	var g = kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);
	if(g < 0) {
		return null;
	}
	var ch1 = data.readU8(g);
	var ch2 = data.readU8(g + 1);
	var n = ch2 | ch1 << 8;
	var numberOfContours = (n & 32768) != 0 ? n - 65536 : n;
	if(numberOfContours > 0) {
		var flags = 0;
		var j = 0;
		var next_move = 0;
		var off = 0;
		var was_off = false;
		var start_off = false;
		var pointsIndex = 0;
		endPtsOfContours = data.sub(g + 10,data.get_length() - (g + 10));
		var pos = g + 10 + numberOfContours * 2;
		var ch11 = data.readU8(pos);
		var ch21 = data.readU8(pos + 1);
		var ins = ch21 | ch11 << 8;
		var points = data.sub(g + 10 + numberOfContours * 2 + 2 + ins,data.get_length() - (g + 10 + numberOfContours * 2 + 2 + ins));
		var pos1 = numberOfContours * 2 - 2;
		var ch12 = endPtsOfContours.readU8(pos1);
		var ch22 = endPtsOfContours.readU8(pos1 + 1);
		var n1 = 1 + (ch22 | ch12 << 8);
		var m = n1 + 2 * numberOfContours;
		var this1 = new Array(m);
		vertices = this1;
		if(vertices == null) {
			return null;
		} else {
			var _g = 0;
			var _g1 = vertices.length;
			while(_g < _g1) {
				var i = _g++;
				vertices[i] = new kha_graphics2_truetype_Stbtt_$vertex();
			}
		}
		next_move = 0;
		var flagcount = 0;
		off = m - n1;
		var _g2 = 0;
		var _g11 = n1;
		while(_g2 < _g11) {
			var i1 = _g2++;
			if(flagcount == 0) {
				flags = points.readU8(pointsIndex++);
				if((flags & 8) != 0) {
					flagcount = points.readU8(pointsIndex++);
				}
			} else {
				--flagcount;
			}
			vertices[off + i1].type = flags;
		}
		var x = 0;
		var _g21 = 0;
		var _g3 = n1;
		while(_g21 < _g3) {
			var i2 = _g21++;
			flags = vertices[off + i2].type;
			if((flags & 2) != 0) {
				var dx = points.readU8(pointsIndex++);
				x += (flags & 16) != 0 ? dx : -dx;
			} else if((flags & 16) == 0) {
				var value;
				var ch13 = points.readU8(pointsIndex);
				var ch23 = points.readU8(pointsIndex + 1);
				var n2 = ch23 | ch13 << 8;
				if((n2 & 32768) != 0) {
					value = n2 - 65536;
				} else {
					value = n2;
				}
				x += value;
				pointsIndex += 2;
			}
			vertices[off + i2].x = x;
		}
		var y = 0;
		var _g4 = 0;
		var _g5 = n1;
		while(_g4 < _g5) {
			var i3 = _g4++;
			flags = vertices[off + i3].type;
			if((flags & 4) != 0) {
				var dy = points.readU8(pointsIndex++);
				y += (flags & 32) != 0 ? dy : -dy;
			} else if((flags & 32) == 0) {
				var value1;
				var ch14 = points.readU8(pointsIndex);
				var ch24 = points.readU8(pointsIndex + 1);
				var n3 = ch24 | ch14 << 8;
				if((n3 & 32768) != 0) {
					value1 = n3 - 65536;
				} else {
					value1 = n3;
				}
				y += value1;
				pointsIndex += 2;
			}
			vertices[off + i3].y = y;
		}
		num_vertices = 0;
		var scy = 0;
		var scx = scy;
		var cy = scx;
		var cx = cy;
		var sy = cx;
		var sx = sy;
		var i4 = 0;
		while(i4 < n1) {
			flags = vertices[off + i4].type;
			x = vertices[off + i4].x;
			y = vertices[off + i4].y;
			if(next_move == i4) {
				if(i4 != 0) {
					num_vertices = kha_graphics2_truetype_StbTruetype.stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy);
				}
				start_off = (flags & 1) == 0;
				if(start_off) {
					scx = x;
					scy = y;
					if((vertices[off + i4 + 1].type & 1) == 0) {
						sx = x + vertices[off + i4 + 1].x >> 1;
						sy = y + vertices[off + i4 + 1].y >> 1;
					} else {
						sx = vertices[off + i4 + 1].x;
						sy = vertices[off + i4 + 1].y;
						++i4;
					}
				} else {
					sx = x;
					sy = y;
				}
				kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],1,sx,sy,0,0);
				was_off = false;
				var pos2 = j * 2;
				var ch15 = endPtsOfContours.readU8(pos2);
				var ch25 = endPtsOfContours.readU8(pos2 + 1);
				next_move = 1 + (ch25 | ch15 << 8);
				++j;
			} else if((flags & 1) == 0) {
				if(was_off) {
					kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,cx + x >> 1,cy + y >> 1,cx,cy);
				}
				cx = x;
				cy = y;
				was_off = true;
			} else {
				if(was_off) {
					kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,x,y,cx,cy);
				} else {
					kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],2,x,y,0,0);
				}
				was_off = false;
			}
			++i4;
		}
		num_vertices = kha_graphics2_truetype_StbTruetype.stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy);
	} else if(numberOfContours == -1) {
		var more = 1;
		var comp = data.sub(g + 10,data.get_length() - (g + 10));
		var compIndex = 0;
		num_vertices = 0;
		vertices = null;
		while(more != 0) {
			var comp_num_verts = 0;
			var i5;
			var comp_verts = null;
			var tmp = null;
			var mtx0 = 1;
			var mtx1 = 0;
			var mtx2 = 0;
			var mtx3 = 1;
			var mtx4 = 0;
			var mtx5 = 0;
			var ch16 = comp.readU8(compIndex);
			var ch26 = comp.readU8(compIndex + 1);
			var n4 = ch26 | ch16 << 8;
			var flags1 = (n4 & 32768) != 0 ? n4 - 65536 : n4;
			compIndex += 2;
			var ch17 = comp.readU8(compIndex);
			var ch27 = comp.readU8(compIndex + 1);
			var n5 = ch27 | ch17 << 8;
			var gidx = (n5 & 32768) != 0 ? n5 - 65536 : n5;
			compIndex += 2;
			if((flags1 & 2) != 0) {
				if((flags1 & 1) != 0) {
					var ch18 = comp.readU8(compIndex);
					var ch28 = comp.readU8(compIndex + 1);
					var n6 = ch28 | ch18 << 8;
					mtx4 = (n6 & 32768) != 0 ? n6 - 65536 : n6;
					compIndex += 2;
					var ch19 = comp.readU8(compIndex);
					var ch29 = comp.readU8(compIndex + 1);
					var n7 = ch29 | ch19 << 8;
					mtx5 = (n7 & 32768) != 0 ? n7 - 65536 : n7;
					compIndex += 2;
				} else {
					var n8 = comp.readU8(compIndex);
					mtx4 = n8 >= 128 ? n8 - 256 : n8;
					++compIndex;
					var n9 = comp.readU8(compIndex);
					mtx5 = n9 >= 128 ? n9 - 256 : n9;
					++compIndex;
				}
			} else {
				throw new js__$Boot_HaxeError("Error");
			}
			if((flags1 & 8) != 0) {
				var ch110 = comp.readU8(compIndex);
				var ch210 = comp.readU8(compIndex + 1);
				var n10 = ch210 | ch110 << 8;
				mtx3 = ((n10 & 32768) != 0 ? n10 - 65536 : n10) / 16384.0;
				mtx0 = mtx3;
				compIndex += 2;
				mtx2 = 0;
				mtx1 = mtx2;
			} else if((flags1 & 64) != 0) {
				var ch111 = comp.readU8(compIndex);
				var ch211 = comp.readU8(compIndex + 1);
				var n11 = ch211 | ch111 << 8;
				mtx0 = ((n11 & 32768) != 0 ? n11 - 65536 : n11) / 16384.0;
				compIndex += 2;
				mtx2 = 0;
				mtx1 = mtx2;
				var ch112 = comp.readU8(compIndex);
				var ch212 = comp.readU8(compIndex + 1);
				var n12 = ch212 | ch112 << 8;
				mtx3 = ((n12 & 32768) != 0 ? n12 - 65536 : n12) / 16384.0;
				compIndex += 2;
			} else if((flags1 & 128) != 0) {
				var ch113 = comp.readU8(compIndex);
				var ch213 = comp.readU8(compIndex + 1);
				var n13 = ch213 | ch113 << 8;
				mtx0 = ((n13 & 32768) != 0 ? n13 - 65536 : n13) / 16384.0;
				compIndex += 2;
				var ch114 = comp.readU8(compIndex);
				var ch214 = comp.readU8(compIndex + 1);
				var n14 = ch214 | ch114 << 8;
				mtx1 = ((n14 & 32768) != 0 ? n14 - 65536 : n14) / 16384.0;
				compIndex += 2;
				var ch115 = comp.readU8(compIndex);
				var ch215 = comp.readU8(compIndex + 1);
				var n15 = ch215 | ch115 << 8;
				mtx2 = ((n15 & 32768) != 0 ? n15 - 65536 : n15) / 16384.0;
				compIndex += 2;
				var ch116 = comp.readU8(compIndex);
				var ch216 = comp.readU8(compIndex + 1);
				var n16 = ch216 | ch116 << 8;
				mtx3 = ((n16 & 32768) != 0 ? n16 - 65536 : n16) / 16384.0;
				compIndex += 2;
			}
			var m1 = Math.sqrt(mtx0 * mtx0 + mtx1 * mtx1);
			var n17 = Math.sqrt(mtx2 * mtx2 + mtx3 * mtx3);
			comp_verts = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,gidx);
			comp_num_verts = comp_verts == null ? 0 : comp_verts.length;
			if(comp_num_verts > 0) {
				var _g6 = 0;
				var _g12 = comp_num_verts;
				while(_g6 < _g12) {
					var i6 = _g6++;
					var v = comp_verts[i6];
					var x1 = v.x;
					var y1 = v.y;
					v.x = m1 * (mtx0 * x1 + mtx2 * y1 + mtx4) | 0;
					v.y = n17 * (mtx1 * x1 + mtx3 * y1 + mtx5) | 0;
					x1 = v.cx;
					y1 = v.cy;
					v.cx = m1 * (mtx0 * x1 + mtx2 * y1 + mtx4) | 0;
					v.cy = n17 * (mtx1 * x1 + mtx3 * y1 + mtx5) | 0;
				}
				var this2 = new Array(num_vertices + comp_num_verts);
				tmp = this2;
				if(tmp == null) {
					return null;
				}
				if(num_vertices > 0) {
					kha_graphics2_truetype_StbTruetype.copyVertices(vertices,tmp,0,num_vertices);
				}
				kha_graphics2_truetype_StbTruetype.copyVertices(comp_verts,tmp,num_vertices,comp_num_verts);
				vertices = tmp;
				num_vertices += comp_num_verts;
			}
			more = flags1 & 32;
		}
	} else if(numberOfContours < 0) {
		throw new js__$Boot_HaxeError("Error");
	}
	if(vertices == null) {
		return null;
	}
	if(vertices.length < num_vertices) {
		throw new js__$Boot_HaxeError("Error");
	}
	if(num_vertices < vertices.length) {
		var this3 = new Array(num_vertices);
		var tmp1 = this3;
		kha_graphics2_truetype_StbTruetype.copyVertices(vertices,tmp1,0,num_vertices);
		return tmp1;
	} else {
		return vertices;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics = function(info,glyph_index) {
	var p = info.data;
	var pos = info.hhea + 34;
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var numOfLongHorMetrics = ch2 | ch1 << 8;
	var metrics = new kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics();
	if(glyph_index < numOfLongHorMetrics) {
		var p1 = info.data;
		var pos1 = info.hmtx + 4 * glyph_index;
		var ch11 = p1.readU8(pos1);
		var ch21 = p1.readU8(pos1 + 1);
		var n = ch21 | ch11 << 8;
		metrics.advanceWidth = (n & 32768) != 0 ? n - 65536 : n;
		var p2 = info.data;
		var pos2 = info.hmtx + 4 * glyph_index + 2;
		var ch12 = p2.readU8(pos2);
		var ch22 = p2.readU8(pos2 + 1);
		var n1 = ch22 | ch12 << 8;
		metrics.leftSideBearing = (n1 & 32768) != 0 ? n1 - 65536 : n1;
	} else {
		var p3 = info.data;
		var pos3 = info.hmtx + 4 * (numOfLongHorMetrics - 1);
		var ch13 = p3.readU8(pos3);
		var ch23 = p3.readU8(pos3 + 1);
		var n2 = ch23 | ch13 << 8;
		metrics.advanceWidth = (n2 & 32768) != 0 ? n2 - 65536 : n2;
		var p4 = info.data;
		var pos4 = info.hmtx + 4 * numOfLongHorMetrics + 2 * (glyph_index - numOfLongHorMetrics);
		var ch14 = p4.readU8(pos4);
		var ch24 = p4.readU8(pos4 + 1);
		var n3 = ch24 | ch14 << 8;
		metrics.leftSideBearing = (n3 & 32768) != 0 ? n3 - 65536 : n3;
	}
	return metrics;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance = function(info,glyph1,glyph2) {
	var data = info.data.sub(info.kern,info.data.get_length() - info.kern);
	var straw;
	var m;
	if(info.kern == 0) {
		return 0;
	}
	var ch1 = data.readU8(2);
	var ch2 = data.readU8(3);
	if((ch2 | ch1 << 8) < 1) {
		return 0;
	}
	var ch11 = data.readU8(8);
	var ch21 = data.readU8(9);
	if((ch21 | ch11 << 8) != 1) {
		return 0;
	}
	var l = 0;
	var ch12 = data.readU8(10);
	var ch22 = data.readU8(11);
	var r = (ch22 | ch12 << 8) - 1;
	var needle = glyph1 << 16 | glyph2;
	while(l <= r) {
		m = l + r >> 1;
		var pos = 18 + m * 6;
		var ch13 = data.readU8(pos);
		var ch23 = data.readU8(pos + 1);
		var ch3 = data.readU8(pos + 2);
		var ch4 = data.readU8(pos + 3);
		straw = ch4 | ch3 << 8 | ch23 << 16 | ch13 << 24;
		if(needle < straw) {
			r = m - 1;
		} else if(needle > straw) {
			l = m + 1;
		} else {
			var pos1 = 22 + m * 6;
			var ch14 = data.readU8(pos1);
			var ch24 = data.readU8(pos1 + 1);
			var n = ch24 | ch14 << 8;
			if((n & 32768) != 0) {
				return n - 65536;
			} else {
				return n;
			}
		}
	}
	return 0;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointKernAdvance = function(info,ch1,ch2) {
	if(info.kern == 0) {
		return 0;
	}
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphKernAdvance(info,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,ch1),kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,ch2));
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointHMetrics = function(info,codepoint) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(info,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,codepoint));
};
kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics = function(info) {
	var metrics = new kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics();
	var p = info.data;
	var pos = info.hhea + 4;
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var n = ch2 | ch1 << 8;
	metrics.ascent = (n & 32768) != 0 ? n - 65536 : n;
	var p1 = info.data;
	var pos1 = info.hhea + 6;
	var ch11 = p1.readU8(pos1);
	var ch21 = p1.readU8(pos1 + 1);
	var n1 = ch21 | ch11 << 8;
	metrics.descent = (n1 & 32768) != 0 ? n1 - 65536 : n1;
	var p2 = info.data;
	var pos2 = info.hhea + 8;
	var ch12 = p2.readU8(pos2);
	var ch22 = p2.readU8(pos2 + 1);
	var n2 = ch22 | ch12 << 8;
	metrics.lineGap = (n2 & 32768) != 0 ? n2 - 65536 : n2;
	return metrics;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetFontBoundingBox = function(info) {
	var rect = new kha_graphics2_truetype_Stbtt_$temp_$rect();
	var p = info.data;
	var pos = info.head + 36;
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var n = ch2 | ch1 << 8;
	rect.x0 = (n & 32768) != 0 ? n - 65536 : n;
	var p1 = info.data;
	var pos1 = info.head + 38;
	var ch11 = p1.readU8(pos1);
	var ch21 = p1.readU8(pos1 + 1);
	var n1 = ch21 | ch11 << 8;
	rect.y0 = (n1 & 32768) != 0 ? n1 - 65536 : n1;
	var p2 = info.data;
	var pos2 = info.head + 40;
	var ch12 = p2.readU8(pos2);
	var ch22 = p2.readU8(pos2 + 1);
	var n2 = ch22 | ch12 << 8;
	rect.x1 = (n2 & 32768) != 0 ? n2 - 65536 : n2;
	var p3 = info.data;
	var pos3 = info.head + 42;
	var ch13 = p3.readU8(pos3);
	var ch23 = p3.readU8(pos3 + 1);
	var n3 = ch23 | ch13 << 8;
	rect.y1 = (n3 & 32768) != 0 ? n3 - 65536 : n3;
	return rect;
};
kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight = function(info,height) {
	var p = info.data;
	var pos = info.hhea + 4;
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var n = ch2 | ch1 << 8;
	var p1 = info.data;
	var pos1 = info.hhea + 6;
	var ch11 = p1.readU8(pos1);
	var ch21 = p1.readU8(pos1 + 1);
	var n1 = ch21 | ch11 << 8;
	var fheight = ((n & 32768) != 0 ? n - 65536 : n) - ((n1 & 32768) != 0 ? n1 - 65536 : n1);
	return height / fheight;
};
kha_graphics2_truetype_StbTruetype.stbtt_ScaleForMappingEmToPixels = function(info,pixels) {
	var p = info.data;
	var pos = info.head + 18;
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var unitsPerEm = ch2 | ch1 << 8;
	return pixels / unitsPerEm;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel = function(font,glyph,scale_x,scale_y,shift_x,shift_y) {
	var rect = new kha_graphics2_truetype_Stbtt_$temp_$rect();
	if(!kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(font,glyph,rect)) {
		rect.x0 = 0;
		rect.y0 = 0;
		rect.x1 = 0;
		rect.y1 = 0;
	} else {
		var x0 = rect.x0;
		var x1 = rect.x1;
		var y0 = rect.y0;
		var y1 = rect.y1;
		rect.x0 = Math.floor(x0 * scale_x + shift_x);
		rect.y0 = Math.floor(-y1 * scale_y + shift_y);
		rect.x1 = Math.ceil(x1 * scale_x + shift_x);
		rect.y1 = Math.ceil(-y0 * scale_y + shift_y);
	}
	return rect;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox = function(font,glyph,scale_x,scale_y) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(font,glyph,scale_x,scale_y,0.0,0.0);
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel = function(font,codepoint,scale_x,scale_y,shift_x,shift_y) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(font,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(font,codepoint),scale_x,scale_y,shift_x,shift_y);
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBox = function(font,codepoint,scale_x,scale_y) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapBoxSubpixel(font,codepoint,scale_x,scale_y,0.0,0.0);
};
kha_graphics2_truetype_StbTruetype.stbtt__new_active = function(e,eIndex,off_x,start_point) {
	var z = new kha_graphics2_truetype_Stbtt_$_$active_$edge();
	var dxdy = (e[eIndex].x1 - e[eIndex].x0) / (e[eIndex].y1 - e[eIndex].y0);
	if(z == null) {
		return z;
	}
	z.fdx = dxdy;
	z.fdy = dxdy != 0.0 ? 1.0 / dxdy : 0.0;
	z.fx = e[eIndex].x0 + dxdy * (start_point - e[eIndex].y0);
	z.fx -= off_x;
	z.direction = e[eIndex].invert ? 1.0 : -1.0;
	z.sy = e[eIndex].y0;
	z.ey = e[eIndex].y1;
	z.next = null;
	return z;
};
kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge = function(scanline,scanlineIndex,x,e,x0,y0,x1,y1) {
	if(y0 == y1) {
		return;
	}
	if(!(y0 < y1)) {
		throw new js__$Boot_HaxeError("Error");
	}
	if(!(e.sy <= e.ey)) {
		throw new js__$Boot_HaxeError("Error");
	}
	if(y0 > e.ey) {
		return;
	}
	if(y1 < e.sy) {
		return;
	}
	if(y0 < e.sy) {
		x0 += (x1 - x0) * (e.sy - y0) / (y1 - y0);
		y0 = e.sy;
	}
	if(y1 > e.ey) {
		x1 += (x1 - x0) * (e.ey - y1) / (y1 - y0);
		y1 = e.ey;
	}
	if(x0 == x) {
		if(!(x1 <= x + 1)) {
			throw new js__$Boot_HaxeError("Error");
		}
	} else if(x0 == x + 1) {
		if(!(x1 >= x)) {
			throw new js__$Boot_HaxeError("Error");
		}
	} else if(x0 <= x) {
		if(!(x1 <= x)) {
			throw new js__$Boot_HaxeError("Error");
		}
	} else if(x0 >= x + 1) {
		if(!(x1 >= x + 1)) {
			throw new js__$Boot_HaxeError("Error");
		}
	} else if(!(x1 >= x && x1 <= x + 1)) {
		throw new js__$Boot_HaxeError("Error");
	}
	if(x0 <= x && x1 <= x) {
		var _g = scanlineIndex + x;
		var _g1 = scanline;
		_g1[_g] = _g1[_g] + e.direction * (y1 - y0);
	} else if(!(x0 >= x + 1 && x1 >= x + 1)) {
		if(!(x0 >= x && x0 <= x + 1 && x1 >= x && x1 <= x + 1)) {
			throw new js__$Boot_HaxeError("Error");
		}
		var _g2 = scanlineIndex + x;
		var _g11 = scanline;
		_g11[_g2] = _g11[_g2] + e.direction * (y1 - y0) * (1 - (x0 - x + (x1 - x)) / 2);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new = function(scanline,scanline_fill,scanline_fillIndex,len,e,y_top) {
	var y_bottom = y_top + 1;
	while(e != null) {
		if(!(e.ey >= y_top)) {
			throw new js__$Boot_HaxeError("Error");
		}
		if(e.fdx == 0) {
			var x0 = e.fx;
			if(x0 < len) {
				if(x0 >= 0) {
					kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x0 | 0,e,x0,y_top,x0,y_bottom);
					kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline_fill,scanline_fillIndex - 1,x0 + 1 | 0,e,x0,y_top,x0,y_bottom);
				} else {
					kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline_fill,scanline_fillIndex - 1,0,e,x0,y_top,x0,y_bottom);
				}
			}
		} else {
			var x01 = e.fx;
			var dx = e.fdx;
			var xb = x01 + dx;
			var x_top;
			var x_bottom;
			var sy0;
			var sy1;
			var dy = e.fdy;
			if(!(e.sy <= y_bottom && e.ey >= y_top)) {
				throw new js__$Boot_HaxeError("Error");
			}
			if(e.sy > y_top) {
				x_top = x01 + dx * (e.sy - y_top);
				sy0 = e.sy;
			} else {
				x_top = x01;
				sy0 = y_top;
			}
			if(e.ey < y_bottom) {
				x_bottom = x01 + dx * (e.ey - y_top);
				sy1 = e.ey;
			} else {
				x_bottom = xb;
				sy1 = y_bottom;
			}
			if(x_top >= 0 && x_bottom >= 0 && x_top < len && x_bottom < len) {
				if((x_top | 0) == (x_bottom | 0)) {
					var x = x_top | 0;
					var height = sy1 - sy0;
					if(!(x >= 0 && x < len)) {
						throw new js__$Boot_HaxeError("Error");
					}
					var _g = x;
					var _g1 = scanline;
					_g1[_g] = _g1[_g] + e.direction * (1 - (x_top - x + (x_bottom - x)) / 2) * height;
					var _g2 = scanline_fillIndex + x;
					var _g11 = scanline_fill;
					_g11[_g2] = _g11[_g2] + e.direction * height;
				} else {
					var x1;
					if(x_top > x_bottom) {
						sy0 = y_bottom - (sy0 - y_top);
						sy1 = y_bottom - (sy1 - y_top);
						var t = sy0;
						sy0 = sy1;
						sy1 = t;
						t = x_bottom;
						x_bottom = x_top;
						x_top = t;
						dx = -dx;
						dy = -dy;
						t = x01;
						x01 = xb;
						xb = t;
					}
					var x11 = x_top | 0;
					var x2 = x_bottom | 0;
					var y_crossing = (x11 + 1 - x01) * dy + y_top;
					var sign = e.direction;
					var area = sign * (y_crossing - sy0);
					var _g3 = x11;
					var _g12 = scanline;
					_g12[_g3] = _g12[_g3] + area * (1 - (x_top - x11 + (x11 + 1 - x11)) / 2);
					var step = sign * dy;
					var _g4 = x11 + 1;
					var _g13 = x2;
					while(_g4 < _g13) {
						var x3 = _g4++;
						var _g5 = x3;
						var _g14 = scanline;
						_g14[_g5] = _g14[_g5] + (area + step / 2);
						area += step;
					}
					y_crossing += dy * (x2 - (x11 + 1));
					if(!(Math.abs(area) <= 1.01)) {
						throw new js__$Boot_HaxeError("Error");
					}
					var _g21 = x2;
					var _g31 = scanline;
					_g31[_g21] = _g31[_g21] + (area + sign * (1 - (x2 - x2 + (x_bottom - x2)) / 2) * (sy1 - y_crossing));
					var _g22 = scanline_fillIndex + x2;
					var _g32 = scanline_fill;
					_g32[_g22] = _g32[_g22] + sign * (sy1 - sy0);
				}
			} else {
				var _g6 = 0;
				var _g15 = len;
				while(_g6 < _g15) {
					var x4 = _g6++;
					var y0 = y_top;
					var x12 = x4;
					var x21 = x4 + 1;
					var x31 = xb;
					var y3 = y_bottom;
					var y1 = (x4 - x01) / dx + y_top;
					var y2 = (x4 + 1 - x01) / dx + y_top;
					if(x01 < x12 && x31 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x12,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x12,y1,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x21,y2,x31,y3);
					} else if(x31 < x12 && x01 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x21,y2,x12,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x12,y1,x31,y3);
					} else if(x01 < x12 && x31 > x12) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x12,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x12,y1,x31,y3);
					} else if(x31 < x12 && x01 > x12) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x12,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x12,y1,x31,y3);
					} else if(x01 < x21 && x31 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x21,y2,x31,y3);
					} else if(x31 < x21 && x01 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x21,y2,x31,y3);
					} else {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x4,e,x01,y0,x31,y3);
					}
				}
			}
		}
		e = e.next;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges = function(result,e,n,vsubsample,off_x,off_y) {
	var active = null;
	var j = 0;
	var scanline;
	var scanline2Index = 0;
	var eIndex = 0;
	if(result.w > 64) {
		var this1 = new Array(result.w * 2 + 1);
		scanline = this1;
	} else {
		var this2 = new Array(129);
		scanline = this2;
	}
	var scanline2 = scanline;
	scanline2Index = result.w;
	var y = off_y;
	e[eIndex + n].y0 = off_y + result.h + 1;
	while(j < result.h) {
		var scan_y_top = y + 0.0;
		var scan_y_bottom = y + 1.0;
		var step_value = active;
		var step_parent = null;
		var _g = 0;
		var _g1 = result.w;
		while(_g < _g1) {
			var i = _g++;
			scanline[i] = 0;
		}
		var _g2 = 0;
		var _g3 = result.w + 1;
		while(_g2 < _g3) {
			var i1 = _g2++;
			scanline2[scanline2Index + i1] = 0;
		}
		while(step_value != null) {
			var z = step_value;
			if(z.ey <= scan_y_top) {
				if(step_parent == null) {
					active = z.next;
					step_value = z.next;
				} else {
					step_parent.next = z.next;
					step_value = z.next;
				}
				if(z.direction == 0) {
					throw new js__$Boot_HaxeError("Error");
				}
				z.direction = 0;
			} else {
				step_parent = step_value;
				step_value = step_value.next;
			}
		}
		while(e[eIndex].y0 <= scan_y_bottom) {
			if(e[eIndex].y0 != e[eIndex].y1) {
				var z1 = kha_graphics2_truetype_StbTruetype.stbtt__new_active(e,eIndex,off_x,scan_y_top);
				if(!(z1.ey >= scan_y_top)) {
					throw new js__$Boot_HaxeError("Error");
				}
				z1.next = active;
				active = z1;
			}
			++eIndex;
		}
		if(active != null) {
			kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new(scanline,scanline2,scanline2Index + 1,result.w,active,scan_y_top);
		}
		var sum = 0;
		var _g4 = 0;
		var _g5 = result.w;
		while(_g4 < _g5) {
			var i2 = _g4++;
			sum += scanline2[scanline2Index + i2];
			var k = scanline[i2] + sum;
			k = Math.abs(k) * 255.0 + 0.5;
			var m = k | 0;
			if(m > 255) {
				m = 255;
			}
			result.pixels.writeU8(result.pixels_offset + j * result.stride + i2,m);
		}
		step_parent = null;
		step_value = active;
		while(step_value != null) {
			var z2 = step_value;
			z2.fx += z2.fdx;
			step_parent = step_value;
			step_value = step_value.next;
		}
		++y;
		++j;
	}
};
kha_graphics2_truetype_StbTruetype.STBTT__COMPARE = function(a,b) {
	return a.y0 < b.y0;
};
kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort = function(p,n) {
	var i;
	var j;
	var _g = 1;
	var _g1 = n;
	while(_g < _g1) {
		var i1 = _g++;
		var t = p[i1];
		var a = t;
		j = i1;
		while(j > 0) {
			var b = p[j - 1];
			var c = kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(a,b);
			if(!c) {
				break;
			}
			p[j] = p[j - 1];
			--j;
		}
		if(i1 != j) {
			p[j] = t;
		}
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort = function(p,pIndex,n) {
	while(n > 12) {
		var t;
		var c;
		var m = n >> 1;
		var c01 = kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex + m]);
		var c12 = kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex + m],p[pIndex + n - 1]);
		if(c01 != c12) {
			c = kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex + n - 1]);
			var z = c == c12 ? 0 : n - 1;
			t = p[pIndex + z];
			p[pIndex + z] = p[pIndex + m];
			p[pIndex + m] = t;
		}
		t = p[pIndex];
		p[pIndex] = p[pIndex + m];
		p[pIndex + m] = t;
		var i = 1;
		var j = n - 1;
		while(true) {
			while(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex + i],p[pIndex])) ++i;
			while(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex + j])) --j;
			if(i >= j) {
				break;
			}
			t = p[pIndex + i];
			p[pIndex + i] = p[pIndex + j];
			p[pIndex + j] = t;
			++i;
			--j;
		}
		if(j < n - i) {
			kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,pIndex,j);
			pIndex += i;
			n -= i;
		} else {
			kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,pIndex + i,n - i);
			n = j;
		}
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__sort_edges = function(p,n) {
	kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,0,n);
	kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort(p,n);
};
kha_graphics2_truetype_StbTruetype.stbtt__rasterize = function(result,pts,wcount,windings,scale_x,scale_y,shift_x,shift_y,off_x,off_y,invert) {
	var y_scale_inv = invert ? -scale_y : scale_y;
	var i;
	var j;
	var k;
	var vsubsample = 1;
	var ptsIndex = 0;
	var n = 0;
	var _g = 0;
	var _g1 = windings;
	while(_g < _g1) {
		var i1 = _g++;
		n += wcount[i1];
	}
	var this1 = new Array(n + 1);
	var e = this1;
	if(e == null) {
		return;
	} else {
		var _g2 = 0;
		var _g3 = e.length;
		while(_g2 < _g3) {
			var i2 = _g2++;
			e[i2] = new kha_graphics2_truetype_Stbtt_$_$edge();
		}
	}
	n = 0;
	var m = 0;
	var _g21 = 0;
	var _g31 = windings;
	while(_g21 < _g31) {
		var i3 = _g21++;
		var p = pts;
		var pIndex = ptsIndex + m;
		m += wcount[i3];
		j = wcount[i3] - 1;
		var _g22 = 0;
		var _g32 = wcount[i3];
		while(_g22 < _g32) {
			var k1 = _g22++;
			var a = k1;
			var b = j;
			if(p[pIndex + j].y == p[pIndex + k1].y) {
				j = k1;
				continue;
			}
			e[n].invert = false;
			if(invert ? p[pIndex + j].y > p[pIndex + k1].y : p[pIndex + j].y < p[pIndex + k1].y) {
				e[n].invert = true;
				a = j;
				b = k1;
			}
			e[n].x0 = p[pIndex + a].x * scale_x + shift_x;
			e[n].y0 = (p[pIndex + a].y * y_scale_inv + shift_y) * vsubsample;
			e[n].x1 = p[pIndex + b].x * scale_x + shift_x;
			e[n].y1 = (p[pIndex + b].y * y_scale_inv + shift_y) * vsubsample;
			++n;
			j = k1;
		}
	}
	kha_graphics2_truetype_StbTruetype.stbtt__sort_edges(e,n);
	kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges(result,e,n,vsubsample,off_x,off_y);
};
kha_graphics2_truetype_StbTruetype.stbtt__add_point = function(points,n,x,y) {
	if(points == null) {
		return;
	}
	points[n].x = x;
	points[n].y = y;
};
kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve = function(points,num_points,x0,y0,x1,y1,x2,y2,objspace_flatness_squared,n) {
	var mx = (x0 + 2 * x1 + x2) / 4;
	var my = (y0 + 2 * y1 + y2) / 4;
	var dx = (x0 + x2) / 2 - mx;
	var dy = (y0 + y2) / 2 - my;
	if(n > 16) {
		return 1;
	}
	if(dx * dx + dy * dy > objspace_flatness_squared) {
		kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points,x0,y0,(x0 + x1) / 2.0,(y0 + y1) / 2.0,mx,my,objspace_flatness_squared,n + 1);
		kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points,mx,my,(x1 + x2) / 2.0,(y1 + y2) / 2.0,x2,y2,objspace_flatness_squared,n + 1);
	} else {
		kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points.value,x2,y2);
		num_points.value += 1;
	}
	return 1;
};
kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves = function(vertices,num_verts,objspace_flatness,contour_lengths,num_contours) {
	var points = null;
	var num_points = 0;
	var objspace_flatness_squared = objspace_flatness * objspace_flatness;
	var i;
	var n = 0;
	var start = 0;
	var pass;
	var _g = 0;
	var _g1 = num_verts;
	while(_g < _g1) {
		var i1 = _g++;
		if(vertices[i1].type == 1) {
			++n;
		}
	}
	num_contours.value = n;
	if(n == 0) {
		return null;
	}
	var this1 = new Array(n);
	contour_lengths.value = this1;
	if(contour_lengths.value == null) {
		num_contours.value = 0;
		return null;
	}
	var _g2 = 0;
	while(_g2 < 2) {
		var pass1 = _g2++;
		var x = 0;
		var y = 0;
		if(pass1 == 1) {
			var this2 = new Array(num_points);
			points = this2;
			if(points == null) {
				contour_lengths.value = null;
				num_contours.value = 0;
				return null;
			} else {
				var _g21 = 0;
				var _g3 = points.length;
				while(_g21 < _g3) {
					var i2 = _g21++;
					points[i2] = new kha_graphics2_truetype_Stbtt_$_$point();
				}
			}
		}
		num_points = 0;
		n = -1;
		var _g22 = 0;
		var _g31 = num_verts;
		while(_g22 < _g31) {
			var i3 = _g22++;
			switch(vertices[i3].type) {
			case 1:
				if(n >= 0) {
					contour_lengths.value[n] = num_points - start;
				}
				++n;
				start = num_points;
				x = vertices[i3].x;
				y = vertices[i3].y;
				kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points++,x,y);
				break;
			case 2:
				x = vertices[i3].x;
				y = vertices[i3].y;
				kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points++,x,y);
				break;
			case 3:
				var num_points_reference = { value : num_points};
				kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points_reference,x,y,vertices[i3].cx,vertices[i3].cy,vertices[i3].x,vertices[i3].y,objspace_flatness_squared,0);
				num_points = num_points_reference.value;
				x = vertices[i3].x;
				y = vertices[i3].y;
				break;
			}
		}
		contour_lengths.value[n] = num_points - start;
	}
	return points;
};
kha_graphics2_truetype_StbTruetype.stbtt_Rasterize = function(result,flatness_in_pixels,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,x_off,y_off,invert) {
	var scale = scale_x > scale_y ? scale_y : scale_x;
	var winding_count = 0;
	var winding_lengths = null;
	var winding_count_reference = { value : winding_count};
	var winding_lengths_reference = new kha_graphics2_truetype_VectorOfIntPointer();
	var windings = kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves(vertices,num_verts,flatness_in_pixels / scale,winding_lengths_reference,winding_count_reference);
	winding_count = winding_count_reference.value;
	winding_lengths = winding_lengths_reference.value;
	if(windings != null) {
		kha_graphics2_truetype_StbTruetype.stbtt__rasterize(result,windings,winding_lengths,winding_count,scale_x,scale_y,shift_x,shift_y,x_off,y_off,invert);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel = function(info,scale_x,scale_y,shift_x,shift_y,glyph,region) {
	var gbm = new kha_graphics2_truetype_Stbtt_$_$bitmap();
	var vertices = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,glyph);
	var num_verts = vertices.length;
	if(scale_x == 0) {
		scale_x = scale_y;
	}
	if(scale_y == 0) {
		if(scale_x == 0) {
			return null;
		}
		scale_y = scale_x;
	}
	var rect = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(info,glyph,scale_x,scale_y,shift_x,shift_y);
	var ix0 = rect.x0;
	var iy0 = rect.y0;
	var ix1 = rect.x1;
	var iy1 = rect.y1;
	gbm.w = ix1 - ix0;
	gbm.h = iy1 - iy0;
	gbm.pixels = null;
	region.width = gbm.w;
	region.height = gbm.h;
	region.xoff = ix0;
	region.yoff = iy0;
	if(gbm.w != 0 && gbm.h != 0) {
		gbm.pixels = kha_internal_BytesBlob.alloc(gbm.w * gbm.h);
		if(gbm.pixels != null) {
			gbm.stride = gbm.w;
			kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(gbm,0.35,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,ix0,iy0,true);
		}
	}
	return gbm.pixels;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmap = function(info,scale_x,scale_y,glyph,region) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(info,scale_x,scale_y,0.0,0.0,glyph,region);
};
kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel = function(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,shift_x,shift_y,glyph) {
	var ix0 = 0;
	var iy0 = 0;
	var vertices = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,glyph);
	var num_verts = vertices == null ? 0 : vertices.length;
	var gbm = new kha_graphics2_truetype_Stbtt_$_$bitmap();
	var rect = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(info,glyph,scale_x,scale_y,shift_x,shift_y);
	ix0 = rect.x0;
	iy0 = rect.y0;
	gbm.pixels = output;
	gbm.pixels_offset = output_offset;
	gbm.w = out_w;
	gbm.h = out_h;
	gbm.stride = out_stride;
	if(gbm.w != 0 && gbm.h != 0) {
		kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(gbm,0.35,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,ix0,iy0,true);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap = function(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,glyph) {
	kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,0.0,0.0,glyph);
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel = function(info,scale_x,scale_y,shift_x,shift_y,codepoint,region) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapSubpixel(info,scale_x,scale_y,shift_x,shift_y,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,codepoint),region);
};
kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel = function(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,shift_x,shift_y,codepoint) {
	kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,shift_x,shift_y,kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(info,codepoint));
};
kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmap = function(info,scale_x,scale_y,codepoint,region) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetCodepointBitmapSubpixel(info,scale_x,scale_y,0.0,0.0,codepoint,region);
};
kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmap = function(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,codepoint) {
	kha_graphics2_truetype_StbTruetype.stbtt_MakeCodepointBitmapSubpixel(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,0.0,0.0,codepoint);
};
kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap = function(data,offset,pixel_height,pixels,pw,ph,chars,chardata) {
	var f = new kha_graphics2_truetype_Stbtt_$fontinfo();
	if(!kha_graphics2_truetype_StbTruetype.stbtt_InitFont(f,data,offset)) {
		return -1;
	}
	var _g = 0;
	var _g1 = pw * ph;
	while(_g < _g1) {
		var i = _g++;
		pixels.writeU8(i,0);
	}
	var y = 1;
	var x = y;
	var bottom_y = 1;
	var scale = kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(f,pixel_height);
	var i1 = 0;
	var _g2 = 0;
	while(_g2 < chars.length) {
		var index = chars[_g2];
		++_g2;
		var g = kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(f,index);
		var metrics = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(f,g);
		var advance = metrics.advanceWidth;
		var lsb = metrics.leftSideBearing;
		var rect = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox(f,g,scale,scale);
		var x0 = rect.x0;
		var y0 = rect.y0;
		var x1 = rect.x1;
		var y1 = rect.y1;
		var gw = x1 - x0;
		var gh = y1 - y0;
		if(x + gw + 1 >= pw) {
			y = bottom_y;
			x = 1;
		}
		if(y + gh + 1 >= ph) {
			return -i1;
		}
		if(x + gw >= pw) {
			throw new js__$Boot_HaxeError("Error");
		}
		if(y + gh >= ph) {
			throw new js__$Boot_HaxeError("Error");
		}
		kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap(f,pixels,x + y * pw,gw,gh,pw,scale,scale,g);
		chardata[i1].x0 = x;
		chardata[i1].y0 = y;
		chardata[i1].x1 = x + gw;
		chardata[i1].y1 = y + gh;
		chardata[i1].xadvance = scale * advance;
		chardata[i1].xoff = x0;
		chardata[i1].yoff = y0;
		x = x + gw + 1;
		if(y + gh + 1 > bottom_y) {
			bottom_y = y + gh + 1;
		}
		++i1;
	}
	return bottom_y;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetBakedQuad = function(chardata,pw,ph,char_index,xpos,ypos,q,opengl_fillrule) {
	var d3d_bias = opengl_fillrule ? 0 : -0.5;
	var ipw = 1.0 / pw;
	var iph = 1.0 / ph;
	var b = chardata[char_index];
	var round_x = Math.floor(xpos.value + b.xoff + 0.5);
	var round_y = Math.floor(ypos.value + b.yoff + 0.5);
	q.x0 = round_x + d3d_bias;
	q.y0 = round_y + d3d_bias;
	q.x1 = round_x + b.x1 - b.x0 + d3d_bias;
	q.y1 = round_y + b.y1 - b.y0 + d3d_bias;
	q.s0 = b.x0 * ipw;
	q.t0 = b.y0 * iph;
	q.s1 = b.x1 * ipw;
	q.t1 = b.y1 * iph;
	xpos.value += b.xadvance;
};
var kha_graphics4_BlendingFactor = $hxEnums["kha.graphics4.BlendingFactor"] = { __ename__ : true, __constructs__ : ["Undefined","BlendOne","BlendZero","SourceAlpha","DestinationAlpha","InverseSourceAlpha","InverseDestinationAlpha","SourceColor","DestinationColor","InverseSourceColor","InverseDestinationColor"]
	,Undefined: {_hx_index:0,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,BlendOne: {_hx_index:1,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,BlendZero: {_hx_index:2,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,SourceAlpha: {_hx_index:3,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,DestinationAlpha: {_hx_index:4,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,InverseSourceAlpha: {_hx_index:5,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,InverseDestinationAlpha: {_hx_index:6,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,SourceColor: {_hx_index:7,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,DestinationColor: {_hx_index:8,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,InverseSourceColor: {_hx_index:9,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
	,InverseDestinationColor: {_hx_index:10,__enum__:"kha.graphics4.BlendingFactor",toString:$estr}
};
var kha_graphics4_BlendingOperation = $hxEnums["kha.graphics4.BlendingOperation"] = { __ename__ : true, __constructs__ : ["Add","Subtract","ReverseSubtract","Min","Max"]
	,Add: {_hx_index:0,__enum__:"kha.graphics4.BlendingOperation",toString:$estr}
	,Subtract: {_hx_index:1,__enum__:"kha.graphics4.BlendingOperation",toString:$estr}
	,ReverseSubtract: {_hx_index:2,__enum__:"kha.graphics4.BlendingOperation",toString:$estr}
	,Min: {_hx_index:3,__enum__:"kha.graphics4.BlendingOperation",toString:$estr}
	,Max: {_hx_index:4,__enum__:"kha.graphics4.BlendingOperation",toString:$estr}
};
var kha_graphics4_CompareMode = $hxEnums["kha.graphics4.CompareMode"] = { __ename__ : true, __constructs__ : ["Always","Never","Equal","NotEqual","Less","LessEqual","Greater","GreaterEqual"]
	,Always: {_hx_index:0,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,Never: {_hx_index:1,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,Equal: {_hx_index:2,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,NotEqual: {_hx_index:3,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,Less: {_hx_index:4,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,LessEqual: {_hx_index:5,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,Greater: {_hx_index:6,__enum__:"kha.graphics4.CompareMode",toString:$estr}
	,GreaterEqual: {_hx_index:7,__enum__:"kha.graphics4.CompareMode",toString:$estr}
};
var kha_graphics4_ConstantLocation = function() { };
$hxClasses["kha.graphics4.ConstantLocation"] = kha_graphics4_ConstantLocation;
kha_graphics4_ConstantLocation.__name__ = true;
var kha_graphics4_CubeMap = function(size,format,renderTarget,depthStencilFormat) {
	this.isDepthAttachment = false;
	this.depthTexture = null;
	this.texture = null;
	this.frameBuffer = null;
	this.myWidth = size;
	this.myHeight = size;
	this.format = format;
	this.renderTarget = renderTarget;
	this.depthStencilFormat = depthStencilFormat;
	if(renderTarget) {
		this.createTexture();
	}
};
$hxClasses["kha.graphics4.CubeMap"] = kha_graphics4_CubeMap;
kha_graphics4_CubeMap.__name__ = true;
kha_graphics4_CubeMap.__interfaces__ = [kha_Resource,kha_Canvas];
kha_graphics4_CubeMap.createRenderTarget = function(size,format,depthStencil,contextId) {
	if(contextId == null) {
		contextId = 0;
	}
	if(format == null) {
		format = kha_graphics4_TextureFormat.RGBA32;
	}
	if(depthStencil == null) {
		depthStencil = 0;
	}
	return new kha_graphics4_CubeMap(size,format,true,depthStencil);
};
kha_graphics4_CubeMap.prototype = {
	myWidth: null
	,myHeight: null
	,format: null
	,renderTarget: null
	,depthStencilFormat: null
	,graphics4: null
	,frameBuffer: null
	,texture: null
	,depthTexture: null
	,isDepthAttachment: null
	,createTexture: function() {
		if(kha_SystemImpl.gl == null) {
			return;
		}
		this.texture = kha_SystemImpl.gl.createTexture();
		kha_SystemImpl.gl.bindTexture(34067,this.texture);
		kha_SystemImpl.gl.texParameteri(34067,10240,9729);
		kha_SystemImpl.gl.texParameteri(34067,10241,9729);
		kha_SystemImpl.gl.texParameteri(34067,10242,33071);
		kha_SystemImpl.gl.texParameteri(34067,10243,33071);
		if(this.renderTarget) {
			this.frameBuffer = kha_SystemImpl.gl.createFramebuffer();
			kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
			switch(this.format._hx_index) {
			case 0:
				kha_SystemImpl.gl.texImage2D(34069,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34070,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34071,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34072,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34073,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34074,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				break;
			case 2:
				kha_SystemImpl.gl.texImage2D(34069,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,null);
				kha_SystemImpl.gl.texImage2D(34070,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,null);
				kha_SystemImpl.gl.texImage2D(34071,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,null);
				kha_SystemImpl.gl.texImage2D(34072,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,null);
				kha_SystemImpl.gl.texImage2D(34073,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,null);
				kha_SystemImpl.gl.texImage2D(34074,0,kha_SystemImpl.gl2 ? 34836 : 6408,this.myWidth,this.myHeight,0,6408,5126,null);
				break;
			case 3:
				kha_SystemImpl.gl.texImage2D(34069,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
				kha_SystemImpl.gl.texImage2D(34070,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
				kha_SystemImpl.gl.texImage2D(34071,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
				kha_SystemImpl.gl.texImage2D(34072,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
				kha_SystemImpl.gl.texImage2D(34073,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
				kha_SystemImpl.gl.texImage2D(34074,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
				break;
			case 4:
				kha_SystemImpl.gl.texImage2D(34069,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34070,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34071,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34072,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34073,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34074,0,kha_SystemImpl.gl2 ? 34842 : 6408,this.myWidth,this.myHeight,0,6408,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				break;
			case 5:
				kha_SystemImpl.gl.texImage2D(34069,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,6406,5126,null);
				kha_SystemImpl.gl.texImage2D(34070,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,6406,5126,null);
				kha_SystemImpl.gl.texImage2D(34071,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,6406,5126,null);
				kha_SystemImpl.gl.texImage2D(34072,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,6406,5126,null);
				kha_SystemImpl.gl.texImage2D(34073,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,6406,5126,null);
				kha_SystemImpl.gl.texImage2D(34074,0,kha_SystemImpl.gl2 ? 33326 : 6406,this.myWidth,this.myHeight,0,6406,5126,null);
				break;
			case 6:
				kha_SystemImpl.gl.texImage2D(34069,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34070,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34071,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34072,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34073,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				kha_SystemImpl.gl.texImage2D(34074,0,kha_SystemImpl.gl2 ? 33325 : 6406,this.myWidth,this.myHeight,0,6406,kha_SystemImpl.halfFloat.HALF_FLOAT_OES,null);
				break;
			default:
				kha_SystemImpl.gl.texImage2D(34069,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34070,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34071,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34072,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34073,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
				kha_SystemImpl.gl.texImage2D(34074,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
			}
			if(this.format == kha_graphics4_TextureFormat.DEPTH16) {
				kha_SystemImpl.gl.texParameteri(34067,10240,9728);
				kha_SystemImpl.gl.texParameteri(34067,10241,9728);
				this.isDepthAttachment = true;
				if(!kha_SystemImpl.gl2) {
					var colortex = kha_SystemImpl.gl.createTexture();
					kha_SystemImpl.gl.bindTexture(34067,colortex);
					kha_SystemImpl.gl.texImage2D(34069,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,34069,colortex,0);
					kha_SystemImpl.gl.texImage2D(34070,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,34070,colortex,0);
					kha_SystemImpl.gl.texImage2D(34071,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,34071,colortex,0);
					kha_SystemImpl.gl.texImage2D(34072,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,34072,colortex,0);
					kha_SystemImpl.gl.texImage2D(34073,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,34073,colortex,0);
					kha_SystemImpl.gl.texImage2D(34074,0,6408,this.myWidth,this.myHeight,0,6408,5121,null);
					kha_SystemImpl.gl.framebufferTexture2D(36160,36064,34074,colortex,0);
					kha_SystemImpl.gl.bindTexture(34067,this.texture);
				}
			}
			this.initDepthStencilBuffer(this.depthStencilFormat);
			kha_SystemImpl.gl.bindFramebuffer(36160,null);
		}
		kha_SystemImpl.gl.bindTexture(34067,null);
	}
	,initDepthStencilBuffer: function(depthStencilFormat) {
		switch(depthStencilFormat) {
		case 0:
			break;
		case 1:case 5:
			this.depthTexture = kha_SystemImpl.gl.createTexture();
			kha_SystemImpl.gl.bindTexture(34067,this.depthTexture);
			if(depthStencilFormat == 1) {
				kha_SystemImpl.gl.texImage2D(34067,0,kha_SystemImpl.gl2 ? 33190 : 6402,this.myWidth,this.myHeight,0,6402,5125,null);
			} else {
				kha_SystemImpl.gl.texImage2D(34067,0,kha_SystemImpl.gl2 ? 33189 : 6402,this.myWidth,this.myHeight,0,6402,5123,null);
			}
			kha_SystemImpl.gl.texParameteri(34067,10240,9728);
			kha_SystemImpl.gl.texParameteri(34067,10241,9728);
			kha_SystemImpl.gl.texParameteri(34067,10242,33071);
			kha_SystemImpl.gl.texParameteri(34067,10243,33071);
			kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
			kha_SystemImpl.gl.framebufferTexture2D(36160,36096,34067,this.depthTexture,0);
			break;
		case 2:case 3:case 4:
			this.depthTexture = kha_SystemImpl.gl.createTexture();
			kha_SystemImpl.gl.bindTexture(34067,this.depthTexture);
			kha_SystemImpl.gl.texImage2D(34067,0,kha_SystemImpl.gl2 ? 35056 : 34041,this.myWidth,this.myHeight,0,34041,kha_SystemImpl.depthTexture.UNSIGNED_INT_24_8_WEBGL,null);
			kha_SystemImpl.gl.texParameteri(34067,10240,9728);
			kha_SystemImpl.gl.texParameteri(34067,10241,9728);
			kha_SystemImpl.gl.texParameteri(34067,10242,33071);
			kha_SystemImpl.gl.texParameteri(34067,10243,33071);
			kha_SystemImpl.gl.bindFramebuffer(36160,this.frameBuffer);
			kha_SystemImpl.gl.framebufferTexture2D(36160,33306,34067,this.depthTexture,0);
			break;
		}
	}
	,set: function(stage) {
		kha_SystemImpl.gl.activeTexture(33984 + stage);
		kha_SystemImpl.gl.bindTexture(34067,this.texture);
	}
	,setDepth: function(stage) {
		kha_SystemImpl.gl.activeTexture(33984 + stage);
		kha_SystemImpl.gl.bindTexture(34067,this.depthTexture);
	}
	,unload: function() {
	}
	,lock: function(level) {
		if(level == null) {
			level = 0;
		}
		return null;
	}
	,unlock: function() {
	}
	,width: null
	,get_width: function() {
		return this.myWidth;
	}
	,height: null
	,get_height: function() {
		return this.myHeight;
	}
	,g1: null
	,get_g1: function() {
		return null;
	}
	,g2: null
	,get_g2: function() {
		return null;
	}
	,g4: null
	,get_g4: function() {
		if(this.graphics4 == null) {
			this.graphics4 = new kha_js_graphics4_Graphics(this);
		}
		return this.graphics4;
	}
	,__class__: kha_graphics4_CubeMap
};
var kha_graphics4_CullMode = $hxEnums["kha.graphics4.CullMode"] = { __ename__ : true, __constructs__ : ["Clockwise","CounterClockwise","None"]
	,Clockwise: {_hx_index:0,__enum__:"kha.graphics4.CullMode",toString:$estr}
	,CounterClockwise: {_hx_index:1,__enum__:"kha.graphics4.CullMode",toString:$estr}
	,None: {_hx_index:2,__enum__:"kha.graphics4.CullMode",toString:$estr}
};
var kha_graphics4_FragmentShader = function(sources,files) {
	this.sources = [];
	var _g = 0;
	while(_g < sources.length) {
		var source = sources[_g];
		++_g;
		this.sources.push(source.toString());
	}
	this.type = 35632;
	this.shader = null;
	this.files = files;
};
$hxClasses["kha.graphics4.FragmentShader"] = kha_graphics4_FragmentShader;
kha_graphics4_FragmentShader.__name__ = true;
kha_graphics4_FragmentShader.fromSource = function(source) {
	var shader = new kha_graphics4_FragmentShader([],["runtime-string"]);
	shader.sources.push(source);
	return shader;
};
kha_graphics4_FragmentShader.prototype = {
	sources: null
	,type: null
	,shader: null
	,files: null
	,'delete': function() {
		kha_SystemImpl.gl.deleteShader(this.shader);
		this.shader = null;
		this.sources = null;
	}
	,__class__: kha_graphics4_FragmentShader
};
var kha_graphics4_GeometryShader = function(source) {
};
$hxClasses["kha.graphics4.GeometryShader"] = kha_graphics4_GeometryShader;
kha_graphics4_GeometryShader.__name__ = true;
kha_graphics4_GeometryShader.prototype = {
	'delete': function() {
	}
	,__class__: kha_graphics4_GeometryShader
};
var kha_graphics4_Graphics = function() { };
$hxClasses["kha.graphics4.Graphics"] = kha_graphics4_Graphics;
kha_graphics4_Graphics.__name__ = true;
kha_graphics4_Graphics.prototype = {
	begin: null
	,beginFace: null
	,beginEye: null
	,end: null
	,vsynced: null
	,refreshRate: null
	,clear: null
	,viewport: null
	,scissor: null
	,disableScissor: null
	,setVertexBuffer: null
	,setVertexBuffers: null
	,setIndexBuffer: null
	,setTexture: null
	,setTextureDepth: null
	,setTextureArray: null
	,setVideoTexture: null
	,setImageTexture: null
	,setTextureParameters: null
	,setTexture3DParameters: null
	,setCubeMap: null
	,setCubeMapDepth: null
	,setStencilReferenceValue: null
	,renderTargetsInvertedY: null
	,instancedRenderingAvailable: null
	,setPipeline: null
	,setBool: null
	,setInt: null
	,setFloat: null
	,setFloat2: null
	,setFloat3: null
	,setFloat4: null
	,setFloats: null
	,setVector2: null
	,setVector3: null
	,setVector4: null
	,setMatrix: null
	,setMatrix3: null
	,drawIndexedVertices: null
	,drawIndexedVerticesInstanced: null
	,flush: null
	,__class__: kha_graphics4_Graphics
};
var kha_graphics4_ImageShaderPainter = function(g4) {
	this.destinationBlend = kha_graphics4_BlendingFactor.Undefined;
	this.sourceBlend = kha_graphics4_BlendingFactor.Undefined;
	this.myPipeline = null;
	this.bilinearMipmaps = false;
	this.bilinear = false;
	this.g = g4;
	kha_graphics4_ImageShaderPainter.bufferIndex = 0;
	kha_graphics4_ImageShaderPainter.initShaders();
	this.initBuffers();
	this.projectionLocation = kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix");
	this.textureLocation = kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex");
};
$hxClasses["kha.graphics4.ImageShaderPainter"] = kha_graphics4_ImageShaderPainter;
kha_graphics4_ImageShaderPainter.__name__ = true;
kha_graphics4_ImageShaderPainter.initShaders = function() {
	if(kha_graphics4_ImageShaderPainter.structure == null) {
		kha_graphics4_ImageShaderPainter.structure = kha_graphics4_Graphics2.createImageVertexStructure();
	}
	if(kha_graphics4_ImageShaderPainter.shaderPipeline == null) {
		kha_graphics4_ImageShaderPainter.shaderPipeline = kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure);
		kha_graphics4_ImageShaderPainter.shaderPipeline.compile();
	}
};
kha_graphics4_ImageShaderPainter.prototype = {
	projectionMatrix: null
	,bilinear: null
	,bilinearMipmaps: null
	,g: null
	,myPipeline: null
	,projectionLocation: null
	,textureLocation: null
	,sourceBlend: null
	,destinationBlend: null
	,get_pipeline: function() {
		return this.myPipeline;
	}
	,set_pipeline: function(pipe) {
		if(pipe == null) {
			this.projectionLocation = kha_graphics4_ImageShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix");
			this.textureLocation = kha_graphics4_ImageShaderPainter.shaderPipeline.getTextureUnit("tex");
		} else {
			this.projectionLocation = pipe.getConstantLocation("projectionMatrix");
			this.textureLocation = pipe.getTextureUnit("tex");
		}
		return this.myPipeline = pipe;
	}
	,setProjection: function(projectionMatrix) {
		this.projectionMatrix = projectionMatrix;
	}
	,initBuffers: function() {
		if(kha_graphics4_ImageShaderPainter.rectVertexBuffer == null) {
			kha_graphics4_ImageShaderPainter.rectVertexBuffer = new kha_graphics4_VertexBuffer(6000,kha_graphics4_ImageShaderPainter.structure,kha_graphics4_Usage.DynamicUsage);
			kha_graphics4_ImageShaderPainter.rectVertices = kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock();
			kha_graphics4_ImageShaderPainter.indexBuffer = new kha_graphics4_IndexBuffer(9000,kha_graphics4_Usage.StaticUsage);
			var indices = kha_graphics4_ImageShaderPainter.indexBuffer.lock();
			var _g = 0;
			while(_g < 1500) {
				var i = _g++;
				indices[i * 3 * 2] = i * 4;
				indices[i * 3 * 2 + 1] = i * 4 + 1;
				indices[i * 3 * 2 + 2] = i * 4 + 2;
				indices[i * 3 * 2 + 3] = i * 4;
				indices[i * 3 * 2 + 4] = i * 4 + 2;
				indices[i * 3 * 2 + 5] = i * 4 + 3;
			}
			kha_graphics4_ImageShaderPainter.indexBuffer.unlock();
		}
	}
	,setRectVertices: function(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex] = bottomleftx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 1] = bottomlefty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 9] = topleftx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 10] = toplefty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 18] = toprightx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 19] = toprighty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 27] = bottomrightx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 28] = bottomrighty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 29] = -5.0;
	}
	,setRectTexCoords: function(left,top,right,bottom) {
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 3] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 12] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 13] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 22] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 31] = bottom;
	}
	,setRectColor: function(r,g,b,a) {
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 35] = a;
	}
	,drawBuffer: function() {
		kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock();
		this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer);
		this.g.setPipeline(this.get_pipeline() == null ? kha_graphics4_ImageShaderPainter.shaderPipeline : this.get_pipeline());
		this.g.setTexture(this.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture);
		this.g.setTextureParameters(this.textureLocation,kha_graphics4_TextureAddressing.Clamp,kha_graphics4_TextureAddressing.Clamp,this.bilinear ? kha_graphics4_TextureFilter.LinearFilter : kha_graphics4_TextureFilter.PointFilter,this.bilinear ? kha_graphics4_TextureFilter.LinearFilter : kha_graphics4_TextureFilter.PointFilter,this.bilinearMipmaps ? kha_graphics4_MipMapFilter.LinearMipFilter : kha_graphics4_MipMapFilter.NoMipFilter);
		this.g.setMatrix(this.projectionLocation,this.projectionMatrix);
		this.g.drawIndexedVertices(0,kha_graphics4_ImageShaderPainter.bufferIndex * 2 * 3);
		this.g.setTexture(this.textureLocation,null);
		kha_graphics4_ImageShaderPainter.bufferIndex = 0;
		kha_graphics4_ImageShaderPainter.rectVertices = kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock();
	}
	,setBilinearFilter: function(bilinear) {
		this.end();
		this.bilinear = bilinear;
	}
	,setBilinearMipmapFilter: function(bilinear) {
		this.end();
		this.bilinearMipmaps = bilinear;
	}
	,drawImage: function(img,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty,opacity,color) {
		var tex = img;
		if(kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && tex != kha_graphics4_ImageShaderPainter.lastTexture) {
			this.drawBuffer();
		}
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var a = (color >>> 24) * 0.00392156862745098 * opacity;
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 35] = a;
		var right = tex.get_width() / tex.get_realWidth();
		var bottom = tex.get_height() / tex.get_realHeight();
		var baseIndex1 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 3] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 12] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 13] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 22] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 31] = bottom;
		var baseIndex2 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2] = bottomleftx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 1] = bottomlefty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 9] = topleftx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 10] = toplefty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 18] = toprightx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 19] = toprighty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 27] = bottomrightx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 28] = bottomrighty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = tex;
	}
	,drawImage2: function(img,sx,sy,sw,sh,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty,opacity,color) {
		var tex = img;
		if(kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && tex != kha_graphics4_ImageShaderPainter.lastTexture) {
			this.drawBuffer();
		}
		var left = sx / tex.get_realWidth();
		var top = sy / tex.get_realHeight();
		var right = (sx + sw) / tex.get_realWidth();
		var bottom = (sy + sh) / tex.get_realHeight();
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 3] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 12] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 13] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 22] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 31] = bottom;
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var a = (color >>> 24) * 0.00392156862745098 * opacity;
		var baseIndex1 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 35] = a;
		var baseIndex2 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2] = bottomleftx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 1] = bottomlefty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 9] = topleftx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 10] = toplefty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 18] = toprightx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 19] = toprighty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 27] = bottomrightx;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 28] = bottomrighty;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = tex;
	}
	,drawImageScale: function(img,sx,sy,sw,sh,left,top,right,bottom,opacity,color) {
		var tex = img;
		if(kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && tex != kha_graphics4_ImageShaderPainter.lastTexture) {
			this.drawBuffer();
		}
		var left1 = sx / tex.get_realWidth();
		var top1 = sy / tex.get_realHeight();
		var right1 = (sx + sw) / tex.get_realWidth();
		var bottom1 = (sy + sh) / tex.get_realHeight();
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 3] = left1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 4] = bottom1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 12] = left1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 13] = top1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 21] = right1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 22] = top1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 30] = right1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 31] = bottom1;
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var baseIndex1 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 8] = opacity;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 17] = opacity;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 26] = opacity;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 35] = opacity;
		var baseIndex2 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 1] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 9] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 10] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 18] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 19] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 27] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 28] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = tex;
	}
	,end: function() {
		if(kha_graphics4_ImageShaderPainter.bufferIndex > 0) {
			this.drawBuffer();
		}
		kha_graphics4_ImageShaderPainter.lastTexture = null;
	}
	,__class__: kha_graphics4_ImageShaderPainter
};
var kha_graphics4_ColoredShaderPainter = function(g4) {
	this.destinationBlend = kha_graphics4_BlendingFactor.Undefined;
	this.sourceBlend = kha_graphics4_BlendingFactor.Undefined;
	this.myPipeline = null;
	this.g = g4;
	kha_graphics4_ColoredShaderPainter.bufferIndex = 0;
	kha_graphics4_ColoredShaderPainter.triangleBufferIndex = 0;
	kha_graphics4_ColoredShaderPainter.initShaders();
	this.initBuffers();
	this.projectionLocation = kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix");
};
$hxClasses["kha.graphics4.ColoredShaderPainter"] = kha_graphics4_ColoredShaderPainter;
kha_graphics4_ColoredShaderPainter.__name__ = true;
kha_graphics4_ColoredShaderPainter.initShaders = function() {
	if(kha_graphics4_ColoredShaderPainter.structure == null) {
		kha_graphics4_ColoredShaderPainter.structure = kha_graphics4_Graphics2.createColoredVertexStructure();
	}
	if(kha_graphics4_ColoredShaderPainter.shaderPipeline == null) {
		kha_graphics4_ColoredShaderPainter.shaderPipeline = kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure);
		kha_graphics4_ColoredShaderPainter.shaderPipeline.compile();
	}
};
kha_graphics4_ColoredShaderPainter.prototype = {
	projectionMatrix: null
	,g: null
	,myPipeline: null
	,projectionLocation: null
	,sourceBlend: null
	,destinationBlend: null
	,get_pipeline: function() {
		return this.myPipeline;
	}
	,set_pipeline: function(pipe) {
		if(pipe == null) {
			this.projectionLocation = kha_graphics4_ColoredShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix");
		} else {
			this.projectionLocation = pipe.getConstantLocation("projectionMatrix");
		}
		return this.myPipeline = pipe;
	}
	,setProjection: function(projectionMatrix) {
		this.projectionMatrix = projectionMatrix;
	}
	,initBuffers: function() {
		if(kha_graphics4_ColoredShaderPainter.rectVertexBuffer == null) {
			kha_graphics4_ColoredShaderPainter.rectVertexBuffer = new kha_graphics4_VertexBuffer(400,kha_graphics4_ColoredShaderPainter.structure,kha_graphics4_Usage.DynamicUsage);
			kha_graphics4_ColoredShaderPainter.rectVertices = kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();
			kha_graphics4_ColoredShaderPainter.indexBuffer = new kha_graphics4_IndexBuffer(600,kha_graphics4_Usage.StaticUsage);
			var indices = kha_graphics4_ColoredShaderPainter.indexBuffer.lock();
			var _g = 0;
			while(_g < 100) {
				var i = _g++;
				indices[i * 3 * 2] = i * 4;
				indices[i * 3 * 2 + 1] = i * 4 + 1;
				indices[i * 3 * 2 + 2] = i * 4 + 2;
				indices[i * 3 * 2 + 3] = i * 4;
				indices[i * 3 * 2 + 4] = i * 4 + 2;
				indices[i * 3 * 2 + 5] = i * 4 + 3;
			}
			kha_graphics4_ColoredShaderPainter.indexBuffer.unlock();
			kha_graphics4_ColoredShaderPainter.triangleVertexBuffer = new kha_graphics4_VertexBuffer(300,kha_graphics4_ColoredShaderPainter.structure,kha_graphics4_Usage.DynamicUsage);
			kha_graphics4_ColoredShaderPainter.triangleVertices = kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();
			kha_graphics4_ColoredShaderPainter.triangleIndexBuffer = new kha_graphics4_IndexBuffer(300,kha_graphics4_Usage.StaticUsage);
			var triIndices = kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock();
			var _g1 = 0;
			while(_g1 < 100) {
				var i1 = _g1++;
				triIndices[i1 * 3] = i1 * 3;
				triIndices[i1 * 3 + 1] = i1 * 3 + 1;
				triIndices[i1 * 3 + 2] = i1 * 3 + 2;
			}
			kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock();
		}
	}
	,setRectVertices: function(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.bufferIndex * 7 * 4;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex] = bottomleftx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 1] = bottomlefty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 7] = topleftx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 8] = toplefty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 9] = -5.0;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 14] = toprightx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 15] = toprighty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 16] = -5.0;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 21] = bottomrightx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 22] = bottomrighty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 23] = -5.0;
	}
	,setRectColors: function(opacity,color) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.bufferIndex * 7 * 4;
		var a = opacity * ((color >>> 24) * 0.00392156862745098);
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 3] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 4] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 5] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 6] = a;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 10] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 11] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 12] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 13] = a;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 17] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 18] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 19] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 20] = a;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 24] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 25] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 26] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 27] = a;
	}
	,setTriVertices: function(x1,y1,x2,y2,x3,y3) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 7 * 3;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex] = x1;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 1] = y1;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 7] = x2;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 8] = y2;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 9] = -5.0;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 14] = x3;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 15] = y3;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 16] = -5.0;
	}
	,setTriColors: function(opacity,color) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 7 * 3;
		var a = opacity * ((color >>> 24) * 0.00392156862745098);
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 3] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 4] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 5] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 6] = a;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 10] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 11] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 12] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 13] = a;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 17] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 18] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 19] = (color & 255) * 0.00392156862745098;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 20] = a;
	}
	,drawBuffer: function(trisDone) {
		if(!trisDone) {
			if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
				this.drawTriBuffer(true);
			}
		}
		kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock();
		this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer);
		this.g.setPipeline(this.get_pipeline() == null ? kha_graphics4_ColoredShaderPainter.shaderPipeline : this.get_pipeline());
		this.g.setMatrix(this.projectionLocation,this.projectionMatrix);
		this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.bufferIndex * 2 * 3);
		kha_graphics4_ColoredShaderPainter.bufferIndex = 0;
		kha_graphics4_ColoredShaderPainter.rectVertices = kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();
	}
	,drawTriBuffer: function(rectsDone) {
		if(!rectsDone) {
			if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
				this.drawBuffer(true);
			}
		}
		kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock();
		this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer);
		this.g.setPipeline(this.get_pipeline() == null ? kha_graphics4_ColoredShaderPainter.shaderPipeline : this.get_pipeline());
		this.g.setMatrix(this.projectionLocation,this.projectionMatrix);
		this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 3);
		kha_graphics4_ColoredShaderPainter.triangleBufferIndex = 0;
		kha_graphics4_ColoredShaderPainter.triangleVertices = kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();
	}
	,fillRect: function(opacity,color,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			this.drawTriBuffer(true);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex + 1 >= 100) {
			this.drawBuffer(false);
		}
		this.setRectColors(opacity,color);
		this.setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty);
		++kha_graphics4_ColoredShaderPainter.bufferIndex;
	}
	,fillTriangle: function(opacity,color,x1,y1,x2,y2,x3,y3) {
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			this.drawBuffer(true);
		}
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex + 1 >= 100) {
			this.drawTriBuffer(false);
		}
		this.setTriColors(opacity,color);
		this.setTriVertices(x1,y1,x2,y2,x3,y3);
		++kha_graphics4_ColoredShaderPainter.triangleBufferIndex;
	}
	,endTris: function(rectsDone) {
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			this.drawTriBuffer(rectsDone);
		}
	}
	,endRects: function(trisDone) {
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			this.drawBuffer(trisDone);
		}
	}
	,end: function() {
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			this.drawBuffer(false);
		}
	}
	,__class__: kha_graphics4_ColoredShaderPainter
};
var kha_graphics4_TextShaderPainter = function(g4) {
	this.bakedQuadCache = new kha_AlignedQuad();
	this.destinationBlend = kha_graphics4_BlendingFactor.Undefined;
	this.sourceBlend = kha_graphics4_BlendingFactor.Undefined;
	this.bilinear = false;
	this.myPipeline = null;
	this.g = g4;
	kha_graphics4_TextShaderPainter.bufferIndex = 0;
	kha_graphics4_TextShaderPainter.initShaders();
	this.initBuffers();
	this.projectionLocation = kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix");
	this.textureLocation = kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex");
};
$hxClasses["kha.graphics4.TextShaderPainter"] = kha_graphics4_TextShaderPainter;
kha_graphics4_TextShaderPainter.__name__ = true;
kha_graphics4_TextShaderPainter.initShaders = function() {
	if(kha_graphics4_TextShaderPainter.structure == null) {
		kha_graphics4_TextShaderPainter.structure = kha_graphics4_Graphics2.createTextVertexStructure();
	}
	if(kha_graphics4_TextShaderPainter.shaderPipeline == null) {
		kha_graphics4_TextShaderPainter.shaderPipeline = kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure);
		kha_graphics4_TextShaderPainter.shaderPipeline.compile();
	}
};
kha_graphics4_TextShaderPainter.findIndex = function(charCode) {
	var glyphs = kha_graphics2_Graphics.fontGlyphs;
	var blocks = kha_KravurImage.charBlocks;
	var offset = 0;
	var _g = 0;
	var _g1 = blocks.length / 2 | 0;
	while(_g < _g1) {
		var i = _g++;
		var start = blocks[i * 2];
		var end = blocks[i * 2 + 1];
		if(charCode >= start && charCode <= end) {
			return offset + charCode - start;
		}
		offset += end - start + 1;
	}
	return 0;
};
kha_graphics4_TextShaderPainter.prototype = {
	projectionMatrix: null
	,font: null
	,g: null
	,myPipeline: null
	,projectionLocation: null
	,textureLocation: null
	,fontSize: null
	,bilinear: null
	,sourceBlend: null
	,destinationBlend: null
	,get_pipeline: function() {
		return this.myPipeline;
	}
	,set_pipeline: function(pipe) {
		if(pipe == null) {
			this.projectionLocation = kha_graphics4_TextShaderPainter.shaderPipeline.getConstantLocation("projectionMatrix");
			this.textureLocation = kha_graphics4_TextShaderPainter.shaderPipeline.getTextureUnit("tex");
		} else {
			this.projectionLocation = pipe.getConstantLocation("projectionMatrix");
			this.textureLocation = pipe.getTextureUnit("tex");
		}
		return this.myPipeline = pipe;
	}
	,setProjection: function(projectionMatrix) {
		this.projectionMatrix = projectionMatrix;
	}
	,initBuffers: function() {
		if(kha_graphics4_TextShaderPainter.rectVertexBuffer == null) {
			kha_graphics4_TextShaderPainter.rectVertexBuffer = new kha_graphics4_VertexBuffer(400,kha_graphics4_TextShaderPainter.structure,kha_graphics4_Usage.DynamicUsage);
			kha_graphics4_TextShaderPainter.rectVertices = kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();
			kha_graphics4_TextShaderPainter.indexBuffer = new kha_graphics4_IndexBuffer(600,kha_graphics4_Usage.StaticUsage);
			var indices = kha_graphics4_TextShaderPainter.indexBuffer.lock();
			var _g = 0;
			while(_g < 100) {
				var i = _g++;
				indices[i * 3 * 2] = i * 4;
				indices[i * 3 * 2 + 1] = i * 4 + 1;
				indices[i * 3 * 2 + 2] = i * 4 + 2;
				indices[i * 3 * 2 + 3] = i * 4;
				indices[i * 3 * 2 + 4] = i * 4 + 2;
				indices[i * 3 * 2 + 5] = i * 4 + 3;
			}
			kha_graphics4_TextShaderPainter.indexBuffer.unlock();
		}
	}
	,setRectVertices: function(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		var baseIndex = kha_graphics4_TextShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex] = bottomleftx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 1] = bottomlefty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 9] = topleftx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 10] = toplefty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 11] = -5.0;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 18] = toprightx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 19] = toprighty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 20] = -5.0;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 27] = bottomrightx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 28] = bottomrighty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 29] = -5.0;
	}
	,setRectTexCoords: function(left,top,right,bottom) {
		var baseIndex = kha_graphics4_TextShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 3] = left;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 12] = left;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 13] = top;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 22] = top;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 31] = bottom;
	}
	,setRectColors: function(opacity,color) {
		var baseIndex = kha_graphics4_TextShaderPainter.bufferIndex * 9 * 4;
		var a = opacity * ((color >>> 24) * 0.00392156862745098);
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 5] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 6] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 7] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 14] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 15] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 16] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 23] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 24] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 25] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 32] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 33] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 34] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 35] = a;
	}
	,drawBuffer: function() {
		kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock();
		this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer);
		this.g.setPipeline(this.get_pipeline() == null ? kha_graphics4_TextShaderPainter.shaderPipeline : this.get_pipeline());
		this.g.setTexture(this.textureLocation,kha_graphics4_TextShaderPainter.lastTexture);
		this.g.setMatrix(this.projectionLocation,this.projectionMatrix);
		this.g.setTextureParameters(this.textureLocation,kha_graphics4_TextureAddressing.Clamp,kha_graphics4_TextureAddressing.Clamp,this.bilinear ? kha_graphics4_TextureFilter.LinearFilter : kha_graphics4_TextureFilter.PointFilter,this.bilinear ? kha_graphics4_TextureFilter.LinearFilter : kha_graphics4_TextureFilter.PointFilter,kha_graphics4_MipMapFilter.NoMipFilter);
		this.g.drawIndexedVertices(0,kha_graphics4_TextShaderPainter.bufferIndex * 2 * 3);
		this.g.setTexture(this.textureLocation,null);
		kha_graphics4_TextShaderPainter.bufferIndex = 0;
		kha_graphics4_TextShaderPainter.rectVertices = kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();
	}
	,setBilinearFilter: function(bilinear) {
		this.end();
		this.bilinear = bilinear;
	}
	,setFont: function(font) {
		this.font = js_Boot.__cast(font , kha_Kravur);
	}
	,text: null
	,startString: function(text) {
		this.text = text;
	}
	,charCodeAt: function(position) {
		return HxOverrides.cca(this.text,position);
	}
	,stringLength: function() {
		return this.text.length;
	}
	,endString: function() {
		this.text = null;
	}
	,bakedQuadCache: null
	,drawString: function(text,opacity,color,x,y,transformation) {
		var font = this.font._get(this.fontSize);
		var tex = font.getTexture();
		if(kha_graphics4_TextShaderPainter.lastTexture != null && tex != kha_graphics4_TextShaderPainter.lastTexture) {
			this.drawBuffer();
		}
		kha_graphics4_TextShaderPainter.lastTexture = tex;
		var xpos = x;
		var ypos = y;
		this.startString(text);
		var _g = 0;
		var _g1 = this.stringLength();
		while(_g < _g1) {
			var i = _g++;
			var q = font.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(this.charCodeAt(i)),xpos,ypos);
			if(q != null) {
				if(kha_graphics4_TextShaderPainter.bufferIndex + 1 >= 100) {
					this.drawBuffer();
				}
				this.setRectColors(opacity,color);
				this.setRectTexCoords(q.s0 * tex.get_width() / tex.get_realWidth(),q.t0 * tex.get_height() / tex.get_realHeight(),q.s1 * tex.get_width() / tex.get_realWidth(),q.t1 * tex.get_height() / tex.get_realHeight());
				var value_x = q.x0;
				var value_y = q.y1;
				var w = transformation._02 * value_x + transformation._12 * value_y + transformation._22;
				var x1 = (transformation._00 * value_x + transformation._10 * value_y + transformation._20) / w;
				var y1 = (transformation._01 * value_x + transformation._11 * value_y + transformation._21) / w;
				var p0_x = x1;
				var p0_y = y1;
				var value_x1 = q.x0;
				var value_y1 = q.y0;
				var w1 = transformation._02 * value_x1 + transformation._12 * value_y1 + transformation._22;
				var x2 = (transformation._00 * value_x1 + transformation._10 * value_y1 + transformation._20) / w1;
				var y2 = (transformation._01 * value_x1 + transformation._11 * value_y1 + transformation._21) / w1;
				var p1_x = x2;
				var p1_y = y2;
				var value_x2 = q.x1;
				var value_y2 = q.y0;
				var w2 = transformation._02 * value_x2 + transformation._12 * value_y2 + transformation._22;
				var x3 = (transformation._00 * value_x2 + transformation._10 * value_y2 + transformation._20) / w2;
				var y3 = (transformation._01 * value_x2 + transformation._11 * value_y2 + transformation._21) / w2;
				var p2_x = x3;
				var p2_y = y3;
				var value_x3 = q.x1;
				var value_y3 = q.y1;
				var w3 = transformation._02 * value_x3 + transformation._12 * value_y3 + transformation._22;
				var x4 = (transformation._00 * value_x3 + transformation._10 * value_y3 + transformation._20) / w3;
				var y4 = (transformation._01 * value_x3 + transformation._11 * value_y3 + transformation._21) / w3;
				var p3_x = x4;
				var p3_y = y4;
				this.setRectVertices(p0_x,p0_y,p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);
				xpos += q.xadvance;
				++kha_graphics4_TextShaderPainter.bufferIndex;
			}
		}
		this.endString();
	}
	,drawCharacters: function(text,start,length,opacity,color,x,y,transformation) {
		var font = this.font._get(this.fontSize);
		var tex = font.getTexture();
		if(kha_graphics4_TextShaderPainter.lastTexture != null && tex != kha_graphics4_TextShaderPainter.lastTexture) {
			this.drawBuffer();
		}
		kha_graphics4_TextShaderPainter.lastTexture = tex;
		var xpos = x;
		var ypos = y;
		var _g = start;
		var _g1 = start + length;
		while(_g < _g1) {
			var i = _g++;
			var q = font.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(text[i]),xpos,ypos);
			if(q != null) {
				if(kha_graphics4_TextShaderPainter.bufferIndex + 1 >= 100) {
					this.drawBuffer();
				}
				this.setRectColors(opacity,color);
				this.setRectTexCoords(q.s0 * tex.get_width() / tex.get_realWidth(),q.t0 * tex.get_height() / tex.get_realHeight(),q.s1 * tex.get_width() / tex.get_realWidth(),q.t1 * tex.get_height() / tex.get_realHeight());
				var value_x = q.x0;
				var value_y = q.y1;
				var w = transformation._02 * value_x + transformation._12 * value_y + transformation._22;
				var x1 = (transformation._00 * value_x + transformation._10 * value_y + transformation._20) / w;
				var y1 = (transformation._01 * value_x + transformation._11 * value_y + transformation._21) / w;
				var p0_x = x1;
				var p0_y = y1;
				var value_x1 = q.x0;
				var value_y1 = q.y0;
				var w1 = transformation._02 * value_x1 + transformation._12 * value_y1 + transformation._22;
				var x2 = (transformation._00 * value_x1 + transformation._10 * value_y1 + transformation._20) / w1;
				var y2 = (transformation._01 * value_x1 + transformation._11 * value_y1 + transformation._21) / w1;
				var p1_x = x2;
				var p1_y = y2;
				var value_x2 = q.x1;
				var value_y2 = q.y0;
				var w2 = transformation._02 * value_x2 + transformation._12 * value_y2 + transformation._22;
				var x3 = (transformation._00 * value_x2 + transformation._10 * value_y2 + transformation._20) / w2;
				var y3 = (transformation._01 * value_x2 + transformation._11 * value_y2 + transformation._21) / w2;
				var p2_x = x3;
				var p2_y = y3;
				var value_x3 = q.x1;
				var value_y3 = q.y1;
				var w3 = transformation._02 * value_x3 + transformation._12 * value_y3 + transformation._22;
				var x4 = (transformation._00 * value_x3 + transformation._10 * value_y3 + transformation._20) / w3;
				var y4 = (transformation._01 * value_x3 + transformation._11 * value_y3 + transformation._21) / w3;
				var p3_x = x4;
				var p3_y = y4;
				this.setRectVertices(p0_x,p0_y,p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);
				xpos += q.xadvance;
				++kha_graphics4_TextShaderPainter.bufferIndex;
			}
		}
	}
	,end: function() {
		if(kha_graphics4_TextShaderPainter.bufferIndex > 0) {
			this.drawBuffer();
		}
		kha_graphics4_TextShaderPainter.lastTexture = null;
	}
	,__class__: kha_graphics4_TextShaderPainter
};
var kha_graphics4_Graphics2 = function(canvas) {
	this.myMipmapScaleQuality = kha_graphics2_ImageScaleQuality.High;
	this.myImageScaleQuality = kha_graphics2_ImageScaleQuality.High;
	kha_graphics2_Graphics.call(this);
	this.set_color(-1);
	this.canvas = canvas;
	this.g = canvas.get_g4();
	this.imagePainter = new kha_graphics4_ImageShaderPainter(this.g);
	this.coloredPainter = new kha_graphics4_ColoredShaderPainter(this.g);
	this.textPainter = new kha_graphics4_TextShaderPainter(this.g);
	this.textPainter.fontSize = this.get_fontSize();
	this.projectionMatrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
	this.setProjection();
	if(kha_graphics4_Graphics2.videoPipeline == null) {
		kha_graphics4_Graphics2.videoPipeline = kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure());
		kha_graphics4_Graphics2.videoPipeline.fragmentShader = kha_Shaders.painter_video_frag;
		kha_graphics4_Graphics2.videoPipeline.vertexShader = kha_Shaders.painter_video_vert;
		kha_graphics4_Graphics2.videoPipeline.compile();
	}
};
$hxClasses["kha.graphics4.Graphics2"] = kha_graphics4_Graphics2;
kha_graphics4_Graphics2.__name__ = true;
kha_graphics4_Graphics2.upperPowerOfTwo = function(v) {
	--v;
	v |= v >>> 1;
	v |= v >>> 2;
	v |= v >>> 4;
	v |= v >>> 8;
	v |= v >>> 16;
	return ++v;
};
kha_graphics4_Graphics2.createImageVertexStructure = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("vertexPosition",2);
	structure.add("texPosition",1);
	structure.add("vertexColor",3);
	return structure;
};
kha_graphics4_Graphics2.createImagePipeline = function(structure) {
	var shaderPipeline = new kha_graphics4_PipelineState();
	shaderPipeline.fragmentShader = kha_Shaders.painter_image_frag;
	shaderPipeline.vertexShader = kha_Shaders.painter_image_vert;
	shaderPipeline.inputLayout = [structure];
	shaderPipeline.blendSource = kha_graphics4_BlendingFactor.BlendOne;
	shaderPipeline.blendDestination = kha_graphics4_BlendingFactor.InverseSourceAlpha;
	shaderPipeline.alphaBlendSource = kha_graphics4_BlendingFactor.BlendOne;
	shaderPipeline.alphaBlendDestination = kha_graphics4_BlendingFactor.InverseSourceAlpha;
	return shaderPipeline;
};
kha_graphics4_Graphics2.createColoredVertexStructure = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("vertexPosition",2);
	structure.add("vertexColor",3);
	return structure;
};
kha_graphics4_Graphics2.createColoredPipeline = function(structure) {
	var shaderPipeline = new kha_graphics4_PipelineState();
	shaderPipeline.fragmentShader = kha_Shaders.painter_colored_frag;
	shaderPipeline.vertexShader = kha_Shaders.painter_colored_vert;
	shaderPipeline.inputLayout = [structure];
	shaderPipeline.blendSource = kha_graphics4_BlendingFactor.SourceAlpha;
	shaderPipeline.blendDestination = kha_graphics4_BlendingFactor.InverseSourceAlpha;
	shaderPipeline.alphaBlendSource = kha_graphics4_BlendingFactor.SourceAlpha;
	shaderPipeline.alphaBlendDestination = kha_graphics4_BlendingFactor.InverseSourceAlpha;
	return shaderPipeline;
};
kha_graphics4_Graphics2.createTextVertexStructure = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("vertexPosition",2);
	structure.add("texPosition",1);
	structure.add("vertexColor",3);
	return structure;
};
kha_graphics4_Graphics2.createTextPipeline = function(structure) {
	var shaderPipeline = new kha_graphics4_PipelineState();
	shaderPipeline.fragmentShader = kha_Shaders.painter_text_frag;
	shaderPipeline.vertexShader = kha_Shaders.painter_text_vert;
	shaderPipeline.inputLayout = [structure];
	shaderPipeline.blendSource = kha_graphics4_BlendingFactor.SourceAlpha;
	shaderPipeline.blendDestination = kha_graphics4_BlendingFactor.InverseSourceAlpha;
	shaderPipeline.alphaBlendSource = kha_graphics4_BlendingFactor.SourceAlpha;
	shaderPipeline.alphaBlendDestination = kha_graphics4_BlendingFactor.InverseSourceAlpha;
	return shaderPipeline;
};
kha_graphics4_Graphics2.__super__ = kha_graphics2_Graphics;
kha_graphics4_Graphics2.prototype = $extend(kha_graphics2_Graphics.prototype,{
	myColor: null
	,myFont: null
	,projectionMatrix: null
	,imagePainter: null
	,coloredPainter: null
	,textPainter: null
	,canvas: null
	,g: null
	,setProjection: function() {
		var width = this.canvas.get_width();
		var height = this.canvas.get_height();
		if((this.canvas instanceof kha_Framebuffer)) {
			var _this = this.projectionMatrix;
			var tx = -width / width;
			var ty = -height / (0 - height);
			var tz = -1.00020002000200026;
			var m__00 = 2 / width;
			var m__10 = 0;
			var m__20 = 0;
			var m__30 = tx;
			var m__01 = 0;
			var m__11 = 2 / (0 - height);
			var m__21 = 0;
			var m__31 = ty;
			var m__02 = 0;
			var m__12 = 0;
			var m__22 = -0.002000200020002;
			var m__32 = tz;
			var m__03 = 0;
			var m__13 = 0;
			var m__23 = 0;
			var m__33 = 1;
			_this._00 = m__00;
			_this._10 = m__10;
			_this._20 = m__20;
			_this._30 = m__30;
			_this._01 = m__01;
			_this._11 = m__11;
			_this._21 = m__21;
			_this._31 = m__31;
			_this._02 = m__02;
			_this._12 = m__12;
			_this._22 = m__22;
			_this._32 = m__32;
			_this._03 = m__03;
			_this._13 = m__13;
			_this._23 = m__23;
			_this._33 = m__33;
		} else {
			if(!kha_Image.get_nonPow2Supported()) {
				width = kha_graphics4_Graphics2.upperPowerOfTwo(width);
				height = kha_graphics4_Graphics2.upperPowerOfTwo(height);
			}
			if(this.g.renderTargetsInvertedY()) {
				var _this1 = this.projectionMatrix;
				var tx1 = -width / width;
				var ty1 = -height / height;
				var tz1 = -1.00020002000200026;
				var m__001 = 2 / width;
				var m__101 = 0;
				var m__201 = 0;
				var m__301 = tx1;
				var m__011 = 0;
				var m__111 = 2 / height;
				var m__211 = 0;
				var m__311 = ty1;
				var m__021 = 0;
				var m__121 = 0;
				var m__221 = -0.002000200020002;
				var m__321 = tz1;
				var m__031 = 0;
				var m__131 = 0;
				var m__231 = 0;
				var m__331 = 1;
				_this1._00 = m__001;
				_this1._10 = m__101;
				_this1._20 = m__201;
				_this1._30 = m__301;
				_this1._01 = m__011;
				_this1._11 = m__111;
				_this1._21 = m__211;
				_this1._31 = m__311;
				_this1._02 = m__021;
				_this1._12 = m__121;
				_this1._22 = m__221;
				_this1._32 = m__321;
				_this1._03 = m__031;
				_this1._13 = m__131;
				_this1._23 = m__231;
				_this1._33 = m__331;
			} else {
				var _this2 = this.projectionMatrix;
				var tx2 = -width / width;
				var ty2 = -height / (0 - height);
				var tz2 = -1.00020002000200026;
				var m__002 = 2 / width;
				var m__102 = 0;
				var m__202 = 0;
				var m__302 = tx2;
				var m__012 = 0;
				var m__112 = 2 / (0 - height);
				var m__212 = 0;
				var m__312 = ty2;
				var m__022 = 0;
				var m__122 = 0;
				var m__222 = -0.002000200020002;
				var m__322 = tz2;
				var m__032 = 0;
				var m__132 = 0;
				var m__232 = 0;
				var m__332 = 1;
				_this2._00 = m__002;
				_this2._10 = m__102;
				_this2._20 = m__202;
				_this2._30 = m__302;
				_this2._01 = m__012;
				_this2._11 = m__112;
				_this2._21 = m__212;
				_this2._31 = m__312;
				_this2._02 = m__022;
				_this2._12 = m__122;
				_this2._22 = m__222;
				_this2._32 = m__322;
				_this2._03 = m__032;
				_this2._13 = m__132;
				_this2._23 = m__232;
				_this2._33 = m__332;
			}
		}
		this.imagePainter.setProjection(this.projectionMatrix);
		this.coloredPainter.setProjection(this.projectionMatrix);
		this.textPainter.setProjection(this.projectionMatrix);
	}
	,drawImage: function(img,x,y) {
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.end();
		var xw = x + img.get_width();
		var yh = y + img.get_height();
		var _this1 = this.transformations[this.transformations.length - 1];
		var value_x = x;
		var value_y = yh;
		var w = _this1._02 * value_x + _this1._12 * value_y + _this1._22;
		var x1 = (_this1._00 * value_x + _this1._10 * value_y + _this1._20) / w;
		var y1 = (_this1._01 * value_x + _this1._11 * value_y + _this1._21) / w;
		var p1_x = x1;
		var p1_y = y1;
		var _this2 = this.transformations[this.transformations.length - 1];
		var value_x1 = x;
		var value_y1 = y;
		var w1 = _this2._02 * value_x1 + _this2._12 * value_y1 + _this2._22;
		var x2 = (_this2._00 * value_x1 + _this2._10 * value_y1 + _this2._20) / w1;
		var y2 = (_this2._01 * value_x1 + _this2._11 * value_y1 + _this2._21) / w1;
		var p2_x = x2;
		var p2_y = y2;
		var _this3 = this.transformations[this.transformations.length - 1];
		var value_x2 = xw;
		var value_y2 = y;
		var w2 = _this3._02 * value_x2 + _this3._12 * value_y2 + _this3._22;
		var x3 = (_this3._00 * value_x2 + _this3._10 * value_y2 + _this3._20) / w2;
		var y3 = (_this3._01 * value_x2 + _this3._11 * value_y2 + _this3._21) / w2;
		var p3_x = x3;
		var p3_y = y3;
		var _this4 = this.transformations[this.transformations.length - 1];
		var value_x3 = xw;
		var value_y3 = yh;
		var w3 = _this4._02 * value_x3 + _this4._12 * value_y3 + _this4._22;
		var x4 = (_this4._00 * value_x3 + _this4._10 * value_y3 + _this4._20) / w3;
		var y4 = (_this4._01 * value_x3 + _this4._11 * value_y3 + _this4._21) / w3;
		var p4_x = x4;
		var p4_y = y4;
		var _this5 = this.imagePainter;
		var opacity = this.get_opacity();
		var color = this.get_color();
		var tex = img;
		if(kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && tex != kha_graphics4_ImageShaderPainter.lastTexture) {
			_this5.drawBuffer();
		}
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var a = (color >>> 24) * 0.00392156862745098 * opacity;
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 35] = a;
		var right = tex.get_width() / tex.get_realWidth();
		var bottom = tex.get_height() / tex.get_realHeight();
		var baseIndex1 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 3] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 12] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 13] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 22] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 31] = bottom;
		var baseIndex2 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2] = p1_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 1] = p1_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 9] = p2_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 10] = p2_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 18] = p3_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 19] = p3_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 27] = p4_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 28] = p4_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = tex;
	}
	,drawScaledSubImage: function(img,sx,sy,sw,sh,dx,dy,dw,dh) {
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.end();
		var _this1 = this.transformations[this.transformations.length - 1];
		var value_x = dx;
		var value_y = dy + dh;
		var w = _this1._02 * value_x + _this1._12 * value_y + _this1._22;
		var x = (_this1._00 * value_x + _this1._10 * value_y + _this1._20) / w;
		var y = (_this1._01 * value_x + _this1._11 * value_y + _this1._21) / w;
		var p1_x = x;
		var p1_y = y;
		var _this2 = this.transformations[this.transformations.length - 1];
		var value_x1 = dx;
		var value_y1 = dy;
		var w1 = _this2._02 * value_x1 + _this2._12 * value_y1 + _this2._22;
		var x1 = (_this2._00 * value_x1 + _this2._10 * value_y1 + _this2._20) / w1;
		var y1 = (_this2._01 * value_x1 + _this2._11 * value_y1 + _this2._21) / w1;
		var p2_x = x1;
		var p2_y = y1;
		var _this3 = this.transformations[this.transformations.length - 1];
		var value_x2 = dx + dw;
		var value_y2 = dy;
		var w2 = _this3._02 * value_x2 + _this3._12 * value_y2 + _this3._22;
		var x2 = (_this3._00 * value_x2 + _this3._10 * value_y2 + _this3._20) / w2;
		var y2 = (_this3._01 * value_x2 + _this3._11 * value_y2 + _this3._21) / w2;
		var p3_x = x2;
		var p3_y = y2;
		var _this4 = this.transformations[this.transformations.length - 1];
		var value_x3 = dx + dw;
		var value_y3 = dy + dh;
		var w3 = _this4._02 * value_x3 + _this4._12 * value_y3 + _this4._22;
		var x3 = (_this4._00 * value_x3 + _this4._10 * value_y3 + _this4._20) / w3;
		var y3 = (_this4._01 * value_x3 + _this4._11 * value_y3 + _this4._21) / w3;
		var p4_x = x3;
		var p4_y = y3;
		var _this5 = this.imagePainter;
		var opacity = this.get_opacity();
		var color = this.get_color();
		var tex = img;
		if(kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && tex != kha_graphics4_ImageShaderPainter.lastTexture) {
			_this5.drawBuffer();
		}
		var left = sx / tex.get_realWidth();
		var top = sy / tex.get_realHeight();
		var right = (sx + sw) / tex.get_realWidth();
		var bottom = (sy + sh) / tex.get_realHeight();
		var baseIndex = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 3] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 12] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 13] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 22] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 31] = bottom;
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var a = (color >>> 24) * 0.00392156862745098 * opacity;
		var baseIndex1 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex1 + 35] = a;
		var baseIndex2 = kha_graphics4_ImageShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2] = p1_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 1] = p1_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 9] = p2_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 10] = p2_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 18] = p3_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 19] = p3_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 27] = p4_x;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 28] = p4_y;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex2 + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = tex;
	}
	,get_color: function() {
		return this.myColor;
	}
	,set_color: function(color) {
		return this.myColor = color;
	}
	,drawRect: function(x,y,width,height,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.transformations[this.transformations.length - 1];
		var value_x = x - strength / 2;
		var value_y = y + strength / 2;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var p1 = new kha_math_FastVector2(x1,y1);
		var _this1 = this.transformations[this.transformations.length - 1];
		var value_x1 = x - strength / 2;
		var value_y1 = y - strength / 2;
		var w1 = _this1._02 * value_x1 + _this1._12 * value_y1 + _this1._22;
		var x2 = (_this1._00 * value_x1 + _this1._10 * value_y1 + _this1._20) / w1;
		var y2 = (_this1._01 * value_x1 + _this1._11 * value_y1 + _this1._21) / w1;
		var p2 = new kha_math_FastVector2(x2,y2);
		var _this2 = this.transformations[this.transformations.length - 1];
		var value_x2 = x + width + strength / 2;
		var value_y2 = y - strength / 2;
		var w2 = _this2._02 * value_x2 + _this2._12 * value_y2 + _this2._22;
		var x3 = (_this2._00 * value_x2 + _this2._10 * value_y2 + _this2._20) / w2;
		var y3 = (_this2._01 * value_x2 + _this2._11 * value_y2 + _this2._21) / w2;
		var p3 = new kha_math_FastVector2(x3,y3);
		var _this3 = this.transformations[this.transformations.length - 1];
		var value_x3 = x + width + strength / 2;
		var value_y3 = y + strength / 2;
		var w3 = _this3._02 * value_x3 + _this3._12 * value_y3 + _this3._22;
		var x4 = (_this3._00 * value_x3 + _this3._10 * value_y3 + _this3._20) / w3;
		var y4 = (_this3._01 * value_x3 + _this3._11 * value_y3 + _this3._21) / w3;
		var p4 = new kha_math_FastVector2(x4,y4);
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1.x,p1.y,p2.x,p2.y,p3.x,p3.y,p4.x,p4.y);
		var _this4 = this.transformations[this.transformations.length - 1];
		var value_x4 = x - strength / 2;
		var value_y4 = y + height - strength / 2;
		var w4 = _this4._02 * value_x4 + _this4._12 * value_y4 + _this4._22;
		var x5 = (_this4._00 * value_x4 + _this4._10 * value_y4 + _this4._20) / w4;
		var y5 = (_this4._01 * value_x4 + _this4._11 * value_y4 + _this4._21) / w4;
		p1 = new kha_math_FastVector2(x5,y5);
		var _this5 = this.transformations[this.transformations.length - 1];
		var value_x5 = x - strength / 2;
		var value_y5 = y + strength / 2;
		var w5 = _this5._02 * value_x5 + _this5._12 * value_y5 + _this5._22;
		var x6 = (_this5._00 * value_x5 + _this5._10 * value_y5 + _this5._20) / w5;
		var y6 = (_this5._01 * value_x5 + _this5._11 * value_y5 + _this5._21) / w5;
		p2 = new kha_math_FastVector2(x6,y6);
		var _this6 = this.transformations[this.transformations.length - 1];
		var value_x6 = x + strength / 2;
		var value_y6 = y + strength / 2;
		var w6 = _this6._02 * value_x6 + _this6._12 * value_y6 + _this6._22;
		var x7 = (_this6._00 * value_x6 + _this6._10 * value_y6 + _this6._20) / w6;
		var y7 = (_this6._01 * value_x6 + _this6._11 * value_y6 + _this6._21) / w6;
		p3 = new kha_math_FastVector2(x7,y7);
		var _this7 = this.transformations[this.transformations.length - 1];
		var value_x7 = x + strength / 2;
		var value_y7 = y + height - strength / 2;
		var w7 = _this7._02 * value_x7 + _this7._12 * value_y7 + _this7._22;
		var x8 = (_this7._00 * value_x7 + _this7._10 * value_y7 + _this7._20) / w7;
		var y8 = (_this7._01 * value_x7 + _this7._11 * value_y7 + _this7._21) / w7;
		p4 = new kha_math_FastVector2(x8,y8);
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1.x,p1.y,p2.x,p2.y,p3.x,p3.y,p4.x,p4.y);
		var _this8 = this.transformations[this.transformations.length - 1];
		var value_x8 = x - strength / 2;
		var value_y8 = y + height + strength / 2;
		var w8 = _this8._02 * value_x8 + _this8._12 * value_y8 + _this8._22;
		var x9 = (_this8._00 * value_x8 + _this8._10 * value_y8 + _this8._20) / w8;
		var y9 = (_this8._01 * value_x8 + _this8._11 * value_y8 + _this8._21) / w8;
		p1 = new kha_math_FastVector2(x9,y9);
		var _this9 = this.transformations[this.transformations.length - 1];
		var value_x9 = x - strength / 2;
		var value_y9 = y + height - strength / 2;
		var w9 = _this9._02 * value_x9 + _this9._12 * value_y9 + _this9._22;
		var x10 = (_this9._00 * value_x9 + _this9._10 * value_y9 + _this9._20) / w9;
		var y10 = (_this9._01 * value_x9 + _this9._11 * value_y9 + _this9._21) / w9;
		p2 = new kha_math_FastVector2(x10,y10);
		var _this10 = this.transformations[this.transformations.length - 1];
		var value_x10 = x + width + strength / 2;
		var value_y10 = y + height - strength / 2;
		var w10 = _this10._02 * value_x10 + _this10._12 * value_y10 + _this10._22;
		var x11 = (_this10._00 * value_x10 + _this10._10 * value_y10 + _this10._20) / w10;
		var y11 = (_this10._01 * value_x10 + _this10._11 * value_y10 + _this10._21) / w10;
		p3 = new kha_math_FastVector2(x11,y11);
		var _this11 = this.transformations[this.transformations.length - 1];
		var value_x11 = x + width + strength / 2;
		var value_y11 = y + height + strength / 2;
		var w11 = _this11._02 * value_x11 + _this11._12 * value_y11 + _this11._22;
		var x12 = (_this11._00 * value_x11 + _this11._10 * value_y11 + _this11._20) / w11;
		var y12 = (_this11._01 * value_x11 + _this11._11 * value_y11 + _this11._21) / w11;
		p4 = new kha_math_FastVector2(x12,y12);
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1.x,p1.y,p2.x,p2.y,p3.x,p3.y,p4.x,p4.y);
		var _this12 = this.transformations[this.transformations.length - 1];
		var value_x12 = x + width - strength / 2;
		var value_y12 = y + height - strength / 2;
		var w12 = _this12._02 * value_x12 + _this12._12 * value_y12 + _this12._22;
		var x13 = (_this12._00 * value_x12 + _this12._10 * value_y12 + _this12._20) / w12;
		var y13 = (_this12._01 * value_x12 + _this12._11 * value_y12 + _this12._21) / w12;
		p1 = new kha_math_FastVector2(x13,y13);
		var _this13 = this.transformations[this.transformations.length - 1];
		var value_x13 = x + width - strength / 2;
		var value_y13 = y + strength / 2;
		var w13 = _this13._02 * value_x13 + _this13._12 * value_y13 + _this13._22;
		var x14 = (_this13._00 * value_x13 + _this13._10 * value_y13 + _this13._20) / w13;
		var y14 = (_this13._01 * value_x13 + _this13._11 * value_y13 + _this13._21) / w13;
		p2 = new kha_math_FastVector2(x14,y14);
		var _this14 = this.transformations[this.transformations.length - 1];
		var value_x14 = x + width + strength / 2;
		var value_y14 = y + strength / 2;
		var w14 = _this14._02 * value_x14 + _this14._12 * value_y14 + _this14._22;
		var x15 = (_this14._00 * value_x14 + _this14._10 * value_y14 + _this14._20) / w14;
		var y15 = (_this14._01 * value_x14 + _this14._11 * value_y14 + _this14._21) / w14;
		p3 = new kha_math_FastVector2(x15,y15);
		var _this15 = this.transformations[this.transformations.length - 1];
		var value_x15 = x + width + strength / 2;
		var value_y15 = y + height - strength / 2;
		var w15 = _this15._02 * value_x15 + _this15._12 * value_y15 + _this15._22;
		var x16 = (_this15._00 * value_x15 + _this15._10 * value_y15 + _this15._20) / w15;
		var y16 = (_this15._01 * value_x15 + _this15._11 * value_y15 + _this15._21) / w15;
		p4 = new kha_math_FastVector2(x16,y16);
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1.x,p1.y,p2.x,p2.y,p3.x,p3.y,p4.x,p4.y);
	}
	,fillRect: function(x,y,width,height) {
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.transformations[this.transformations.length - 1];
		var value_x = x;
		var value_y = y + height;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var p1_x = x1;
		var p1_y = y1;
		var _this1 = this.transformations[this.transformations.length - 1];
		var value_x1 = x;
		var value_y1 = y;
		var w1 = _this1._02 * value_x1 + _this1._12 * value_y1 + _this1._22;
		var x2 = (_this1._00 * value_x1 + _this1._10 * value_y1 + _this1._20) / w1;
		var y2 = (_this1._01 * value_x1 + _this1._11 * value_y1 + _this1._21) / w1;
		var p2_x = x2;
		var p2_y = y2;
		var _this2 = this.transformations[this.transformations.length - 1];
		var value_x2 = x + width;
		var value_y2 = y;
		var w2 = _this2._02 * value_x2 + _this2._12 * value_y2 + _this2._22;
		var x3 = (_this2._00 * value_x2 + _this2._10 * value_y2 + _this2._20) / w2;
		var y3 = (_this2._01 * value_x2 + _this2._11 * value_y2 + _this2._21) / w2;
		var p3_x = x3;
		var p3_y = y3;
		var _this3 = this.transformations[this.transformations.length - 1];
		var value_x3 = x + width;
		var value_y3 = y + height;
		var w3 = _this3._02 * value_x3 + _this3._12 * value_y3 + _this3._22;
		var x4 = (_this3._00 * value_x3 + _this3._10 * value_y3 + _this3._20) / w3;
		var y4 = (_this3._01 * value_x3 + _this3._11 * value_y3 + _this3._21) / w3;
		var p4_x = x4;
		var p4_y = y4;
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);
	}
	,drawString: function(text,x,y) {
		this.imagePainter.end();
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.drawString(text,this.get_opacity(),this.get_color(),x,y,this.transformations[this.transformations.length - 1]);
	}
	,drawCharacters: function(text,start,length,x,y) {
		this.imagePainter.end();
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.drawCharacters(text,start,length,this.get_opacity(),this.get_color(),x,y,this.transformations[this.transformations.length - 1]);
	}
	,get_font: function() {
		return this.myFont;
	}
	,set_font: function(font) {
		this.textPainter.setFont(font);
		return this.myFont = font;
	}
	,set_fontSize: function(value) {
		return kha_graphics2_Graphics.prototype.set_fontSize.call(this,this.textPainter.fontSize = value);
	}
	,drawLine: function(x1,y1,x2,y2,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.imagePainter.end();
		this.textPainter.end();
		var vec;
		if(y2 == y1) {
			vec = new kha_math_FastVector2(0,-1);
		} else {
			vec = new kha_math_FastVector2(1,-(x2 - x1) / (y2 - y1));
		}
		vec.set_length(strength);
		var p1 = new kha_math_FastVector2(x1 + 0.5 * vec.x,y1 + 0.5 * vec.y);
		var p2 = new kha_math_FastVector2(x2 + 0.5 * vec.x,y2 + 0.5 * vec.y);
		var p3 = new kha_math_FastVector2(p1.x - vec.x,p1.y - vec.y);
		var p4 = new kha_math_FastVector2(p2.x - vec.x,p2.y - vec.y);
		var _this = this.transformations[this.transformations.length - 1];
		var w = _this._02 * p1.x + _this._12 * p1.y + _this._22;
		var x = (_this._00 * p1.x + _this._10 * p1.y + _this._20) / w;
		var y = (_this._01 * p1.x + _this._11 * p1.y + _this._21) / w;
		p1 = new kha_math_FastVector2(x,y);
		var _this1 = this.transformations[this.transformations.length - 1];
		var w1 = _this1._02 * p2.x + _this1._12 * p2.y + _this1._22;
		var x3 = (_this1._00 * p2.x + _this1._10 * p2.y + _this1._20) / w1;
		var y3 = (_this1._01 * p2.x + _this1._11 * p2.y + _this1._21) / w1;
		p2 = new kha_math_FastVector2(x3,y3);
		var _this2 = this.transformations[this.transformations.length - 1];
		var w2 = _this2._02 * p3.x + _this2._12 * p3.y + _this2._22;
		var x4 = (_this2._00 * p3.x + _this2._10 * p3.y + _this2._20) / w2;
		var y4 = (_this2._01 * p3.x + _this2._11 * p3.y + _this2._21) / w2;
		p3 = new kha_math_FastVector2(x4,y4);
		var _this3 = this.transformations[this.transformations.length - 1];
		var w3 = _this3._02 * p4.x + _this3._12 * p4.y + _this3._22;
		var x5 = (_this3._00 * p4.x + _this3._10 * p4.y + _this3._20) / w3;
		var y5 = (_this3._01 * p4.x + _this3._11 * p4.y + _this3._21) / w3;
		p4 = new kha_math_FastVector2(x5,y5);
		this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p1.x,p1.y,p2.x,p2.y,p3.x,p3.y);
		this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p3.x,p3.y,p2.x,p2.y,p4.x,p4.y);
	}
	,fillTriangle: function(x1,y1,x2,y2,x3,y3) {
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.transformations[this.transformations.length - 1];
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var p1_x = x;
		var p1_y = y;
		var _this1 = this.transformations[this.transformations.length - 1];
		var value_x1 = x2;
		var value_y1 = y2;
		var w1 = _this1._02 * value_x1 + _this1._12 * value_y1 + _this1._22;
		var x4 = (_this1._00 * value_x1 + _this1._10 * value_y1 + _this1._20) / w1;
		var y4 = (_this1._01 * value_x1 + _this1._11 * value_y1 + _this1._21) / w1;
		var p2_x = x4;
		var p2_y = y4;
		var _this2 = this.transformations[this.transformations.length - 1];
		var value_x2 = x3;
		var value_y2 = y3;
		var w2 = _this2._02 * value_x2 + _this2._12 * value_y2 + _this2._22;
		var x5 = (_this2._00 * value_x2 + _this2._10 * value_y2 + _this2._20) / w2;
		var y5 = (_this2._01 * value_x2 + _this2._11 * value_y2 + _this2._21) / w2;
		var p3_x = x5;
		var p3_y = y5;
		this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);
	}
	,myImageScaleQuality: null
	,get_imageScaleQuality: function() {
		return this.myImageScaleQuality;
	}
	,set_imageScaleQuality: function(value) {
		this.imagePainter.setBilinearFilter(value == kha_graphics2_ImageScaleQuality.High);
		this.textPainter.setBilinearFilter(value == kha_graphics2_ImageScaleQuality.High);
		return this.myImageScaleQuality = value;
	}
	,myMipmapScaleQuality: null
	,get_mipmapScaleQuality: function() {
		return this.myMipmapScaleQuality;
	}
	,set_mipmapScaleQuality: function(value) {
		this.imagePainter.setBilinearMipmapFilter(value == kha_graphics2_ImageScaleQuality.High);
		return this.myMipmapScaleQuality = value;
	}
	,setPipeline: function(pipeline) {
		this.flush();
		this.imagePainter.set_pipeline(pipeline);
		this.coloredPainter.set_pipeline(pipeline);
		this.textPainter.set_pipeline(pipeline);
		if(pipeline != null) {
			this.g.setPipeline(pipeline);
		}
	}
	,scissor: function(x,y,width,height) {
		this.flush();
		this.g.scissor(x,y,width,height);
	}
	,disableScissor: function() {
		this.flush();
		this.g.disableScissor();
	}
	,begin: function(clear,clearColor) {
		if(clear == null) {
			clear = true;
		}
		this.g.begin();
		if(clear) {
			this.clear(clearColor);
		}
		this.setProjection();
	}
	,clear: function(color) {
		this.flush();
		this.g.clear(color == null ? -16777216 : color);
	}
	,flush: function() {
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
	}
	,end: function() {
		this.flush();
		this.g.end();
	}
	,drawVideoInternal: function(video,x,y,width,height) {
	}
	,drawVideo: function(video,x,y,width,height) {
		this.setPipeline(kha_graphics4_Graphics2.videoPipeline);
		this.drawVideoInternal(video,x,y,width,height);
		this.setPipeline(null);
	}
	,__class__: kha_graphics4_Graphics2
});
var kha_graphics4_IndexBuffer = function(indexCount,usage,canRead) {
	if(canRead == null) {
		canRead = false;
	}
	this.usage = usage;
	this.mySize = indexCount;
	this.buffer = kha_SystemImpl.gl.createBuffer();
	var this1 = new Uint32Array(indexCount);
	this._data = this1;
};
$hxClasses["kha.graphics4.IndexBuffer"] = kha_graphics4_IndexBuffer;
kha_graphics4_IndexBuffer.__name__ = true;
kha_graphics4_IndexBuffer.prototype = {
	buffer: null
	,_data: null
	,mySize: null
	,usage: null
	,'delete': function() {
		this._data = null;
		kha_SystemImpl.gl.deleteBuffer(this.buffer);
	}
	,lock: function(start,count) {
		if(start == null) {
			start = 0;
		}
		if(count == null) {
			count = this.mySize;
		}
		return this._data.subarray(start,start + count);
	}
	,unlock: function() {
		kha_SystemImpl.gl.bindBuffer(34963,this.buffer);
		var glData = kha_SystemImpl.elementIndexUint == null ? new Uint16Array(this._data) : this._data;
		kha_SystemImpl.gl.bufferData(34963,glData,this.usage == kha_graphics4_Usage.DynamicUsage ? 35048 : 35044);
	}
	,set: function() {
		kha_SystemImpl.gl.bindBuffer(34963,this.buffer);
	}
	,count: function() {
		return this.mySize;
	}
	,__class__: kha_graphics4_IndexBuffer
};
var kha_graphics4_MipMapFilter = $hxEnums["kha.graphics4.MipMapFilter"] = { __ename__ : true, __constructs__ : ["NoMipFilter","PointMipFilter","LinearMipFilter"]
	,NoMipFilter: {_hx_index:0,__enum__:"kha.graphics4.MipMapFilter",toString:$estr}
	,PointMipFilter: {_hx_index:1,__enum__:"kha.graphics4.MipMapFilter",toString:$estr}
	,LinearMipFilter: {_hx_index:2,__enum__:"kha.graphics4.MipMapFilter",toString:$estr}
};
var kha_graphics4_PipelineStateBase = function() {
	this.inputLayout = null;
	this.vertexShader = null;
	this.fragmentShader = null;
	this.geometryShader = null;
	this.tessellationControlShader = null;
	this.tessellationEvaluationShader = null;
	this.cullMode = kha_graphics4_CullMode.None;
	this.depthWrite = false;
	this.depthMode = kha_graphics4_CompareMode.Always;
	this.stencilMode = kha_graphics4_CompareMode.Always;
	this.stencilBothPass = kha_graphics4_StencilAction.Keep;
	this.stencilDepthFail = kha_graphics4_StencilAction.Keep;
	this.stencilFail = kha_graphics4_StencilAction.Keep;
	this.stencilReferenceValue = kha_graphics4_StencilValue.Static(0);
	this.stencilReadMask = 255;
	this.stencilWriteMask = 255;
	this.blendSource = kha_graphics4_BlendingFactor.BlendOne;
	this.blendDestination = kha_graphics4_BlendingFactor.BlendZero;
	this.blendOperation = kha_graphics4_BlendingOperation.Add;
	this.alphaBlendSource = kha_graphics4_BlendingFactor.BlendOne;
	this.alphaBlendDestination = kha_graphics4_BlendingFactor.BlendZero;
	this.alphaBlendOperation = kha_graphics4_BlendingOperation.Add;
	this.colorWriteMasksRed = [];
	this.colorWriteMasksGreen = [];
	this.colorWriteMasksBlue = [];
	this.colorWriteMasksAlpha = [];
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.conservativeRasterization = false;
};
$hxClasses["kha.graphics4.PipelineStateBase"] = kha_graphics4_PipelineStateBase;
kha_graphics4_PipelineStateBase.__name__ = true;
kha_graphics4_PipelineStateBase.prototype = {
	inputLayout: null
	,vertexShader: null
	,fragmentShader: null
	,geometryShader: null
	,tessellationControlShader: null
	,tessellationEvaluationShader: null
	,cullMode: null
	,depthWrite: null
	,depthMode: null
	,stencilMode: null
	,stencilBothPass: null
	,stencilDepthFail: null
	,stencilFail: null
	,stencilReferenceValue: null
	,stencilReadMask: null
	,stencilWriteMask: null
	,blendSource: null
	,blendDestination: null
	,blendOperation: null
	,alphaBlendSource: null
	,alphaBlendDestination: null
	,alphaBlendOperation: null
	,colorWriteMasksRed: null
	,colorWriteMasksGreen: null
	,colorWriteMasksBlue: null
	,colorWriteMasksAlpha: null
	,set_colorWriteMask: function(value) {
		var value1 = this.colorWriteMasksAlpha[0] = value;
		var value2 = this.colorWriteMasksGreen[0] = value1;
		var value3 = this.colorWriteMasksBlue[0] = value2;
		return this.colorWriteMasksRed[0] = value3;
	}
	,get_colorWriteMaskRed: function() {
		return this.colorWriteMasksRed[0];
	}
	,set_colorWriteMaskRed: function(value) {
		return this.colorWriteMasksRed[0] = value;
	}
	,get_colorWriteMaskGreen: function() {
		return this.colorWriteMasksGreen[0];
	}
	,set_colorWriteMaskGreen: function(value) {
		return this.colorWriteMasksGreen[0] = value;
	}
	,get_colorWriteMaskBlue: function() {
		return this.colorWriteMasksBlue[0];
	}
	,set_colorWriteMaskBlue: function(value) {
		return this.colorWriteMasksBlue[0] = value;
	}
	,get_colorWriteMaskAlpha: function() {
		return this.colorWriteMasksAlpha[0];
	}
	,set_colorWriteMaskAlpha: function(value) {
		return this.colorWriteMasksAlpha[0] = value;
	}
	,conservativeRasterization: null
	,__class__: kha_graphics4_PipelineStateBase
};
var kha_graphics4_PipelineState = function() {
	this.program = null;
	kha_graphics4_PipelineStateBase.call(this);
	this.textures = [];
	this.textureValues = [];
};
$hxClasses["kha.graphics4.PipelineState"] = kha_graphics4_PipelineState;
kha_graphics4_PipelineState.__name__ = true;
kha_graphics4_PipelineState.__super__ = kha_graphics4_PipelineStateBase;
kha_graphics4_PipelineState.prototype = $extend(kha_graphics4_PipelineStateBase.prototype,{
	program: null
	,textures: null
	,textureValues: null
	,'delete': function() {
		if(this.program != null) {
			kha_SystemImpl.gl.deleteProgram(this.program);
		}
	}
	,compile: function() {
		if(this.program != null) {
			kha_SystemImpl.gl.deleteProgram(this.program);
		}
		this.program = kha_SystemImpl.gl.createProgram();
		this.compileShader(this.vertexShader);
		this.compileShader(this.fragmentShader);
		kha_SystemImpl.gl.attachShader(this.program,this.vertexShader.shader);
		kha_SystemImpl.gl.attachShader(this.program,this.fragmentShader.shader);
		var index = 0;
		var _g = 0;
		var _g1 = this.inputLayout;
		while(_g < _g1.length) {
			var structure = _g1[_g];
			++_g;
			var _g2 = 0;
			var _g11 = structure.elements;
			while(_g2 < _g11.length) {
				var element = _g11[_g2];
				++_g2;
				kha_SystemImpl.gl.bindAttribLocation(this.program,index,element.name);
				if(element.data == 4) {
					index += 4;
				} else {
					++index;
				}
			}
		}
		kha_SystemImpl.gl.linkProgram(this.program);
		if(!kha_SystemImpl.gl.getProgramParameter(this.program,35714)) {
			throw new js__$Boot_HaxeError("Could not link the shader program:\n" + kha_SystemImpl.gl.getProgramInfoLog(this.program));
		}
	}
	,set: function() {
		kha_SystemImpl.gl.useProgram(this.program);
		var _g = 0;
		var _g1 = this.textureValues.length;
		while(_g < _g1) {
			var index = _g++;
			kha_SystemImpl.gl.uniform1i(this.textureValues[index],index);
		}
		kha_SystemImpl.gl.colorMask(this.colorWriteMasksRed[0],this.colorWriteMasksGreen[0],this.colorWriteMasksBlue[0],this.colorWriteMasksAlpha[0]);
	}
	,compileShader: function(shader) {
		if(shader.shader != null) {
			return;
		}
		var s = kha_SystemImpl.gl.createShader(shader.type);
		var highp = kha_SystemImpl.gl.getShaderPrecisionFormat(35632,36338);
		var highpSupported = highp.precision != 0;
		var files = shader.files;
		var _g = 0;
		var _g1 = files.length;
		while(_g < _g1) {
			var i = _g++;
			if(kha_SystemImpl.gl2) {
				if(files[i].indexOf("-webgl2") >= 0 || files[i].indexOf("runtime-string") >= 0) {
					kha_SystemImpl.gl.shaderSource(s,shader.sources[i]);
					break;
				}
			} else {
				if(!highpSupported && (files[i].indexOf("-relaxed") >= 0 || files[i].indexOf("runtime-string") >= 0)) {
					kha_SystemImpl.gl.shaderSource(s,shader.sources[i]);
					break;
				}
				if(highpSupported && (files[i].indexOf("-relaxed") < 0 || files[i].indexOf("runtime-string") >= 0)) {
					kha_SystemImpl.gl.shaderSource(s,shader.sources[i]);
					break;
				}
			}
		}
		kha_SystemImpl.gl.compileShader(s);
		if(!kha_SystemImpl.gl.getShaderParameter(s,35713)) {
			throw new js__$Boot_HaxeError("Could not compile shader:\n" + kha_SystemImpl.gl.getShaderInfoLog(s));
		}
		shader.shader = s;
	}
	,getConstantLocation: function(name) {
		var location = kha_SystemImpl.gl.getUniformLocation(this.program,name);
		if(location == null) {
			haxe_Log.trace("Warning: Uniform " + name + " not found.",{ fileName : "kha/graphics4/PipelineState.hx", lineNumber : 92, className : "kha.graphics4.PipelineState", methodName : "getConstantLocation"});
		}
		var type = 5126;
		var count = kha_SystemImpl.gl.getProgramParameter(this.program,35718);
		var _g = 0;
		var _g1 = count;
		while(_g < _g1) {
			var i = _g++;
			var info = kha_SystemImpl.gl.getActiveUniform(this.program,i);
			if(info.name == name || info.name == name + "[0]") {
				type = info.type;
				break;
			}
		}
		return new kha_js_graphics4_ConstantLocation(location,type);
	}
	,getTextureUnit: function(name) {
		var index = this.findTexture(name);
		if(index < 0) {
			var location = kha_SystemImpl.gl.getUniformLocation(this.program,name);
			if(location == null) {
				haxe_Log.trace("Warning: Sampler " + name + " not found.",{ fileName : "kha/graphics4/PipelineState.hx", lineNumber : 111, className : "kha.graphics4.PipelineState", methodName : "getTextureUnit"});
			}
			index = this.textures.length;
			this.textureValues.push(location);
			this.textures.push(name);
		}
		return new kha_js_graphics4_TextureUnit(index);
	}
	,findTexture: function(name) {
		var _g = 0;
		var _g1 = this.textures.length;
		while(_g < _g1) {
			var index = _g++;
			if(this.textures[index] == name) {
				return index;
			}
		}
		return -1;
	}
	,__class__: kha_graphics4_PipelineState
});
var kha_graphics4_StencilAction = $hxEnums["kha.graphics4.StencilAction"] = { __ename__ : true, __constructs__ : ["Keep","Zero","Replace","Increment","IncrementWrap","Decrement","DecrementWrap","Invert"]
	,Keep: {_hx_index:0,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,Zero: {_hx_index:1,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,Replace: {_hx_index:2,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,Increment: {_hx_index:3,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,IncrementWrap: {_hx_index:4,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,Decrement: {_hx_index:5,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,DecrementWrap: {_hx_index:6,__enum__:"kha.graphics4.StencilAction",toString:$estr}
	,Invert: {_hx_index:7,__enum__:"kha.graphics4.StencilAction",toString:$estr}
};
var kha_graphics4_StencilValue = $hxEnums["kha.graphics4.StencilValue"] = { __ename__ : true, __constructs__ : ["Dynamic","Static"]
	,Dynamic: {_hx_index:0,__enum__:"kha.graphics4.StencilValue",toString:$estr}
	,Static: ($_=function(value) { return {_hx_index:1,value:value,__enum__:"kha.graphics4.StencilValue",toString:$estr}; },$_.__params__ = ["value"],$_)
};
var kha_graphics4_TessellationControlShader = function(source,file) {
};
$hxClasses["kha.graphics4.TessellationControlShader"] = kha_graphics4_TessellationControlShader;
kha_graphics4_TessellationControlShader.__name__ = true;
kha_graphics4_TessellationControlShader.prototype = {
	'delete': function() {
	}
	,__class__: kha_graphics4_TessellationControlShader
};
var kha_graphics4_TessellationEvaluationShader = function(source,file) {
};
$hxClasses["kha.graphics4.TessellationEvaluationShader"] = kha_graphics4_TessellationEvaluationShader;
kha_graphics4_TessellationEvaluationShader.__name__ = true;
kha_graphics4_TessellationEvaluationShader.prototype = {
	'delete': function() {
	}
	,__class__: kha_graphics4_TessellationEvaluationShader
};
var kha_graphics4_TextureAddressing = $hxEnums["kha.graphics4.TextureAddressing"] = { __ename__ : true, __constructs__ : ["Repeat","Mirror","Clamp"]
	,Repeat: {_hx_index:0,__enum__:"kha.graphics4.TextureAddressing",toString:$estr}
	,Mirror: {_hx_index:1,__enum__:"kha.graphics4.TextureAddressing",toString:$estr}
	,Clamp: {_hx_index:2,__enum__:"kha.graphics4.TextureAddressing",toString:$estr}
};
var kha_graphics4_TextureFilter = $hxEnums["kha.graphics4.TextureFilter"] = { __ename__ : true, __constructs__ : ["PointFilter","LinearFilter","AnisotropicFilter"]
	,PointFilter: {_hx_index:0,__enum__:"kha.graphics4.TextureFilter",toString:$estr}
	,LinearFilter: {_hx_index:1,__enum__:"kha.graphics4.TextureFilter",toString:$estr}
	,AnisotropicFilter: {_hx_index:2,__enum__:"kha.graphics4.TextureFilter",toString:$estr}
};
var kha_graphics4_TextureFormat = $hxEnums["kha.graphics4.TextureFormat"] = { __ename__ : true, __constructs__ : ["RGBA32","L8","RGBA128","DEPTH16","RGBA64","A32","A16"]
	,RGBA32: {_hx_index:0,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
	,L8: {_hx_index:1,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
	,RGBA128: {_hx_index:2,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
	,DEPTH16: {_hx_index:3,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
	,RGBA64: {_hx_index:4,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
	,A32: {_hx_index:5,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
	,A16: {_hx_index:6,__enum__:"kha.graphics4.TextureFormat",toString:$estr}
};
var kha_graphics4_TextureUnit = function() { };
$hxClasses["kha.graphics4.TextureUnit"] = kha_graphics4_TextureUnit;
kha_graphics4_TextureUnit.__name__ = true;
var kha_graphics4_Usage = $hxEnums["kha.graphics4.Usage"] = { __ename__ : true, __constructs__ : ["StaticUsage","DynamicUsage","ReadableUsage"]
	,StaticUsage: {_hx_index:0,__enum__:"kha.graphics4.Usage",toString:$estr}
	,DynamicUsage: {_hx_index:1,__enum__:"kha.graphics4.Usage",toString:$estr}
	,ReadableUsage: {_hx_index:2,__enum__:"kha.graphics4.Usage",toString:$estr}
};
var kha_graphics4_VertexBuffer = function(vertexCount,structure,usage,instanceDataStepRate,canRead) {
	if(canRead == null) {
		canRead = false;
	}
	if(instanceDataStepRate == null) {
		instanceDataStepRate = 0;
	}
	this.usage = usage;
	this.instanceDataStepRate = instanceDataStepRate;
	this.mySize = vertexCount;
	this.myStride = 0;
	var _g = 0;
	var _g1 = structure.elements;
	while(_g < _g1.length) {
		var element = _g1[_g];
		++_g;
		switch(element.data) {
		case 0:
			this.myStride += 4;
			break;
		case 1:
			this.myStride += 8;
			break;
		case 2:
			this.myStride += 12;
			break;
		case 3:
			this.myStride += 16;
			break;
		case 4:
			this.myStride += 64;
			break;
		}
	}
	this.buffer = kha_SystemImpl.gl.createBuffer();
	var this1 = new Float32Array(vertexCount * this.myStride / 4 | 0);
	this._data = this1;
	this.sizes = [];
	this.offsets = [];
	this.sizes[structure.elements.length - 1] = 0;
	this.offsets[structure.elements.length - 1] = 0;
	var offset = 0;
	var index = 0;
	var _g2 = 0;
	var _g3 = structure.elements;
	while(_g2 < _g3.length) {
		var element1 = _g3[_g2];
		++_g2;
		var size;
		switch(element1.data) {
		case 0:
			size = 1;
			break;
		case 1:
			size = 2;
			break;
		case 2:
			size = 3;
			break;
		case 3:
			size = 4;
			break;
		case 4:
			size = 16;
			break;
		}
		this.sizes[index] = size;
		this.offsets[index] = offset;
		switch(element1.data) {
		case 0:
			offset += 4;
			break;
		case 1:
			offset += 8;
			break;
		case 2:
			offset += 12;
			break;
		case 3:
			offset += 16;
			break;
		case 4:
			offset += 64;
			break;
		}
		++index;
	}
};
$hxClasses["kha.graphics4.VertexBuffer"] = kha_graphics4_VertexBuffer;
kha_graphics4_VertexBuffer.__name__ = true;
kha_graphics4_VertexBuffer.prototype = {
	buffer: null
	,_data: null
	,mySize: null
	,myStride: null
	,sizes: null
	,offsets: null
	,usage: null
	,instanceDataStepRate: null
	,'delete': function() {
		this._data = null;
		kha_SystemImpl.gl.deleteBuffer(this.buffer);
	}
	,lock: function(start,count) {
		if(start == null) {
			start = 0;
		}
		if(count == null) {
			count = this.mySize;
		}
		return this._data.subarray(start * this.stride(),(start + count) * this.stride());
	}
	,unlock: function() {
		kha_SystemImpl.gl.bindBuffer(34962,this.buffer);
		kha_SystemImpl.gl.bufferData(34962,this._data,this.usage == kha_graphics4_Usage.DynamicUsage ? 35048 : 35044);
	}
	,stride: function() {
		return this.myStride;
	}
	,count: function() {
		return this.mySize;
	}
	,set: function(offset) {
		var ext = kha_SystemImpl.gl2 ? true : kha_SystemImpl.gl.getExtension("ANGLE_instanced_arrays");
		kha_SystemImpl.gl.bindBuffer(34962,this.buffer);
		var attributesOffset = 0;
		var _g = 0;
		var _g1 = this.sizes.length;
		while(_g < _g1) {
			var i = _g++;
			if(this.sizes[i] > 4) {
				var size = this.sizes[i];
				var addonOffset = 0;
				while(size > 0) {
					kha_SystemImpl.gl.enableVertexAttribArray(offset + attributesOffset);
					kha_SystemImpl.gl.vertexAttribPointer(offset + attributesOffset,4,5126,false,this.myStride,this.offsets[i] + addonOffset);
					if(ext) {
						if(kha_SystemImpl.gl2) {
							kha_SystemImpl.gl.vertexAttribDivisor(offset + attributesOffset,this.instanceDataStepRate);
						} else {
							ext.vertexAttribDivisorANGLE(offset + attributesOffset,this.instanceDataStepRate);
						}
					}
					size -= 4;
					addonOffset += 16;
					++attributesOffset;
				}
			} else {
				kha_SystemImpl.gl.enableVertexAttribArray(offset + attributesOffset);
				kha_SystemImpl.gl.vertexAttribPointer(offset + attributesOffset,this.sizes[i],5126,false,this.myStride,this.offsets[i]);
				if(ext) {
					if(kha_SystemImpl.gl2) {
						kha_SystemImpl.gl.vertexAttribDivisor(offset + attributesOffset,this.instanceDataStepRate);
					} else {
						ext.vertexAttribDivisorANGLE(offset + attributesOffset,this.instanceDataStepRate);
					}
				}
				++attributesOffset;
			}
		}
		return attributesOffset;
	}
	,__class__: kha_graphics4_VertexBuffer
};
var kha_graphics4_VertexElement = function(name,data) {
	this.name = name;
	this.data = data;
};
$hxClasses["kha.graphics4.VertexElement"] = kha_graphics4_VertexElement;
kha_graphics4_VertexElement.__name__ = true;
kha_graphics4_VertexElement.prototype = {
	name: null
	,data: null
	,__class__: kha_graphics4_VertexElement
};
var kha_graphics4_VertexShader = function(sources,files) {
	this.sources = [];
	var _g = 0;
	while(_g < sources.length) {
		var source = sources[_g];
		++_g;
		this.sources.push(source.toString());
	}
	this.type = 35633;
	this.shader = null;
	this.files = files;
};
$hxClasses["kha.graphics4.VertexShader"] = kha_graphics4_VertexShader;
kha_graphics4_VertexShader.__name__ = true;
kha_graphics4_VertexShader.fromSource = function(source) {
	var shader = new kha_graphics4_VertexShader([],["runtime-string"]);
	shader.sources.push(source);
	return shader;
};
kha_graphics4_VertexShader.prototype = {
	sources: null
	,type: null
	,shader: null
	,files: null
	,'delete': function() {
		kha_SystemImpl.gl.deleteShader(this.shader);
		this.shader = null;
		this.sources = null;
	}
	,__class__: kha_graphics4_VertexShader
};
var kha_graphics4_VertexStructure = function() {
	this.elements = [];
	this.instanced = false;
};
$hxClasses["kha.graphics4.VertexStructure"] = kha_graphics4_VertexStructure;
kha_graphics4_VertexStructure.__name__ = true;
kha_graphics4_VertexStructure.prototype = {
	elements: null
	,instanced: null
	,add: function(name,data) {
		this.elements.push(new kha_graphics4_VertexElement(name,data));
	}
	,size: function() {
		return this.elements.length;
	}
	,byteSize: function() {
		var byteSize = 0;
		var _g = 0;
		var _g1 = this.elements.length;
		while(_g < _g1) {
			var i = _g++;
			byteSize += this.dataByteSize(this.elements[i].data);
		}
		return byteSize;
	}
	,dataByteSize: function(data) {
		switch(data) {
		case 0:
			return 4;
		case 1:
			return 8;
		case 2:
			return 12;
		case 3:
			return 16;
		case 4:
			return 64;
		}
	}
	,get: function(index) {
		return this.elements[index];
	}
	,__class__: kha_graphics4_VertexStructure
};
var kha_graphics5_Graphics = function() { };
$hxClasses["kha.graphics5.Graphics"] = kha_graphics5_Graphics;
kha_graphics5_Graphics.__name__ = true;
kha_graphics5_Graphics.prototype = {
	renderTargetsInvertedY: null
	,begin: null
	,end: null
	,swapBuffers: null
	,__class__: kha_graphics5_Graphics
};
var kha_graphics5_RenderTarget = function() { };
$hxClasses["kha.graphics5.RenderTarget"] = kha_graphics5_RenderTarget;
kha_graphics5_RenderTarget.__name__ = true;
var kha_input_Gamepad = $hx_exports["kha"]["input"]["Gamepad"] = function(index,id) {
	if(id == null) {
		id = "unknown";
	}
	if(index == null) {
		index = 0;
	}
	this.index = index;
	this.axisListeners = [];
	this.buttonListeners = [];
	kha_input_Gamepad.instances[index] = this;
};
$hxClasses["kha.input.Gamepad"] = kha_input_Gamepad;
kha_input_Gamepad.__name__ = true;
kha_input_Gamepad.get = function(index) {
	if(index == null) {
		index = 0;
	}
	if(index >= kha_input_Gamepad.instances.length) {
		return null;
	}
	return kha_input_Gamepad.instances[index];
};
kha_input_Gamepad.notifyOnConnect = function(connectListener,disconnectListener) {
	if(connectListener != null) {
		kha_input_Gamepad.connectListeners.push(connectListener);
	}
	if(disconnectListener != null) {
		kha_input_Gamepad.disconnectListeners.push(disconnectListener);
	}
};
kha_input_Gamepad.removeConnect = function(connectListener,disconnectListener) {
	if(connectListener != null) {
		HxOverrides.remove(kha_input_Gamepad.connectListeners,connectListener);
	}
	if(disconnectListener != null) {
		HxOverrides.remove(kha_input_Gamepad.disconnectListeners,disconnectListener);
	}
};
kha_input_Gamepad.sendConnectEvent = function(index) {
	kha_input_Gamepad.instances[index].connected = true;
	var _g = 0;
	var _g1 = kha_input_Gamepad.connectListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener(index);
	}
};
kha_input_Gamepad.sendDisconnectEvent = function(index) {
	kha_input_Gamepad.instances[index].connected = false;
	var _g = 0;
	var _g1 = kha_input_Gamepad.disconnectListeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener(index);
	}
};
kha_input_Gamepad.prototype = {
	index: null
	,notify: function(axisListener,buttonListener) {
		if(axisListener != null) {
			this.axisListeners.push(axisListener);
		}
		if(buttonListener != null) {
			this.buttonListeners.push(buttonListener);
		}
	}
	,remove: function(axisListener,buttonListener) {
		if(axisListener != null) {
			HxOverrides.remove(this.axisListeners,axisListener);
		}
		if(buttonListener != null) {
			HxOverrides.remove(this.buttonListeners,buttonListener);
		}
	}
	,axisListeners: null
	,buttonListeners: null
	,id: null
	,connected: null
	,get_id: function() {
		return kha_SystemImpl.getGamepadId(this.index);
	}
	,sendAxisEvent: function(axis,value) {
		var _g = 0;
		var _g1 = this.axisListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(axis,value);
		}
	}
	,sendButtonEvent: function(button,value) {
		var _g = 0;
		var _g1 = this.buttonListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(button,value);
		}
	}
	,__class__: kha_input_Gamepad
};
var kha_network_Controller = function() {
	this.__id = kha_network_ControllerBuilder.nextId++;
	this._inputBuffer = new haxe_io_Bytes(new ArrayBuffer(1));
};
$hxClasses["kha.network.Controller"] = kha_network_Controller;
kha_network_Controller.__name__ = true;
kha_network_Controller.prototype = {
	__id: null
	,_inputBufferIndex: null
	,_inputBuffer: null
	,_id: function() {
		return this.__id;
	}
	,_receive: function(bytes) {
	}
	,__class__: kha_network_Controller
};
var kha_input_Keyboard = $hx_exports["kha"]["input"]["Keyboard"] = function() {
	kha_network_Controller.call(this);
	this.downListeners = [];
	this.upListeners = [];
	this.pressListeners = [];
	kha_input_Keyboard.instance = this;
};
$hxClasses["kha.input.Keyboard"] = kha_input_Keyboard;
kha_input_Keyboard.__name__ = true;
kha_input_Keyboard.get = function(num) {
	if(num == null) {
		num = 0;
	}
	return kha_SystemImpl.getKeyboard(num);
};
kha_input_Keyboard.__super__ = kha_network_Controller;
kha_input_Keyboard.prototype = $extend(kha_network_Controller.prototype,{
	notify: function(downListener,upListener,pressListener) {
		if(downListener != null) {
			this.downListeners.push(downListener);
		}
		if(upListener != null) {
			this.upListeners.push(upListener);
		}
		if(pressListener != null) {
			this.pressListeners.push(pressListener);
		}
	}
	,remove: function(downListener,upListener,pressListener) {
		if(downListener != null) {
			HxOverrides.remove(this.downListeners,downListener);
		}
		if(upListener != null) {
			HxOverrides.remove(this.upListeners,upListener);
		}
		if(pressListener != null) {
			HxOverrides.remove(this.pressListeners,pressListener);
		}
	}
	,show: function() {
	}
	,hide: function() {
	}
	,downListeners: null
	,upListeners: null
	,pressListeners: null
	,sendDownEvent: function(code) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(5));
			bytes.setInt32(0,0);
			bytes.b[4] = code;
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		var _g = 0;
		var _g1 = this.downListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(code);
		}
	}
	,sendUpEvent: function(code) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(5));
			bytes.setInt32(0,1);
			bytes.b[4] = code;
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		var _g = 0;
		var _g1 = this.upListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(code);
		}
	}
	,sendPressEvent: function(char) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(5));
			bytes.setInt32(0,2);
			bytes.b[4] = HxOverrides.cca(char,0);
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		var _g = 0;
		var _g1 = this.pressListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(char);
		}
	}
	,_receive: function(bytes) {
		var funcindex = bytes.getInt32(0);
		if(funcindex == 0) {
			var input0 = bytes.b[4];
			this.sendDownEvent(input0);
			return;
		}
		if(funcindex == 1) {
			var input01 = bytes.b[4];
			this.sendUpEvent(input01);
			return;
		}
		if(funcindex == 2) {
			var code = bytes.b[4];
			var input02 = String.fromCodePoint(code);
			this.sendPressEvent(input02);
			return;
		}
	}
	,__class__: kha_input_Keyboard
});
var kha_input_Mouse = $hx_exports["kha"]["input"]["Mouse"] = function() {
	kha_network_Controller.call(this);
	kha_input_Mouse.instance = this;
};
$hxClasses["kha.input.Mouse"] = kha_input_Mouse;
kha_input_Mouse.__name__ = true;
kha_input_Mouse.get = function(num) {
	if(num == null) {
		num = 0;
	}
	return kha_SystemImpl.getMouse(num);
};
kha_input_Mouse.__super__ = kha_network_Controller;
kha_input_Mouse.prototype = $extend(kha_network_Controller.prototype,{
	notify: function(downListener,upListener,moveListener,wheelListener,leaveListener) {
		this.notifyWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener);
	}
	,remove: function(downListener,upListener,moveListener,wheelListener,leaveListener) {
		this.removeWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener);
	}
	,notifyWindowed: function(windowId,downListener,upListener,moveListener,wheelListener,leaveListener) {
		if(downListener != null) {
			if(this.windowDownListeners == null) {
				this.windowDownListeners = [];
			}
			while(this.windowDownListeners.length <= windowId) this.windowDownListeners.push([]);
			this.windowDownListeners[windowId].push(downListener);
		}
		if(upListener != null) {
			if(this.windowUpListeners == null) {
				this.windowUpListeners = [];
			}
			while(this.windowUpListeners.length <= windowId) this.windowUpListeners.push([]);
			this.windowUpListeners[windowId].push(upListener);
		}
		if(moveListener != null) {
			if(this.windowMoveListeners == null) {
				this.windowMoveListeners = [];
			}
			while(this.windowMoveListeners.length <= windowId) this.windowMoveListeners.push([]);
			this.windowMoveListeners[windowId].push(moveListener);
		}
		if(wheelListener != null) {
			if(this.windowWheelListeners == null) {
				this.windowWheelListeners = [];
			}
			while(this.windowWheelListeners.length <= windowId) this.windowWheelListeners.push([]);
			this.windowWheelListeners[windowId].push(wheelListener);
		}
		if(leaveListener != null) {
			if(this.windowLeaveListeners == null) {
				this.windowLeaveListeners = [];
			}
			while(this.windowLeaveListeners.length <= windowId) this.windowLeaveListeners.push([]);
			this.windowLeaveListeners[windowId].push(leaveListener);
		}
	}
	,removeWindowed: function(windowId,downListener,upListener,moveListener,wheelListener,leaveListener) {
		if(downListener != null) {
			if(this.windowDownListeners != null) {
				if(windowId < this.windowDownListeners.length) {
					HxOverrides.remove(this.windowDownListeners[windowId],downListener);
				} else {
					haxe_Log.trace("no downListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 110, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no downListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 114, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(upListener != null) {
			if(this.windowUpListeners != null) {
				if(windowId < this.windowUpListeners.length) {
					HxOverrides.remove(this.windowUpListeners[windowId],upListener);
				} else {
					haxe_Log.trace("no upListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 124, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no upListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 128, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(moveListener != null) {
			if(this.windowMoveListeners != null) {
				if(windowId < this.windowMoveListeners.length) {
					HxOverrides.remove(this.windowMoveListeners[windowId],moveListener);
				} else {
					haxe_Log.trace("no moveListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 138, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no moveListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 142, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(wheelListener != null) {
			if(this.windowWheelListeners != null) {
				if(windowId < this.windowWheelListeners.length) {
					HxOverrides.remove(this.windowWheelListeners[windowId],wheelListener);
				} else {
					haxe_Log.trace("no wheelListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 152, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no wheelListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 156, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(leaveListener != null) {
			if(this.windowLeaveListeners != null) {
				if(windowId < this.windowLeaveListeners.length) {
					HxOverrides.remove(this.windowLeaveListeners[windowId],leaveListener);
				} else {
					haxe_Log.trace("no leaveListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 166, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no leaveListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 170, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
	}
	,lock: function() {
	}
	,unlock: function() {
	}
	,canLock: function() {
		return false;
	}
	,isLocked: function() {
		return false;
	}
	,notifyOnLockChange: function(change,error) {
	}
	,removeFromLockChange: function(change,error) {
	}
	,hideSystemCursor: function() {
	}
	,showSystemCursor: function() {
	}
	,windowDownListeners: null
	,windowUpListeners: null
	,windowMoveListeners: null
	,windowWheelListeners: null
	,windowLeaveListeners: null
	,sendLeaveEvent: function(windowId) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(8));
			bytes.setInt32(0,0);
			bytes.setInt32(4,windowId);
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		if(this.windowLeaveListeners != null) {
			var _g = 0;
			var _g1 = this.windowLeaveListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener();
			}
		}
	}
	,sendDownEvent: function(windowId,button,x,y) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(20));
			bytes.setInt32(0,1);
			bytes.setInt32(4,windowId);
			bytes.setInt32(8,button);
			bytes.setInt32(12,x);
			bytes.setInt32(16,y);
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		if(this.windowDownListeners != null) {
			var _g = 0;
			var _g1 = this.windowDownListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(button,x,y);
			}
		}
	}
	,sendUpEvent: function(windowId,button,x,y) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(20));
			bytes.setInt32(0,2);
			bytes.setInt32(4,windowId);
			bytes.setInt32(8,button);
			bytes.setInt32(12,x);
			bytes.setInt32(16,y);
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		if(this.windowUpListeners != null) {
			var _g = 0;
			var _g1 = this.windowUpListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(button,x,y);
			}
		}
	}
	,sendMoveEvent: function(windowId,x,y,movementX,movementY) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(24));
			bytes.setInt32(0,3);
			bytes.setInt32(4,windowId);
			bytes.setInt32(8,x);
			bytes.setInt32(12,y);
			bytes.setInt32(16,movementX);
			bytes.setInt32(20,movementY);
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		if(this.windowMoveListeners != null) {
			var _g = 0;
			var _g1 = this.windowMoveListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(x,y,movementX,movementY);
			}
		}
	}
	,sendWheelEvent: function(windowId,delta) {
		if(kha_network_Session.the() != null) {
			var bytes = new haxe_io_Bytes(new ArrayBuffer(12));
			bytes.setInt32(0,4);
			bytes.setInt32(4,windowId);
			bytes.setInt32(8,delta);
			kha_network_Session.the().sendControllerUpdate(this._id(),bytes);
		}
		if(this.windowWheelListeners != null) {
			var _g = 0;
			var _g1 = this.windowWheelListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(delta);
			}
		}
	}
	,_receive: function(bytes) {
		var funcindex = bytes.getInt32(0);
		if(funcindex == 0) {
			var input0 = bytes.getInt32(4);
			this.sendLeaveEvent(input0);
			return;
		}
		if(funcindex == 1) {
			var input01 = bytes.getInt32(4);
			var input1 = bytes.getInt32(8);
			var input2 = bytes.getInt32(12);
			var input3 = bytes.getInt32(16);
			this.sendDownEvent(input01,input1,input2,input3);
			return;
		}
		if(funcindex == 2) {
			var input02 = bytes.getInt32(4);
			var input11 = bytes.getInt32(8);
			var input21 = bytes.getInt32(12);
			var input31 = bytes.getInt32(16);
			this.sendUpEvent(input02,input11,input21,input31);
			return;
		}
		if(funcindex == 3) {
			var input03 = bytes.getInt32(4);
			var input12 = bytes.getInt32(8);
			var input22 = bytes.getInt32(12);
			var input32 = bytes.getInt32(16);
			var input4 = bytes.getInt32(20);
			this.sendMoveEvent(input03,input12,input22,input32,input4);
			return;
		}
		if(funcindex == 4) {
			var input04 = bytes.getInt32(4);
			var input13 = bytes.getInt32(8);
			this.sendWheelEvent(input04,input13);
			return;
		}
	}
	,__class__: kha_input_Mouse
});
var kha_input_MouseImpl = function() {
	kha_input_Mouse.call(this);
};
$hxClasses["kha.input.MouseImpl"] = kha_input_MouseImpl;
kha_input_MouseImpl.__name__ = true;
kha_input_MouseImpl.__super__ = kha_input_Mouse;
kha_input_MouseImpl.prototype = $extend(kha_input_Mouse.prototype,{
	lock: function() {
		kha_SystemImpl.lockMouse();
	}
	,unlock: function() {
		kha_SystemImpl.unlockMouse();
	}
	,canLock: function() {
		return kha_SystemImpl.canLockMouse();
	}
	,isLocked: function() {
		return kha_SystemImpl.isMouseLocked();
	}
	,notifyOnLockChange: function(func,error) {
		kha_SystemImpl.notifyOfMouseLockChange(func,error);
	}
	,removeFromLockChange: function(func,error) {
		kha_SystemImpl.removeFromMouseLockChange(func,error);
	}
	,hideSystemCursor: function() {
		kha_SystemImpl.khanvas.style.cursor = "none";
	}
	,showSystemCursor: function() {
		kha_SystemImpl.khanvas.style.cursor = "default";
	}
	,_receive: function(bytes) {
		var funcindex = bytes.getInt32(0);
	}
	,__class__: kha_input_MouseImpl
});
var kha_input_Pen = function() {
	kha_input_Pen.instance = this;
};
$hxClasses["kha.input.Pen"] = kha_input_Pen;
kha_input_Pen.__name__ = true;
kha_input_Pen.get = function(num) {
	if(num == null) {
		num = 0;
	}
	return kha_SystemImpl.getPen(num);
};
kha_input_Pen.prototype = {
	notify: function(downListener,upListener,moveListener) {
		this.notifyWindowed(0,downListener,upListener,moveListener);
	}
	,remove: function(downListener,upListener,moveListener) {
		this.removeWindowed(0,downListener,upListener,moveListener);
	}
	,notifyWindowed: function(windowId,downListener,upListener,moveListener) {
		if(downListener != null) {
			if(this.windowDownListeners == null) {
				this.windowDownListeners = [];
			}
			while(this.windowDownListeners.length <= windowId) this.windowDownListeners.push([]);
			this.windowDownListeners[windowId].push(downListener);
		}
		if(upListener != null) {
			if(this.windowUpListeners == null) {
				this.windowUpListeners = [];
			}
			while(this.windowUpListeners.length <= windowId) this.windowUpListeners.push([]);
			this.windowUpListeners[windowId].push(upListener);
		}
		if(moveListener != null) {
			if(this.windowMoveListeners == null) {
				this.windowMoveListeners = [];
			}
			while(this.windowMoveListeners.length <= windowId) this.windowMoveListeners.push([]);
			this.windowMoveListeners[windowId].push(moveListener);
		}
	}
	,removeWindowed: function(windowId,downListener,upListener,moveListener) {
		if(downListener != null && this.windowDownListeners != null) {
			if(windowId < this.windowDownListeners.length) {
				HxOverrides.remove(this.windowDownListeners[windowId],downListener);
			}
		}
		if(upListener != null && this.windowUpListeners != null) {
			if(windowId < this.windowUpListeners.length) {
				HxOverrides.remove(this.windowUpListeners[windowId],upListener);
			}
		}
		if(moveListener != null && this.windowMoveListeners != null) {
			if(windowId < this.windowMoveListeners.length) {
				HxOverrides.remove(this.windowMoveListeners[windowId],moveListener);
			}
		}
	}
	,windowDownListeners: null
	,windowUpListeners: null
	,windowMoveListeners: null
	,sendDownEvent: function(windowId,x,y,pressure) {
		if(this.windowDownListeners != null) {
			var _g = 0;
			var _g1 = this.windowDownListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(x,y,pressure);
			}
		}
	}
	,sendUpEvent: function(windowId,x,y,pressure) {
		if(this.windowUpListeners != null) {
			var _g = 0;
			var _g1 = this.windowUpListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(x,y,pressure);
			}
		}
	}
	,sendMoveEvent: function(windowId,x,y,pressure) {
		if(this.windowMoveListeners != null) {
			var _g = 0;
			var _g1 = this.windowMoveListeners[windowId];
			while(_g < _g1.length) {
				var listener = _g1[_g];
				++_g;
				listener(x,y,pressure);
			}
		}
	}
	,__class__: kha_input_Pen
};
var kha_input_Sensor = function() {
	this.listeners = [];
};
$hxClasses["kha.input.Sensor"] = kha_input_Sensor;
kha_input_Sensor.__name__ = true;
kha_input_Sensor.get = function(type) {
	switch(type._hx_index) {
	case 0:
		return kha_input_Sensor.accelerometer;
	case 1:
		return kha_input_Sensor.gyroscope;
	}
};
kha_input_Sensor._changed = function(type,x,y,z) {
	var sensor = kha_input_Sensor.get(type == 0 ? kha_input_SensorType.Accelerometer : kha_input_SensorType.Gyroscope);
	var _g = 0;
	var _g1 = sensor.listeners;
	while(_g < _g1.length) {
		var listener = _g1[_g];
		++_g;
		listener(x,y,z);
	}
};
kha_input_Sensor.prototype = {
	listeners: null
	,notify: function(listener) {
		this.listeners.push(listener);
	}
	,__class__: kha_input_Sensor
};
var kha_input_SensorType = $hxEnums["kha.input.SensorType"] = { __ename__ : true, __constructs__ : ["Accelerometer","Gyroscope"]
	,Accelerometer: {_hx_index:0,__enum__:"kha.input.SensorType",toString:$estr}
	,Gyroscope: {_hx_index:1,__enum__:"kha.input.SensorType",toString:$estr}
};
var kha_input_Surface = $hx_exports["kha"]["input"]["Surface"] = function() {
	this.touchStartListeners = [];
	this.touchEndListeners = [];
	this.moveListeners = [];
	kha_input_Surface.instance = this;
};
$hxClasses["kha.input.Surface"] = kha_input_Surface;
kha_input_Surface.__name__ = true;
kha_input_Surface.get = function(num) {
	if(num == null) {
		num = 0;
	}
	if(num != 0) {
		return null;
	}
	return kha_input_Surface.instance;
};
kha_input_Surface.prototype = {
	notify: function(touchStartListener,touchEndListener,moveListener) {
		if(touchStartListener != null) {
			this.touchStartListeners.push(touchStartListener);
		}
		if(touchEndListener != null) {
			this.touchEndListeners.push(touchEndListener);
		}
		if(moveListener != null) {
			this.moveListeners.push(moveListener);
		}
	}
	,remove: function(touchStartListener,touchEndListener,moveListener) {
		if(touchStartListener != null) {
			HxOverrides.remove(this.touchStartListeners,touchStartListener);
		}
		if(touchEndListener != null) {
			HxOverrides.remove(this.touchEndListeners,touchEndListener);
		}
		if(moveListener != null) {
			this.moveListeners.push(moveListener);
		}
	}
	,touchStartListeners: null
	,touchEndListeners: null
	,moveListeners: null
	,sendTouchStartEvent: function(index,x,y) {
		var _g = 0;
		var _g1 = this.touchStartListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(index,x,y);
		}
	}
	,sendTouchEndEvent: function(index,x,y) {
		var _g = 0;
		var _g1 = this.touchEndListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(index,x,y);
		}
	}
	,sendMoveEvent: function(index,x,y) {
		var _g = 0;
		var _g1 = this.moveListeners;
		while(_g < _g1.length) {
			var listener = _g1[_g];
			++_g;
			listener(index,x,y);
		}
	}
	,__class__: kha_input_Surface
};
var kha_internal_BytesBlob = function(bytes) {
	this.bytes = bytes;
};
$hxClasses["kha.internal.BytesBlob"] = kha_internal_BytesBlob;
kha_internal_BytesBlob.__name__ = true;
kha_internal_BytesBlob.__interfaces__ = [kha_Resource];
kha_internal_BytesBlob.fromBytes = function(bytes) {
	return new kha_internal_BytesBlob(bytes);
};
kha_internal_BytesBlob.alloc = function(size) {
	return new kha_internal_BytesBlob(new haxe_io_Bytes(new ArrayBuffer(size)));
};
kha_internal_BytesBlob.readF32 = function(i) {
	var sign = (i & -2147483648) == 0 ? 1 : -1;
	var exp = i >> 23 & 255;
	var man = i & 8388607;
	switch(exp) {
	case 0:
		return 0.0;
	case 255:
		if(man != 0) {
			return NaN;
		} else if(sign > 0) {
			return Infinity;
		} else {
			return -Infinity;
		}
		break;
	default:
		return sign * ((man + 8388608) / 8388608.0) * Math.pow(2,exp - 127);
	}
};
kha_internal_BytesBlob.bit = function(value,position) {
	var b = (value >>> position & 1) == 1;
	if(b) {
		var a = 3;
		++a;
		return true;
	} else {
		var c = 4;
		--c;
		return false;
	}
};
kha_internal_BytesBlob.toText = function(chars,length) {
	var value = "";
	var _g = 0;
	var _g1 = length;
	while(_g < _g1) {
		var i = _g++;
		value += String.fromCodePoint(chars[i]);
	}
	return value;
};
kha_internal_BytesBlob.prototype = {
	bytes: null
	,sub: function(start,length) {
		return new kha_internal_BytesBlob(this.bytes.sub(start,length));
	}
	,length: null
	,get_length: function() {
		return this.bytes.length;
	}
	,writeU8: function(position,value) {
		this.bytes.b[position] = value;
	}
	,readU8: function(position) {
		var byte = this.bytes.b[position];
		++position;
		return byte;
	}
	,readS8: function(position) {
		var byte = this.bytes.b[position];
		++position;
		var sign = (byte & 128) == 0 ? 1 : -1;
		byte &= 127;
		return sign * byte;
	}
	,readU16BE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		position += 2;
		return first * 256 + second;
	}
	,readU16LE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		position += 2;
		return second * 256 + first;
	}
	,readU32LE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		position += 4;
		return fourth + third * 256 + second * 256 * 256 + first * 256 * 256 * 256;
	}
	,readU32BE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		position += 4;
		return first + second * 256 + third * 256 * 256 + fourth * 256 * 256 * 256;
	}
	,readS16BE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		position += 2;
		var sign = (first & 128) == 0 ? 1 : -1;
		first &= 127;
		if(sign == -1) {
			return -32767 + first * 256 + second;
		} else {
			return first * 256 + second;
		}
	}
	,readS16LE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		var sign = (second & 128) == 0 ? 1 : -1;
		second &= 127;
		position += 2;
		if(sign == -1) {
			return -32767 + second * 256 + first;
		} else {
			return second * 256 + first;
		}
	}
	,readS32LE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		var sign = (first & 128) == 0 ? 1 : -1;
		first &= 127;
		position += 4;
		if(sign == -1) {
			return -2147483647 + fourth + third * 256 + second * 256 * 256 + first * 256 * 256 * 256;
		} else {
			return fourth + third * 256 + second * 256 * 256 + first * 256 * 256 * 256;
		}
	}
	,readS32BE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		var sign = (fourth & 128) == 0 ? 1 : -1;
		fourth &= 127;
		position += 4;
		if(sign == -1) {
			return -2147483647 + first + second * 256 + third * 256 * 256 + fourth * 256 * 256 * 256;
		}
		return first + second * 256 + third * 256 * 256 + fourth * 256 * 256 * 256;
	}
	,readF32LE: function(position) {
		return kha_internal_BytesBlob.readF32(this.readS32LE(position));
	}
	,readF32BE: function(position) {
		return kha_internal_BytesBlob.readF32(this.readS32BE(position));
	}
	,toString: function() {
		return this.bytes.toString();
	}
	,readUtf8Char: function(position) {
		if(position.value >= this.get_length()) {
			return -1;
		}
		var c = this.readU8(position.value);
		++position.value;
		var value = 0;
		if(!kha_internal_BytesBlob.bit(c,7)) {
			value = c;
		} else if(kha_internal_BytesBlob.bit(c,7) && kha_internal_BytesBlob.bit(c,6) && !kha_internal_BytesBlob.bit(c,5)) {
			var a = c & 31;
			var c2 = this.readU8(position.value);
			++position.value;
			var b = c2 & 63;
			value = a << 6 | b;
		} else if(kha_internal_BytesBlob.bit(c,7) && kha_internal_BytesBlob.bit(c,6) && kha_internal_BytesBlob.bit(c,5) && !kha_internal_BytesBlob.bit(c,4)) {
			position.value += 2;
		} else if(kha_internal_BytesBlob.bit(c,7) && kha_internal_BytesBlob.bit(c,6) && kha_internal_BytesBlob.bit(c,5) && kha_internal_BytesBlob.bit(c,4) && !kha_internal_BytesBlob.bit(c,3)) {
			position.value += 3;
		}
		return value;
	}
	,readUtf8Block: function(buffer,position) {
		var bufferindex = 0;
		if(position.value >= this.get_length()) {
			return "";
		}
		while(bufferindex < 2000) {
			var c = this.readUtf8Char(position);
			if(c < 0) {
				break;
			}
			buffer[bufferindex] = c;
			++bufferindex;
		}
		return kha_internal_BytesBlob.toText(buffer,bufferindex);
	}
	,readUtf8String: function() {
		var this1 = new Array(2000);
		var buffer = this1;
		var text = "";
		var start = 0;
		if(this.get_length() >= 3 && this.bytes.b[0] == 239 && this.bytes.b[1] == 187 && this.bytes.b[2] == 191) {
			start = 3;
		}
		var position = { value : start};
		while(position.value < this.get_length()) text += this.readUtf8Block(buffer,position);
		return text;
	}
	,toBytes: function() {
		return this.bytes;
	}
	,unload: function() {
		this.bytes = null;
	}
	,__class__: kha_internal_BytesBlob
};
var kha_internal_HdrFormat = function() {
};
$hxClasses["kha.internal.HdrFormat"] = kha_internal_HdrFormat;
kha_internal_HdrFormat.__name__ = true;
kha_internal_HdrFormat.readBuf = function(buf) {
	var bytesRead = 0;
	while(true) {
		buf[bytesRead++] = kha_internal_HdrFormat.buffer[kha_internal_HdrFormat.fileOffset] & 255;
		if(!(++kha_internal_HdrFormat.fileOffset < kha_internal_HdrFormat.bufferLength && bytesRead < buf.length)) {
			break;
		}
	}
	return bytesRead;
};
kha_internal_HdrFormat.readBufOffset = function(buf,offset,length) {
	var bytesRead = 0;
	while(true) {
		buf[offset + bytesRead++] = kha_internal_HdrFormat.buffer[kha_internal_HdrFormat.fileOffset] & 255;
		if(!(++kha_internal_HdrFormat.fileOffset < kha_internal_HdrFormat.bufferLength && bytesRead < length)) {
			break;
		}
	}
	return bytesRead;
};
kha_internal_HdrFormat.readPixelsRaw = function(buffer,data,offset,numpixels) {
	var numExpected = 4 * numpixels;
	var numRead = kha_internal_HdrFormat.readBufOffset(data,offset,numExpected);
	if(numRead < numExpected) {
		haxe_Log.trace("Error reading raw pixels: got " + numRead + " bytes, expected " + numExpected,{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 43, className : "kha.internal.HdrFormat", methodName : "readPixelsRaw"});
		return;
	}
};
kha_internal_HdrFormat.readPixelsRawRLE = function(buffer,data,offset,scanline_width,num_scanlines) {
	var this1 = new Uint8Array(4);
	var rgbe = this1;
	var scanline_buffer = null;
	var ptr;
	var ptr_end;
	var count;
	var this2 = new Uint8Array(2);
	var buf = this2;
	var bufferLength = buffer.length;
	while(num_scanlines > 0) {
		if(kha_internal_HdrFormat.readBuf(rgbe) < rgbe.length) {
			haxe_Log.trace("Error reading bytes: expected " + rgbe.length,{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 59, className : "kha.internal.HdrFormat", methodName : "readPixelsRawRLE"});
			return;
		}
		if(rgbe[0] != 2 || rgbe[1] != 2 || (rgbe[2] & 128) != 0) {
			data[offset++] = rgbe[0] & 255;
			data[offset++] = rgbe[1] & 255;
			data[offset++] = rgbe[2] & 255;
			data[offset++] = rgbe[3] & 255;
			kha_internal_HdrFormat.readPixelsRaw(buffer,data,offset,scanline_width * num_scanlines - 1);
			return;
		}
		if(((rgbe[2] & 255) << 8 | rgbe[3] & 255) != scanline_width) {
			haxe_Log.trace("Wrong scanline width " + ((rgbe[2] & 255) << 8 | rgbe[3] & 255) + ", expected " + scanline_width,{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 74, className : "kha.internal.HdrFormat", methodName : "readPixelsRawRLE"});
			return;
		}
		if(scanline_buffer == null) {
			var this3 = new Uint8Array(4 * scanline_width);
			scanline_buffer = this3;
		}
		ptr = 0;
		var _g = 0;
		while(_g < 4) {
			var i = _g++;
			ptr_end = (i + 1) * scanline_width;
			while(ptr < ptr_end) {
				if(kha_internal_HdrFormat.readBuf(buf) < buf.length) {
					haxe_Log.trace("Error reading 2-byte buffer",{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 88, className : "kha.internal.HdrFormat", methodName : "readPixelsRawRLE"});
					return;
				}
				if((buf[0] & 255) > 128) {
					count = (buf[0] & 255) - 128;
					if(count == 0 || count > ptr_end - ptr) {
						haxe_Log.trace("Bad scanline data",{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 95, className : "kha.internal.HdrFormat", methodName : "readPixelsRawRLE"});
						return;
					}
					while(count-- > 0) scanline_buffer[ptr++] = buf[1] & 255;
				} else {
					count = buf[0] & 255;
					if(count == 0 || count > ptr_end - ptr) {
						haxe_Log.trace("Bad scanline data",{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 106, className : "kha.internal.HdrFormat", methodName : "readPixelsRawRLE"});
						return;
					}
					scanline_buffer[ptr++] = buf[1] & 255;
					if(--count > 0) {
						if(kha_internal_HdrFormat.readBufOffset(scanline_buffer,ptr,count) < count) {
							haxe_Log.trace("Error reading non-run data",{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 112, className : "kha.internal.HdrFormat", methodName : "readPixelsRawRLE"});
							return;
						}
						ptr += count;
					}
				}
			}
		}
		var _g1 = 0;
		var _g2 = scanline_width;
		while(_g1 < _g2) {
			var i1 = _g1++;
			data[offset] = scanline_buffer[i1] & 255;
			data[offset + 1] = scanline_buffer[i1 + scanline_width] & 255;
			data[offset + 2] = scanline_buffer[i1 + 2 * scanline_width] & 255;
			data[offset + 3] = scanline_buffer[i1 + 3 * scanline_width] & 255;
			offset += 4;
		}
		--num_scanlines;
	}
};
kha_internal_HdrFormat.readLine = function() {
	var buf = "";
	while(true) {
		var b = kha_internal_HdrFormat.buffer[kha_internal_HdrFormat.fileOffset];
		if(b == 10) {
			++kha_internal_HdrFormat.fileOffset;
			break;
		}
		buf += String.fromCodePoint(b);
		if(!(++kha_internal_HdrFormat.fileOffset < kha_internal_HdrFormat.bufferLength)) {
			break;
		}
	}
	return buf;
};
kha_internal_HdrFormat.parse = function(bytes) {
	kha_internal_HdrFormat.buffer = haxe_io__$UInt8Array_UInt8Array_$Impl_$.fromBytes(bytes);
	kha_internal_HdrFormat.bufferLength = kha_internal_HdrFormat.buffer.length;
	kha_internal_HdrFormat.fileOffset = 0;
	var width = 0;
	var height = 0;
	var exposure = 1.0;
	var gamma = 1.0;
	var rle = false;
	var _g = 0;
	while(_g < 20) {
		var i = _g++;
		var line = kha_internal_HdrFormat.readLine();
		if(kha_internal_HdrFormat.formatPattern.match(line)) {
			rle = true;
		} else if(kha_internal_HdrFormat.exposurePattern.match(line)) {
			exposure = parseFloat(kha_internal_HdrFormat.exposurePattern.matched(1));
		} else if(kha_internal_HdrFormat.widthHeightPattern.match(line)) {
			height = Std.parseInt(kha_internal_HdrFormat.widthHeightPattern.matched(1));
			width = Std.parseInt(kha_internal_HdrFormat.widthHeightPattern.matched(2));
			break;
		}
	}
	if(!rle) {
		haxe_Log.trace("File is not run length encoded!",{ fileName : "kha/internal/HdrFormat.hx", lineNumber : 175, className : "kha.internal.HdrFormat", methodName : "parse"});
		return null;
	}
	var this1 = new Uint8Array(width * height * 4);
	var data = this1;
	var scanline_width = width;
	var num_scanlines = height;
	kha_internal_HdrFormat.readPixelsRawRLE(kha_internal_HdrFormat.buffer,data,0,scanline_width,num_scanlines);
	var this2 = new Float32Array(width * height * 4);
	var floatData = this2;
	var offset = 0;
	while(offset < data.length) {
		var r = data[offset] / 255;
		var g = data[offset + 1] / 255;
		var b = data[offset + 2] / 255;
		var e = data[offset + 3];
		var f = Math.pow(2.0,e - 128.0);
		r *= f;
		g *= f;
		b *= f;
		floatData[offset] = r;
		floatData[offset + 1] = g;
		floatData[offset + 2] = b;
		floatData[offset + 3] = 1.0;
		offset += 4;
	}
	return { width : width, height : height, data : floatData};
};
kha_internal_HdrFormat.prototype = {
	__class__: kha_internal_HdrFormat
};
var kha_js_AEAudioChannel = function(element) {
	this.stopped = false;
	this.element = element;
};
$hxClasses["kha.js.AEAudioChannel"] = kha_js_AEAudioChannel;
kha_js_AEAudioChannel.__name__ = true;
kha_js_AEAudioChannel.__interfaces__ = [kha_audio1_AudioChannel];
kha_js_AEAudioChannel.prototype = {
	element: null
	,stopped: null
	,play: function() {
		this.stopped = false;
		if(kha_SystemImpl.mobile) {
			if(kha_SystemImpl.insideInputEvent) {
				this.element.play();
				kha_SystemImpl.mobileAudioPlaying = true;
			} else if(kha_SystemImpl.mobileAudioPlaying) {
				this.element.play();
			} else {
				kha_js_AEAudioChannel.todo.push(this);
			}
		} else {
			this.element.play();
		}
	}
	,pause: function() {
		try {
			this.element.pause();
		} catch( e ) {
			haxe_Log.trace((e instanceof js__$Boot_HaxeError) ? e.val : e,{ fileName : "kha/js/AEAudioChannel.hx", lineNumber : 39, className : "kha.js.AEAudioChannel", methodName : "pause"});
		}
	}
	,stop: function() {
		try {
			this.element.pause();
			this.element.currentTime = 0;
			this.stopped = true;
		} catch( e ) {
			haxe_Log.trace((e instanceof js__$Boot_HaxeError) ? e.val : e,{ fileName : "kha/js/AEAudioChannel.hx", lineNumber : 50, className : "kha.js.AEAudioChannel", methodName : "stop"});
		}
	}
	,length: null
	,get_length: function() {
		if(isFinite(this.element.duration)) {
			return this.element.duration;
		} else {
			return Infinity;
		}
	}
	,position: null
	,get_position: function() {
		return this.element.currentTime;
	}
	,get_volume: function() {
		return this.element.volume;
	}
	,set_volume: function(value) {
		return this.element.volume = value;
	}
	,finished: null
	,get_finished: function() {
		if(!this.stopped) {
			return this.get_position() >= this.get_length();
		} else {
			return true;
		}
	}
	,__class__: kha_js_AEAudioChannel
};
var kha_js_AudioElementAudio = function() { };
$hxClasses["kha.js.AudioElementAudio"] = kha_js_AudioElementAudio;
kha_js_AudioElementAudio.__name__ = true;
kha_js_AudioElementAudio._compile = function() {
};
kha_js_AudioElementAudio.play = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	return kha_js_AudioElementAudio.stream(sound,loop);
};
kha_js_AudioElementAudio.stream = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	sound.element.loop = loop;
	var channel = new kha_js_AEAudioChannel(sound.element);
	channel.play();
	return channel;
};
var kha_js_CanvasGraphics = function(canvas) {
	this.bakedQuadCache = new kha_AlignedQuad();
	this.clipping = false;
	kha_graphics2_Graphics.call(this);
	this.canvas = canvas;
	kha_js_CanvasGraphics.instance = this;
	this.myColor = kha__$Color_Color_$Impl_$.fromBytes(0,0,0);
};
$hxClasses["kha.js.CanvasGraphics"] = kha_js_CanvasGraphics;
kha_js_CanvasGraphics.__name__ = true;
kha_js_CanvasGraphics.stringWidth = function(font,text) {
	if(kha_js_CanvasGraphics.instance == null) {
		return 5 * text.length;
	} else {
		kha_js_CanvasGraphics.instance.set_font(font);
		return kha_js_CanvasGraphics.instance.canvas.measureText(text).width;
	}
};
kha_js_CanvasGraphics.__super__ = kha_graphics2_Graphics;
kha_js_CanvasGraphics.prototype = $extend(kha_graphics2_Graphics.prototype,{
	canvas: null
	,webfont: null
	,myColor: null
	,scaleQuality: null
	,clipping: null
	,begin: function(clear,clearColor) {
		if(clear == null) {
			clear = true;
		}
		if(clear) {
			this.clear(clearColor);
		}
	}
	,clear: function(color) {
		if(color == null) {
			color = 0;
		}
		this.canvas.strokeStyle = "rgba(" + ((color & 16711680) >>> 16) + "," + ((color & 65280) >>> 8) + "," + (color & 255) + "," + (color >>> 24) * 0.00392156862745098 + ")";
		this.canvas.fillStyle = "rgba(" + ((color & 16711680) >>> 16) + "," + ((color & 65280) >>> 8) + "," + (color & 255) + "," + (color >>> 24) * 0.00392156862745098 + ")";
		if((color >>> 24) * 0.00392156862745098 == 0) {
			this.canvas.clearRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height);
		} else {
			this.canvas.fillRect(0,0,this.canvas.canvas.width,this.canvas.canvas.height);
		}
		this.set_color(this.myColor);
	}
	,end: function() {
	}
	,drawImage: function(img,x,y) {
		this.canvas.globalAlpha = this.get_opacity();
		this.canvas.drawImage((js_Boot.__cast(img , kha_CanvasImage)).image,x,y);
		this.canvas.globalAlpha = 1;
	}
	,drawScaledSubImage: function(image,sx,sy,sw,sh,dx,dy,dw,dh) {
		this.canvas.globalAlpha = this.get_opacity();
		try {
			if(dw < 0 || dh < 0) {
				this.canvas.save();
				this.canvas.translate(dx,dy);
				var x = 0.0;
				var y = 0.0;
				if(dw < 0) {
					this.canvas.scale(-1,1);
					x = -dw;
				}
				if(dh < 0) {
					this.canvas.scale(1,-1);
					y = -dh;
				}
				this.canvas.drawImage((js_Boot.__cast(image , kha_CanvasImage)).image,sx,sy,sw,sh,x,y,dw,dh);
				this.canvas.restore();
			} else {
				this.canvas.drawImage((js_Boot.__cast(image , kha_CanvasImage)).image,sx,sy,sw,sh,dx,dy,dw,dh);
			}
		} catch( ex ) {
			var ex1 = (ex instanceof js__$Boot_HaxeError) ? ex.val : ex;
		}
		this.canvas.globalAlpha = 1;
	}
	,set_color: function(color) {
		this.myColor = color;
		this.canvas.strokeStyle = "rgba(" + ((color & 16711680) >>> 16) + "," + ((color & 65280) >>> 8) + "," + (color & 255) + "," + (color >>> 24) * 0.00392156862745098 + ")";
		this.canvas.fillStyle = "rgba(" + ((color & 16711680) >>> 16) + "," + ((color & 65280) >>> 8) + "," + (color & 255) + "," + (color >>> 24) * 0.00392156862745098 + ")";
		return color;
	}
	,get_color: function() {
		return this.myColor;
	}
	,get_imageScaleQuality: function() {
		return this.scaleQuality;
	}
	,set_imageScaleQuality: function(value) {
		if(value == kha_graphics2_ImageScaleQuality.Low) {
			this.canvas.mozImageSmoothingEnabled = false;
			this.canvas.webkitImageSmoothingEnabled = false;
			this.canvas.msImageSmoothingEnabled = false;
			this.canvas.imageSmoothingEnabled = false;
		} else {
			this.canvas.mozImageSmoothingEnabled = true;
			this.canvas.webkitImageSmoothingEnabled = true;
			this.canvas.msImageSmoothingEnabled = true;
			this.canvas.imageSmoothingEnabled = true;
		}
		return this.scaleQuality = value;
	}
	,drawRect: function(x,y,width,height,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.canvas.beginPath();
		var oldStrength = this.canvas.lineWidth;
		this.canvas.lineWidth = Math.round(strength);
		this.canvas.rect(x,y,width,height);
		this.canvas.stroke();
		this.canvas.lineWidth = oldStrength;
	}
	,fillRect: function(x,y,width,height) {
		var tmp = this.get_opacity();
		this.canvas.globalAlpha = tmp * ((this.myColor >>> 24) * 0.00392156862745098);
		this.canvas.fillRect(x,y,width,height);
		this.canvas.globalAlpha = this.get_opacity();
	}
	,drawArc: function(cx,cy,radius,sAngle,eAngle,strength,ccw) {
		if(ccw == null) {
			ccw = false;
		}
		if(strength == null) {
			strength = 1.0;
		}
		this.canvas.beginPath();
		var oldStrength = this.canvas.lineWidth;
		this.canvas.lineWidth = Math.round(strength);
		this.canvas.arc(cx,cy,radius,sAngle,eAngle,ccw);
		this.canvas.stroke();
		this.canvas.lineWidth = oldStrength;
	}
	,drawCircle: function(cx,cy,radius,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		var eAngle = 2 * Math.PI;
		this.canvas.beginPath();
		var oldStrength = this.canvas.lineWidth;
		this.canvas.lineWidth = Math.round(strength);
		this.canvas.arc(cx,cy,radius,0,eAngle,false);
		this.canvas.stroke();
		this.canvas.lineWidth = oldStrength;
	}
	,_drawArc: function(cx,cy,radius,sAngle,eAngle,strength,ccw) {
		this.canvas.beginPath();
		var oldStrength = this.canvas.lineWidth;
		this.canvas.lineWidth = Math.round(strength);
		this.canvas.arc(cx,cy,radius,sAngle,eAngle,ccw);
		this.canvas.stroke();
		this.canvas.lineWidth = oldStrength;
	}
	,fillArc: function(cx,cy,radius,sAngle,eAngle,ccw) {
		if(ccw == null) {
			ccw = false;
		}
		this.canvas.beginPath();
		this.canvas.arc(cx,cy,radius,sAngle,eAngle,ccw);
		this.canvas.fill();
	}
	,fillCircle: function(cx,cy,radius) {
		this.canvas.beginPath();
		this.canvas.arc(cx,cy,radius,0,2 * Math.PI,false);
		this.canvas.fill();
	}
	,bakedQuadCache: null
	,drawString: function(text,x,y) {
		var image = this.webfont.getImage(this.get_fontSize(),this.myColor);
		if(image.width > 0) {
			var xpos = x;
			var ypos = y;
			var _g = 0;
			var _g1 = text.length;
			while(_g < _g1) {
				var i = _g++;
				var q = this.webfont.kravur._get(this.get_fontSize()).getBakedQuad(this.bakedQuadCache,kha_graphics2_Graphics.fontGlyphs.indexOf(HxOverrides.cca(text,i)),xpos,ypos);
				if(q != null) {
					if(q.s1 - q.s0 > 0 && q.t1 - q.t0 > 0 && q.x1 - q.x0 > 0 && q.y1 - q.y0 > 0) {
						this.canvas.drawImage(image,q.s0 * image.width,q.t0 * image.height,(q.s1 - q.s0) * image.width,(q.t1 - q.t0) * image.height,q.x0,q.y0,q.x1 - q.x0,q.y1 - q.y0);
					}
					xpos += q.xadvance;
				}
			}
		}
	}
	,drawCharacters: function(text,start,length,x,y) {
		var image = this.webfont.getImage(this.get_fontSize(),this.myColor);
		if(image.width > 0) {
			var xpos = x;
			var ypos = y;
			var _g = start;
			var _g1 = start + length;
			while(_g < _g1) {
				var i = _g++;
				var q = this.webfont.kravur._get(this.get_fontSize()).getBakedQuad(this.bakedQuadCache,kha_graphics2_Graphics.fontGlyphs.indexOf(text[i]),xpos,ypos);
				if(q != null) {
					if(q.s1 - q.s0 > 0 && q.t1 - q.t0 > 0 && q.x1 - q.x0 > 0 && q.y1 - q.y0 > 0) {
						this.canvas.drawImage(image,q.s0 * image.width,q.t0 * image.height,(q.s1 - q.s0) * image.width,(q.t1 - q.t0) * image.height,q.x0,q.y0,q.x1 - q.x0,q.y1 - q.y0);
					}
					xpos += q.xadvance;
				}
			}
		}
	}
	,set_font: function(font) {
		this.webfont = js_Boot.__cast(font , kha_js_Font);
		return this.webfont;
	}
	,get_font: function() {
		return this.webfont;
	}
	,drawLine: function(x1,y1,x2,y2,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.canvas.beginPath();
		var oldWith = this.canvas.lineWidth;
		this.canvas.lineWidth = Math.round(strength);
		this.canvas.moveTo(x1,y1);
		this.canvas.lineTo(x2,y2);
		this.canvas.moveTo(0,0);
		this.canvas.stroke();
		this.canvas.lineWidth = oldWith;
	}
	,fillTriangle: function(x1,y1,x2,y2,x3,y3) {
		this.canvas.beginPath();
		this.canvas.closePath();
		this.canvas.fill();
	}
	,scissor: function(x,y,width,height) {
		if(!this.clipping) {
			this.canvas.save();
			this.clipping = true;
		}
		this.canvas.beginPath();
		this.canvas.rect(x,y,width,height);
		this.canvas.clip();
	}
	,disableScissor: function() {
		if(this.clipping) {
			this.canvas.restore();
			this.clipping = false;
		}
	}
	,drawVideo: function(video,x,y,width,height) {
		this.canvas.drawImage((js_Boot.__cast(video , kha_js_Video)).element,x,y,width,height);
	}
	,setTransformation: function(transformation) {
		this.canvas.setTransform(transformation._00,transformation._01,transformation._10,transformation._11,transformation._20,transformation._21);
	}
	,__class__: kha_js_CanvasGraphics
});
var kha_js_Font = function(blob) {
	this.images = new haxe_ds_IntMap();
	this.kravur = new kha_js_Font.Kravur(blob);
};
$hxClasses["kha.js.Font"] = kha_js_Font;
kha_js_Font.__name__ = true;
kha_js_Font.__interfaces__ = [kha_Resource];
kha_js_Font.fromBytes = function(bytes) {
	return new kha_js_Font(kha_internal_BytesBlob.fromBytes(bytes));
};
kha_js_Font.prototype = {
	kravur: null
	,images: null
	,height: function(fontSize) {
		return this.kravur._get(fontSize).getHeight();
	}
	,width: function(fontSize,str) {
		return this.kravur._get(fontSize).stringWidth(str);
	}
	,widthOfCharacters: function(fontSize,characters,start,length) {
		return this.kravur._get(fontSize).charactersWidth(characters,start,length);
	}
	,baseline: function(fontSize) {
		return this.kravur._get(fontSize).getBaselinePosition();
	}
	,getImage: function(fontSize,color) {
		var glyphs = kha_graphics2_Graphics.fontGlyphs;
		var imageIndex = fontSize * 10000 + glyphs.length;
		if(!this.images.h.hasOwnProperty(imageIndex)) {
			var this1 = this.images;
			var v = new haxe_ds_IntMap();
			this1.h[imageIndex] = v;
		}
		if(!this.images.h[imageIndex].h.hasOwnProperty(color)) {
			var kravur = this.kravur._get(fontSize);
			var canvas = window.document.createElement("canvas");
			canvas.width = kravur.width;
			canvas.height = kravur.height;
			var ctx = canvas.getContext("2d");
			ctx.fillStyle = "black";
			ctx.fillRect(0,0,kravur.width,kravur.height);
			var imageData = ctx.getImageData(0,0,kravur.width,kravur.height);
			var bytes = (js_Boot.__cast(kravur.getTexture() , kha_CanvasImage)).bytes;
			var _g = 0;
			var _g1 = bytes.length;
			while(_g < _g1) {
				var i = _g++;
				imageData.data[i * 4] = (color & 16711680) >>> 16;
				imageData.data[i * 4 + 1] = (color & 65280) >>> 8;
				imageData.data[i * 4 + 2] = color & 255;
				imageData.data[i * 4 + 3] = bytes.b[i];
			}
			ctx.putImageData(imageData,0,0);
			var img = window.document.createElement("img");
			img.src = canvas.toDataURL("image/png");
			this.images.h[imageIndex].h[color] = img;
			return img;
		}
		return this.images.h[imageIndex].h[color];
	}
	,unload: function() {
		this.kravur = null;
		this.images = null;
	}
	,__class__: kha_js_Font
};
var kha_js_MobileWebAudio = function() { };
$hxClasses["kha.js.MobileWebAudio"] = kha_js_MobileWebAudio;
kha_js_MobileWebAudio.__name__ = true;
kha_js_MobileWebAudio._init = function() {
	try {
		kha_js_MobileWebAudio._context = new AudioContext();
		return;
	} catch( e ) {
		var e1 = (e instanceof js__$Boot_HaxeError) ? e.val : e;
	}
	try {
		this._context = new webkitAudioContext();
		return;
	} catch( e2 ) {
		var e3 = (e2 instanceof js__$Boot_HaxeError) ? e2.val : e2;
	}
};
kha_js_MobileWebAudio.play = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	var channel = new kha_js_MobileWebAudioChannel(sound,loop);
	channel.play();
	return channel;
};
kha_js_MobileWebAudio.stream = function(sound,loop) {
	if(loop == null) {
		loop = false;
	}
	return kha_js_MobileWebAudio.play(sound,loop);
};
var kha_js_MobileWebAudioChannel = function(sound,loop) {
	this.stopped = false;
	this.paused = false;
	this.buffer = sound._buffer;
	this.loop = loop;
	this.createSource();
};
$hxClasses["kha.js.MobileWebAudioChannel"] = kha_js_MobileWebAudioChannel;
kha_js_MobileWebAudioChannel.__name__ = true;
kha_js_MobileWebAudioChannel.__interfaces__ = [kha_audio1_AudioChannel];
kha_js_MobileWebAudioChannel.prototype = {
	buffer: null
	,loop: null
	,source: null
	,gain: null
	,startTime: null
	,pauseTime: null
	,paused: null
	,stopped: null
	,createSource: function() {
		var _gthis = this;
		this.source = kha_js_MobileWebAudio._context.createBufferSource();
		this.source.loop = this.loop;
		this.source.buffer = this.buffer;
		this.source.onended = function() {
			_gthis.stopped = true;
		};
		this.gain = kha_js_MobileWebAudio._context.createGain();
		this.source.connect(this.gain);
		this.gain.connect(kha_js_MobileWebAudio._context.destination);
	}
	,play: function() {
		if(this.paused || this.stopped) {
			this.createSource();
		}
		this.stopped = false;
		if(this.paused) {
			this.paused = false;
			this.startTime = kha_js_MobileWebAudio._context.currentTime - this.pauseTime;
			this.source.start(0,this.pauseTime);
		} else {
			this.startTime = kha_js_MobileWebAudio._context.currentTime;
			this.source.start();
		}
	}
	,pause: function() {
		this.pauseTime = kha_js_MobileWebAudio._context.currentTime - this.startTime;
		this.paused = true;
		this.source.stop();
	}
	,stop: function() {
		this.paused = false;
		this.stopped = true;
		this.source.stop();
	}
	,length: null
	,get_length: function() {
		return this.source.buffer.duration;
	}
	,position: null
	,get_position: function() {
		if(this.stopped) {
			return this.get_length();
		}
		if(this.paused) {
			return this.pauseTime;
		} else {
			return kha_js_MobileWebAudio._context.currentTime - this.startTime;
		}
	}
	,get_volume: function() {
		return this.gain.gain.value;
	}
	,set_volume: function(value) {
		return this.gain.gain.value = value;
	}
	,finished: null
	,get_finished: function() {
		return this.stopped;
	}
	,__class__: kha_js_MobileWebAudioChannel
};
var kha_js_MobileWebAudioSound = function(filename,done,failed) {
	var _gthis = this;
	kha_Sound.call(this);
	var request = new XMLHttpRequest();
	request.open("GET",filename,true);
	request.responseType = "arraybuffer";
	request.onerror = function() {
		failed({ url : filename});
	};
	request.onload = function() {
		_gthis.compressedData = haxe_io_Bytes.ofData(request.response);
		_gthis.uncompressedData = null;
		kha_js_MobileWebAudio._context.decodeAudioData(_gthis.compressedData.b.bufferValue,function(buffer) {
			_gthis._buffer = buffer;
			done(_gthis);
		},function() {
			failed({ url : filename, error : "Audio format not supported"});
		});
	};
	request.send(null);
};
$hxClasses["kha.js.MobileWebAudioSound"] = kha_js_MobileWebAudioSound;
kha_js_MobileWebAudioSound.__name__ = true;
kha_js_MobileWebAudioSound.__super__ = kha_Sound;
kha_js_MobileWebAudioSound.prototype = $extend(kha_Sound.prototype,{
	_buffer: null
	,uncompress: function(done) {
		done();
	}
	,__class__: kha_js_MobileWebAudioSound
});
var kha_js_Sound = function(filenames,done,failed) {
	kha_Sound.call(this);
	this.done = done;
	this.failed = failed;
	kha_js_Sound.loading.push(this);
	this.element = window.document.createElement("audio");
	this.filenames = [];
	var _g = 0;
	while(_g < filenames.length) {
		var filename = filenames[_g];
		++_g;
		if(this.element.canPlayType("audio/ogg") != "" && StringTools.endsWith(filename,".ogg")) {
			this.filenames.push(filename);
		}
		if(this.element.canPlayType("audio/mp4") != "" && StringTools.endsWith(filename,".mp4")) {
			this.filenames.push(filename);
		}
	}
	this.element.addEventListener("error",$bind(this,this.errorListener),false);
	this.element.addEventListener("canplay",$bind(this,this.canPlayThroughListener),false);
	this.element.src = this.filenames[0];
	this.element.preload = "auto";
	this.element.load();
};
$hxClasses["kha.js.Sound"] = kha_js_Sound;
kha_js_Sound.__name__ = true;
kha_js_Sound.__super__ = kha_Sound;
kha_js_Sound.prototype = $extend(kha_Sound.prototype,{
	filenames: null
	,done: null
	,failed: null
	,element: null
	,errorListener: function(eventInfo) {
		if(this.element.error.code == 4) {
			var _g = 0;
			var _g1 = this.filenames.length - 1;
			while(_g < _g1) {
				var i = _g++;
				if(this.element.src == this.filenames[i]) {
					this.element.src = this.filenames[i + 1];
					return;
				}
			}
		}
		this.failed({ url : this.element.src});
		this.finishAsset();
	}
	,canPlayThroughListener: function(eventInfo) {
		this.finishAsset();
	}
	,finishAsset: function() {
		this.element.removeEventListener("error",$bind(this,this.errorListener),false);
		this.element.removeEventListener("canplaythrough",$bind(this,this.canPlayThroughListener),false);
		this.done(this);
		HxOverrides.remove(kha_js_Sound.loading,this);
	}
	,uncompress: function(done) {
		done();
	}
	,__class__: kha_js_Sound
});
var kha_js_Video = function() {
	kha_Video.call(this);
};
$hxClasses["kha.js.Video"] = kha_js_Video;
kha_js_Video.__name__ = true;
kha_js_Video.fromElement = function(element) {
	var video = new kha_js_Video();
	video.element = element;
	if(kha_SystemImpl.gl != null) {
		video.texture = kha_Image.fromVideo(video);
	}
	return video;
};
kha_js_Video.fromFile = function(filenames,done) {
	var video = new kha_js_Video();
	video.done = done;
	video.element = window.document.createElement("video");
	video.filenames = [];
	var _g = 0;
	while(_g < filenames.length) {
		var filename = filenames[_g];
		++_g;
		if(video.element.canPlayType("video/webm") != "" && StringTools.endsWith(filename,".webm")) {
			video.filenames.push(filename);
		}
		if(video.element.canPlayType("video/mp4") != "" && StringTools.endsWith(filename,".mp4")) {
			video.filenames.push(filename);
		}
	}
	video.element.addEventListener("error",$bind(video,video.errorListener),false);
	video.element.addEventListener("canplaythrough",$bind(video,video.canPlayThroughListener),false);
	video.element.preload = "auto";
	video.element.src = video.filenames[0];
};
kha_js_Video.__super__ = kha_Video;
kha_js_Video.prototype = $extend(kha_Video.prototype,{
	filenames: null
	,element: null
	,done: null
	,texture: null
	,width: function() {
		return this.element.videoWidth;
	}
	,height: function() {
		return this.element.videoHeight;
	}
	,play: function(loop) {
		if(loop == null) {
			loop = false;
		}
		try {
			this.element.loop = loop;
			this.element.play();
		} catch( e ) {
			haxe_Log.trace((e instanceof js__$Boot_HaxeError) ? e.val : e,{ fileName : "kha/js/Video.hx", lineNumber : 64, className : "kha.js.Video", methodName : "play"});
		}
	}
	,pause: function() {
		try {
			this.element.pause();
		} catch( e ) {
			haxe_Log.trace((e instanceof js__$Boot_HaxeError) ? e.val : e,{ fileName : "kha/js/Video.hx", lineNumber : 73, className : "kha.js.Video", methodName : "pause"});
		}
	}
	,stop: function() {
		try {
			this.element.pause();
			this.element.currentTime = 0;
		} catch( e ) {
			haxe_Log.trace((e instanceof js__$Boot_HaxeError) ? e.val : e,{ fileName : "kha/js/Video.hx", lineNumber : 83, className : "kha.js.Video", methodName : "stop"});
		}
	}
	,getCurrentPos: function() {
		return Math.ceil(this.element.currentTime * 1000);
	}
	,get_position: function() {
		return Math.ceil(this.element.currentTime * 1000);
	}
	,set_position: function(value) {
		this.element.currentTime = value / 1000;
		return value;
	}
	,getLength: function() {
		if(isFinite(this.element.duration)) {
			return Math.floor(this.element.duration * 1000);
		} else {
			return -1;
		}
	}
	,errorListener: function(eventInfo) {
		if(this.element.error.code == 4) {
			var _g = 0;
			var _g1 = this.filenames.length - 1;
			while(_g < _g1) {
				var i = _g++;
				if(this.element.src == this.filenames[i]) {
					this.element.src = this.filenames[i + 1];
					return;
				}
			}
		}
		haxe_Log.trace("Error loading " + this.element.src,{ fileName : "kha/js/Video.hx", lineNumber : 120, className : "kha.js.Video", methodName : "errorListener"});
		this.finishAsset();
	}
	,canPlayThroughListener: function(eventInfo) {
		this.finishAsset();
	}
	,finishAsset: function() {
		this.element.removeEventListener("error",$bind(this,this.errorListener),false);
		this.element.removeEventListener("canplaythrough",$bind(this,this.canPlayThroughListener),false);
		if(kha_SystemImpl.gl != null) {
			this.texture = kha_Image.fromVideo(this);
		}
		this.done(this);
	}
	,__class__: kha_js_Video
});
var kha_js_WebAudioSound = function(filename,done,failed) {
	var _gthis = this;
	kha_Sound.call(this);
	var request = new XMLHttpRequest();
	request.open("GET",filename,true);
	request.responseType = "arraybuffer";
	request.onerror = function() {
		failed({ url : filename});
	};
	request.onload = function() {
		_gthis.compressedData = haxe_io_Bytes.ofData(request.response);
		_gthis.uncompressedData = null;
		done(_gthis);
	};
	request.send(null);
};
$hxClasses["kha.js.WebAudioSound"] = kha_js_WebAudioSound;
kha_js_WebAudioSound.__name__ = true;
kha_js_WebAudioSound.__super__ = kha_Sound;
kha_js_WebAudioSound.prototype = $extend(kha_Sound.prototype,{
	superUncompress: function(done) {
		kha_Sound.prototype.uncompress.call(this,done);
	}
	,uncompress: function(done) {
		var _gthis = this;
		kha_audio2_Audio._context.decodeAudioData(this.compressedData.b.bufferValue,function(buffer) {
			var ch0 = buffer.getChannelData(0);
			var len = ch0.length;
			var this1 = new Float32Array(len * 2);
			_gthis.uncompressedData = this1;
			if(buffer.numberOfChannels == 1) {
				var idx = 0;
				var i = 0;
				var lidx = len * 2;
				var uncompressInner = function() {
				};
				uncompressInner = function() {
					var chk_len = idx + 11025;
					var next_chk = chk_len > lidx ? lidx : chk_len;
					while(idx < next_chk) {
						_gthis.uncompressedData[idx] = ch0[i];
						_gthis.uncompressedData[idx + 1] = ch0[i];
						idx += 2;
						i += 1;
					}
					if(idx < lidx) {
						window.setTimeout(uncompressInner,0);
					} else {
						_gthis.compressedData = null;
					}
				};
				uncompressInner();
				window.setTimeout(done,250);
			} else {
				var ch1 = buffer.getChannelData(1);
				var idx1 = 0;
				var i1 = 0;
				var lidx1 = len * 2;
				var uncompressInner1 = function() {
				};
				uncompressInner1 = function() {
					var chk_len1 = idx1 + 11025;
					var next_chk1 = chk_len1 > lidx1 ? lidx1 : chk_len1;
					while(idx1 < next_chk1) {
						_gthis.uncompressedData[idx1] = ch0[i1];
						_gthis.uncompressedData[idx1 + 1] = ch1[i1];
						idx1 += 2;
						i1 += 1;
					}
					if(idx1 < lidx1) {
						window.setTimeout(uncompressInner1,0);
					} else {
						_gthis.compressedData = null;
					}
				};
				uncompressInner1();
				window.setTimeout(done,250);
			}
		},function() {
			_gthis.superUncompress(done);
		});
	}
	,__class__: kha_js_WebAudioSound
});
var kha_js_graphics4_ConstantLocation = function(value,type) {
	this.value = value;
	this.type = type;
};
$hxClasses["kha.js.graphics4.ConstantLocation"] = kha_js_graphics4_ConstantLocation;
kha_js_graphics4_ConstantLocation.__name__ = true;
kha_js_graphics4_ConstantLocation.__interfaces__ = [kha_graphics4_ConstantLocation];
kha_js_graphics4_ConstantLocation.prototype = {
	value: null
	,type: null
	,__class__: kha_js_graphics4_ConstantLocation
};
var kha_js_graphics4_Graphics = function(renderTarget) {
	this.matrix3Cache = new Float32Array(9);
	this.matrixCache = new Float32Array(16);
	this.isDepthAttachment = false;
	this.isCubeMap = false;
	this.colorMaskAlpha = true;
	this.colorMaskBlue = true;
	this.colorMaskGreen = true;
	this.colorMaskRed = true;
	this.depthMask = false;
	this.depthTest = false;
	this.currentPipeline = null;
	this.renderTarget = renderTarget;
	this.init();
	if(kha_SystemImpl.gl2) {
		this.instancedExtension = true;
	} else {
		this.instancedExtension = kha_SystemImpl.gl.getExtension("ANGLE_instanced_arrays");
		this.blendMinMaxExtension = kha_SystemImpl.gl.getExtension("EXT_blend_minmax");
	}
};
$hxClasses["kha.js.graphics4.Graphics"] = kha_js_graphics4_Graphics;
kha_js_graphics4_Graphics.__name__ = true;
kha_js_graphics4_Graphics.__interfaces__ = [kha_graphics4_Graphics];
kha_js_graphics4_Graphics.getBlendFunc = function(factor) {
	switch(factor._hx_index) {
	case 1:
		return 1;
	case 0:case 2:
		return 0;
	case 3:
		return 770;
	case 4:
		return 772;
	case 5:
		return 771;
	case 6:
		return 773;
	case 7:
		return 768;
	case 8:
		return 774;
	case 9:
		return 769;
	case 10:
		return 775;
	}
};
kha_js_graphics4_Graphics.getBlendOp = function(op) {
	switch(op._hx_index) {
	case 0:
		return 32774;
	case 1:
		return 32778;
	case 2:
		return 32779;
	case 3:
		return 32775;
	case 4:
		return 32776;
	}
};
kha_js_graphics4_Graphics.prototype = {
	currentPipeline: null
	,depthTest: null
	,depthMask: null
	,colorMaskRed: null
	,colorMaskGreen: null
	,colorMaskBlue: null
	,colorMaskAlpha: null
	,indicesCount: null
	,renderTarget: null
	,renderTargetFrameBuffer: null
	,renderTargetTexture: null
	,isCubeMap: null
	,isDepthAttachment: null
	,instancedExtension: null
	,blendMinMaxExtension: null
	,init: function() {
		if(this.renderTarget == null) {
			return;
		}
		this.isCubeMap = (this.renderTarget instanceof kha_graphics4_CubeMap);
		if(this.isCubeMap) {
			var cubeMap = js_Boot.__cast(this.renderTarget , kha_graphics4_CubeMap);
			this.renderTargetFrameBuffer = cubeMap.frameBuffer;
			this.renderTargetTexture = cubeMap.texture;
			this.isDepthAttachment = cubeMap.isDepthAttachment;
		} else {
			var image = js_Boot.__cast(this.renderTarget , kha_WebGLImage);
			this.renderTargetFrameBuffer = image.frameBuffer;
			this.renderTargetTexture = image.texture;
		}
	}
	,begin: function(additionalRenderTargets) {
		kha_SystemImpl.gl.enable(3042);
		kha_SystemImpl.gl.blendFunc(770,771);
		if(this.renderTarget == null) {
			kha_SystemImpl.gl.bindFramebuffer(36160,null);
			kha_SystemImpl.gl.viewport(0,0,kha_System.windowWidth(),kha_System.windowHeight());
		} else {
			kha_SystemImpl.gl.bindFramebuffer(36160,this.renderTargetFrameBuffer);
			kha_SystemImpl.gl.viewport(0,0,this.renderTarget.get_width(),this.renderTarget.get_height());
			if(additionalRenderTargets != null) {
				kha_SystemImpl.gl.framebufferTexture2D(36160,kha_SystemImpl.drawBuffers.COLOR_ATTACHMENT0_WEBGL,3553,this.renderTargetTexture,0);
				var _g = 0;
				var _g1 = additionalRenderTargets.length;
				while(_g < _g1) {
					var i = _g++;
					kha_SystemImpl.gl.framebufferTexture2D(36160,kha_SystemImpl.drawBuffers.COLOR_ATTACHMENT0_WEBGL + i + 1,3553,(js_Boot.__cast(additionalRenderTargets[i] , kha_WebGLImage)).texture,0);
				}
				var attachments = [kha_SystemImpl.drawBuffers.COLOR_ATTACHMENT0_WEBGL];
				var _g2 = 0;
				var _g3 = additionalRenderTargets.length;
				while(_g2 < _g3) {
					var i1 = _g2++;
					attachments.push(kha_SystemImpl.drawBuffers.COLOR_ATTACHMENT0_WEBGL + i1 + 1);
				}
				if(kha_SystemImpl.gl2) {
					kha_SystemImpl.gl.drawBuffers(attachments);
				} else {
					kha_SystemImpl.drawBuffers.drawBuffersWEBGL(attachments);
				}
			}
		}
	}
	,beginFace: function(face) {
		kha_SystemImpl.gl.enable(3042);
		kha_SystemImpl.gl.blendFunc(770,771);
		kha_SystemImpl.gl.bindFramebuffer(36160,this.renderTargetFrameBuffer);
		kha_SystemImpl.gl.framebufferTexture2D(36160,this.isDepthAttachment ? 36096 : 36064,34069 + face,this.renderTargetTexture,0);
		kha_SystemImpl.gl.viewport(0,0,this.renderTarget.get_width(),this.renderTarget.get_height());
	}
	,beginEye: function(eye) {
		kha_SystemImpl.gl.enable(3042);
		kha_SystemImpl.gl.blendFunc(770,771);
		kha_SystemImpl.gl.bindFramebuffer(36160,null);
		if(eye == 0) {
			kha_SystemImpl.gl.viewport(0,0,kha_System.windowWidth() * 0.5 | 0,kha_System.windowHeight());
		} else {
			kha_SystemImpl.gl.viewport(kha_System.windowWidth() * 0.5 | 0,0,kha_System.windowWidth() * 0.5 | 0,kha_System.windowHeight());
		}
	}
	,end: function() {
	}
	,flush: function() {
	}
	,vsynced: function() {
		return true;
	}
	,refreshRate: function() {
		return 60;
	}
	,clear: function(color,depth,stencil) {
		var clearMask = 0;
		if(color != null) {
			clearMask |= 16384;
			kha_SystemImpl.gl.colorMask(true,true,true,true);
			kha_SystemImpl.gl.clearColor(((color & 16711680) >>> 16) * 0.00392156862745098,((color & 65280) >>> 8) * 0.00392156862745098,(color & 255) * 0.00392156862745098,(color >>> 24) * 0.00392156862745098);
		}
		if(depth != null) {
			clearMask |= 256;
			kha_SystemImpl.gl.enable(2929);
			kha_SystemImpl.gl.depthMask(true);
			kha_SystemImpl.gl.clearDepth(depth);
		}
		if(stencil != null) {
			clearMask |= 1024;
			kha_SystemImpl.gl.enable(2960);
			kha_SystemImpl.gl.stencilMask(255);
			kha_SystemImpl.gl.clearStencil(stencil);
		}
		kha_SystemImpl.gl.clear(clearMask);
		kha_SystemImpl.gl.colorMask(this.colorMaskRed,this.colorMaskGreen,this.colorMaskBlue,this.colorMaskAlpha);
		if(this.depthTest) {
			kha_SystemImpl.gl.enable(2929);
		} else {
			kha_SystemImpl.gl.disable(2929);
		}
		kha_SystemImpl.gl.depthMask(this.depthMask);
	}
	,viewport: function(x,y,width,height) {
		if(this.renderTarget == null) {
			kha_SystemImpl.gl.viewport(x,kha_System.windowHeight(0) - y - height,width,height);
		} else {
			kha_SystemImpl.gl.viewport(x,y,width,height);
		}
	}
	,scissor: function(x,y,width,height) {
		kha_SystemImpl.gl.enable(3089);
		if(this.renderTarget == null) {
			kha_SystemImpl.gl.scissor(x,kha_System.windowHeight(0) - y - height,width,height);
		} else {
			kha_SystemImpl.gl.scissor(x,y,width,height);
		}
	}
	,disableScissor: function() {
		kha_SystemImpl.gl.disable(3089);
	}
	,renderTargetsInvertedY: function() {
		return true;
	}
	,setDepthMode: function(write,mode) {
		switch(mode._hx_index) {
		case 0:
			if(write) {
				kha_SystemImpl.gl.enable(2929);
			} else {
				kha_SystemImpl.gl.disable(2929);
			}
			this.depthTest = write;
			kha_SystemImpl.gl.depthFunc(519);
			break;
		case 1:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(512);
			break;
		case 2:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(514);
			break;
		case 3:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(517);
			break;
		case 4:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(513);
			break;
		case 5:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(515);
			break;
		case 6:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(516);
			break;
		case 7:
			kha_SystemImpl.gl.enable(2929);
			this.depthTest = true;
			kha_SystemImpl.gl.depthFunc(518);
			break;
		}
		kha_SystemImpl.gl.depthMask(write);
		this.depthMask = write;
	}
	,setBlendingMode: function(source,destination,operation,alphaSource,alphaDestination,alphaOperation) {
		if(source == kha_graphics4_BlendingFactor.BlendOne && destination == kha_graphics4_BlendingFactor.BlendZero) {
			kha_SystemImpl.gl.disable(3042);
		} else {
			kha_SystemImpl.gl.enable(3042);
			kha_SystemImpl.gl.blendFuncSeparate(kha_js_graphics4_Graphics.getBlendFunc(source),kha_js_graphics4_Graphics.getBlendFunc(destination),kha_js_graphics4_Graphics.getBlendFunc(alphaSource),kha_js_graphics4_Graphics.getBlendFunc(alphaDestination));
			kha_SystemImpl.gl.blendEquationSeparate(kha_js_graphics4_Graphics.getBlendOp(operation),kha_js_graphics4_Graphics.getBlendOp(alphaOperation));
		}
	}
	,createVertexBuffer: function(vertexCount,structure,usage,canRead) {
		if(canRead == null) {
			canRead = false;
		}
		return new kha_graphics4_VertexBuffer(vertexCount,structure,usage);
	}
	,setVertexBuffer: function(vertexBuffer) {
		(js_Boot.__cast(vertexBuffer , kha_graphics4_VertexBuffer)).set(0);
	}
	,setVertexBuffers: function(vertexBuffers) {
		var offset = 0;
		var _g = 0;
		while(_g < vertexBuffers.length) {
			var vertexBuffer = vertexBuffers[_g];
			++_g;
			offset += (js_Boot.__cast(vertexBuffer , kha_graphics4_VertexBuffer)).set(offset);
		}
	}
	,createIndexBuffer: function(indexCount,usage,canRead) {
		if(canRead == null) {
			canRead = false;
		}
		return new kha_graphics4_IndexBuffer(indexCount,usage);
	}
	,setIndexBuffer: function(indexBuffer) {
		this.indicesCount = indexBuffer.count();
		(js_Boot.__cast(indexBuffer , kha_graphics4_IndexBuffer)).set();
	}
	,setTexture: function(stage,texture) {
		if(texture == null) {
			kha_SystemImpl.gl.activeTexture(33984 + (js_Boot.__cast(stage , kha_js_graphics4_TextureUnit)).value);
			kha_SystemImpl.gl.bindTexture(3553,null);
		} else {
			(js_Boot.__cast(texture , kha_WebGLImage)).set((js_Boot.__cast(stage , kha_js_graphics4_TextureUnit)).value);
		}
	}
	,setTextureDepth: function(stage,texture) {
		(js_Boot.__cast(texture , kha_WebGLImage)).setDepth((js_Boot.__cast(stage , kha_js_graphics4_TextureUnit)).value);
	}
	,setTextureArray: function(unit,texture) {
	}
	,setVideoTexture: function(unit,texture) {
		if(texture == null) {
			kha_SystemImpl.gl.activeTexture(33984 + (js_Boot.__cast(unit , kha_js_graphics4_TextureUnit)).value);
			kha_SystemImpl.gl.bindTexture(3553,null);
		} else {
			(js_Boot.__cast((js_Boot.__cast(texture , kha_js_Video)).texture , kha_WebGLImage)).set((js_Boot.__cast(unit , kha_js_graphics4_TextureUnit)).value);
		}
	}
	,setImageTexture: function(unit,texture) {
	}
	,setTextureParameters: function(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter) {
		kha_SystemImpl.gl.activeTexture(33984 + (js_Boot.__cast(texunit , kha_js_graphics4_TextureUnit)).value);
		switch(uAddressing._hx_index) {
		case 0:
			kha_SystemImpl.gl.texParameteri(3553,10242,10497);
			break;
		case 1:
			kha_SystemImpl.gl.texParameteri(3553,10242,33648);
			break;
		case 2:
			kha_SystemImpl.gl.texParameteri(3553,10242,33071);
			break;
		}
		switch(vAddressing._hx_index) {
		case 0:
			kha_SystemImpl.gl.texParameteri(3553,10243,10497);
			break;
		case 1:
			kha_SystemImpl.gl.texParameteri(3553,10243,33648);
			break;
		case 2:
			kha_SystemImpl.gl.texParameteri(3553,10243,33071);
			break;
		}
		switch(minificationFilter._hx_index) {
		case 0:
			switch(mipmapFilter._hx_index) {
			case 0:
				kha_SystemImpl.gl.texParameteri(3553,10241,9728);
				break;
			case 1:
				kha_SystemImpl.gl.texParameteri(3553,10241,9984);
				break;
			case 2:
				kha_SystemImpl.gl.texParameteri(3553,10241,9986);
				break;
			}
			break;
		case 1:case 2:
			switch(mipmapFilter._hx_index) {
			case 0:
				kha_SystemImpl.gl.texParameteri(3553,10241,9729);
				break;
			case 1:
				kha_SystemImpl.gl.texParameteri(3553,10241,9985);
				break;
			case 2:
				kha_SystemImpl.gl.texParameteri(3553,10241,9987);
				break;
			}
			if(minificationFilter == kha_graphics4_TextureFilter.AnisotropicFilter) {
				kha_SystemImpl.gl.texParameteri(3553,kha_SystemImpl.anisotropicFilter.TEXTURE_MAX_ANISOTROPY_EXT,4);
			}
			break;
		}
		switch(magnificationFilter._hx_index) {
		case 0:
			kha_SystemImpl.gl.texParameteri(3553,10240,9728);
			break;
		case 1:case 2:
			kha_SystemImpl.gl.texParameteri(3553,10240,9729);
			break;
		}
	}
	,setTexture3DParameters: function(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter) {
	}
	,setCubeMap: function(stage,cubeMap) {
		if(cubeMap == null) {
			kha_SystemImpl.gl.activeTexture(33984 + (js_Boot.__cast(stage , kha_js_graphics4_TextureUnit)).value);
			kha_SystemImpl.gl.bindTexture(34067,null);
		} else {
			cubeMap.set((js_Boot.__cast(stage , kha_js_graphics4_TextureUnit)).value);
		}
	}
	,setCubeMapDepth: function(stage,cubeMap) {
		cubeMap.setDepth((js_Boot.__cast(stage , kha_js_graphics4_TextureUnit)).value);
	}
	,setCullMode: function(mode) {
		switch(mode._hx_index) {
		case 0:
			kha_SystemImpl.gl.enable(2884);
			kha_SystemImpl.gl.cullFace(1029);
			break;
		case 1:
			kha_SystemImpl.gl.enable(2884);
			kha_SystemImpl.gl.cullFace(1028);
			break;
		case 2:
			kha_SystemImpl.gl.disable(2884);
			break;
		}
	}
	,setPipeline: function(pipe) {
		this.setCullMode(pipe.cullMode);
		this.setDepthMode(pipe.depthWrite,pipe.depthMode);
		this.setStencilParameters(pipe.stencilMode,pipe.stencilBothPass,pipe.stencilDepthFail,pipe.stencilFail,pipe.stencilReferenceValue,pipe.stencilReadMask,pipe.stencilWriteMask);
		this.setBlendingMode(pipe.blendSource,pipe.blendDestination,pipe.blendOperation,pipe.alphaBlendSource,pipe.alphaBlendDestination,pipe.alphaBlendOperation);
		pipe.set();
		this.colorMaskRed = pipe.colorWriteMasksRed[0];
		this.colorMaskGreen = pipe.colorWriteMasksGreen[0];
		this.colorMaskBlue = pipe.colorWriteMasksBlue[0];
		this.colorMaskAlpha = pipe.colorWriteMasksAlpha[0];
	}
	,setStencilReferenceValue: function(value) {
		kha_SystemImpl.gl.stencilFunc(this.convertCompareMode(this.currentPipeline.stencilMode),value,this.currentPipeline.stencilReadMask);
	}
	,setBool: function(location,value) {
		kha_SystemImpl.gl.uniform1i((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value ? 1 : 0);
	}
	,setInt: function(location,value) {
		kha_SystemImpl.gl.uniform1i((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value);
	}
	,setFloat: function(location,value) {
		kha_SystemImpl.gl.uniform1f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value);
	}
	,setFloat2: function(location,value1,value2) {
		kha_SystemImpl.gl.uniform2f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value1,value2);
	}
	,setFloat3: function(location,value1,value2,value3) {
		kha_SystemImpl.gl.uniform3f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value1,value2,value3);
	}
	,setFloat4: function(location,value1,value2,value3,value4) {
		kha_SystemImpl.gl.uniform4f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value1,value2,value3,value4);
	}
	,setFloats: function(location,values) {
		var webglLocation = js_Boot.__cast(location , kha_js_graphics4_ConstantLocation);
		switch(webglLocation.type) {
		case 35664:
			kha_SystemImpl.gl.uniform2fv(webglLocation.value,values);
			break;
		case 35665:
			kha_SystemImpl.gl.uniform3fv(webglLocation.value,values);
			break;
		case 35666:
			kha_SystemImpl.gl.uniform4fv(webglLocation.value,values);
			break;
		case 35676:
			kha_SystemImpl.gl.uniformMatrix4fv(webglLocation.value,false,values);
			break;
		default:
			kha_SystemImpl.gl.uniform1fv(webglLocation.value,values);
		}
	}
	,setVector2: function(location,value) {
		kha_SystemImpl.gl.uniform2f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value.x,value.y);
	}
	,setVector3: function(location,value) {
		kha_SystemImpl.gl.uniform3f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value.x,value.y,value.z);
	}
	,setVector4: function(location,value) {
		kha_SystemImpl.gl.uniform4f((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,value.x,value.y,value.z,value.w);
	}
	,matrixCache: null
	,setMatrix: function(location,matrix) {
		this.matrixCache[0] = matrix._00;
		this.matrixCache[1] = matrix._01;
		this.matrixCache[2] = matrix._02;
		this.matrixCache[3] = matrix._03;
		this.matrixCache[4] = matrix._10;
		this.matrixCache[5] = matrix._11;
		this.matrixCache[6] = matrix._12;
		this.matrixCache[7] = matrix._13;
		this.matrixCache[8] = matrix._20;
		this.matrixCache[9] = matrix._21;
		this.matrixCache[10] = matrix._22;
		this.matrixCache[11] = matrix._23;
		this.matrixCache[12] = matrix._30;
		this.matrixCache[13] = matrix._31;
		this.matrixCache[14] = matrix._32;
		this.matrixCache[15] = matrix._33;
		kha_SystemImpl.gl.uniformMatrix4fv((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,false,this.matrixCache);
	}
	,matrix3Cache: null
	,setMatrix3: function(location,matrix) {
		this.matrix3Cache[0] = matrix._00;
		this.matrix3Cache[1] = matrix._01;
		this.matrix3Cache[2] = matrix._02;
		this.matrix3Cache[3] = matrix._10;
		this.matrix3Cache[4] = matrix._11;
		this.matrix3Cache[5] = matrix._12;
		this.matrix3Cache[6] = matrix._20;
		this.matrix3Cache[7] = matrix._21;
		this.matrix3Cache[8] = matrix._22;
		kha_SystemImpl.gl.uniformMatrix3fv((js_Boot.__cast(location , kha_js_graphics4_ConstantLocation)).value,false,this.matrix3Cache);
	}
	,drawIndexedVertices: function(start,count) {
		if(count == null) {
			count = -1;
		}
		if(start == null) {
			start = 0;
		}
		var type = kha_SystemImpl.elementIndexUint == null ? 5123 : 5125;
		var size = type == 5123 ? 2 : 4;
		kha_SystemImpl.gl.drawElements(4,count == -1 ? this.indicesCount : count,type,start * size);
	}
	,convertStencilAction: function(action) {
		switch(action._hx_index) {
		case 0:
			return 7680;
		case 1:
			return 0;
		case 2:
			return 7681;
		case 3:
			return 7682;
		case 4:
			return 34055;
		case 5:
			return 7683;
		case 6:
			return 34056;
		case 7:
			return 5386;
		}
	}
	,convertCompareMode: function(compareMode) {
		switch(compareMode._hx_index) {
		case 0:
			return 519;
		case 1:
			return 512;
		case 2:
			return 514;
		case 3:
			return 517;
		case 4:
			return 513;
		case 5:
			return 515;
		case 6:
			return 516;
		case 7:
			return 518;
		}
	}
	,setStencilParameters: function(compareMode,bothPass,depthFail,stencilFail,referenceValue,readMask,writeMask) {
		if(writeMask == null) {
			writeMask = 255;
		}
		if(readMask == null) {
			readMask = 255;
		}
		if(compareMode == kha_graphics4_CompareMode.Always && bothPass == kha_graphics4_StencilAction.Keep && depthFail == kha_graphics4_StencilAction.Keep && stencilFail == kha_graphics4_StencilAction.Keep) {
			kha_SystemImpl.gl.disable(2960);
		} else {
			kha_SystemImpl.gl.enable(2960);
			var stencilFunc = this.convertCompareMode(compareMode);
			kha_SystemImpl.gl.stencilMask(writeMask);
			kha_SystemImpl.gl.stencilOp(this.convertStencilAction(stencilFail),this.convertStencilAction(depthFail),this.convertStencilAction(bothPass));
			switch(referenceValue._hx_index) {
			case 0:
				kha_SystemImpl.gl.stencilFunc(stencilFunc,0,readMask);
				break;
			case 1:
				var value = referenceValue.value;
				kha_SystemImpl.gl.stencilFunc(stencilFunc,value,readMask);
				break;
			}
		}
	}
	,drawIndexedVerticesInstanced: function(instanceCount,start,count) {
		if(count == null) {
			count = -1;
		}
		if(start == null) {
			start = 0;
		}
		if(this.instancedRenderingAvailable()) {
			var type = kha_SystemImpl.elementIndexUint == null ? 5123 : 5125;
			var typeSize = kha_SystemImpl.elementIndexUint == null ? 2 : 4;
			if(kha_SystemImpl.gl2) {
				kha_SystemImpl.gl.drawElementsInstanced(4,count == -1 ? this.indicesCount : count,type,start * typeSize,instanceCount);
			} else {
				this.instancedExtension.drawElementsInstancedANGLE(4,count == -1 ? this.indicesCount : count,type,start * typeSize,instanceCount);
			}
		}
	}
	,instancedRenderingAvailable: function() {
		return this.instancedExtension;
	}
	,__class__: kha_js_graphics4_Graphics
};
var kha_js_graphics4_Graphics2 = function(canvas) {
	kha_graphics4_Graphics2.call(this,canvas);
};
$hxClasses["kha.js.graphics4.Graphics2"] = kha_js_graphics4_Graphics2;
kha_js_graphics4_Graphics2.__name__ = true;
kha_js_graphics4_Graphics2.__super__ = kha_graphics4_Graphics2;
kha_js_graphics4_Graphics2.prototype = $extend(kha_graphics4_Graphics2.prototype,{
	drawVideoInternal: function(video,x,y,width,height) {
		var v = js_Boot.__cast(video , kha_js_Video);
		this.drawScaledSubImage(v.texture,0,0,v.texture.get_width(),v.texture.get_height(),x,y,width,height);
	}
	,begin: function(clear,clearColor) {
		if(clear == null) {
			clear = true;
		}
		kha_SystemImpl.gl.colorMask(true,true,true,true);
		kha_SystemImpl.gl.disable(2929);
		kha_SystemImpl.gl.depthFunc(519);
		kha_graphics4_Graphics2.prototype.begin.call(this,clear,clearColor);
	}
	,__class__: kha_js_graphics4_Graphics2
});
var kha_js_graphics4_TextureUnit = function(value) {
	this.value = value;
};
$hxClasses["kha.js.graphics4.TextureUnit"] = kha_js_graphics4_TextureUnit;
kha_js_graphics4_TextureUnit.__name__ = true;
kha_js_graphics4_TextureUnit.__interfaces__ = [kha_graphics4_TextureUnit];
kha_js_graphics4_TextureUnit.prototype = {
	value: null
	,__class__: kha_js_graphics4_TextureUnit
};
var kha_vr_VrInterface = function() {
};
$hxClasses["kha.vr.VrInterface"] = kha_vr_VrInterface;
kha_vr_VrInterface.__name__ = true;
kha_vr_VrInterface.prototype = {
	GetSensorState: function() {
		return null;
	}
	,GetPredictedSensorState: function(time) {
		return null;
	}
	,WarpSwapBlack: function() {
	}
	,WarpSwapLoadingIcon: function() {
	}
	,WarpSwap: function(parms) {
	}
	,IsPresenting: function() {
		return false;
	}
	,IsVrEnabled: function() {
		return false;
	}
	,GetTimeInSeconds: function() {
		return 0.0;
	}
	,GetProjectionMatrix: function(eye) {
		return null;
	}
	,GetViewMatrix: function(eye) {
		return null;
	}
	,onVRRequestPresent: function() {
	}
	,onVRExitPresent: function() {
	}
	,onResetPose: function() {
	}
	,__class__: kha_vr_VrInterface
};
var kha_js_vr_VrInterface = function() {
	this.vrHeight = 0;
	this.vrWidth = 0;
	this.height = 0;
	this.width = 0;
	this.rightViewMatrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
	this.leftViewMatrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
	this.rightProjectionMatrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
	this.leftProjectionMatrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
	this.vrEnabled = false;
	kha_vr_VrInterface.call(this);
	var displayEnabled = false;
	if(displayEnabled) {
		this.vrEnabled = true;
		this.getVRDisplays();
		haxe_Log.trace("Display enabled.",{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 39, className : "kha.js.vr.VrInterface", methodName : "new"});
	}
};
$hxClasses["kha.js.vr.VrInterface"] = kha_js_vr_VrInterface;
kha_js_vr_VrInterface.__name__ = true;
kha_js_vr_VrInterface.__super__ = kha_vr_VrInterface;
kha_js_vr_VrInterface.prototype = $extend(kha_vr_VrInterface.prototype,{
	vrEnabled: null
	,vrDisplay: null
	,frameData: null
	,leftProjectionMatrix: null
	,rightProjectionMatrix: null
	,leftViewMatrix: null
	,rightViewMatrix: null
	,width: null
	,height: null
	,vrWidth: null
	,vrHeight: null
	,getVRDisplays: function() {
		var _gthis = this;
		var vrDisplayInstance = navigator.getVRDisplays();
		vrDisplayInstance.then(function(displays) {
			if(displays.length > 0) {
				_gthis.frameData = new VRFrameData();
				_gthis.vrDisplay = displays[0];
				_gthis.vrDisplay.depthNear = 0.1;
				_gthis.vrDisplay.depthFar = 1024.0;
				var leftEye = _gthis.vrDisplay.getEyeParameters("left");
				var rightEye = _gthis.vrDisplay.getEyeParameters("right");
				_gthis.width = kha_SystemImpl.khanvas.width;
				_gthis.height = kha_SystemImpl.khanvas.height;
				_gthis.vrWidth = Math.max(leftEye.renderWidth,rightEye.renderWidth) * 2 | 0;
				_gthis.vrHeight = Math.max(leftEye.renderHeight,rightEye.renderHeight) | 0;
			} else {
				haxe_Log.trace("There are no VR displays connected.",{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 59, className : "kha.js.vr.VrInterface", methodName : "getVRDisplays"});
			}
		});
	}
	,onVRRequestPresent: function() {
		var _gthis = this;
		try {
			this.vrDisplay.requestPresent([{ source : kha_SystemImpl.khanvas}]).then(function() {
				_gthis.onResize();
				_gthis.vrDisplay.requestAnimationFrame($bind(_gthis,_gthis.onAnimationFrame));
			});
		} catch( err ) {
			var err1 = (err instanceof js__$Boot_HaxeError) ? err.val : err;
			haxe_Log.trace("Failed to requestPresent.",{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 71, className : "kha.js.vr.VrInterface", methodName : "onVRRequestPresent"});
			haxe_Log.trace(err1,{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 72, className : "kha.js.vr.VrInterface", methodName : "onVRRequestPresent"});
		}
	}
	,onVRExitPresent: function() {
		var _gthis = this;
		try {
			this.vrDisplay.exitPresent([{ source : kha_SystemImpl.khanvas}]).then(function() {
				_gthis.onResize();
			});
		} catch( err ) {
			var err1 = (err instanceof js__$Boot_HaxeError) ? err.val : err;
			haxe_Log.trace("Failed to exitPresent.",{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 82, className : "kha.js.vr.VrInterface", methodName : "onVRExitPresent"});
			haxe_Log.trace(err1,{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 83, className : "kha.js.vr.VrInterface", methodName : "onVRExitPresent"});
		}
	}
	,onResetPose: function() {
		try {
			this.vrDisplay.resetPose();
		} catch( err ) {
			var err1 = (err instanceof js__$Boot_HaxeError) ? err.val : err;
			haxe_Log.trace("Failed to resetPose",{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 91, className : "kha.js.vr.VrInterface", methodName : "onResetPose"});
			haxe_Log.trace(err1,{ fileName : "kha/js/vr/VrInterface.hx", lineNumber : 92, className : "kha.js.vr.VrInterface", methodName : "onResetPose"});
		}
	}
	,onAnimationFrame: function(timestamp) {
		if(this.vrDisplay != null && this.vrDisplay.isPresenting) {
			this.vrDisplay.requestAnimationFrame($bind(this,this.onAnimationFrame));
			this.vrDisplay.getFrameData(this.frameData);
			this.leftProjectionMatrix = this.createMatrixFromArray(this.frameData.leftProjectionMatrix);
			this.leftViewMatrix = this.createMatrixFromArray(this.frameData.leftViewMatrix);
			this.rightProjectionMatrix = this.createMatrixFromArray(this.frameData.rightProjectionMatrix);
			this.rightViewMatrix = this.createMatrixFromArray(this.frameData.rightViewMatrix);
			this.vrDisplay.submitFrame();
		}
	}
	,onResize: function() {
		if(this.vrDisplay != null && this.vrDisplay.isPresenting) {
			kha_SystemImpl.khanvas.width = this.vrWidth;
			kha_SystemImpl.khanvas.height = this.vrHeight;
		} else {
			kha_SystemImpl.khanvas.width = this.width;
			kha_SystemImpl.khanvas.height = this.height;
		}
	}
	,GetSensorState: function() {
		return this.GetPredictedSensorState(0.0);
	}
	,GetPredictedSensorState: function(time) {
		var result = new kha_vr_SensorState();
		result.Predicted = new kha_vr_PoseState();
		result.Recorded = result.Predicted;
		result.Predicted.AngularAcceleration = new kha_math_Vector3();
		result.Predicted.AngularVelocity = new kha_math_Vector3();
		result.Predicted.LinearAcceleration = new kha_math_Vector3();
		result.Predicted.LinearVelocity = new kha_math_Vector3();
		result.Predicted.TimeInSeconds = time;
		result.Predicted.Pose = new kha_vr_Pose();
		result.Predicted.Pose.Orientation = new kha_math_Quaternion();
		result.Predicted.Pose.Position = new kha_math_Vector3();
		var mPose = this.frameData.pose;
		if(mPose != null) {
			result.Predicted.AngularVelocity = this.createVectorFromArray(mPose.angularVelocity);
			result.Predicted.AngularAcceleration = this.createVectorFromArray(mPose.angularAcceleration);
			result.Predicted.LinearVelocity = this.createVectorFromArray(mPose.linearVelocity);
			result.Predicted.LinearAcceleration = this.createVectorFromArray(mPose.linearAcceleration);
			result.Predicted.Pose.Orientation = this.createQuaternion(mPose.orientation);
			result.Predicted.Pose.Position = this.createVectorFromArray(mPose.position);
		}
		return result;
	}
	,WarpSwapBlack: function() {
	}
	,WarpSwapLoadingIcon: function() {
	}
	,WarpSwap: function(parms) {
	}
	,IsPresenting: function() {
		if(this.vrDisplay != null) {
			return this.vrDisplay.isPresenting;
		}
		return false;
	}
	,IsVrEnabled: function() {
		return this.vrEnabled;
	}
	,GetTimeInSeconds: function() {
		return kha_Scheduler.time();
	}
	,GetProjectionMatrix: function(eye) {
		if(eye == 0) {
			return this.leftProjectionMatrix;
		} else {
			return this.rightProjectionMatrix;
		}
	}
	,GetViewMatrix: function(eye) {
		if(eye == 0) {
			return this.leftViewMatrix;
		} else {
			return this.rightViewMatrix;
		}
	}
	,createMatrixFromArray: function(array) {
		var matrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
		matrix._00 = array[0];
		matrix._01 = array[1];
		matrix._02 = array[2];
		matrix._03 = array[3];
		matrix._10 = array[4];
		matrix._11 = array[5];
		matrix._12 = array[6];
		matrix._13 = array[7];
		matrix._20 = array[8];
		matrix._21 = array[9];
		matrix._22 = array[10];
		matrix._23 = array[11];
		matrix._30 = array[12];
		matrix._31 = array[13];
		matrix._32 = array[14];
		matrix._33 = array[15];
		return matrix;
	}
	,createVectorFromArray: function(array) {
		var vector = new kha_math_Vector3(0,0,0);
		if(array != null) {
			vector.x = array[0];
			vector.y = array[1];
			vector.z = array[2];
		}
		return vector;
	}
	,createQuaternion: function(array) {
		var quaternion = new kha_math_Quaternion(0,0,0,0);
		if(array != null) {
			quaternion.set_x(array[0]);
			quaternion.set_y(array[1]);
			quaternion.set_z(array[2]);
			quaternion.set_w(array[3]);
		}
		return quaternion;
	}
	,__class__: kha_js_vr_VrInterface
});
var kha_math_FastMatrix3 = function(_00,_10,_20,_01,_11,_21,_02,_12,_22) {
	this._00 = _00;
	this._10 = _10;
	this._20 = _20;
	this._01 = _01;
	this._11 = _11;
	this._21 = _21;
	this._02 = _02;
	this._12 = _12;
	this._22 = _22;
};
$hxClasses["kha.math.FastMatrix3"] = kha_math_FastMatrix3;
kha_math_FastMatrix3.__name__ = true;
kha_math_FastMatrix3.fromMatrix3 = function(m) {
	return new kha_math_FastMatrix3(m._00,m._10,m._20,m._01,m._11,m._21,m._02,m._12,m._22);
};
kha_math_FastMatrix3.prototype = {
	_00: null
	,_10: null
	,_20: null
	,_01: null
	,_11: null
	,_21: null
	,_02: null
	,_12: null
	,_22: null
	,__class__: kha_math_FastMatrix3
};
var kha_math_FastMatrix4 = function(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33) {
	this._00 = _00;
	this._10 = _10;
	this._20 = _20;
	this._30 = _30;
	this._01 = _01;
	this._11 = _11;
	this._21 = _21;
	this._31 = _31;
	this._02 = _02;
	this._12 = _12;
	this._22 = _22;
	this._32 = _32;
	this._03 = _03;
	this._13 = _13;
	this._23 = _23;
	this._33 = _33;
};
$hxClasses["kha.math.FastMatrix4"] = kha_math_FastMatrix4;
kha_math_FastMatrix4.__name__ = true;
kha_math_FastMatrix4.fromMatrix4 = function(m) {
	return new kha_math_FastMatrix4(m._00,m._10,m._20,m._30,m._01,m._11,m._21,m._31,m._02,m._12,m._22,m._32,m._03,m._13,m._23,m._33);
};
kha_math_FastMatrix4.orthogonalProjection = function(left,right,bottom,top,zn,zf) {
	var tx = -(right + left) / (right - left);
	var ty = -(top + bottom) / (top - bottom);
	var tz = -(zf + zn) / (zf - zn);
	return new kha_math_FastMatrix4(2 / (right - left),0,0,tx,0,2 / (top - bottom),0,ty,0,0,-2 / (zf - zn),tz,0,0,0,1);
};
kha_math_FastMatrix4.perspectiveProjection = function(fovY,aspect,zn,zf) {
	var uh = 1.0 / Math.tan(fovY / 2);
	var uw = uh / aspect;
	return new kha_math_FastMatrix4(uw,0,0,0,0,uh,0,0,0,0,(zf + zn) / (zn - zf),2 * zf * zn / (zn - zf),0,0,-1,0);
};
kha_math_FastMatrix4.lookAt = function(eye,at,up) {
	var zaxis = new kha_math_FastVector3(at.x - eye.x,at.y - eye.y,at.z - eye.z);
	zaxis.set_length(1);
	var _x = zaxis.y * up.z - zaxis.z * up.y;
	var _y = zaxis.z * up.x - zaxis.x * up.z;
	var _z = zaxis.x * up.y - zaxis.y * up.x;
	var xaxis = new kha_math_FastVector3(_x,_y,_z);
	xaxis.set_length(1);
	var _x1 = xaxis.y * zaxis.z - xaxis.z * zaxis.y;
	var _y1 = xaxis.z * zaxis.x - xaxis.x * zaxis.z;
	var _z1 = xaxis.x * zaxis.y - xaxis.y * zaxis.x;
	var yaxis_x = _x1;
	var yaxis_y = _y1;
	var yaxis_z = _z1;
	return new kha_math_FastMatrix4(xaxis.x,xaxis.y,xaxis.z,-(xaxis.x * eye.x + xaxis.y * eye.y + xaxis.z * eye.z),yaxis_x,yaxis_y,yaxis_z,-(yaxis_x * eye.x + yaxis_y * eye.y + yaxis_z * eye.z),-zaxis.x,-zaxis.y,-zaxis.z,zaxis.x * eye.x + zaxis.y * eye.y + zaxis.z * eye.z,0,0,0,1);
};
kha_math_FastMatrix4.prototype = {
	_00: null
	,_10: null
	,_20: null
	,_30: null
	,_01: null
	,_11: null
	,_21: null
	,_31: null
	,_02: null
	,_12: null
	,_22: null
	,_32: null
	,_03: null
	,_13: null
	,_23: null
	,_33: null
	,__class__: kha_math_FastMatrix4
};
var kha_math_FastVector2 = function(x,y) {
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.x = x;
	this.y = y;
};
$hxClasses["kha.math.FastVector2"] = kha_math_FastVector2;
kha_math_FastVector2.__name__ = true;
kha_math_FastVector2.fromVector2 = function(v) {
	return new kha_math_FastVector2(v.x,v.y);
};
kha_math_FastVector2.prototype = {
	x: null
	,y: null
	,get_length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y);
	}
	,set_length: function(length) {
		var currentLength = this.get_length();
		if(currentLength == 0) {
			return 0;
		}
		var mul = length / currentLength;
		this.x *= mul;
		this.y *= mul;
		return length;
	}
	,toString: function() {
		return "FastVector2(" + this.x + ", " + this.y + ")";
	}
	,__class__: kha_math_FastVector2
};
var kha_math_FastVector3 = function(x,y,z) {
	if(z == null) {
		z = 0;
	}
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
};
$hxClasses["kha.math.FastVector3"] = kha_math_FastVector3;
kha_math_FastVector3.__name__ = true;
kha_math_FastVector3.fromVector3 = function(v) {
	return new kha_math_FastVector3(v.x,v.y,v.z);
};
kha_math_FastVector3.prototype = {
	x: null
	,y: null
	,z: null
	,get_length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
	}
	,set_length: function(length) {
		var currentLength = this.get_length();
		if(currentLength == 0) {
			return 0;
		}
		var mul = length / currentLength;
		this.x *= mul;
		this.y *= mul;
		this.z *= mul;
		return length;
	}
	,toString: function() {
		return "FastVector3(" + this.x + ", " + this.y + ", " + this.z + ")";
	}
	,__class__: kha_math_FastVector3
};
var kha_math_FastVector4 = function(x,y,z,w) {
	if(w == null) {
		w = 1;
	}
	if(z == null) {
		z = 0;
	}
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
	this.w = w;
};
$hxClasses["kha.math.FastVector4"] = kha_math_FastVector4;
kha_math_FastVector4.__name__ = true;
kha_math_FastVector4.fromVector4 = function(v) {
	return new kha_math_FastVector4(v.x,v.y,v.z,v.w);
};
kha_math_FastVector4.prototype = {
	x: null
	,y: null
	,z: null
	,w: null
	,get_length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
	}
	,set_length: function(length) {
		var currentLength = this.get_length();
		if(currentLength == 0) {
			return 0;
		}
		var mul = length / currentLength;
		this.x *= mul;
		this.y *= mul;
		this.z *= mul;
		this.w *= mul;
		return length;
	}
	,toString: function() {
		return "FastVector4(" + this.x + ", " + this.y + ", " + this.z + ", " + this.w + ")";
	}
	,__class__: kha_math_FastVector4
};
var kha_math_Matrix3 = function(_00,_10,_20,_01,_11,_21,_02,_12,_22) {
	this._00 = _00;
	this._10 = _10;
	this._20 = _20;
	this._01 = _01;
	this._11 = _11;
	this._21 = _21;
	this._02 = _02;
	this._12 = _12;
	this._22 = _22;
};
$hxClasses["kha.math.Matrix3"] = kha_math_Matrix3;
kha_math_Matrix3.__name__ = true;
kha_math_Matrix3.prototype = {
	_00: null
	,_10: null
	,_20: null
	,_01: null
	,_11: null
	,_21: null
	,_02: null
	,_12: null
	,_22: null
	,__class__: kha_math_Matrix3
};
var kha_math_Matrix4 = function(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33) {
	this._00 = _00;
	this._10 = _10;
	this._20 = _20;
	this._30 = _30;
	this._01 = _01;
	this._11 = _11;
	this._21 = _21;
	this._31 = _31;
	this._02 = _02;
	this._12 = _12;
	this._22 = _22;
	this._32 = _32;
	this._03 = _03;
	this._13 = _13;
	this._23 = _23;
	this._33 = _33;
};
$hxClasses["kha.math.Matrix4"] = kha_math_Matrix4;
kha_math_Matrix4.__name__ = true;
kha_math_Matrix4.orthogonalProjection = function(left,right,bottom,top,zn,zf) {
	var tx = -(right + left) / (right - left);
	var ty = -(top + bottom) / (top - bottom);
	var tz = -(zf + zn) / (zf - zn);
	return new kha_math_Matrix4(2 / (right - left),0,0,tx,0,2 / (top - bottom),0,ty,0,0,-2 / (zf - zn),tz,0,0,0,1);
};
kha_math_Matrix4.perspectiveProjection = function(fovY,aspect,zn,zf) {
	var uh = 1.0 / Math.tan(fovY / 2);
	var uw = uh / aspect;
	return new kha_math_Matrix4(uw,0,0,0,0,uh,0,0,0,0,(zf + zn) / (zn - zf),2 * zf * zn / (zn - zf),0,0,-1,0);
};
kha_math_Matrix4.lookAt = function(eye,at,up) {
	var zaxis = new kha_math_Vector3(at.x - eye.x,at.y - eye.y,at.z - eye.z);
	zaxis.set_length(1);
	var _x = zaxis.y * up.z - zaxis.z * up.y;
	var _y = zaxis.z * up.x - zaxis.x * up.z;
	var _z = zaxis.x * up.y - zaxis.y * up.x;
	var xaxis = new kha_math_Vector3(_x,_y,_z);
	xaxis.set_length(1);
	var _x1 = xaxis.y * zaxis.z - xaxis.z * zaxis.y;
	var _y1 = xaxis.z * zaxis.x - xaxis.x * zaxis.z;
	var _z1 = xaxis.x * zaxis.y - xaxis.y * zaxis.x;
	var yaxis_x = _x1;
	var yaxis_y = _y1;
	var yaxis_z = _z1;
	return new kha_math_Matrix4(xaxis.x,xaxis.y,xaxis.z,-(xaxis.x * eye.x + xaxis.y * eye.y + xaxis.z * eye.z),yaxis_x,yaxis_y,yaxis_z,-(yaxis_x * eye.x + yaxis_y * eye.y + yaxis_z * eye.z),-zaxis.x,-zaxis.y,-zaxis.z,zaxis.x * eye.x + zaxis.y * eye.y + zaxis.z * eye.z,0,0,0,1);
};
kha_math_Matrix4.prototype = {
	_00: null
	,_10: null
	,_20: null
	,_30: null
	,_01: null
	,_11: null
	,_21: null
	,_31: null
	,_02: null
	,_12: null
	,_22: null
	,_32: null
	,_03: null
	,_13: null
	,_23: null
	,_33: null
	,__class__: kha_math_Matrix4
};
var kha_math_Quaternion = function(x,y,z,w) {
	if(w == null) {
		w = 1;
	}
	if(z == null) {
		z = 0;
	}
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.values = [];
	this.values.push(x);
	this.values.push(y);
	this.values.push(z);
	this.values.push(w);
};
$hxClasses["kha.math.Quaternion"] = kha_math_Quaternion;
kha_math_Quaternion.__name__ = true;
kha_math_Quaternion.fromAxisAngle = function(axis,radians) {
	var q = new kha_math_Quaternion();
	q.set_w(Math.cos(radians / 2.0));
	q.set_x(q.set_y(q.set_z(Math.sin(radians / 2.0))));
	var _g = q;
	_g.set_x(_g.get_x() * axis.x);
	var _g1 = q;
	_g1.set_y(_g1.get_y() * axis.y);
	var _g2 = q;
	_g2.set_z(_g2.get_z() * axis.z);
	return q;
};
kha_math_Quaternion.prototype = {
	values: null
	,slerp: function(t,q) {
		var epsilon = 0.0005;
		var dot = this.dot(q);
		if(dot > 1 - epsilon) {
			var result = q.add(this.sub(q).scaled(t));
			result.normalize();
			return result;
		}
		if(dot < 0) {
			dot = 0;
		}
		if(dot > 1) {
			dot = 1;
		}
		var theta0 = Math.acos(dot);
		var theta = theta0 * t;
		var q2 = q.sub(this.scaled(dot));
		q2.normalize();
		var result1 = this.scaled(Math.cos(theta)).add(q2.scaled(Math.sin(theta)));
		result1.normalize();
		return result1;
	}
	,rotated: function(b) {
		var q = new kha_math_Quaternion();
		q.set_w(this.get_w() * b.get_w() - this.get_x() * b.get_x() - this.get_y() * b.get_y() - this.get_z() * b.get_z());
		q.set_x(this.get_w() * b.get_x() + this.get_x() * b.get_w() + this.get_y() * b.get_z() - this.get_z() * b.get_y());
		q.set_y(this.get_w() * b.get_y() + this.get_y() * b.get_w() + this.get_z() * b.get_x() - this.get_x() * b.get_z());
		q.set_z(this.get_w() * b.get_z() + this.get_z() * b.get_w() + this.get_x() * b.get_y() - this.get_y() * b.get_x());
		q.normalize();
		return q;
	}
	,scaled: function(scale) {
		return new kha_math_Quaternion(this.get_x() * scale,this.get_y() * scale,this.get_z() * scale,this.get_w() * scale);
	}
	,scale: function(scale) {
		this.set_x(this.get_x() * scale);
		this.set_y(this.get_y() * scale);
		this.set_z(this.get_z() * scale);
		this.set_w(this.get_w() * scale);
	}
	,matrix: function() {
		var s = 2.0;
		var xs = this.get_x() * s;
		var ys = this.get_y() * s;
		var zs = this.get_z() * s;
		var wx = this.get_w() * xs;
		var wy = this.get_w() * ys;
		var wz = this.get_w() * zs;
		var xx = this.get_x() * xs;
		var xy = this.get_x() * ys;
		var xz = this.get_x() * zs;
		var yy = this.get_y() * ys;
		var yz = this.get_y() * zs;
		var zz = this.get_z() * zs;
		return new kha_math_Matrix4(1 - (yy + zz),xy - wz,xz + wy,0,xy + wz,1 - (xx + zz),yz - wx,0,xz - wy,yz + wx,1 - (xx + yy),0,0,0,0,1);
	}
	,get: function(index) {
		return this.values[index];
	}
	,set: function(index,value) {
		this.values[index] = value;
	}
	,get_x: function() {
		return this.values[0];
	}
	,set_x: function(value) {
		return this.values[0] = value;
	}
	,get_y: function() {
		return this.values[1];
	}
	,set_y: function(value) {
		return this.values[1] = value;
	}
	,get_z: function() {
		return this.values[2];
	}
	,set_z: function(value) {
		return this.values[2] = value;
	}
	,get_w: function() {
		return this.values[3];
	}
	,set_w: function(value) {
		return this.values[3] = value;
	}
	,get_length: function() {
		return Math.sqrt(this.get_x() * this.get_x() + this.get_y() * this.get_y() + this.get_z() * this.get_z() + this.get_w() * this.get_w());
	}
	,set_length: function(length) {
		if(this.get_length() == 0) {
			return 0;
		}
		var mul = length / this.get_length();
		var _g = this;
		_g.set_x(_g.get_x() * mul);
		var _g1 = this;
		_g1.set_y(_g1.get_y() * mul);
		var _g2 = this;
		_g2.set_z(_g2.get_z() * mul);
		return length;
	}
	,addVector: function(vec) {
		var result = new kha_math_Quaternion(this.get_x(),this.get_y(),this.get_z(),this.get_w());
		var q1 = new kha_math_Quaternion(0,vec.x,vec.y,vec.z);
		q1 = q1.mult(result);
		var _g = result;
		_g.set_x(_g.get_x() + q1.get_x() * 0.5);
		var _g1 = result;
		_g1.set_y(_g1.get_y() + q1.get_y() * 0.5);
		var _g2 = result;
		_g2.set_z(_g2.get_z() + q1.get_z() * 0.5);
		var _g3 = result;
		_g3.set_w(_g3.get_w() + q1.get_w() * 0.5);
		return result;
	}
	,add: function(q) {
		return new kha_math_Quaternion(this.get_x() + q.get_x(),this.get_y() + q.get_y(),this.get_z() + q.get_z(),this.get_w() + q.get_w());
	}
	,sub: function(q) {
		return new kha_math_Quaternion(this.get_x() - q.get_x(),this.get_y() - q.get_y(),this.get_z() - q.get_z(),this.get_w() - q.get_w());
	}
	,mult: function(r) {
		var q = new kha_math_Quaternion();
		q.set_x(this.get_w() * r.get_x() + this.get_x() * r.get_w() + this.get_y() * r.get_z() - this.get_z() * r.get_y());
		q.set_y(this.get_w() * r.get_y() - this.get_x() * r.get_z() + this.get_y() * r.get_w() + this.get_z() * r.get_x());
		q.set_z(this.get_w() * r.get_z() + this.get_x() * r.get_y() - this.get_y() * r.get_x() + this.get_z() * r.get_w());
		q.set_w(this.get_w() * r.get_w() - this.get_x() * r.get_x() - this.get_y() * r.get_y() - this.get_z() * r.get_z());
		return q;
	}
	,normalize: function() {
		this.scale(1.0 / this.get_length());
	}
	,dot: function(q) {
		return this.get_x() * q.get_x() + this.get_y() * q.get_y() + this.get_z() * q.get_z() + this.get_w() * q.get_w();
	}
	,getEulerAngles: function(A1,A2,A3,S,D) {
		if(D == null) {
			D = 1;
		}
		if(S == null) {
			S = 1;
		}
		var result = new kha_math_Vector3();
		var Q = [];
		Q[0] = this.get_x();
		Q[1] = this.get_y();
		Q[2] = this.get_z();
		var ww = this.get_w() * this.get_w();
		var Q11 = Q[A1] * Q[A1];
		var Q22 = Q[A2] * Q[A2];
		var Q33 = Q[A3] * Q[A3];
		var psign = -1;
		var SingularityRadius = 0.0000001;
		var PiOver2 = Math.PI / 2.0;
		if((A1 + 1) % 3 == A2 && (A2 + 1) % 3 == A3) {
			psign = 1;
		}
		var s2 = psign * 2.0 * (psign * this.get_w() * Q[A2] + Q[A1] * Q[A3]);
		if(s2 < -1 + SingularityRadius) {
			result.x = 0;
			result.y = -S * D * PiOver2;
			result.z = S * D * Math.atan2(2 * (psign * Q[A1] * Q[A2] + this.get_w() * Q[A3]),ww + Q22 - Q11 - Q33);
		} else if(s2 > 1 - SingularityRadius) {
			result.x = 0;
			result.y = S * D * PiOver2;
			result.z = S * D * Math.atan2(2 * (psign * Q[A1] * Q[A2] + this.get_w() * Q[A3]),ww + Q22 - Q11 - Q33);
		} else {
			result.x = -S * D * Math.atan2(-2 * (this.get_w() * Q[A1] - psign * Q[A2] * Q[A3]),ww + Q33 - Q11 - Q22);
			result.y = S * D * Math.asin(s2);
			result.z = S * D * Math.atan2(2 * (this.get_w() * Q[A3] - psign * Q[A1] * Q[A2]),ww + Q11 - Q22 - Q33);
		}
		return result;
	}
	,__class__: kha_math_Quaternion
};
var kha_math_Vector2 = function(x,y) {
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.x = x;
	this.y = y;
};
$hxClasses["kha.math.Vector2"] = kha_math_Vector2;
kha_math_Vector2.__name__ = true;
kha_math_Vector2.prototype = {
	x: null
	,y: null
	,get_length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y);
	}
	,set_length: function(length) {
		var currentLength = this.get_length();
		if(currentLength == 0) {
			return 0;
		}
		var mul = length / currentLength;
		this.x *= mul;
		this.y *= mul;
		return length;
	}
	,__class__: kha_math_Vector2
};
var kha_math_Vector3 = function(x,y,z) {
	if(z == null) {
		z = 0;
	}
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
};
$hxClasses["kha.math.Vector3"] = kha_math_Vector3;
kha_math_Vector3.__name__ = true;
kha_math_Vector3.prototype = {
	x: null
	,y: null
	,z: null
	,get_length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
	}
	,set_length: function(length) {
		var currentLength = this.get_length();
		if(currentLength == 0) {
			return 0;
		}
		var mul = length / currentLength;
		this.x *= mul;
		this.y *= mul;
		this.z *= mul;
		return length;
	}
	,__class__: kha_math_Vector3
};
var kha_math_Vector4 = function(x,y,z,w) {
	if(w == null) {
		w = 1;
	}
	if(z == null) {
		z = 0;
	}
	if(y == null) {
		y = 0;
	}
	if(x == null) {
		x = 0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
	this.w = w;
};
$hxClasses["kha.math.Vector4"] = kha_math_Vector4;
kha_math_Vector4.__name__ = true;
kha_math_Vector4.prototype = {
	x: null
	,y: null
	,z: null
	,w: null
	,get_length: function() {
		return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);
	}
	,set_length: function(length) {
		var currentLength = this.get_length();
		if(currentLength == 0) {
			return 0;
		}
		var mul = length / currentLength;
		this.x *= mul;
		this.y *= mul;
		this.z *= mul;
		this.w *= mul;
		return length;
	}
	,__class__: kha_math_Vector4
};
var kha_network_Client = function() { };
$hxClasses["kha.network.Client"] = kha_network_Client;
kha_network_Client.__name__ = true;
kha_network_Client.prototype = {
	get_id: null
	,id: null
	,send: null
	,receive: null
	,onClose: null
	,__class__: kha_network_Client
};
var kha_network_ControllerBuilder = function() { };
$hxClasses["kha.network.ControllerBuilder"] = kha_network_ControllerBuilder;
kha_network_ControllerBuilder.__name__ = true;
var kha_network_Entity = function() { };
$hxClasses["kha.network.Entity"] = kha_network_Entity;
kha_network_Entity.__name__ = true;
kha_network_Entity.prototype = {
	_id: null
	,_size: null
	,_send: null
	,_receive: null
	,__class__: kha_network_Entity
};
var kha_network_LocalClient = function(id) {
	this.myId = id;
};
$hxClasses["kha.network.LocalClient"] = kha_network_LocalClient;
kha_network_LocalClient.__name__ = true;
kha_network_LocalClient.__interfaces__ = [kha_network_Client];
kha_network_LocalClient.prototype = {
	myId: null
	,send: function(bytes,mandatory) {
	}
	,receive: function(receiver) {
	}
	,onClose: function(close) {
	}
	,controllers: null
	,get_controllers: function() {
		return null;
	}
	,id: null
	,get_id: function() {
		return this.myId;
	}
	,__class__: kha_network_LocalClient
};
var kha_network_Network = function(url,port,errorCallback,closeCallback) {
	this.open = false;
	var _gthis = this;
	this.socket = new WebSocket("ws://" + url + ":" + port);
	this.socket.onerror = function(error) {
		haxe_Log.trace("Network error.",{ fileName : "kha/network/Network.hx", lineNumber : 14, className : "kha.network.Network", methodName : "new"});
		errorCallback();
	};
	this.socket.binaryType = "arraybuffer";
	this.socket.onopen = function() {
		_gthis.open = true;
	};
	this.socket.onclose = function(event) {
		haxe_Log.trace("Network connection closed. " + kha_network_Network.webSocketCloseReason(event.code) + " (" + event.reason + ").",{ fileName : "kha/network/Network.hx", lineNumber : 22, className : "kha.network.Network", methodName : "new"});
		closeCallback();
	};
};
$hxClasses["kha.network.Network"] = kha_network_Network;
kha_network_Network.__name__ = true;
kha_network_Network.webSocketCloseReason = function(code) {
	switch(code) {
	case 1000:
		return "Normal Closure";
	case 1001:
		return "Going Away";
	case 1002:
		return "Protocol error";
	case 1003:
		return "Unsupported Data";
	case 1005:
		return "No Status Rcvd";
	case 1006:
		return "Abnormal Closure";
	case 1007:
		return "Invalid frame";
	case 1008:
		return "Policy Violation";
	case 1009:
		return "Message Too Big";
	case 1010:
		return "Mandatory Ext.";
	case 1011:
		return "Internal Server Error";
	case 1015:
		return "TLS handshake";
	default:
		return "";
	}
};
kha_network_Network.prototype = {
	socket: null
	,open: null
	,send: function(bytes,mandatory) {
		if(this.open) {
			this.socket.send(bytes.b.bufferValue);
		}
	}
	,listen: function(listener) {
		this.socket.onmessage = function(message) {
			var tmp = haxe_io_Bytes.ofData(message.data);
			listener(tmp);
		};
	}
	,__class__: kha_network_Network
};
var kha_network_State = function(time,data) {
	this.time = time;
	this.data = data;
};
$hxClasses["kha.network.State"] = kha_network_State;
kha_network_State.__name__ = true;
kha_network_State.prototype = {
	time: null
	,data: null
	,__class__: kha_network_State
};
var kha_network_Session = function(maxPlayers,address,port) {
	this.ping = 1;
	this.currentPlayers = 0;
	this.controllers = new haxe_ds_IntMap();
	this.entities = new haxe_ds_IntMap();
	kha_network_Session.instance = this;
	this.maxPlayers = maxPlayers;
	this.address = address;
	this.port = port;
};
$hxClasses["kha.network.Session"] = kha_network_Session;
kha_network_Session.__name__ = true;
kha_network_Session.the = function() {
	return kha_network_Session.instance;
};
kha_network_Session.prototype = {
	entities: null
	,controllers: null
	,maxPlayers: null
	,currentPlayers: null
	,ping: null
	,address: null
	,port: null
	,startCallback: null
	,refusedCallback: null
	,resetCallback: null
	,localClient: null
	,network: null
	,updateTaskId: null
	,pingTaskId: null
	,me: null
	,get_me: function() {
		return this.localClient;
	}
	,addEntity: function(entity) {
		var this1 = this.entities;
		var key = entity._id();
		this1.h[key] = entity;
	}
	,addController: function(controller) {
		haxe_Log.trace("Adding controller id " + controller._id(),{ fileName : "kha/network/Session.hx", lineNumber : 88, className : "kha.network.Session", methodName : "addController"});
		controller._inputBufferIndex = 0;
		var this1 = this.controllers;
		var key = controller._id();
		this1.h[key] = controller;
	}
	,sendControllerUpdate: function(id,bytes) {
		if(this.controllers.h.hasOwnProperty(id)) {
			if(this.controllers.h[id]._inputBuffer.length < this.controllers.h[id]._inputBufferIndex + 4 + bytes.length) {
				var newBuffer = new haxe_io_Bytes(new ArrayBuffer(this.controllers.h[id]._inputBufferIndex + 4 + bytes.length));
				newBuffer.blit(0,this.controllers.h[id]._inputBuffer,0,this.controllers.h[id]._inputBufferIndex);
				this.controllers.h[id]._inputBuffer = newBuffer;
			}
			this.controllers.h[id]._inputBuffer.setInt32(this.controllers.h[id]._inputBufferIndex,bytes.length);
			this.controllers.h[id]._inputBuffer.blit(this.controllers.h[id]._inputBufferIndex + 4,bytes,0,bytes.length);
			this.controllers.h[id]._inputBufferIndex += 4 + bytes.length;
		}
	}
	,sendPing: function() {
		var bytes = new haxe_io_Bytes(new ArrayBuffer(5));
		bytes.b[0] = 4;
		bytes.setFloat(1,kha_Scheduler.realTime());
		this.sendToServer(bytes);
	}
	,sendPlayerUpdate: function() {
	}
	,receive: function(bytes,client) {
		switch(bytes.b[0]) {
		case 0:
			var index = bytes.b[1];
			this.localClient = new kha_network_LocalClient(index);
			kha_Scheduler.resetTime();
			this.startCallback();
			break;
		case 1:
			var time = bytes.getDouble(1);
			var offset = 9;
			var entity = this.entities.iterator();
			while(entity.hasNext()) {
				var entity1 = entity.next();
				entity1._receive(offset,bytes);
				offset += entity1._size();
			}
			kha_Scheduler.warp(time);
			break;
		case 3:
			switch(bytes.b[1]) {
			case 0:
				break;
			case 1:
				this.executeRPC(bytes);
				break;
			}
			break;
		case 4:
			var sendTime = bytes.getFloat(1);
			this.ping = kha_Scheduler.realTime() - sendTime;
			break;
		case 5:
			this.refusedCallback();
			break;
		case 6:
			this.currentPlayers = bytes.getInt32(1);
			break;
		}
	}
	,executeRPC: function(bytes) {
		var args = [];
		var syncId = bytes.getInt32(2);
		var index = 6;
		var classnamelength = bytes.getUInt16(index);
		index += 2;
		var classname = "";
		var _g = 0;
		var _g1 = classnamelength;
		while(_g < _g1) {
			var i = _g++;
			var code = bytes.b[index];
			classname += String.fromCodePoint(code);
			++index;
		}
		var methodnamelength = bytes.getUInt16(index);
		index += 2;
		var methodname = "";
		var _g2 = 0;
		var _g3 = methodnamelength;
		while(_g2 < _g3) {
			var i1 = _g2++;
			var code1 = bytes.b[index];
			methodname += String.fromCodePoint(code1);
			++index;
		}
		while(index < bytes.length) {
			var type = bytes.b[index];
			++index;
			switch(type) {
			case 66:
				var value = bytes.b[index] == 1;
				++index;
				haxe_Log.trace("Bool: " + (value == null ? "null" : "" + value),{ fileName : "kha/network/Session.hx", lineNumber : 295, className : "kha.network.Session", methodName : "executeRPC"});
				args.push(value);
				break;
			case 70:
				var value1 = bytes.getDouble(index);
				index += 8;
				haxe_Log.trace("Float: " + value1,{ fileName : "kha/network/Session.hx", lineNumber : 300, className : "kha.network.Session", methodName : "executeRPC"});
				args.push(value1);
				break;
			case 73:
				var value2 = bytes.getInt32(index);
				index += 4;
				haxe_Log.trace("Int: " + value2,{ fileName : "kha/network/Session.hx", lineNumber : 305, className : "kha.network.Session", methodName : "executeRPC"});
				args.push(value2);
				break;
			case 83:
				var length = bytes.getUInt16(index);
				index += 2;
				var str = "";
				var _g4 = 0;
				var _g5 = length;
				while(_g4 < _g5) {
					var i2 = _g4++;
					var code2 = bytes.b[index];
					str += String.fromCodePoint(code2);
					++index;
				}
				haxe_Log.trace("String: " + str,{ fileName : "kha/network/Session.hx", lineNumber : 315, className : "kha.network.Session", methodName : "executeRPC"});
				args.push(str);
				break;
			default:
				haxe_Log.trace("Unknown argument type.",{ fileName : "kha/network/Session.hx", lineNumber : 318, className : "kha.network.Session", methodName : "executeRPC"});
			}
		}
		if(syncId == -1) {
			Reflect.field($hxClasses[classname],methodname + "_remotely").apply(null,args);
		} else {
			Reflect.field(kha_network_SyncBuilder.objects[syncId],methodname + "_remotely").apply(kha_network_SyncBuilder.objects[syncId],args);
		}
	}
	,waitForStart: function(callback,refuseCallback,errorCallback,closeCallback,resCallback) {
		var _gthis = this;
		this.startCallback = callback;
		this.refusedCallback = refuseCallback;
		this.resetCallback = resCallback;
		this.network = new kha_network_Network(this.address,this.port,errorCallback,function() {
			closeCallback();
			_gthis.reset();
		});
		this.network.listen(function(bytes) {
			_gthis.receive(bytes);
		});
		this.updateTaskId = kha_Scheduler.addFrameTask($bind(this,this.update),0);
		this.ping = 1;
		this.pingTaskId = kha_Scheduler.addTimeTask($bind(this,this.sendPing),0,1);
	}
	,reset: function() {
		kha_Scheduler.removeFrameTask(this.updateTaskId);
		kha_Scheduler.removeTimeTask(this.pingTaskId);
		this.currentPlayers = 0;
		this.ping = 1;
		this.controllers = new haxe_ds_IntMap();
		this.entities = new haxe_ds_IntMap();
		this.resetCallback();
	}
	,update: function() {
		var controller = this.controllers.iterator();
		while(controller.hasNext()) {
			var controller1 = controller.next();
			if(controller1._inputBufferIndex > 0) {
				var bytes = new haxe_io_Bytes(new ArrayBuffer(22 + controller1._inputBufferIndex));
				bytes.b[0] = 2;
				bytes.setInt32(1,controller1._id());
				bytes.setDouble(5,kha_Scheduler.time());
				bytes.setInt32(13,kha_System.windowWidth(0));
				bytes.setInt32(17,kha_System.windowHeight(0));
				bytes.b[21] = 0;
				bytes.blit(22,controller1._inputBuffer,0,controller1._inputBufferIndex);
				this.sendToServer(bytes);
				controller1._inputBufferIndex = 0;
			}
		}
	}
	,sendToServer: function(bytes) {
		this.network.send(bytes,false);
	}
	,__class__: kha_network_Session
};
var kha_network_SyncBuilder = function() { };
$hxClasses["kha.network.SyncBuilder"] = kha_network_SyncBuilder;
kha_network_SyncBuilder.__name__ = true;
var kha_simd_Float32x4 = function(_0,_1,_2,_3) {
	this._0 = _0;
	this._1 = _1;
	this._2 = _2;
	this._3 = _3;
};
$hxClasses["kha.simd.Float32x4"] = kha_simd_Float32x4;
kha_simd_Float32x4.__name__ = true;
kha_simd_Float32x4.create = function() {
	return new kha_simd_Float32x4(0,0,0,0);
};
kha_simd_Float32x4.loadAllFast = function(t) {
	return new kha_simd_Float32x4(t,t,t,t);
};
kha_simd_Float32x4.load = function(a,b,c,d) {
	return new kha_simd_Float32x4(a,b,c,d);
};
kha_simd_Float32x4.loadFast = function(a,b,c,d) {
	return new kha_simd_Float32x4(a,b,c,d);
};
kha_simd_Float32x4.get = function(t,index) {
	var value = 0;
	switch(index) {
	case 0:
		value = t._0;
		break;
	case 1:
		value = t._1;
		break;
	case 2:
		value = t._2;
		break;
	case 3:
		value = t._3;
		break;
	}
	return value;
};
kha_simd_Float32x4.getFast = function(t,index) {
	switch(index) {
	case 0:
		return t._0;
	case 1:
		return t._1;
	case 2:
		return t._2;
	case 3:
		return t._3;
	}
	return 0;
};
kha_simd_Float32x4.abs = function(t) {
	return new kha_simd_Float32x4(Math.abs(t._0),Math.abs(t._1),Math.abs(t._2),Math.abs(t._3));
};
kha_simd_Float32x4.add = function(a,b) {
	return new kha_simd_Float32x4(a._0 + b._0,a._1 + b._1,a._2 + b._2,a._3 + b._3);
};
kha_simd_Float32x4.div = function(a,b) {
	return new kha_simd_Float32x4(a._0 / b._0,a._1 / b._1,a._2 / b._2,a._3 / b._3);
};
kha_simd_Float32x4.mul = function(a,b) {
	return new kha_simd_Float32x4(a._0 * b._0,a._1 * b._1,a._2 * b._2,a._3 * b._3);
};
kha_simd_Float32x4.neg = function(t) {
	return new kha_simd_Float32x4(-t._0,-t._1,-t._2,-t._3);
};
kha_simd_Float32x4.reciprocalApproximation = function(t) {
	return new kha_simd_Float32x4(0,0,0,0);
};
kha_simd_Float32x4.reciprocalSqrtApproximation = function(t) {
	return new kha_simd_Float32x4(0,0,0,0);
};
kha_simd_Float32x4.sub = function(a,b) {
	return new kha_simd_Float32x4(a._0 - b._0,a._1 - b._1,a._2 - b._2,a._3 - b._3);
};
kha_simd_Float32x4.sqrt = function(t) {
	return new kha_simd_Float32x4(Math.sqrt(t._0),Math.sqrt(t._1),Math.sqrt(t._2),Math.sqrt(t._3));
};
kha_simd_Float32x4.prototype = {
	_0: null
	,_1: null
	,_2: null
	,_3: null
	,__class__: kha_simd_Float32x4
};
var kha_vr_Pose = function() {
	this.Orientation = new kha_math_Quaternion();
	this.Position = new kha_math_Vector3();
};
$hxClasses["kha.vr.Pose"] = kha_vr_Pose;
kha_vr_Pose.__name__ = true;
kha_vr_Pose.prototype = {
	Orientation: null
	,Position: null
	,__class__: kha_vr_Pose
};
var kha_vr_PoseState = function() {
};
$hxClasses["kha.vr.PoseState"] = kha_vr_PoseState;
kha_vr_PoseState.__name__ = true;
kha_vr_PoseState.prototype = {
	Pose: null
	,AngularVelocity: null
	,LinearVelocity: null
	,AngularAcceleration: null
	,LinearAcceleration: null
	,TimeInSeconds: null
	,__class__: kha_vr_PoseState
};
var kha_vr_SensorState = function() {
};
$hxClasses["kha.vr.SensorState"] = kha_vr_SensorState;
kha_vr_SensorState.__name__ = true;
kha_vr_SensorState.prototype = {
	Predicted: null
	,Recorded: null
	,Temperature: null
	,Status: null
	,__class__: kha_vr_SensorState
};
var kha_vr_TimeWarpImage = function() {
};
$hxClasses["kha.vr.TimeWarpImage"] = kha_vr_TimeWarpImage;
kha_vr_TimeWarpImage.__name__ = true;
kha_vr_TimeWarpImage.prototype = {
	Image: null
	,TexCoordsFromTanAngles: null
	,Pose: null
	,__class__: kha_vr_TimeWarpImage
};
var kha_vr_TimeWarpParms = function() {
};
$hxClasses["kha.vr.TimeWarpParms"] = kha_vr_TimeWarpParms;
kha_vr_TimeWarpParms.__name__ = true;
kha_vr_TimeWarpParms.prototype = {
	LeftImage: null
	,RightImage: null
	,LeftOverlay: null
	,RightOverlay: null
	,__class__: kha_vr_TimeWarpParms
};
var mouseAndKey_MouseAndKey = function() {
	this.y = -1;
	this.x = -1;
	this.enable = true;
	kha_input_Keyboard.get().notify($bind(this,this.keyDown),$bind(this,this.keyUp),$bind(this,this.pressListener));
	kha_input_Mouse.get().notify($bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),null,null);
};
$hxClasses["mouseAndKey.MouseAndKey"] = mouseAndKey_MouseAndKey;
mouseAndKey_MouseAndKey.__name__ = true;
mouseAndKey_MouseAndKey.prototype = {
	txt: null
	,change: null
	,down: null
	,up: null
	,rightDown: null
	,rightUp: null
	,enable: null
	,x: null
	,y: null
	,onMouseDown: function(button,x,y) {
		if(!this.enable) {
			return;
		}
		if(button == 0 && this.down != null) {
			this.down(x,y);
		}
		if(button == 1 && this.rightDown != null) {
			this.rightDown(x,y);
		}
	}
	,onMouseUp: function(button,x,y) {
		if(!this.enable) {
			return;
		}
		if(button == 0 && this.up != null) {
			this.up(x,y);
		}
		if(button == 1 && this.rightUp != null) {
			this.rightUp(x,y);
		}
	}
	,onMouseMove: function(x,y,cx,cy) {
		if(!this.enable) {
			return;
		}
		if(x > 0 && y > 0 && this.change != null) {
			this.change(x,y);
		}
	}
	,key: null
	,keyDown: function(keyCode) {
		this.key = keyCode;
		if(!this.enable) {
			return;
		}
		if(keyCode == 8) {
			if(this.txt != null) {
				this.txt.content = HxOverrides.substr(this.txt.content,0,this.txt.content.length - 2);
				this.txt.dirty = true;
			}
		}
	}
	,keyUp: function(keyCode) {
		if(!this.enable) {
			return;
		}
		haxe_Log.trace(keyCode,{ fileName : "mouseAndKey/MouseAndKey.hx", lineNumber : 53, className : "mouseAndKey.MouseAndKey", methodName : "keyUp"});
	}
	,pressListener: function(str) {
		haxe_Log.trace("pressed " + str + this.key,{ fileName : "mouseAndKey/MouseAndKey.hx", lineNumber : 56, className : "mouseAndKey.MouseAndKey", methodName : "pressListener"});
		if(this.txt != null) {
			this.txt.content += str;
			this.txt.dirty = true;
		}
	}
	,__class__: mouseAndKey_MouseAndKey
};
var simpleText_Alignment = $hxEnums["simpleText.Alignment"] = { __ename__ : true, __constructs__ : ["CentreBorder","LeftBorder","RightBorder","TopBorder","BottomBorder","BorderCentre","BorderLeft","BorderRight","BorderTop","BorderBottom","LeftTop","TopLeft","RightTop","TopRight","LeftBottom","BottomLeft","RightBottom","BottomRight","Centre","LeftCentre","Left","CentreLeft","RightCentre","Right","CentreRight","BottomCentre","Bottom","CentreBottom","TopCentre","Top","CentreTop"]
	,CentreBorder: {_hx_index:0,__enum__:"simpleText.Alignment",toString:$estr}
	,LeftBorder: {_hx_index:1,__enum__:"simpleText.Alignment",toString:$estr}
	,RightBorder: {_hx_index:2,__enum__:"simpleText.Alignment",toString:$estr}
	,TopBorder: {_hx_index:3,__enum__:"simpleText.Alignment",toString:$estr}
	,BottomBorder: {_hx_index:4,__enum__:"simpleText.Alignment",toString:$estr}
	,BorderCentre: {_hx_index:5,__enum__:"simpleText.Alignment",toString:$estr}
	,BorderLeft: {_hx_index:6,__enum__:"simpleText.Alignment",toString:$estr}
	,BorderRight: {_hx_index:7,__enum__:"simpleText.Alignment",toString:$estr}
	,BorderTop: {_hx_index:8,__enum__:"simpleText.Alignment",toString:$estr}
	,BorderBottom: {_hx_index:9,__enum__:"simpleText.Alignment",toString:$estr}
	,LeftTop: {_hx_index:10,__enum__:"simpleText.Alignment",toString:$estr}
	,TopLeft: {_hx_index:11,__enum__:"simpleText.Alignment",toString:$estr}
	,RightTop: {_hx_index:12,__enum__:"simpleText.Alignment",toString:$estr}
	,TopRight: {_hx_index:13,__enum__:"simpleText.Alignment",toString:$estr}
	,LeftBottom: {_hx_index:14,__enum__:"simpleText.Alignment",toString:$estr}
	,BottomLeft: {_hx_index:15,__enum__:"simpleText.Alignment",toString:$estr}
	,RightBottom: {_hx_index:16,__enum__:"simpleText.Alignment",toString:$estr}
	,BottomRight: {_hx_index:17,__enum__:"simpleText.Alignment",toString:$estr}
	,Centre: {_hx_index:18,__enum__:"simpleText.Alignment",toString:$estr}
	,LeftCentre: {_hx_index:19,__enum__:"simpleText.Alignment",toString:$estr}
	,Left: {_hx_index:20,__enum__:"simpleText.Alignment",toString:$estr}
	,CentreLeft: {_hx_index:21,__enum__:"simpleText.Alignment",toString:$estr}
	,RightCentre: {_hx_index:22,__enum__:"simpleText.Alignment",toString:$estr}
	,Right: {_hx_index:23,__enum__:"simpleText.Alignment",toString:$estr}
	,CentreRight: {_hx_index:24,__enum__:"simpleText.Alignment",toString:$estr}
	,BottomCentre: {_hx_index:25,__enum__:"simpleText.Alignment",toString:$estr}
	,Bottom: {_hx_index:26,__enum__:"simpleText.Alignment",toString:$estr}
	,CentreBottom: {_hx_index:27,__enum__:"simpleText.Alignment",toString:$estr}
	,TopCentre: {_hx_index:28,__enum__:"simpleText.Alignment",toString:$estr}
	,Top: {_hx_index:29,__enum__:"simpleText.Alignment",toString:$estr}
	,CentreTop: {_hx_index:30,__enum__:"simpleText.Alignment",toString:$estr}
};
var simpleText_AlignWindow = function() { };
$hxClasses["simpleText.AlignWindow"] = simpleText_AlignWindow;
simpleText_AlignWindow.__name__ = true;
simpleText_AlignWindow.changed = function() {
	var wid_ = Main.wid;
	var hi_ = Main.hi;
	if(simpleText_AlignWindow._wid == wid_ && simpleText_AlignWindow._hi == hi_) {
		return false;
	} else {
		simpleText_AlignWindow._wid = wid_;
		simpleText_AlignWindow._hi = hi_;
		return true;
	}
};
simpleText_AlignWindow.between4 = function(fromA,toA,fromB,toB,w,h,tA,tB,tC,borderFromA,borderToA,borderFromB,borderToB) {
	if(borderToB == null) {
		borderToB = 0;
	}
	if(borderFromB == null) {
		borderFromB = 0;
	}
	if(borderToA == null) {
		borderToA = 0;
	}
	if(borderFromA == null) {
		borderFromA = 0;
	}
	var scaleTransform = Main.scaleTransform;
	var v_x = w;
	var v_y = h;
	var w1 = scaleTransform._02 * v_x + scaleTransform._12 * v_y + scaleTransform._22;
	var x = (scaleTransform._00 * v_x + scaleTransform._10 * v_y + scaleTransform._20) / w1;
	var y = (scaleTransform._01 * v_x + scaleTransform._11 * v_y + scaleTransform._21) / w1;
	var sv_x = x;
	var sv_y = y;
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform1 = Main.scaleTransform;
	var mFA;
	switch(fromA._hx_index) {
	case 2:case 7:
		var wid1 = Main.wid;
		var hi1 = Main.hi;
		var w2 = wid1 - borderFromA * 2;
		var h2 = hi1 - borderFromA * 2;
		var dw = w2 - w;
		var dh = h2 - h;
		var scale = dw < dh ? w2 / w : h2 / h;
		if(scale < 0) {
			scale = 0.;
		}
		var scaleTransform__00 = scale;
		var scaleTransform__10 = 0;
		var scaleTransform__20 = 0;
		var scaleTransform__01 = 0;
		var scaleTransform__11 = scale;
		var scaleTransform__21 = 0;
		var scaleTransform__02 = 0;
		var scaleTransform__12 = 0;
		var scaleTransform__22 = 1;
		var value_x = w;
		var value_y = h;
		var w3 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
		var x1 = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w3;
		var y1 = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w3;
		var sv_x1 = x1;
		var sv_y1 = y1;
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = wid1 - sv_x1 - borderFromA;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = hi1 / 2 - sv_y1 / 2;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		mFA = new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
		break;
	case 0:case 5:
		var wid2 = Main.wid;
		var hi2 = Main.hi;
		var w21 = wid2 - borderFromA * 2;
		var h21 = hi2 - borderFromA * 2;
		var dw1 = w21 - w;
		var dh1 = h21 - h;
		var scale1 = dw1 < dh1 ? w21 / w : h21 / h;
		if(scale1 < 0) {
			scale1 = 0.;
		}
		var scaleTransform__001 = scale1;
		var scaleTransform__101 = 0;
		var scaleTransform__201 = 0;
		var scaleTransform__011 = 0;
		var scaleTransform__111 = scale1;
		var scaleTransform__211 = 0;
		var scaleTransform__021 = 0;
		var scaleTransform__121 = 0;
		var scaleTransform__221 = 1;
		var value_x1 = w;
		var value_y1 = h;
		var w4 = scaleTransform__021 * value_x1 + scaleTransform__121 * value_y1 + scaleTransform__221;
		var x2 = (scaleTransform__001 * value_x1 + scaleTransform__101 * value_y1 + scaleTransform__201) / w4;
		var y2 = (scaleTransform__011 * value_x1 + scaleTransform__111 * value_y1 + scaleTransform__211) / w4;
		var sv_x2 = x2;
		var sv_y2 = y2;
		var _this__001 = 1;
		var _this__101 = 0;
		var _this__201 = wid2 / 2 - sv_x2 / 2;
		var _this__011 = 0;
		var _this__111 = 1;
		var _this__211 = hi2 / 2 - sv_y2 / 2;
		var _this__021 = 0;
		var _this__121 = 0;
		var _this__221 = 1;
		mFA = new kha_math_FastMatrix3(_this__001 * scaleTransform__001 + _this__101 * scaleTransform__011 + _this__201 * scaleTransform__021,_this__001 * scaleTransform__101 + _this__101 * scaleTransform__111 + _this__201 * scaleTransform__121,_this__001 * scaleTransform__201 + _this__101 * scaleTransform__211 + _this__201 * scaleTransform__221,_this__011 * scaleTransform__001 + _this__111 * scaleTransform__011 + _this__211 * scaleTransform__021,_this__011 * scaleTransform__101 + _this__111 * scaleTransform__111 + _this__211 * scaleTransform__121,_this__011 * scaleTransform__201 + _this__111 * scaleTransform__211 + _this__211 * scaleTransform__221,_this__021 * scaleTransform__001 + _this__121 * scaleTransform__011 + _this__221 * scaleTransform__021,_this__021 * scaleTransform__101 + _this__121 * scaleTransform__111 + _this__221 * scaleTransform__121,_this__021 * scaleTransform__201 + _this__121 * scaleTransform__211 + _this__221 * scaleTransform__221);
		break;
	case 1:case 6:
		var wid3 = Main.wid;
		var hi3 = Main.hi;
		var w22 = wid3 - borderFromA * 2;
		var h22 = hi3 - borderFromA * 2;
		var dw2 = w22 - w;
		var dh2 = h22 - h;
		var scale2 = dw2 < dh2 ? w22 / w : h22 / h;
		if(scale2 < 0) {
			scale2 = 0.;
		}
		var scaleTransform__002 = scale2;
		var scaleTransform__102 = 0;
		var scaleTransform__202 = 0;
		var scaleTransform__012 = 0;
		var scaleTransform__112 = scale2;
		var scaleTransform__212 = 0;
		var scaleTransform__022 = 0;
		var scaleTransform__122 = 0;
		var scaleTransform__222 = 1;
		var value_x2 = w;
		var value_y2 = h;
		var w5 = scaleTransform__022 * value_x2 + scaleTransform__122 * value_y2 + scaleTransform__222;
		var x3 = (scaleTransform__002 * value_x2 + scaleTransform__102 * value_y2 + scaleTransform__202) / w5;
		var y3 = (scaleTransform__012 * value_x2 + scaleTransform__112 * value_y2 + scaleTransform__212) / w5;
		var sv_x3 = x3;
		var sv_y3 = y3;
		var _this__002 = 1;
		var _this__102 = 0;
		var _this__202 = borderFromA;
		var _this__012 = 0;
		var _this__112 = 1;
		var _this__212 = hi3 / 2 - sv_y3 / 2;
		var _this__022 = 0;
		var _this__122 = 0;
		var _this__222 = 1;
		mFA = new kha_math_FastMatrix3(_this__002 * scaleTransform__002 + _this__102 * scaleTransform__012 + _this__202 * scaleTransform__022,_this__002 * scaleTransform__102 + _this__102 * scaleTransform__112 + _this__202 * scaleTransform__122,_this__002 * scaleTransform__202 + _this__102 * scaleTransform__212 + _this__202 * scaleTransform__222,_this__012 * scaleTransform__002 + _this__112 * scaleTransform__012 + _this__212 * scaleTransform__022,_this__012 * scaleTransform__102 + _this__112 * scaleTransform__112 + _this__212 * scaleTransform__122,_this__012 * scaleTransform__202 + _this__112 * scaleTransform__212 + _this__212 * scaleTransform__222,_this__022 * scaleTransform__002 + _this__122 * scaleTransform__012 + _this__222 * scaleTransform__022,_this__022 * scaleTransform__102 + _this__122 * scaleTransform__112 + _this__222 * scaleTransform__122,_this__022 * scaleTransform__202 + _this__122 * scaleTransform__212 + _this__222 * scaleTransform__222);
		break;
	case 3:case 8:
		var wid4 = Main.wid;
		var hi4 = Main.hi;
		var w23 = wid4 - borderFromA * 2;
		var h23 = hi4 - borderFromA * 2;
		var dw3 = w23 - w;
		var dh3 = h23 - h;
		var scale3 = dw3 < dh3 ? w23 / w : h23 / h;
		if(scale3 < 0) {
			scale3 = 0.;
		}
		var scaleTransform__003 = scale3;
		var scaleTransform__103 = 0;
		var scaleTransform__203 = 0;
		var scaleTransform__013 = 0;
		var scaleTransform__113 = scale3;
		var scaleTransform__213 = 0;
		var scaleTransform__023 = 0;
		var scaleTransform__123 = 0;
		var scaleTransform__223 = 1;
		var value_x3 = w;
		var value_y3 = h;
		var w6 = scaleTransform__023 * value_x3 + scaleTransform__123 * value_y3 + scaleTransform__223;
		var x4 = (scaleTransform__003 * value_x3 + scaleTransform__103 * value_y3 + scaleTransform__203) / w6;
		var y4 = (scaleTransform__013 * value_x3 + scaleTransform__113 * value_y3 + scaleTransform__213) / w6;
		var sv_x4 = x4;
		var sv_y4 = y4;
		var _this__003 = 1;
		var _this__103 = 0;
		var _this__203 = wid4 / 2 - sv_x4 / 2;
		var _this__013 = 0;
		var _this__113 = 1;
		var _this__213 = borderFromA;
		var _this__023 = 0;
		var _this__123 = 0;
		var _this__223 = 1;
		mFA = new kha_math_FastMatrix3(_this__003 * scaleTransform__003 + _this__103 * scaleTransform__013 + _this__203 * scaleTransform__023,_this__003 * scaleTransform__103 + _this__103 * scaleTransform__113 + _this__203 * scaleTransform__123,_this__003 * scaleTransform__203 + _this__103 * scaleTransform__213 + _this__203 * scaleTransform__223,_this__013 * scaleTransform__003 + _this__113 * scaleTransform__013 + _this__213 * scaleTransform__023,_this__013 * scaleTransform__103 + _this__113 * scaleTransform__113 + _this__213 * scaleTransform__123,_this__013 * scaleTransform__203 + _this__113 * scaleTransform__213 + _this__213 * scaleTransform__223,_this__023 * scaleTransform__003 + _this__123 * scaleTransform__013 + _this__223 * scaleTransform__023,_this__023 * scaleTransform__103 + _this__123 * scaleTransform__113 + _this__223 * scaleTransform__123,_this__023 * scaleTransform__203 + _this__123 * scaleTransform__213 + _this__223 * scaleTransform__223);
		break;
	case 4:case 9:
		var wid5 = Main.wid;
		var hi5 = Main.hi;
		var w24 = wid5 - borderFromA * 2;
		var h24 = hi5 - borderFromA * 2;
		var dw4 = w24 - w;
		var dh4 = h24 - h;
		var scale4 = dw4 < dh4 ? w24 / w : h24 / h;
		if(scale4 < 0) {
			scale4 = 0.;
		}
		var scaleTransform__004 = scale4;
		var scaleTransform__104 = 0;
		var scaleTransform__204 = 0;
		var scaleTransform__014 = 0;
		var scaleTransform__114 = scale4;
		var scaleTransform__214 = 0;
		var scaleTransform__024 = 0;
		var scaleTransform__124 = 0;
		var scaleTransform__224 = 1;
		var value_x4 = w;
		var value_y4 = h;
		var w7 = scaleTransform__024 * value_x4 + scaleTransform__124 * value_y4 + scaleTransform__224;
		var x5 = (scaleTransform__004 * value_x4 + scaleTransform__104 * value_y4 + scaleTransform__204) / w7;
		var y5 = (scaleTransform__014 * value_x4 + scaleTransform__114 * value_y4 + scaleTransform__214) / w7;
		var sv_x5 = x5;
		var sv_y5 = y5;
		var _this__004 = 1;
		var _this__104 = 0;
		var _this__204 = wid5 / 2 - sv_x5 / 2;
		var _this__014 = 0;
		var _this__114 = 1;
		var _this__214 = hi5 - sv_y5 - borderFromA;
		var _this__024 = 0;
		var _this__124 = 0;
		var _this__224 = 1;
		mFA = new kha_math_FastMatrix3(_this__004 * scaleTransform__004 + _this__104 * scaleTransform__014 + _this__204 * scaleTransform__024,_this__004 * scaleTransform__104 + _this__104 * scaleTransform__114 + _this__204 * scaleTransform__124,_this__004 * scaleTransform__204 + _this__104 * scaleTransform__214 + _this__204 * scaleTransform__224,_this__014 * scaleTransform__004 + _this__114 * scaleTransform__014 + _this__214 * scaleTransform__024,_this__014 * scaleTransform__104 + _this__114 * scaleTransform__114 + _this__214 * scaleTransform__124,_this__014 * scaleTransform__204 + _this__114 * scaleTransform__214 + _this__214 * scaleTransform__224,_this__024 * scaleTransform__004 + _this__124 * scaleTransform__014 + _this__224 * scaleTransform__024,_this__024 * scaleTransform__104 + _this__124 * scaleTransform__114 + _this__224 * scaleTransform__124,_this__024 * scaleTransform__204 + _this__124 * scaleTransform__214 + _this__224 * scaleTransform__224);
		break;
	case 10:case 11:
		if(borderFromA * 2 + sv_x < wid) {
			var _this__005 = 1;
			var _this__105 = 0;
			var _this__205 = borderFromA;
			var _this__015 = 0;
			var _this__115 = 1;
			var _this__215 = borderFromA;
			var _this__025 = 0;
			var _this__125 = 0;
			var _this__225 = 1;
			mFA = new kha_math_FastMatrix3(_this__005 * scaleTransform1._00 + _this__105 * scaleTransform1._01 + _this__205 * scaleTransform1._02,_this__005 * scaleTransform1._10 + _this__105 * scaleTransform1._11 + _this__205 * scaleTransform1._12,_this__005 * scaleTransform1._20 + _this__105 * scaleTransform1._21 + _this__205 * scaleTransform1._22,_this__015 * scaleTransform1._00 + _this__115 * scaleTransform1._01 + _this__215 * scaleTransform1._02,_this__015 * scaleTransform1._10 + _this__115 * scaleTransform1._11 + _this__215 * scaleTransform1._12,_this__015 * scaleTransform1._20 + _this__115 * scaleTransform1._21 + _this__215 * scaleTransform1._22,_this__025 * scaleTransform1._00 + _this__125 * scaleTransform1._01 + _this__225 * scaleTransform1._02,_this__025 * scaleTransform1._10 + _this__125 * scaleTransform1._11 + _this__225 * scaleTransform1._12,_this__025 * scaleTransform1._20 + _this__125 * scaleTransform1._21 + _this__225 * scaleTransform1._22);
		} else {
			var wid6 = Main.wid;
			var hi6 = Main.hi;
			var scaleTransform2 = Main.scaleTransform;
			var _this__006 = 1;
			var _this__106 = 0;
			var _this__206 = borderFromA;
			var _this__016 = 0;
			var _this__116 = 1;
			var _this__216 = hi6 / 2 - sv_y / 2;
			var _this__026 = 0;
			var _this__126 = 0;
			var _this__226 = 1;
			mFA = new kha_math_FastMatrix3(_this__006 * scaleTransform2._00 + _this__106 * scaleTransform2._01 + _this__206 * scaleTransform2._02,_this__006 * scaleTransform2._10 + _this__106 * scaleTransform2._11 + _this__206 * scaleTransform2._12,_this__006 * scaleTransform2._20 + _this__106 * scaleTransform2._21 + _this__206 * scaleTransform2._22,_this__016 * scaleTransform2._00 + _this__116 * scaleTransform2._01 + _this__216 * scaleTransform2._02,_this__016 * scaleTransform2._10 + _this__116 * scaleTransform2._11 + _this__216 * scaleTransform2._12,_this__016 * scaleTransform2._20 + _this__116 * scaleTransform2._21 + _this__216 * scaleTransform2._22,_this__026 * scaleTransform2._00 + _this__126 * scaleTransform2._01 + _this__226 * scaleTransform2._02,_this__026 * scaleTransform2._10 + _this__126 * scaleTransform2._11 + _this__226 * scaleTransform2._12,_this__026 * scaleTransform2._20 + _this__126 * scaleTransform2._21 + _this__226 * scaleTransform2._22);
		}
		break;
	case 12:case 13:
		if(borderFromA * 2 + sv_x < wid) {
			var _this__007 = 1;
			var _this__107 = 0;
			var _this__207 = wid - sv_x - borderFromA;
			var _this__017 = 0;
			var _this__117 = 1;
			var _this__217 = borderFromA;
			var _this__027 = 0;
			var _this__127 = 0;
			var _this__227 = 1;
			mFA = new kha_math_FastMatrix3(_this__007 * scaleTransform1._00 + _this__107 * scaleTransform1._01 + _this__207 * scaleTransform1._02,_this__007 * scaleTransform1._10 + _this__107 * scaleTransform1._11 + _this__207 * scaleTransform1._12,_this__007 * scaleTransform1._20 + _this__107 * scaleTransform1._21 + _this__207 * scaleTransform1._22,_this__017 * scaleTransform1._00 + _this__117 * scaleTransform1._01 + _this__217 * scaleTransform1._02,_this__017 * scaleTransform1._10 + _this__117 * scaleTransform1._11 + _this__217 * scaleTransform1._12,_this__017 * scaleTransform1._20 + _this__117 * scaleTransform1._21 + _this__217 * scaleTransform1._22,_this__027 * scaleTransform1._00 + _this__127 * scaleTransform1._01 + _this__227 * scaleTransform1._02,_this__027 * scaleTransform1._10 + _this__127 * scaleTransform1._11 + _this__227 * scaleTransform1._12,_this__027 * scaleTransform1._20 + _this__127 * scaleTransform1._21 + _this__227 * scaleTransform1._22);
		} else {
			var wid7 = Main.wid;
			var hi7 = Main.hi;
			var scaleTransform3 = Main.scaleTransform;
			var _this__008 = 1;
			var _this__108 = 0;
			var _this__208 = wid7 - sv_x - borderFromA;
			var _this__018 = 0;
			var _this__118 = 1;
			var _this__218 = hi7 / 2 - sv_y / 2;
			var _this__028 = 0;
			var _this__128 = 0;
			var _this__228 = 1;
			mFA = new kha_math_FastMatrix3(_this__008 * scaleTransform3._00 + _this__108 * scaleTransform3._01 + _this__208 * scaleTransform3._02,_this__008 * scaleTransform3._10 + _this__108 * scaleTransform3._11 + _this__208 * scaleTransform3._12,_this__008 * scaleTransform3._20 + _this__108 * scaleTransform3._21 + _this__208 * scaleTransform3._22,_this__018 * scaleTransform3._00 + _this__118 * scaleTransform3._01 + _this__218 * scaleTransform3._02,_this__018 * scaleTransform3._10 + _this__118 * scaleTransform3._11 + _this__218 * scaleTransform3._12,_this__018 * scaleTransform3._20 + _this__118 * scaleTransform3._21 + _this__218 * scaleTransform3._22,_this__028 * scaleTransform3._00 + _this__128 * scaleTransform3._01 + _this__228 * scaleTransform3._02,_this__028 * scaleTransform3._10 + _this__128 * scaleTransform3._11 + _this__228 * scaleTransform3._12,_this__028 * scaleTransform3._20 + _this__128 * scaleTransform3._21 + _this__228 * scaleTransform3._22);
		}
		break;
	case 14:case 15:
		if(borderFromA * 2 + sv_y < hi) {
			var _this__009 = 1;
			var _this__109 = 0;
			var _this__209 = borderFromA;
			var _this__019 = 0;
			var _this__119 = 1;
			var _this__219 = hi - sv_y - borderFromA;
			var _this__029 = 0;
			var _this__129 = 0;
			var _this__229 = 1;
			mFA = new kha_math_FastMatrix3(_this__009 * scaleTransform1._00 + _this__109 * scaleTransform1._01 + _this__209 * scaleTransform1._02,_this__009 * scaleTransform1._10 + _this__109 * scaleTransform1._11 + _this__209 * scaleTransform1._12,_this__009 * scaleTransform1._20 + _this__109 * scaleTransform1._21 + _this__209 * scaleTransform1._22,_this__019 * scaleTransform1._00 + _this__119 * scaleTransform1._01 + _this__219 * scaleTransform1._02,_this__019 * scaleTransform1._10 + _this__119 * scaleTransform1._11 + _this__219 * scaleTransform1._12,_this__019 * scaleTransform1._20 + _this__119 * scaleTransform1._21 + _this__219 * scaleTransform1._22,_this__029 * scaleTransform1._00 + _this__129 * scaleTransform1._01 + _this__229 * scaleTransform1._02,_this__029 * scaleTransform1._10 + _this__129 * scaleTransform1._11 + _this__229 * scaleTransform1._12,_this__029 * scaleTransform1._20 + _this__129 * scaleTransform1._21 + _this__229 * scaleTransform1._22);
		} else {
			var wid8 = Main.wid;
			var hi8 = Main.hi;
			var scaleTransform4 = Main.scaleTransform;
			var _this__0010 = 1;
			var _this__1010 = 0;
			var _this__2010 = borderFromA;
			var _this__0110 = 0;
			var _this__1110 = 1;
			var _this__2110 = hi8 / 2 - sv_y / 2;
			var _this__0210 = 0;
			var _this__1210 = 0;
			var _this__2210 = 1;
			mFA = new kha_math_FastMatrix3(_this__0010 * scaleTransform4._00 + _this__1010 * scaleTransform4._01 + _this__2010 * scaleTransform4._02,_this__0010 * scaleTransform4._10 + _this__1010 * scaleTransform4._11 + _this__2010 * scaleTransform4._12,_this__0010 * scaleTransform4._20 + _this__1010 * scaleTransform4._21 + _this__2010 * scaleTransform4._22,_this__0110 * scaleTransform4._00 + _this__1110 * scaleTransform4._01 + _this__2110 * scaleTransform4._02,_this__0110 * scaleTransform4._10 + _this__1110 * scaleTransform4._11 + _this__2110 * scaleTransform4._12,_this__0110 * scaleTransform4._20 + _this__1110 * scaleTransform4._21 + _this__2110 * scaleTransform4._22,_this__0210 * scaleTransform4._00 + _this__1210 * scaleTransform4._01 + _this__2210 * scaleTransform4._02,_this__0210 * scaleTransform4._10 + _this__1210 * scaleTransform4._11 + _this__2210 * scaleTransform4._12,_this__0210 * scaleTransform4._20 + _this__1210 * scaleTransform4._21 + _this__2210 * scaleTransform4._22);
		}
		break;
	case 16:case 17:
		if(borderFromA * 2 + sv_y < hi) {
			var _this__0011 = 1;
			var _this__1011 = 0;
			var _this__2011 = wid - sv_x - borderFromA;
			var _this__0111 = 0;
			var _this__1111 = 1;
			var _this__2111 = hi - sv_y - borderFromA;
			var _this__0211 = 0;
			var _this__1211 = 0;
			var _this__2211 = 1;
			mFA = new kha_math_FastMatrix3(_this__0011 * scaleTransform1._00 + _this__1011 * scaleTransform1._01 + _this__2011 * scaleTransform1._02,_this__0011 * scaleTransform1._10 + _this__1011 * scaleTransform1._11 + _this__2011 * scaleTransform1._12,_this__0011 * scaleTransform1._20 + _this__1011 * scaleTransform1._21 + _this__2011 * scaleTransform1._22,_this__0111 * scaleTransform1._00 + _this__1111 * scaleTransform1._01 + _this__2111 * scaleTransform1._02,_this__0111 * scaleTransform1._10 + _this__1111 * scaleTransform1._11 + _this__2111 * scaleTransform1._12,_this__0111 * scaleTransform1._20 + _this__1111 * scaleTransform1._21 + _this__2111 * scaleTransform1._22,_this__0211 * scaleTransform1._00 + _this__1211 * scaleTransform1._01 + _this__2211 * scaleTransform1._02,_this__0211 * scaleTransform1._10 + _this__1211 * scaleTransform1._11 + _this__2211 * scaleTransform1._12,_this__0211 * scaleTransform1._20 + _this__1211 * scaleTransform1._21 + _this__2211 * scaleTransform1._22);
		} else {
			var wid9 = Main.wid;
			var hi9 = Main.hi;
			var scaleTransform5 = Main.scaleTransform;
			var _this__0012 = 1;
			var _this__1012 = 0;
			var _this__2012 = wid9 - sv_x - borderFromA;
			var _this__0112 = 0;
			var _this__1112 = 1;
			var _this__2112 = hi9 / 2 - sv_y / 2;
			var _this__0212 = 0;
			var _this__1212 = 0;
			var _this__2212 = 1;
			mFA = new kha_math_FastMatrix3(_this__0012 * scaleTransform5._00 + _this__1012 * scaleTransform5._01 + _this__2012 * scaleTransform5._02,_this__0012 * scaleTransform5._10 + _this__1012 * scaleTransform5._11 + _this__2012 * scaleTransform5._12,_this__0012 * scaleTransform5._20 + _this__1012 * scaleTransform5._21 + _this__2012 * scaleTransform5._22,_this__0112 * scaleTransform5._00 + _this__1112 * scaleTransform5._01 + _this__2112 * scaleTransform5._02,_this__0112 * scaleTransform5._10 + _this__1112 * scaleTransform5._11 + _this__2112 * scaleTransform5._12,_this__0112 * scaleTransform5._20 + _this__1112 * scaleTransform5._21 + _this__2112 * scaleTransform5._22,_this__0212 * scaleTransform5._00 + _this__1212 * scaleTransform5._01 + _this__2212 * scaleTransform5._02,_this__0212 * scaleTransform5._10 + _this__1212 * scaleTransform5._11 + _this__2212 * scaleTransform5._12,_this__0212 * scaleTransform5._20 + _this__1212 * scaleTransform5._21 + _this__2212 * scaleTransform5._22);
		}
		break;
	case 18:
		var wid10 = Main.wid;
		var hi10 = Main.hi;
		var scaleTransform6 = Main.scaleTransform;
		var _this__0013 = 1;
		var _this__1013 = 0;
		var _this__2013 = wid10 / 2 - sv_x / 2;
		var _this__0113 = 0;
		var _this__1113 = 1;
		var _this__2113 = hi10 / 2 - sv_y / 2;
		var _this__0213 = 0;
		var _this__1213 = 0;
		var _this__2213 = 1;
		mFA = new kha_math_FastMatrix3(_this__0013 * scaleTransform6._00 + _this__1013 * scaleTransform6._01 + _this__2013 * scaleTransform6._02,_this__0013 * scaleTransform6._10 + _this__1013 * scaleTransform6._11 + _this__2013 * scaleTransform6._12,_this__0013 * scaleTransform6._20 + _this__1013 * scaleTransform6._21 + _this__2013 * scaleTransform6._22,_this__0113 * scaleTransform6._00 + _this__1113 * scaleTransform6._01 + _this__2113 * scaleTransform6._02,_this__0113 * scaleTransform6._10 + _this__1113 * scaleTransform6._11 + _this__2113 * scaleTransform6._12,_this__0113 * scaleTransform6._20 + _this__1113 * scaleTransform6._21 + _this__2113 * scaleTransform6._22,_this__0213 * scaleTransform6._00 + _this__1213 * scaleTransform6._01 + _this__2213 * scaleTransform6._02,_this__0213 * scaleTransform6._10 + _this__1213 * scaleTransform6._11 + _this__2213 * scaleTransform6._12,_this__0213 * scaleTransform6._20 + _this__1213 * scaleTransform6._21 + _this__2213 * scaleTransform6._22);
		break;
	case 19:case 20:case 21:
		if(borderFromA * 2 + sv_x < wid) {
			var wid11 = Main.wid;
			var hi11 = Main.hi;
			var scaleTransform7 = Main.scaleTransform;
			var _this__0014 = 1;
			var _this__1014 = 0;
			var _this__2014 = borderFromA;
			var _this__0114 = 0;
			var _this__1114 = 1;
			var _this__2114 = hi11 / 2 - sv_y / 2;
			var _this__0214 = 0;
			var _this__1214 = 0;
			var _this__2214 = 1;
			mFA = new kha_math_FastMatrix3(_this__0014 * scaleTransform7._00 + _this__1014 * scaleTransform7._01 + _this__2014 * scaleTransform7._02,_this__0014 * scaleTransform7._10 + _this__1014 * scaleTransform7._11 + _this__2014 * scaleTransform7._12,_this__0014 * scaleTransform7._20 + _this__1014 * scaleTransform7._21 + _this__2014 * scaleTransform7._22,_this__0114 * scaleTransform7._00 + _this__1114 * scaleTransform7._01 + _this__2114 * scaleTransform7._02,_this__0114 * scaleTransform7._10 + _this__1114 * scaleTransform7._11 + _this__2114 * scaleTransform7._12,_this__0114 * scaleTransform7._20 + _this__1114 * scaleTransform7._21 + _this__2114 * scaleTransform7._22,_this__0214 * scaleTransform7._00 + _this__1214 * scaleTransform7._01 + _this__2214 * scaleTransform7._02,_this__0214 * scaleTransform7._10 + _this__1214 * scaleTransform7._11 + _this__2214 * scaleTransform7._12,_this__0214 * scaleTransform7._20 + _this__1214 * scaleTransform7._21 + _this__2214 * scaleTransform7._22);
		} else {
			var wid12 = Main.wid;
			var hi12 = Main.hi;
			var scaleTransform8 = Main.scaleTransform;
			var _this__0015 = 1;
			var _this__1015 = 0;
			var _this__2015 = wid12 / 2 - sv_x / 2;
			var _this__0115 = 0;
			var _this__1115 = 1;
			var _this__2115 = hi12 / 2 - sv_y / 2;
			var _this__0215 = 0;
			var _this__1215 = 0;
			var _this__2215 = 1;
			mFA = new kha_math_FastMatrix3(_this__0015 * scaleTransform8._00 + _this__1015 * scaleTransform8._01 + _this__2015 * scaleTransform8._02,_this__0015 * scaleTransform8._10 + _this__1015 * scaleTransform8._11 + _this__2015 * scaleTransform8._12,_this__0015 * scaleTransform8._20 + _this__1015 * scaleTransform8._21 + _this__2015 * scaleTransform8._22,_this__0115 * scaleTransform8._00 + _this__1115 * scaleTransform8._01 + _this__2115 * scaleTransform8._02,_this__0115 * scaleTransform8._10 + _this__1115 * scaleTransform8._11 + _this__2115 * scaleTransform8._12,_this__0115 * scaleTransform8._20 + _this__1115 * scaleTransform8._21 + _this__2115 * scaleTransform8._22,_this__0215 * scaleTransform8._00 + _this__1215 * scaleTransform8._01 + _this__2215 * scaleTransform8._02,_this__0215 * scaleTransform8._10 + _this__1215 * scaleTransform8._11 + _this__2215 * scaleTransform8._12,_this__0215 * scaleTransform8._20 + _this__1215 * scaleTransform8._21 + _this__2215 * scaleTransform8._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderFromA * 2 + sv_x < wid) {
			var wid13 = Main.wid;
			var hi13 = Main.hi;
			var scaleTransform9 = Main.scaleTransform;
			var _this__0016 = 1;
			var _this__1016 = 0;
			var _this__2016 = wid13 - sv_x - borderFromA;
			var _this__0116 = 0;
			var _this__1116 = 1;
			var _this__2116 = hi13 / 2 - sv_y / 2;
			var _this__0216 = 0;
			var _this__1216 = 0;
			var _this__2216 = 1;
			mFA = new kha_math_FastMatrix3(_this__0016 * scaleTransform9._00 + _this__1016 * scaleTransform9._01 + _this__2016 * scaleTransform9._02,_this__0016 * scaleTransform9._10 + _this__1016 * scaleTransform9._11 + _this__2016 * scaleTransform9._12,_this__0016 * scaleTransform9._20 + _this__1016 * scaleTransform9._21 + _this__2016 * scaleTransform9._22,_this__0116 * scaleTransform9._00 + _this__1116 * scaleTransform9._01 + _this__2116 * scaleTransform9._02,_this__0116 * scaleTransform9._10 + _this__1116 * scaleTransform9._11 + _this__2116 * scaleTransform9._12,_this__0116 * scaleTransform9._20 + _this__1116 * scaleTransform9._21 + _this__2116 * scaleTransform9._22,_this__0216 * scaleTransform9._00 + _this__1216 * scaleTransform9._01 + _this__2216 * scaleTransform9._02,_this__0216 * scaleTransform9._10 + _this__1216 * scaleTransform9._11 + _this__2216 * scaleTransform9._12,_this__0216 * scaleTransform9._20 + _this__1216 * scaleTransform9._21 + _this__2216 * scaleTransform9._22);
		} else {
			var wid14 = Main.wid;
			var hi14 = Main.hi;
			var scaleTransform10 = Main.scaleTransform;
			var _this__0017 = 1;
			var _this__1017 = 0;
			var _this__2017 = wid14 / 2 - sv_x / 2;
			var _this__0117 = 0;
			var _this__1117 = 1;
			var _this__2117 = hi14 / 2 - sv_y / 2;
			var _this__0217 = 0;
			var _this__1217 = 0;
			var _this__2217 = 1;
			mFA = new kha_math_FastMatrix3(_this__0017 * scaleTransform10._00 + _this__1017 * scaleTransform10._01 + _this__2017 * scaleTransform10._02,_this__0017 * scaleTransform10._10 + _this__1017 * scaleTransform10._11 + _this__2017 * scaleTransform10._12,_this__0017 * scaleTransform10._20 + _this__1017 * scaleTransform10._21 + _this__2017 * scaleTransform10._22,_this__0117 * scaleTransform10._00 + _this__1117 * scaleTransform10._01 + _this__2117 * scaleTransform10._02,_this__0117 * scaleTransform10._10 + _this__1117 * scaleTransform10._11 + _this__2117 * scaleTransform10._12,_this__0117 * scaleTransform10._20 + _this__1117 * scaleTransform10._21 + _this__2117 * scaleTransform10._22,_this__0217 * scaleTransform10._00 + _this__1217 * scaleTransform10._01 + _this__2217 * scaleTransform10._02,_this__0217 * scaleTransform10._10 + _this__1217 * scaleTransform10._11 + _this__2217 * scaleTransform10._12,_this__0217 * scaleTransform10._20 + _this__1217 * scaleTransform10._21 + _this__2217 * scaleTransform10._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderFromA * 2 + sv_y < hi) {
			var _this__0018 = 1;
			var _this__1018 = 0;
			var _this__2018 = wid / 2 - sv_x / 2;
			var _this__0118 = 0;
			var _this__1118 = 1;
			var _this__2118 = hi - sv_y - borderFromA;
			var _this__0218 = 0;
			var _this__1218 = 0;
			var _this__2218 = 1;
			mFA = new kha_math_FastMatrix3(_this__0018 * scaleTransform1._00 + _this__1018 * scaleTransform1._01 + _this__2018 * scaleTransform1._02,_this__0018 * scaleTransform1._10 + _this__1018 * scaleTransform1._11 + _this__2018 * scaleTransform1._12,_this__0018 * scaleTransform1._20 + _this__1018 * scaleTransform1._21 + _this__2018 * scaleTransform1._22,_this__0118 * scaleTransform1._00 + _this__1118 * scaleTransform1._01 + _this__2118 * scaleTransform1._02,_this__0118 * scaleTransform1._10 + _this__1118 * scaleTransform1._11 + _this__2118 * scaleTransform1._12,_this__0118 * scaleTransform1._20 + _this__1118 * scaleTransform1._21 + _this__2118 * scaleTransform1._22,_this__0218 * scaleTransform1._00 + _this__1218 * scaleTransform1._01 + _this__2218 * scaleTransform1._02,_this__0218 * scaleTransform1._10 + _this__1218 * scaleTransform1._11 + _this__2218 * scaleTransform1._12,_this__0218 * scaleTransform1._20 + _this__1218 * scaleTransform1._21 + _this__2218 * scaleTransform1._22);
		} else {
			var wid15 = Main.wid;
			var hi15 = Main.hi;
			var scaleTransform11 = Main.scaleTransform;
			var _this__0019 = 1;
			var _this__1019 = 0;
			var _this__2019 = wid15 / 2 - sv_x / 2;
			var _this__0119 = 0;
			var _this__1119 = 1;
			var _this__2119 = hi15 / 2 - sv_y / 2;
			var _this__0219 = 0;
			var _this__1219 = 0;
			var _this__2219 = 1;
			mFA = new kha_math_FastMatrix3(_this__0019 * scaleTransform11._00 + _this__1019 * scaleTransform11._01 + _this__2019 * scaleTransform11._02,_this__0019 * scaleTransform11._10 + _this__1019 * scaleTransform11._11 + _this__2019 * scaleTransform11._12,_this__0019 * scaleTransform11._20 + _this__1019 * scaleTransform11._21 + _this__2019 * scaleTransform11._22,_this__0119 * scaleTransform11._00 + _this__1119 * scaleTransform11._01 + _this__2119 * scaleTransform11._02,_this__0119 * scaleTransform11._10 + _this__1119 * scaleTransform11._11 + _this__2119 * scaleTransform11._12,_this__0119 * scaleTransform11._20 + _this__1119 * scaleTransform11._21 + _this__2119 * scaleTransform11._22,_this__0219 * scaleTransform11._00 + _this__1219 * scaleTransform11._01 + _this__2219 * scaleTransform11._02,_this__0219 * scaleTransform11._10 + _this__1219 * scaleTransform11._11 + _this__2219 * scaleTransform11._12,_this__0219 * scaleTransform11._20 + _this__1219 * scaleTransform11._21 + _this__2219 * scaleTransform11._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderFromA * 2 + sv_y < hi) {
			var _this__0020 = 1;
			var _this__1020 = 0;
			var _this__2020 = wid / 2 - sv_x / 2;
			var _this__0120 = 0;
			var _this__1120 = 1;
			var _this__2120 = borderFromA;
			var _this__0220 = 0;
			var _this__1220 = 0;
			var _this__2220 = 1;
			mFA = new kha_math_FastMatrix3(_this__0020 * scaleTransform1._00 + _this__1020 * scaleTransform1._01 + _this__2020 * scaleTransform1._02,_this__0020 * scaleTransform1._10 + _this__1020 * scaleTransform1._11 + _this__2020 * scaleTransform1._12,_this__0020 * scaleTransform1._20 + _this__1020 * scaleTransform1._21 + _this__2020 * scaleTransform1._22,_this__0120 * scaleTransform1._00 + _this__1120 * scaleTransform1._01 + _this__2120 * scaleTransform1._02,_this__0120 * scaleTransform1._10 + _this__1120 * scaleTransform1._11 + _this__2120 * scaleTransform1._12,_this__0120 * scaleTransform1._20 + _this__1120 * scaleTransform1._21 + _this__2120 * scaleTransform1._22,_this__0220 * scaleTransform1._00 + _this__1220 * scaleTransform1._01 + _this__2220 * scaleTransform1._02,_this__0220 * scaleTransform1._10 + _this__1220 * scaleTransform1._11 + _this__2220 * scaleTransform1._12,_this__0220 * scaleTransform1._20 + _this__1220 * scaleTransform1._21 + _this__2220 * scaleTransform1._22);
		} else {
			var wid16 = Main.wid;
			var hi16 = Main.hi;
			var scaleTransform12 = Main.scaleTransform;
			var _this__0021 = 1;
			var _this__1021 = 0;
			var _this__2021 = wid16 / 2 - sv_x / 2;
			var _this__0121 = 0;
			var _this__1121 = 1;
			var _this__2121 = hi16 / 2 - sv_y / 2;
			var _this__0221 = 0;
			var _this__1221 = 0;
			var _this__2221 = 1;
			mFA = new kha_math_FastMatrix3(_this__0021 * scaleTransform12._00 + _this__1021 * scaleTransform12._01 + _this__2021 * scaleTransform12._02,_this__0021 * scaleTransform12._10 + _this__1021 * scaleTransform12._11 + _this__2021 * scaleTransform12._12,_this__0021 * scaleTransform12._20 + _this__1021 * scaleTransform12._21 + _this__2021 * scaleTransform12._22,_this__0121 * scaleTransform12._00 + _this__1121 * scaleTransform12._01 + _this__2121 * scaleTransform12._02,_this__0121 * scaleTransform12._10 + _this__1121 * scaleTransform12._11 + _this__2121 * scaleTransform12._12,_this__0121 * scaleTransform12._20 + _this__1121 * scaleTransform12._21 + _this__2121 * scaleTransform12._22,_this__0221 * scaleTransform12._00 + _this__1221 * scaleTransform12._01 + _this__2221 * scaleTransform12._02,_this__0221 * scaleTransform12._10 + _this__1221 * scaleTransform12._11 + _this__2221 * scaleTransform12._12,_this__0221 * scaleTransform12._20 + _this__1221 * scaleTransform12._21 + _this__2221 * scaleTransform12._22);
		}
		break;
	}
	var scaleTransform13 = Main.scaleTransform;
	var v_x1 = w;
	var v_y1 = h;
	var w8 = scaleTransform13._02 * v_x1 + scaleTransform13._12 * v_y1 + scaleTransform13._22;
	var x6 = (scaleTransform13._00 * v_x1 + scaleTransform13._10 * v_y1 + scaleTransform13._20) / w8;
	var y6 = (scaleTransform13._01 * v_x1 + scaleTransform13._11 * v_y1 + scaleTransform13._21) / w8;
	var sv_x6 = x6;
	var sv_y6 = y6;
	var wid17 = Main.wid;
	var hi17 = Main.hi;
	var scaleTransform14 = Main.scaleTransform;
	var mTA;
	switch(toA._hx_index) {
	case 2:case 7:
		var wid18 = Main.wid;
		var hi18 = Main.hi;
		var w25 = wid18 - borderToA * 2;
		var h25 = hi18 - borderToA * 2;
		var dw5 = w25 - w;
		var dh5 = h25 - h;
		var scale5 = dw5 < dh5 ? w25 / w : h25 / h;
		if(scale5 < 0) {
			scale5 = 0.;
		}
		var scaleTransform__005 = scale5;
		var scaleTransform__105 = 0;
		var scaleTransform__205 = 0;
		var scaleTransform__015 = 0;
		var scaleTransform__115 = scale5;
		var scaleTransform__215 = 0;
		var scaleTransform__025 = 0;
		var scaleTransform__125 = 0;
		var scaleTransform__225 = 1;
		var value_x5 = w;
		var value_y5 = h;
		var w9 = scaleTransform__025 * value_x5 + scaleTransform__125 * value_y5 + scaleTransform__225;
		var x7 = (scaleTransform__005 * value_x5 + scaleTransform__105 * value_y5 + scaleTransform__205) / w9;
		var y7 = (scaleTransform__015 * value_x5 + scaleTransform__115 * value_y5 + scaleTransform__215) / w9;
		var sv_x7 = x7;
		var sv_y7 = y7;
		var _this__0022 = 1;
		var _this__1022 = 0;
		var _this__2022 = wid18 - sv_x7 - borderToA;
		var _this__0122 = 0;
		var _this__1122 = 1;
		var _this__2122 = hi18 / 2 - sv_y7 / 2;
		var _this__0222 = 0;
		var _this__1222 = 0;
		var _this__2222 = 1;
		mTA = new kha_math_FastMatrix3(_this__0022 * scaleTransform__005 + _this__1022 * scaleTransform__015 + _this__2022 * scaleTransform__025,_this__0022 * scaleTransform__105 + _this__1022 * scaleTransform__115 + _this__2022 * scaleTransform__125,_this__0022 * scaleTransform__205 + _this__1022 * scaleTransform__215 + _this__2022 * scaleTransform__225,_this__0122 * scaleTransform__005 + _this__1122 * scaleTransform__015 + _this__2122 * scaleTransform__025,_this__0122 * scaleTransform__105 + _this__1122 * scaleTransform__115 + _this__2122 * scaleTransform__125,_this__0122 * scaleTransform__205 + _this__1122 * scaleTransform__215 + _this__2122 * scaleTransform__225,_this__0222 * scaleTransform__005 + _this__1222 * scaleTransform__015 + _this__2222 * scaleTransform__025,_this__0222 * scaleTransform__105 + _this__1222 * scaleTransform__115 + _this__2222 * scaleTransform__125,_this__0222 * scaleTransform__205 + _this__1222 * scaleTransform__215 + _this__2222 * scaleTransform__225);
		break;
	case 0:case 5:
		var wid19 = Main.wid;
		var hi19 = Main.hi;
		var w26 = wid19 - borderToA * 2;
		var h26 = hi19 - borderToA * 2;
		var dw6 = w26 - w;
		var dh6 = h26 - h;
		var scale6 = dw6 < dh6 ? w26 / w : h26 / h;
		if(scale6 < 0) {
			scale6 = 0.;
		}
		var scaleTransform__006 = scale6;
		var scaleTransform__106 = 0;
		var scaleTransform__206 = 0;
		var scaleTransform__016 = 0;
		var scaleTransform__116 = scale6;
		var scaleTransform__216 = 0;
		var scaleTransform__026 = 0;
		var scaleTransform__126 = 0;
		var scaleTransform__226 = 1;
		var value_x6 = w;
		var value_y6 = h;
		var w10 = scaleTransform__026 * value_x6 + scaleTransform__126 * value_y6 + scaleTransform__226;
		var x8 = (scaleTransform__006 * value_x6 + scaleTransform__106 * value_y6 + scaleTransform__206) / w10;
		var y8 = (scaleTransform__016 * value_x6 + scaleTransform__116 * value_y6 + scaleTransform__216) / w10;
		var sv_x8 = x8;
		var sv_y8 = y8;
		var _this__0023 = 1;
		var _this__1023 = 0;
		var _this__2023 = wid19 / 2 - sv_x8 / 2;
		var _this__0123 = 0;
		var _this__1123 = 1;
		var _this__2123 = hi19 / 2 - sv_y8 / 2;
		var _this__0223 = 0;
		var _this__1223 = 0;
		var _this__2223 = 1;
		mTA = new kha_math_FastMatrix3(_this__0023 * scaleTransform__006 + _this__1023 * scaleTransform__016 + _this__2023 * scaleTransform__026,_this__0023 * scaleTransform__106 + _this__1023 * scaleTransform__116 + _this__2023 * scaleTransform__126,_this__0023 * scaleTransform__206 + _this__1023 * scaleTransform__216 + _this__2023 * scaleTransform__226,_this__0123 * scaleTransform__006 + _this__1123 * scaleTransform__016 + _this__2123 * scaleTransform__026,_this__0123 * scaleTransform__106 + _this__1123 * scaleTransform__116 + _this__2123 * scaleTransform__126,_this__0123 * scaleTransform__206 + _this__1123 * scaleTransform__216 + _this__2123 * scaleTransform__226,_this__0223 * scaleTransform__006 + _this__1223 * scaleTransform__016 + _this__2223 * scaleTransform__026,_this__0223 * scaleTransform__106 + _this__1223 * scaleTransform__116 + _this__2223 * scaleTransform__126,_this__0223 * scaleTransform__206 + _this__1223 * scaleTransform__216 + _this__2223 * scaleTransform__226);
		break;
	case 1:case 6:
		var wid20 = Main.wid;
		var hi20 = Main.hi;
		var w27 = wid20 - borderToA * 2;
		var h27 = hi20 - borderToA * 2;
		var dw7 = w27 - w;
		var dh7 = h27 - h;
		var scale7 = dw7 < dh7 ? w27 / w : h27 / h;
		if(scale7 < 0) {
			scale7 = 0.;
		}
		var scaleTransform__007 = scale7;
		var scaleTransform__107 = 0;
		var scaleTransform__207 = 0;
		var scaleTransform__017 = 0;
		var scaleTransform__117 = scale7;
		var scaleTransform__217 = 0;
		var scaleTransform__027 = 0;
		var scaleTransform__127 = 0;
		var scaleTransform__227 = 1;
		var value_x7 = w;
		var value_y7 = h;
		var w11 = scaleTransform__027 * value_x7 + scaleTransform__127 * value_y7 + scaleTransform__227;
		var x9 = (scaleTransform__007 * value_x7 + scaleTransform__107 * value_y7 + scaleTransform__207) / w11;
		var y9 = (scaleTransform__017 * value_x7 + scaleTransform__117 * value_y7 + scaleTransform__217) / w11;
		var sv_x9 = x9;
		var sv_y9 = y9;
		var _this__0024 = 1;
		var _this__1024 = 0;
		var _this__2024 = borderToA;
		var _this__0124 = 0;
		var _this__1124 = 1;
		var _this__2124 = hi20 / 2 - sv_y9 / 2;
		var _this__0224 = 0;
		var _this__1224 = 0;
		var _this__2224 = 1;
		mTA = new kha_math_FastMatrix3(_this__0024 * scaleTransform__007 + _this__1024 * scaleTransform__017 + _this__2024 * scaleTransform__027,_this__0024 * scaleTransform__107 + _this__1024 * scaleTransform__117 + _this__2024 * scaleTransform__127,_this__0024 * scaleTransform__207 + _this__1024 * scaleTransform__217 + _this__2024 * scaleTransform__227,_this__0124 * scaleTransform__007 + _this__1124 * scaleTransform__017 + _this__2124 * scaleTransform__027,_this__0124 * scaleTransform__107 + _this__1124 * scaleTransform__117 + _this__2124 * scaleTransform__127,_this__0124 * scaleTransform__207 + _this__1124 * scaleTransform__217 + _this__2124 * scaleTransform__227,_this__0224 * scaleTransform__007 + _this__1224 * scaleTransform__017 + _this__2224 * scaleTransform__027,_this__0224 * scaleTransform__107 + _this__1224 * scaleTransform__117 + _this__2224 * scaleTransform__127,_this__0224 * scaleTransform__207 + _this__1224 * scaleTransform__217 + _this__2224 * scaleTransform__227);
		break;
	case 3:case 8:
		var wid21 = Main.wid;
		var hi21 = Main.hi;
		var w28 = wid21 - borderToA * 2;
		var h28 = hi21 - borderToA * 2;
		var dw8 = w28 - w;
		var dh8 = h28 - h;
		var scale8 = dw8 < dh8 ? w28 / w : h28 / h;
		if(scale8 < 0) {
			scale8 = 0.;
		}
		var scaleTransform__008 = scale8;
		var scaleTransform__108 = 0;
		var scaleTransform__208 = 0;
		var scaleTransform__018 = 0;
		var scaleTransform__118 = scale8;
		var scaleTransform__218 = 0;
		var scaleTransform__028 = 0;
		var scaleTransform__128 = 0;
		var scaleTransform__228 = 1;
		var value_x8 = w;
		var value_y8 = h;
		var w12 = scaleTransform__028 * value_x8 + scaleTransform__128 * value_y8 + scaleTransform__228;
		var x10 = (scaleTransform__008 * value_x8 + scaleTransform__108 * value_y8 + scaleTransform__208) / w12;
		var y10 = (scaleTransform__018 * value_x8 + scaleTransform__118 * value_y8 + scaleTransform__218) / w12;
		var sv_x10 = x10;
		var sv_y10 = y10;
		var _this__0025 = 1;
		var _this__1025 = 0;
		var _this__2025 = wid21 / 2 - sv_x10 / 2;
		var _this__0125 = 0;
		var _this__1125 = 1;
		var _this__2125 = borderToA;
		var _this__0225 = 0;
		var _this__1225 = 0;
		var _this__2225 = 1;
		mTA = new kha_math_FastMatrix3(_this__0025 * scaleTransform__008 + _this__1025 * scaleTransform__018 + _this__2025 * scaleTransform__028,_this__0025 * scaleTransform__108 + _this__1025 * scaleTransform__118 + _this__2025 * scaleTransform__128,_this__0025 * scaleTransform__208 + _this__1025 * scaleTransform__218 + _this__2025 * scaleTransform__228,_this__0125 * scaleTransform__008 + _this__1125 * scaleTransform__018 + _this__2125 * scaleTransform__028,_this__0125 * scaleTransform__108 + _this__1125 * scaleTransform__118 + _this__2125 * scaleTransform__128,_this__0125 * scaleTransform__208 + _this__1125 * scaleTransform__218 + _this__2125 * scaleTransform__228,_this__0225 * scaleTransform__008 + _this__1225 * scaleTransform__018 + _this__2225 * scaleTransform__028,_this__0225 * scaleTransform__108 + _this__1225 * scaleTransform__118 + _this__2225 * scaleTransform__128,_this__0225 * scaleTransform__208 + _this__1225 * scaleTransform__218 + _this__2225 * scaleTransform__228);
		break;
	case 4:case 9:
		var wid22 = Main.wid;
		var hi22 = Main.hi;
		var w29 = wid22 - borderToA * 2;
		var h29 = hi22 - borderToA * 2;
		var dw9 = w29 - w;
		var dh9 = h29 - h;
		var scale9 = dw9 < dh9 ? w29 / w : h29 / h;
		if(scale9 < 0) {
			scale9 = 0.;
		}
		var scaleTransform__009 = scale9;
		var scaleTransform__109 = 0;
		var scaleTransform__209 = 0;
		var scaleTransform__019 = 0;
		var scaleTransform__119 = scale9;
		var scaleTransform__219 = 0;
		var scaleTransform__029 = 0;
		var scaleTransform__129 = 0;
		var scaleTransform__229 = 1;
		var value_x9 = w;
		var value_y9 = h;
		var w13 = scaleTransform__029 * value_x9 + scaleTransform__129 * value_y9 + scaleTransform__229;
		var x11 = (scaleTransform__009 * value_x9 + scaleTransform__109 * value_y9 + scaleTransform__209) / w13;
		var y11 = (scaleTransform__019 * value_x9 + scaleTransform__119 * value_y9 + scaleTransform__219) / w13;
		var sv_x11 = x11;
		var sv_y11 = y11;
		var _this__0026 = 1;
		var _this__1026 = 0;
		var _this__2026 = wid22 / 2 - sv_x11 / 2;
		var _this__0126 = 0;
		var _this__1126 = 1;
		var _this__2126 = hi22 - sv_y11 - borderToA;
		var _this__0226 = 0;
		var _this__1226 = 0;
		var _this__2226 = 1;
		mTA = new kha_math_FastMatrix3(_this__0026 * scaleTransform__009 + _this__1026 * scaleTransform__019 + _this__2026 * scaleTransform__029,_this__0026 * scaleTransform__109 + _this__1026 * scaleTransform__119 + _this__2026 * scaleTransform__129,_this__0026 * scaleTransform__209 + _this__1026 * scaleTransform__219 + _this__2026 * scaleTransform__229,_this__0126 * scaleTransform__009 + _this__1126 * scaleTransform__019 + _this__2126 * scaleTransform__029,_this__0126 * scaleTransform__109 + _this__1126 * scaleTransform__119 + _this__2126 * scaleTransform__129,_this__0126 * scaleTransform__209 + _this__1126 * scaleTransform__219 + _this__2126 * scaleTransform__229,_this__0226 * scaleTransform__009 + _this__1226 * scaleTransform__019 + _this__2226 * scaleTransform__029,_this__0226 * scaleTransform__109 + _this__1226 * scaleTransform__119 + _this__2226 * scaleTransform__129,_this__0226 * scaleTransform__209 + _this__1226 * scaleTransform__219 + _this__2226 * scaleTransform__229);
		break;
	case 10:case 11:
		if(borderToA * 2 + sv_x6 < wid17) {
			var _this__0027 = 1;
			var _this__1027 = 0;
			var _this__2027 = borderToA;
			var _this__0127 = 0;
			var _this__1127 = 1;
			var _this__2127 = borderToA;
			var _this__0227 = 0;
			var _this__1227 = 0;
			var _this__2227 = 1;
			mTA = new kha_math_FastMatrix3(_this__0027 * scaleTransform14._00 + _this__1027 * scaleTransform14._01 + _this__2027 * scaleTransform14._02,_this__0027 * scaleTransform14._10 + _this__1027 * scaleTransform14._11 + _this__2027 * scaleTransform14._12,_this__0027 * scaleTransform14._20 + _this__1027 * scaleTransform14._21 + _this__2027 * scaleTransform14._22,_this__0127 * scaleTransform14._00 + _this__1127 * scaleTransform14._01 + _this__2127 * scaleTransform14._02,_this__0127 * scaleTransform14._10 + _this__1127 * scaleTransform14._11 + _this__2127 * scaleTransform14._12,_this__0127 * scaleTransform14._20 + _this__1127 * scaleTransform14._21 + _this__2127 * scaleTransform14._22,_this__0227 * scaleTransform14._00 + _this__1227 * scaleTransform14._01 + _this__2227 * scaleTransform14._02,_this__0227 * scaleTransform14._10 + _this__1227 * scaleTransform14._11 + _this__2227 * scaleTransform14._12,_this__0227 * scaleTransform14._20 + _this__1227 * scaleTransform14._21 + _this__2227 * scaleTransform14._22);
		} else {
			var wid23 = Main.wid;
			var hi23 = Main.hi;
			var scaleTransform15 = Main.scaleTransform;
			var _this__0028 = 1;
			var _this__1028 = 0;
			var _this__2028 = borderToA;
			var _this__0128 = 0;
			var _this__1128 = 1;
			var _this__2128 = hi23 / 2 - sv_y6 / 2;
			var _this__0228 = 0;
			var _this__1228 = 0;
			var _this__2228 = 1;
			mTA = new kha_math_FastMatrix3(_this__0028 * scaleTransform15._00 + _this__1028 * scaleTransform15._01 + _this__2028 * scaleTransform15._02,_this__0028 * scaleTransform15._10 + _this__1028 * scaleTransform15._11 + _this__2028 * scaleTransform15._12,_this__0028 * scaleTransform15._20 + _this__1028 * scaleTransform15._21 + _this__2028 * scaleTransform15._22,_this__0128 * scaleTransform15._00 + _this__1128 * scaleTransform15._01 + _this__2128 * scaleTransform15._02,_this__0128 * scaleTransform15._10 + _this__1128 * scaleTransform15._11 + _this__2128 * scaleTransform15._12,_this__0128 * scaleTransform15._20 + _this__1128 * scaleTransform15._21 + _this__2128 * scaleTransform15._22,_this__0228 * scaleTransform15._00 + _this__1228 * scaleTransform15._01 + _this__2228 * scaleTransform15._02,_this__0228 * scaleTransform15._10 + _this__1228 * scaleTransform15._11 + _this__2228 * scaleTransform15._12,_this__0228 * scaleTransform15._20 + _this__1228 * scaleTransform15._21 + _this__2228 * scaleTransform15._22);
		}
		break;
	case 12:case 13:
		if(borderToA * 2 + sv_x6 < wid17) {
			var _this__0029 = 1;
			var _this__1029 = 0;
			var _this__2029 = wid17 - sv_x6 - borderToA;
			var _this__0129 = 0;
			var _this__1129 = 1;
			var _this__2129 = borderToA;
			var _this__0229 = 0;
			var _this__1229 = 0;
			var _this__2229 = 1;
			mTA = new kha_math_FastMatrix3(_this__0029 * scaleTransform14._00 + _this__1029 * scaleTransform14._01 + _this__2029 * scaleTransform14._02,_this__0029 * scaleTransform14._10 + _this__1029 * scaleTransform14._11 + _this__2029 * scaleTransform14._12,_this__0029 * scaleTransform14._20 + _this__1029 * scaleTransform14._21 + _this__2029 * scaleTransform14._22,_this__0129 * scaleTransform14._00 + _this__1129 * scaleTransform14._01 + _this__2129 * scaleTransform14._02,_this__0129 * scaleTransform14._10 + _this__1129 * scaleTransform14._11 + _this__2129 * scaleTransform14._12,_this__0129 * scaleTransform14._20 + _this__1129 * scaleTransform14._21 + _this__2129 * scaleTransform14._22,_this__0229 * scaleTransform14._00 + _this__1229 * scaleTransform14._01 + _this__2229 * scaleTransform14._02,_this__0229 * scaleTransform14._10 + _this__1229 * scaleTransform14._11 + _this__2229 * scaleTransform14._12,_this__0229 * scaleTransform14._20 + _this__1229 * scaleTransform14._21 + _this__2229 * scaleTransform14._22);
		} else {
			var wid24 = Main.wid;
			var hi24 = Main.hi;
			var scaleTransform16 = Main.scaleTransform;
			var _this__0030 = 1;
			var _this__1030 = 0;
			var _this__2030 = wid24 - sv_x6 - borderToA;
			var _this__0130 = 0;
			var _this__1130 = 1;
			var _this__2130 = hi24 / 2 - sv_y6 / 2;
			var _this__0230 = 0;
			var _this__1230 = 0;
			var _this__2230 = 1;
			mTA = new kha_math_FastMatrix3(_this__0030 * scaleTransform16._00 + _this__1030 * scaleTransform16._01 + _this__2030 * scaleTransform16._02,_this__0030 * scaleTransform16._10 + _this__1030 * scaleTransform16._11 + _this__2030 * scaleTransform16._12,_this__0030 * scaleTransform16._20 + _this__1030 * scaleTransform16._21 + _this__2030 * scaleTransform16._22,_this__0130 * scaleTransform16._00 + _this__1130 * scaleTransform16._01 + _this__2130 * scaleTransform16._02,_this__0130 * scaleTransform16._10 + _this__1130 * scaleTransform16._11 + _this__2130 * scaleTransform16._12,_this__0130 * scaleTransform16._20 + _this__1130 * scaleTransform16._21 + _this__2130 * scaleTransform16._22,_this__0230 * scaleTransform16._00 + _this__1230 * scaleTransform16._01 + _this__2230 * scaleTransform16._02,_this__0230 * scaleTransform16._10 + _this__1230 * scaleTransform16._11 + _this__2230 * scaleTransform16._12,_this__0230 * scaleTransform16._20 + _this__1230 * scaleTransform16._21 + _this__2230 * scaleTransform16._22);
		}
		break;
	case 14:case 15:
		if(borderToA * 2 + sv_y6 < hi17) {
			var _this__0031 = 1;
			var _this__1031 = 0;
			var _this__2031 = borderToA;
			var _this__0131 = 0;
			var _this__1131 = 1;
			var _this__2131 = hi17 - sv_y6 - borderToA;
			var _this__0231 = 0;
			var _this__1231 = 0;
			var _this__2231 = 1;
			mTA = new kha_math_FastMatrix3(_this__0031 * scaleTransform14._00 + _this__1031 * scaleTransform14._01 + _this__2031 * scaleTransform14._02,_this__0031 * scaleTransform14._10 + _this__1031 * scaleTransform14._11 + _this__2031 * scaleTransform14._12,_this__0031 * scaleTransform14._20 + _this__1031 * scaleTransform14._21 + _this__2031 * scaleTransform14._22,_this__0131 * scaleTransform14._00 + _this__1131 * scaleTransform14._01 + _this__2131 * scaleTransform14._02,_this__0131 * scaleTransform14._10 + _this__1131 * scaleTransform14._11 + _this__2131 * scaleTransform14._12,_this__0131 * scaleTransform14._20 + _this__1131 * scaleTransform14._21 + _this__2131 * scaleTransform14._22,_this__0231 * scaleTransform14._00 + _this__1231 * scaleTransform14._01 + _this__2231 * scaleTransform14._02,_this__0231 * scaleTransform14._10 + _this__1231 * scaleTransform14._11 + _this__2231 * scaleTransform14._12,_this__0231 * scaleTransform14._20 + _this__1231 * scaleTransform14._21 + _this__2231 * scaleTransform14._22);
		} else {
			var wid25 = Main.wid;
			var hi25 = Main.hi;
			var scaleTransform17 = Main.scaleTransform;
			var _this__0032 = 1;
			var _this__1032 = 0;
			var _this__2032 = borderToA;
			var _this__0132 = 0;
			var _this__1132 = 1;
			var _this__2132 = hi25 / 2 - sv_y6 / 2;
			var _this__0232 = 0;
			var _this__1232 = 0;
			var _this__2232 = 1;
			mTA = new kha_math_FastMatrix3(_this__0032 * scaleTransform17._00 + _this__1032 * scaleTransform17._01 + _this__2032 * scaleTransform17._02,_this__0032 * scaleTransform17._10 + _this__1032 * scaleTransform17._11 + _this__2032 * scaleTransform17._12,_this__0032 * scaleTransform17._20 + _this__1032 * scaleTransform17._21 + _this__2032 * scaleTransform17._22,_this__0132 * scaleTransform17._00 + _this__1132 * scaleTransform17._01 + _this__2132 * scaleTransform17._02,_this__0132 * scaleTransform17._10 + _this__1132 * scaleTransform17._11 + _this__2132 * scaleTransform17._12,_this__0132 * scaleTransform17._20 + _this__1132 * scaleTransform17._21 + _this__2132 * scaleTransform17._22,_this__0232 * scaleTransform17._00 + _this__1232 * scaleTransform17._01 + _this__2232 * scaleTransform17._02,_this__0232 * scaleTransform17._10 + _this__1232 * scaleTransform17._11 + _this__2232 * scaleTransform17._12,_this__0232 * scaleTransform17._20 + _this__1232 * scaleTransform17._21 + _this__2232 * scaleTransform17._22);
		}
		break;
	case 16:case 17:
		if(borderToA * 2 + sv_y6 < hi17) {
			var _this__0033 = 1;
			var _this__1033 = 0;
			var _this__2033 = wid17 - sv_x6 - borderToA;
			var _this__0133 = 0;
			var _this__1133 = 1;
			var _this__2133 = hi17 - sv_y6 - borderToA;
			var _this__0233 = 0;
			var _this__1233 = 0;
			var _this__2233 = 1;
			mTA = new kha_math_FastMatrix3(_this__0033 * scaleTransform14._00 + _this__1033 * scaleTransform14._01 + _this__2033 * scaleTransform14._02,_this__0033 * scaleTransform14._10 + _this__1033 * scaleTransform14._11 + _this__2033 * scaleTransform14._12,_this__0033 * scaleTransform14._20 + _this__1033 * scaleTransform14._21 + _this__2033 * scaleTransform14._22,_this__0133 * scaleTransform14._00 + _this__1133 * scaleTransform14._01 + _this__2133 * scaleTransform14._02,_this__0133 * scaleTransform14._10 + _this__1133 * scaleTransform14._11 + _this__2133 * scaleTransform14._12,_this__0133 * scaleTransform14._20 + _this__1133 * scaleTransform14._21 + _this__2133 * scaleTransform14._22,_this__0233 * scaleTransform14._00 + _this__1233 * scaleTransform14._01 + _this__2233 * scaleTransform14._02,_this__0233 * scaleTransform14._10 + _this__1233 * scaleTransform14._11 + _this__2233 * scaleTransform14._12,_this__0233 * scaleTransform14._20 + _this__1233 * scaleTransform14._21 + _this__2233 * scaleTransform14._22);
		} else {
			var wid26 = Main.wid;
			var hi26 = Main.hi;
			var scaleTransform18 = Main.scaleTransform;
			var _this__0034 = 1;
			var _this__1034 = 0;
			var _this__2034 = wid26 - sv_x6 - borderToA;
			var _this__0134 = 0;
			var _this__1134 = 1;
			var _this__2134 = hi26 / 2 - sv_y6 / 2;
			var _this__0234 = 0;
			var _this__1234 = 0;
			var _this__2234 = 1;
			mTA = new kha_math_FastMatrix3(_this__0034 * scaleTransform18._00 + _this__1034 * scaleTransform18._01 + _this__2034 * scaleTransform18._02,_this__0034 * scaleTransform18._10 + _this__1034 * scaleTransform18._11 + _this__2034 * scaleTransform18._12,_this__0034 * scaleTransform18._20 + _this__1034 * scaleTransform18._21 + _this__2034 * scaleTransform18._22,_this__0134 * scaleTransform18._00 + _this__1134 * scaleTransform18._01 + _this__2134 * scaleTransform18._02,_this__0134 * scaleTransform18._10 + _this__1134 * scaleTransform18._11 + _this__2134 * scaleTransform18._12,_this__0134 * scaleTransform18._20 + _this__1134 * scaleTransform18._21 + _this__2134 * scaleTransform18._22,_this__0234 * scaleTransform18._00 + _this__1234 * scaleTransform18._01 + _this__2234 * scaleTransform18._02,_this__0234 * scaleTransform18._10 + _this__1234 * scaleTransform18._11 + _this__2234 * scaleTransform18._12,_this__0234 * scaleTransform18._20 + _this__1234 * scaleTransform18._21 + _this__2234 * scaleTransform18._22);
		}
		break;
	case 18:
		var wid27 = Main.wid;
		var hi27 = Main.hi;
		var scaleTransform19 = Main.scaleTransform;
		var _this__0035 = 1;
		var _this__1035 = 0;
		var _this__2035 = wid27 / 2 - sv_x6 / 2;
		var _this__0135 = 0;
		var _this__1135 = 1;
		var _this__2135 = hi27 / 2 - sv_y6 / 2;
		var _this__0235 = 0;
		var _this__1235 = 0;
		var _this__2235 = 1;
		mTA = new kha_math_FastMatrix3(_this__0035 * scaleTransform19._00 + _this__1035 * scaleTransform19._01 + _this__2035 * scaleTransform19._02,_this__0035 * scaleTransform19._10 + _this__1035 * scaleTransform19._11 + _this__2035 * scaleTransform19._12,_this__0035 * scaleTransform19._20 + _this__1035 * scaleTransform19._21 + _this__2035 * scaleTransform19._22,_this__0135 * scaleTransform19._00 + _this__1135 * scaleTransform19._01 + _this__2135 * scaleTransform19._02,_this__0135 * scaleTransform19._10 + _this__1135 * scaleTransform19._11 + _this__2135 * scaleTransform19._12,_this__0135 * scaleTransform19._20 + _this__1135 * scaleTransform19._21 + _this__2135 * scaleTransform19._22,_this__0235 * scaleTransform19._00 + _this__1235 * scaleTransform19._01 + _this__2235 * scaleTransform19._02,_this__0235 * scaleTransform19._10 + _this__1235 * scaleTransform19._11 + _this__2235 * scaleTransform19._12,_this__0235 * scaleTransform19._20 + _this__1235 * scaleTransform19._21 + _this__2235 * scaleTransform19._22);
		break;
	case 19:case 20:case 21:
		if(borderToA * 2 + sv_x6 < wid17) {
			var wid28 = Main.wid;
			var hi28 = Main.hi;
			var scaleTransform20 = Main.scaleTransform;
			var _this__0036 = 1;
			var _this__1036 = 0;
			var _this__2036 = borderToA;
			var _this__0136 = 0;
			var _this__1136 = 1;
			var _this__2136 = hi28 / 2 - sv_y6 / 2;
			var _this__0236 = 0;
			var _this__1236 = 0;
			var _this__2236 = 1;
			mTA = new kha_math_FastMatrix3(_this__0036 * scaleTransform20._00 + _this__1036 * scaleTransform20._01 + _this__2036 * scaleTransform20._02,_this__0036 * scaleTransform20._10 + _this__1036 * scaleTransform20._11 + _this__2036 * scaleTransform20._12,_this__0036 * scaleTransform20._20 + _this__1036 * scaleTransform20._21 + _this__2036 * scaleTransform20._22,_this__0136 * scaleTransform20._00 + _this__1136 * scaleTransform20._01 + _this__2136 * scaleTransform20._02,_this__0136 * scaleTransform20._10 + _this__1136 * scaleTransform20._11 + _this__2136 * scaleTransform20._12,_this__0136 * scaleTransform20._20 + _this__1136 * scaleTransform20._21 + _this__2136 * scaleTransform20._22,_this__0236 * scaleTransform20._00 + _this__1236 * scaleTransform20._01 + _this__2236 * scaleTransform20._02,_this__0236 * scaleTransform20._10 + _this__1236 * scaleTransform20._11 + _this__2236 * scaleTransform20._12,_this__0236 * scaleTransform20._20 + _this__1236 * scaleTransform20._21 + _this__2236 * scaleTransform20._22);
		} else {
			var wid29 = Main.wid;
			var hi29 = Main.hi;
			var scaleTransform21 = Main.scaleTransform;
			var _this__0037 = 1;
			var _this__1037 = 0;
			var _this__2037 = wid29 / 2 - sv_x6 / 2;
			var _this__0137 = 0;
			var _this__1137 = 1;
			var _this__2137 = hi29 / 2 - sv_y6 / 2;
			var _this__0237 = 0;
			var _this__1237 = 0;
			var _this__2237 = 1;
			mTA = new kha_math_FastMatrix3(_this__0037 * scaleTransform21._00 + _this__1037 * scaleTransform21._01 + _this__2037 * scaleTransform21._02,_this__0037 * scaleTransform21._10 + _this__1037 * scaleTransform21._11 + _this__2037 * scaleTransform21._12,_this__0037 * scaleTransform21._20 + _this__1037 * scaleTransform21._21 + _this__2037 * scaleTransform21._22,_this__0137 * scaleTransform21._00 + _this__1137 * scaleTransform21._01 + _this__2137 * scaleTransform21._02,_this__0137 * scaleTransform21._10 + _this__1137 * scaleTransform21._11 + _this__2137 * scaleTransform21._12,_this__0137 * scaleTransform21._20 + _this__1137 * scaleTransform21._21 + _this__2137 * scaleTransform21._22,_this__0237 * scaleTransform21._00 + _this__1237 * scaleTransform21._01 + _this__2237 * scaleTransform21._02,_this__0237 * scaleTransform21._10 + _this__1237 * scaleTransform21._11 + _this__2237 * scaleTransform21._12,_this__0237 * scaleTransform21._20 + _this__1237 * scaleTransform21._21 + _this__2237 * scaleTransform21._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderToA * 2 + sv_x6 < wid17) {
			var wid30 = Main.wid;
			var hi30 = Main.hi;
			var scaleTransform22 = Main.scaleTransform;
			var _this__0038 = 1;
			var _this__1038 = 0;
			var _this__2038 = wid30 - sv_x6 - borderToA;
			var _this__0138 = 0;
			var _this__1138 = 1;
			var _this__2138 = hi30 / 2 - sv_y6 / 2;
			var _this__0238 = 0;
			var _this__1238 = 0;
			var _this__2238 = 1;
			mTA = new kha_math_FastMatrix3(_this__0038 * scaleTransform22._00 + _this__1038 * scaleTransform22._01 + _this__2038 * scaleTransform22._02,_this__0038 * scaleTransform22._10 + _this__1038 * scaleTransform22._11 + _this__2038 * scaleTransform22._12,_this__0038 * scaleTransform22._20 + _this__1038 * scaleTransform22._21 + _this__2038 * scaleTransform22._22,_this__0138 * scaleTransform22._00 + _this__1138 * scaleTransform22._01 + _this__2138 * scaleTransform22._02,_this__0138 * scaleTransform22._10 + _this__1138 * scaleTransform22._11 + _this__2138 * scaleTransform22._12,_this__0138 * scaleTransform22._20 + _this__1138 * scaleTransform22._21 + _this__2138 * scaleTransform22._22,_this__0238 * scaleTransform22._00 + _this__1238 * scaleTransform22._01 + _this__2238 * scaleTransform22._02,_this__0238 * scaleTransform22._10 + _this__1238 * scaleTransform22._11 + _this__2238 * scaleTransform22._12,_this__0238 * scaleTransform22._20 + _this__1238 * scaleTransform22._21 + _this__2238 * scaleTransform22._22);
		} else {
			var wid31 = Main.wid;
			var hi31 = Main.hi;
			var scaleTransform23 = Main.scaleTransform;
			var _this__0039 = 1;
			var _this__1039 = 0;
			var _this__2039 = wid31 / 2 - sv_x6 / 2;
			var _this__0139 = 0;
			var _this__1139 = 1;
			var _this__2139 = hi31 / 2 - sv_y6 / 2;
			var _this__0239 = 0;
			var _this__1239 = 0;
			var _this__2239 = 1;
			mTA = new kha_math_FastMatrix3(_this__0039 * scaleTransform23._00 + _this__1039 * scaleTransform23._01 + _this__2039 * scaleTransform23._02,_this__0039 * scaleTransform23._10 + _this__1039 * scaleTransform23._11 + _this__2039 * scaleTransform23._12,_this__0039 * scaleTransform23._20 + _this__1039 * scaleTransform23._21 + _this__2039 * scaleTransform23._22,_this__0139 * scaleTransform23._00 + _this__1139 * scaleTransform23._01 + _this__2139 * scaleTransform23._02,_this__0139 * scaleTransform23._10 + _this__1139 * scaleTransform23._11 + _this__2139 * scaleTransform23._12,_this__0139 * scaleTransform23._20 + _this__1139 * scaleTransform23._21 + _this__2139 * scaleTransform23._22,_this__0239 * scaleTransform23._00 + _this__1239 * scaleTransform23._01 + _this__2239 * scaleTransform23._02,_this__0239 * scaleTransform23._10 + _this__1239 * scaleTransform23._11 + _this__2239 * scaleTransform23._12,_this__0239 * scaleTransform23._20 + _this__1239 * scaleTransform23._21 + _this__2239 * scaleTransform23._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderToA * 2 + sv_y6 < hi17) {
			var _this__0040 = 1;
			var _this__1040 = 0;
			var _this__2040 = wid17 / 2 - sv_x6 / 2;
			var _this__0140 = 0;
			var _this__1140 = 1;
			var _this__2140 = hi17 - sv_y6 - borderToA;
			var _this__0240 = 0;
			var _this__1240 = 0;
			var _this__2240 = 1;
			mTA = new kha_math_FastMatrix3(_this__0040 * scaleTransform14._00 + _this__1040 * scaleTransform14._01 + _this__2040 * scaleTransform14._02,_this__0040 * scaleTransform14._10 + _this__1040 * scaleTransform14._11 + _this__2040 * scaleTransform14._12,_this__0040 * scaleTransform14._20 + _this__1040 * scaleTransform14._21 + _this__2040 * scaleTransform14._22,_this__0140 * scaleTransform14._00 + _this__1140 * scaleTransform14._01 + _this__2140 * scaleTransform14._02,_this__0140 * scaleTransform14._10 + _this__1140 * scaleTransform14._11 + _this__2140 * scaleTransform14._12,_this__0140 * scaleTransform14._20 + _this__1140 * scaleTransform14._21 + _this__2140 * scaleTransform14._22,_this__0240 * scaleTransform14._00 + _this__1240 * scaleTransform14._01 + _this__2240 * scaleTransform14._02,_this__0240 * scaleTransform14._10 + _this__1240 * scaleTransform14._11 + _this__2240 * scaleTransform14._12,_this__0240 * scaleTransform14._20 + _this__1240 * scaleTransform14._21 + _this__2240 * scaleTransform14._22);
		} else {
			var wid32 = Main.wid;
			var hi32 = Main.hi;
			var scaleTransform24 = Main.scaleTransform;
			var _this__0041 = 1;
			var _this__1041 = 0;
			var _this__2041 = wid32 / 2 - sv_x6 / 2;
			var _this__0141 = 0;
			var _this__1141 = 1;
			var _this__2141 = hi32 / 2 - sv_y6 / 2;
			var _this__0241 = 0;
			var _this__1241 = 0;
			var _this__2241 = 1;
			mTA = new kha_math_FastMatrix3(_this__0041 * scaleTransform24._00 + _this__1041 * scaleTransform24._01 + _this__2041 * scaleTransform24._02,_this__0041 * scaleTransform24._10 + _this__1041 * scaleTransform24._11 + _this__2041 * scaleTransform24._12,_this__0041 * scaleTransform24._20 + _this__1041 * scaleTransform24._21 + _this__2041 * scaleTransform24._22,_this__0141 * scaleTransform24._00 + _this__1141 * scaleTransform24._01 + _this__2141 * scaleTransform24._02,_this__0141 * scaleTransform24._10 + _this__1141 * scaleTransform24._11 + _this__2141 * scaleTransform24._12,_this__0141 * scaleTransform24._20 + _this__1141 * scaleTransform24._21 + _this__2141 * scaleTransform24._22,_this__0241 * scaleTransform24._00 + _this__1241 * scaleTransform24._01 + _this__2241 * scaleTransform24._02,_this__0241 * scaleTransform24._10 + _this__1241 * scaleTransform24._11 + _this__2241 * scaleTransform24._12,_this__0241 * scaleTransform24._20 + _this__1241 * scaleTransform24._21 + _this__2241 * scaleTransform24._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderToA * 2 + sv_y6 < hi17) {
			var _this__0042 = 1;
			var _this__1042 = 0;
			var _this__2042 = wid17 / 2 - sv_x6 / 2;
			var _this__0142 = 0;
			var _this__1142 = 1;
			var _this__2142 = borderToA;
			var _this__0242 = 0;
			var _this__1242 = 0;
			var _this__2242 = 1;
			mTA = new kha_math_FastMatrix3(_this__0042 * scaleTransform14._00 + _this__1042 * scaleTransform14._01 + _this__2042 * scaleTransform14._02,_this__0042 * scaleTransform14._10 + _this__1042 * scaleTransform14._11 + _this__2042 * scaleTransform14._12,_this__0042 * scaleTransform14._20 + _this__1042 * scaleTransform14._21 + _this__2042 * scaleTransform14._22,_this__0142 * scaleTransform14._00 + _this__1142 * scaleTransform14._01 + _this__2142 * scaleTransform14._02,_this__0142 * scaleTransform14._10 + _this__1142 * scaleTransform14._11 + _this__2142 * scaleTransform14._12,_this__0142 * scaleTransform14._20 + _this__1142 * scaleTransform14._21 + _this__2142 * scaleTransform14._22,_this__0242 * scaleTransform14._00 + _this__1242 * scaleTransform14._01 + _this__2242 * scaleTransform14._02,_this__0242 * scaleTransform14._10 + _this__1242 * scaleTransform14._11 + _this__2242 * scaleTransform14._12,_this__0242 * scaleTransform14._20 + _this__1242 * scaleTransform14._21 + _this__2242 * scaleTransform14._22);
		} else {
			var wid33 = Main.wid;
			var hi33 = Main.hi;
			var scaleTransform25 = Main.scaleTransform;
			var _this__0043 = 1;
			var _this__1043 = 0;
			var _this__2043 = wid33 / 2 - sv_x6 / 2;
			var _this__0143 = 0;
			var _this__1143 = 1;
			var _this__2143 = hi33 / 2 - sv_y6 / 2;
			var _this__0243 = 0;
			var _this__1243 = 0;
			var _this__2243 = 1;
			mTA = new kha_math_FastMatrix3(_this__0043 * scaleTransform25._00 + _this__1043 * scaleTransform25._01 + _this__2043 * scaleTransform25._02,_this__0043 * scaleTransform25._10 + _this__1043 * scaleTransform25._11 + _this__2043 * scaleTransform25._12,_this__0043 * scaleTransform25._20 + _this__1043 * scaleTransform25._21 + _this__2043 * scaleTransform25._22,_this__0143 * scaleTransform25._00 + _this__1143 * scaleTransform25._01 + _this__2143 * scaleTransform25._02,_this__0143 * scaleTransform25._10 + _this__1143 * scaleTransform25._11 + _this__2143 * scaleTransform25._12,_this__0143 * scaleTransform25._20 + _this__1143 * scaleTransform25._21 + _this__2143 * scaleTransform25._22,_this__0243 * scaleTransform25._00 + _this__1243 * scaleTransform25._01 + _this__2243 * scaleTransform25._02,_this__0243 * scaleTransform25._10 + _this__1243 * scaleTransform25._11 + _this__2243 * scaleTransform25._12,_this__0243 * scaleTransform25._20 + _this__1243 * scaleTransform25._21 + _this__2243 * scaleTransform25._22);
		}
		break;
	}
	var scaleTransform26 = Main.scaleTransform;
	var v_x2 = w;
	var v_y2 = h;
	var w14 = scaleTransform26._02 * v_x2 + scaleTransform26._12 * v_y2 + scaleTransform26._22;
	var x12 = (scaleTransform26._00 * v_x2 + scaleTransform26._10 * v_y2 + scaleTransform26._20) / w14;
	var y12 = (scaleTransform26._01 * v_x2 + scaleTransform26._11 * v_y2 + scaleTransform26._21) / w14;
	var sv_x12 = x12;
	var sv_y12 = y12;
	var wid34 = Main.wid;
	var hi34 = Main.hi;
	var scaleTransform27 = Main.scaleTransform;
	var mFB;
	switch(fromB._hx_index) {
	case 2:case 7:
		var wid35 = Main.wid;
		var hi35 = Main.hi;
		var w210 = wid35 - borderFromB * 2;
		var h210 = hi35 - borderFromB * 2;
		var dw10 = w210 - w;
		var dh10 = h210 - h;
		var scale10 = dw10 < dh10 ? w210 / w : h210 / h;
		if(scale10 < 0) {
			scale10 = 0.;
		}
		var scaleTransform__0010 = scale10;
		var scaleTransform__1010 = 0;
		var scaleTransform__2010 = 0;
		var scaleTransform__0110 = 0;
		var scaleTransform__1110 = scale10;
		var scaleTransform__2110 = 0;
		var scaleTransform__0210 = 0;
		var scaleTransform__1210 = 0;
		var scaleTransform__2210 = 1;
		var value_x10 = w;
		var value_y10 = h;
		var w15 = scaleTransform__0210 * value_x10 + scaleTransform__1210 * value_y10 + scaleTransform__2210;
		var x13 = (scaleTransform__0010 * value_x10 + scaleTransform__1010 * value_y10 + scaleTransform__2010) / w15;
		var y13 = (scaleTransform__0110 * value_x10 + scaleTransform__1110 * value_y10 + scaleTransform__2110) / w15;
		var sv_x13 = x13;
		var sv_y13 = y13;
		var _this__0044 = 1;
		var _this__1044 = 0;
		var _this__2044 = wid35 - sv_x13 - borderFromB;
		var _this__0144 = 0;
		var _this__1144 = 1;
		var _this__2144 = hi35 / 2 - sv_y13 / 2;
		var _this__0244 = 0;
		var _this__1244 = 0;
		var _this__2244 = 1;
		mFB = new kha_math_FastMatrix3(_this__0044 * scaleTransform__0010 + _this__1044 * scaleTransform__0110 + _this__2044 * scaleTransform__0210,_this__0044 * scaleTransform__1010 + _this__1044 * scaleTransform__1110 + _this__2044 * scaleTransform__1210,_this__0044 * scaleTransform__2010 + _this__1044 * scaleTransform__2110 + _this__2044 * scaleTransform__2210,_this__0144 * scaleTransform__0010 + _this__1144 * scaleTransform__0110 + _this__2144 * scaleTransform__0210,_this__0144 * scaleTransform__1010 + _this__1144 * scaleTransform__1110 + _this__2144 * scaleTransform__1210,_this__0144 * scaleTransform__2010 + _this__1144 * scaleTransform__2110 + _this__2144 * scaleTransform__2210,_this__0244 * scaleTransform__0010 + _this__1244 * scaleTransform__0110 + _this__2244 * scaleTransform__0210,_this__0244 * scaleTransform__1010 + _this__1244 * scaleTransform__1110 + _this__2244 * scaleTransform__1210,_this__0244 * scaleTransform__2010 + _this__1244 * scaleTransform__2110 + _this__2244 * scaleTransform__2210);
		break;
	case 0:case 5:
		var wid36 = Main.wid;
		var hi36 = Main.hi;
		var w211 = wid36 - borderFromB * 2;
		var h211 = hi36 - borderFromB * 2;
		var dw11 = w211 - w;
		var dh11 = h211 - h;
		var scale11 = dw11 < dh11 ? w211 / w : h211 / h;
		if(scale11 < 0) {
			scale11 = 0.;
		}
		var scaleTransform__0011 = scale11;
		var scaleTransform__1011 = 0;
		var scaleTransform__2011 = 0;
		var scaleTransform__0111 = 0;
		var scaleTransform__1111 = scale11;
		var scaleTransform__2111 = 0;
		var scaleTransform__0211 = 0;
		var scaleTransform__1211 = 0;
		var scaleTransform__2211 = 1;
		var value_x11 = w;
		var value_y11 = h;
		var w16 = scaleTransform__0211 * value_x11 + scaleTransform__1211 * value_y11 + scaleTransform__2211;
		var x14 = (scaleTransform__0011 * value_x11 + scaleTransform__1011 * value_y11 + scaleTransform__2011) / w16;
		var y14 = (scaleTransform__0111 * value_x11 + scaleTransform__1111 * value_y11 + scaleTransform__2111) / w16;
		var sv_x14 = x14;
		var sv_y14 = y14;
		var _this__0045 = 1;
		var _this__1045 = 0;
		var _this__2045 = wid36 / 2 - sv_x14 / 2;
		var _this__0145 = 0;
		var _this__1145 = 1;
		var _this__2145 = hi36 / 2 - sv_y14 / 2;
		var _this__0245 = 0;
		var _this__1245 = 0;
		var _this__2245 = 1;
		mFB = new kha_math_FastMatrix3(_this__0045 * scaleTransform__0011 + _this__1045 * scaleTransform__0111 + _this__2045 * scaleTransform__0211,_this__0045 * scaleTransform__1011 + _this__1045 * scaleTransform__1111 + _this__2045 * scaleTransform__1211,_this__0045 * scaleTransform__2011 + _this__1045 * scaleTransform__2111 + _this__2045 * scaleTransform__2211,_this__0145 * scaleTransform__0011 + _this__1145 * scaleTransform__0111 + _this__2145 * scaleTransform__0211,_this__0145 * scaleTransform__1011 + _this__1145 * scaleTransform__1111 + _this__2145 * scaleTransform__1211,_this__0145 * scaleTransform__2011 + _this__1145 * scaleTransform__2111 + _this__2145 * scaleTransform__2211,_this__0245 * scaleTransform__0011 + _this__1245 * scaleTransform__0111 + _this__2245 * scaleTransform__0211,_this__0245 * scaleTransform__1011 + _this__1245 * scaleTransform__1111 + _this__2245 * scaleTransform__1211,_this__0245 * scaleTransform__2011 + _this__1245 * scaleTransform__2111 + _this__2245 * scaleTransform__2211);
		break;
	case 1:case 6:
		var wid37 = Main.wid;
		var hi37 = Main.hi;
		var w212 = wid37 - borderFromB * 2;
		var h212 = hi37 - borderFromB * 2;
		var dw12 = w212 - w;
		var dh12 = h212 - h;
		var scale12 = dw12 < dh12 ? w212 / w : h212 / h;
		if(scale12 < 0) {
			scale12 = 0.;
		}
		var scaleTransform__0012 = scale12;
		var scaleTransform__1012 = 0;
		var scaleTransform__2012 = 0;
		var scaleTransform__0112 = 0;
		var scaleTransform__1112 = scale12;
		var scaleTransform__2112 = 0;
		var scaleTransform__0212 = 0;
		var scaleTransform__1212 = 0;
		var scaleTransform__2212 = 1;
		var value_x12 = w;
		var value_y12 = h;
		var w17 = scaleTransform__0212 * value_x12 + scaleTransform__1212 * value_y12 + scaleTransform__2212;
		var x15 = (scaleTransform__0012 * value_x12 + scaleTransform__1012 * value_y12 + scaleTransform__2012) / w17;
		var y15 = (scaleTransform__0112 * value_x12 + scaleTransform__1112 * value_y12 + scaleTransform__2112) / w17;
		var sv_x15 = x15;
		var sv_y15 = y15;
		var _this__0046 = 1;
		var _this__1046 = 0;
		var _this__2046 = borderFromB;
		var _this__0146 = 0;
		var _this__1146 = 1;
		var _this__2146 = hi37 / 2 - sv_y15 / 2;
		var _this__0246 = 0;
		var _this__1246 = 0;
		var _this__2246 = 1;
		mFB = new kha_math_FastMatrix3(_this__0046 * scaleTransform__0012 + _this__1046 * scaleTransform__0112 + _this__2046 * scaleTransform__0212,_this__0046 * scaleTransform__1012 + _this__1046 * scaleTransform__1112 + _this__2046 * scaleTransform__1212,_this__0046 * scaleTransform__2012 + _this__1046 * scaleTransform__2112 + _this__2046 * scaleTransform__2212,_this__0146 * scaleTransform__0012 + _this__1146 * scaleTransform__0112 + _this__2146 * scaleTransform__0212,_this__0146 * scaleTransform__1012 + _this__1146 * scaleTransform__1112 + _this__2146 * scaleTransform__1212,_this__0146 * scaleTransform__2012 + _this__1146 * scaleTransform__2112 + _this__2146 * scaleTransform__2212,_this__0246 * scaleTransform__0012 + _this__1246 * scaleTransform__0112 + _this__2246 * scaleTransform__0212,_this__0246 * scaleTransform__1012 + _this__1246 * scaleTransform__1112 + _this__2246 * scaleTransform__1212,_this__0246 * scaleTransform__2012 + _this__1246 * scaleTransform__2112 + _this__2246 * scaleTransform__2212);
		break;
	case 3:case 8:
		var wid38 = Main.wid;
		var hi38 = Main.hi;
		var w213 = wid38 - borderFromB * 2;
		var h213 = hi38 - borderFromB * 2;
		var dw13 = w213 - w;
		var dh13 = h213 - h;
		var scale13 = dw13 < dh13 ? w213 / w : h213 / h;
		if(scale13 < 0) {
			scale13 = 0.;
		}
		var scaleTransform__0013 = scale13;
		var scaleTransform__1013 = 0;
		var scaleTransform__2013 = 0;
		var scaleTransform__0113 = 0;
		var scaleTransform__1113 = scale13;
		var scaleTransform__2113 = 0;
		var scaleTransform__0213 = 0;
		var scaleTransform__1213 = 0;
		var scaleTransform__2213 = 1;
		var value_x13 = w;
		var value_y13 = h;
		var w18 = scaleTransform__0213 * value_x13 + scaleTransform__1213 * value_y13 + scaleTransform__2213;
		var x16 = (scaleTransform__0013 * value_x13 + scaleTransform__1013 * value_y13 + scaleTransform__2013) / w18;
		var y16 = (scaleTransform__0113 * value_x13 + scaleTransform__1113 * value_y13 + scaleTransform__2113) / w18;
		var sv_x16 = x16;
		var sv_y16 = y16;
		var _this__0047 = 1;
		var _this__1047 = 0;
		var _this__2047 = wid38 / 2 - sv_x16 / 2;
		var _this__0147 = 0;
		var _this__1147 = 1;
		var _this__2147 = borderFromB;
		var _this__0247 = 0;
		var _this__1247 = 0;
		var _this__2247 = 1;
		mFB = new kha_math_FastMatrix3(_this__0047 * scaleTransform__0013 + _this__1047 * scaleTransform__0113 + _this__2047 * scaleTransform__0213,_this__0047 * scaleTransform__1013 + _this__1047 * scaleTransform__1113 + _this__2047 * scaleTransform__1213,_this__0047 * scaleTransform__2013 + _this__1047 * scaleTransform__2113 + _this__2047 * scaleTransform__2213,_this__0147 * scaleTransform__0013 + _this__1147 * scaleTransform__0113 + _this__2147 * scaleTransform__0213,_this__0147 * scaleTransform__1013 + _this__1147 * scaleTransform__1113 + _this__2147 * scaleTransform__1213,_this__0147 * scaleTransform__2013 + _this__1147 * scaleTransform__2113 + _this__2147 * scaleTransform__2213,_this__0247 * scaleTransform__0013 + _this__1247 * scaleTransform__0113 + _this__2247 * scaleTransform__0213,_this__0247 * scaleTransform__1013 + _this__1247 * scaleTransform__1113 + _this__2247 * scaleTransform__1213,_this__0247 * scaleTransform__2013 + _this__1247 * scaleTransform__2113 + _this__2247 * scaleTransform__2213);
		break;
	case 4:case 9:
		var wid39 = Main.wid;
		var hi39 = Main.hi;
		var w214 = wid39 - borderFromB * 2;
		var h214 = hi39 - borderFromB * 2;
		var dw14 = w214 - w;
		var dh14 = h214 - h;
		var scale14 = dw14 < dh14 ? w214 / w : h214 / h;
		if(scale14 < 0) {
			scale14 = 0.;
		}
		var scaleTransform__0014 = scale14;
		var scaleTransform__1014 = 0;
		var scaleTransform__2014 = 0;
		var scaleTransform__0114 = 0;
		var scaleTransform__1114 = scale14;
		var scaleTransform__2114 = 0;
		var scaleTransform__0214 = 0;
		var scaleTransform__1214 = 0;
		var scaleTransform__2214 = 1;
		var value_x14 = w;
		var value_y14 = h;
		var w19 = scaleTransform__0214 * value_x14 + scaleTransform__1214 * value_y14 + scaleTransform__2214;
		var x17 = (scaleTransform__0014 * value_x14 + scaleTransform__1014 * value_y14 + scaleTransform__2014) / w19;
		var y17 = (scaleTransform__0114 * value_x14 + scaleTransform__1114 * value_y14 + scaleTransform__2114) / w19;
		var sv_x17 = x17;
		var sv_y17 = y17;
		var _this__0048 = 1;
		var _this__1048 = 0;
		var _this__2048 = wid39 / 2 - sv_x17 / 2;
		var _this__0148 = 0;
		var _this__1148 = 1;
		var _this__2148 = hi39 - sv_y17 - borderFromB;
		var _this__0248 = 0;
		var _this__1248 = 0;
		var _this__2248 = 1;
		mFB = new kha_math_FastMatrix3(_this__0048 * scaleTransform__0014 + _this__1048 * scaleTransform__0114 + _this__2048 * scaleTransform__0214,_this__0048 * scaleTransform__1014 + _this__1048 * scaleTransform__1114 + _this__2048 * scaleTransform__1214,_this__0048 * scaleTransform__2014 + _this__1048 * scaleTransform__2114 + _this__2048 * scaleTransform__2214,_this__0148 * scaleTransform__0014 + _this__1148 * scaleTransform__0114 + _this__2148 * scaleTransform__0214,_this__0148 * scaleTransform__1014 + _this__1148 * scaleTransform__1114 + _this__2148 * scaleTransform__1214,_this__0148 * scaleTransform__2014 + _this__1148 * scaleTransform__2114 + _this__2148 * scaleTransform__2214,_this__0248 * scaleTransform__0014 + _this__1248 * scaleTransform__0114 + _this__2248 * scaleTransform__0214,_this__0248 * scaleTransform__1014 + _this__1248 * scaleTransform__1114 + _this__2248 * scaleTransform__1214,_this__0248 * scaleTransform__2014 + _this__1248 * scaleTransform__2114 + _this__2248 * scaleTransform__2214);
		break;
	case 10:case 11:
		if(borderFromB * 2 + sv_x12 < wid34) {
			var _this__0049 = 1;
			var _this__1049 = 0;
			var _this__2049 = borderFromB;
			var _this__0149 = 0;
			var _this__1149 = 1;
			var _this__2149 = borderFromB;
			var _this__0249 = 0;
			var _this__1249 = 0;
			var _this__2249 = 1;
			mFB = new kha_math_FastMatrix3(_this__0049 * scaleTransform27._00 + _this__1049 * scaleTransform27._01 + _this__2049 * scaleTransform27._02,_this__0049 * scaleTransform27._10 + _this__1049 * scaleTransform27._11 + _this__2049 * scaleTransform27._12,_this__0049 * scaleTransform27._20 + _this__1049 * scaleTransform27._21 + _this__2049 * scaleTransform27._22,_this__0149 * scaleTransform27._00 + _this__1149 * scaleTransform27._01 + _this__2149 * scaleTransform27._02,_this__0149 * scaleTransform27._10 + _this__1149 * scaleTransform27._11 + _this__2149 * scaleTransform27._12,_this__0149 * scaleTransform27._20 + _this__1149 * scaleTransform27._21 + _this__2149 * scaleTransform27._22,_this__0249 * scaleTransform27._00 + _this__1249 * scaleTransform27._01 + _this__2249 * scaleTransform27._02,_this__0249 * scaleTransform27._10 + _this__1249 * scaleTransform27._11 + _this__2249 * scaleTransform27._12,_this__0249 * scaleTransform27._20 + _this__1249 * scaleTransform27._21 + _this__2249 * scaleTransform27._22);
		} else {
			var wid40 = Main.wid;
			var hi40 = Main.hi;
			var scaleTransform28 = Main.scaleTransform;
			var _this__0050 = 1;
			var _this__1050 = 0;
			var _this__2050 = borderFromB;
			var _this__0150 = 0;
			var _this__1150 = 1;
			var _this__2150 = hi40 / 2 - sv_y12 / 2;
			var _this__0250 = 0;
			var _this__1250 = 0;
			var _this__2250 = 1;
			mFB = new kha_math_FastMatrix3(_this__0050 * scaleTransform28._00 + _this__1050 * scaleTransform28._01 + _this__2050 * scaleTransform28._02,_this__0050 * scaleTransform28._10 + _this__1050 * scaleTransform28._11 + _this__2050 * scaleTransform28._12,_this__0050 * scaleTransform28._20 + _this__1050 * scaleTransform28._21 + _this__2050 * scaleTransform28._22,_this__0150 * scaleTransform28._00 + _this__1150 * scaleTransform28._01 + _this__2150 * scaleTransform28._02,_this__0150 * scaleTransform28._10 + _this__1150 * scaleTransform28._11 + _this__2150 * scaleTransform28._12,_this__0150 * scaleTransform28._20 + _this__1150 * scaleTransform28._21 + _this__2150 * scaleTransform28._22,_this__0250 * scaleTransform28._00 + _this__1250 * scaleTransform28._01 + _this__2250 * scaleTransform28._02,_this__0250 * scaleTransform28._10 + _this__1250 * scaleTransform28._11 + _this__2250 * scaleTransform28._12,_this__0250 * scaleTransform28._20 + _this__1250 * scaleTransform28._21 + _this__2250 * scaleTransform28._22);
		}
		break;
	case 12:case 13:
		if(borderFromB * 2 + sv_x12 < wid34) {
			var _this__0051 = 1;
			var _this__1051 = 0;
			var _this__2051 = wid34 - sv_x12 - borderFromB;
			var _this__0151 = 0;
			var _this__1151 = 1;
			var _this__2151 = borderFromB;
			var _this__0251 = 0;
			var _this__1251 = 0;
			var _this__2251 = 1;
			mFB = new kha_math_FastMatrix3(_this__0051 * scaleTransform27._00 + _this__1051 * scaleTransform27._01 + _this__2051 * scaleTransform27._02,_this__0051 * scaleTransform27._10 + _this__1051 * scaleTransform27._11 + _this__2051 * scaleTransform27._12,_this__0051 * scaleTransform27._20 + _this__1051 * scaleTransform27._21 + _this__2051 * scaleTransform27._22,_this__0151 * scaleTransform27._00 + _this__1151 * scaleTransform27._01 + _this__2151 * scaleTransform27._02,_this__0151 * scaleTransform27._10 + _this__1151 * scaleTransform27._11 + _this__2151 * scaleTransform27._12,_this__0151 * scaleTransform27._20 + _this__1151 * scaleTransform27._21 + _this__2151 * scaleTransform27._22,_this__0251 * scaleTransform27._00 + _this__1251 * scaleTransform27._01 + _this__2251 * scaleTransform27._02,_this__0251 * scaleTransform27._10 + _this__1251 * scaleTransform27._11 + _this__2251 * scaleTransform27._12,_this__0251 * scaleTransform27._20 + _this__1251 * scaleTransform27._21 + _this__2251 * scaleTransform27._22);
		} else {
			var wid41 = Main.wid;
			var hi41 = Main.hi;
			var scaleTransform29 = Main.scaleTransform;
			var _this__0052 = 1;
			var _this__1052 = 0;
			var _this__2052 = wid41 - sv_x12 - borderFromB;
			var _this__0152 = 0;
			var _this__1152 = 1;
			var _this__2152 = hi41 / 2 - sv_y12 / 2;
			var _this__0252 = 0;
			var _this__1252 = 0;
			var _this__2252 = 1;
			mFB = new kha_math_FastMatrix3(_this__0052 * scaleTransform29._00 + _this__1052 * scaleTransform29._01 + _this__2052 * scaleTransform29._02,_this__0052 * scaleTransform29._10 + _this__1052 * scaleTransform29._11 + _this__2052 * scaleTransform29._12,_this__0052 * scaleTransform29._20 + _this__1052 * scaleTransform29._21 + _this__2052 * scaleTransform29._22,_this__0152 * scaleTransform29._00 + _this__1152 * scaleTransform29._01 + _this__2152 * scaleTransform29._02,_this__0152 * scaleTransform29._10 + _this__1152 * scaleTransform29._11 + _this__2152 * scaleTransform29._12,_this__0152 * scaleTransform29._20 + _this__1152 * scaleTransform29._21 + _this__2152 * scaleTransform29._22,_this__0252 * scaleTransform29._00 + _this__1252 * scaleTransform29._01 + _this__2252 * scaleTransform29._02,_this__0252 * scaleTransform29._10 + _this__1252 * scaleTransform29._11 + _this__2252 * scaleTransform29._12,_this__0252 * scaleTransform29._20 + _this__1252 * scaleTransform29._21 + _this__2252 * scaleTransform29._22);
		}
		break;
	case 14:case 15:
		if(borderFromB * 2 + sv_y12 < hi34) {
			var _this__0053 = 1;
			var _this__1053 = 0;
			var _this__2053 = borderFromB;
			var _this__0153 = 0;
			var _this__1153 = 1;
			var _this__2153 = hi34 - sv_y12 - borderFromB;
			var _this__0253 = 0;
			var _this__1253 = 0;
			var _this__2253 = 1;
			mFB = new kha_math_FastMatrix3(_this__0053 * scaleTransform27._00 + _this__1053 * scaleTransform27._01 + _this__2053 * scaleTransform27._02,_this__0053 * scaleTransform27._10 + _this__1053 * scaleTransform27._11 + _this__2053 * scaleTransform27._12,_this__0053 * scaleTransform27._20 + _this__1053 * scaleTransform27._21 + _this__2053 * scaleTransform27._22,_this__0153 * scaleTransform27._00 + _this__1153 * scaleTransform27._01 + _this__2153 * scaleTransform27._02,_this__0153 * scaleTransform27._10 + _this__1153 * scaleTransform27._11 + _this__2153 * scaleTransform27._12,_this__0153 * scaleTransform27._20 + _this__1153 * scaleTransform27._21 + _this__2153 * scaleTransform27._22,_this__0253 * scaleTransform27._00 + _this__1253 * scaleTransform27._01 + _this__2253 * scaleTransform27._02,_this__0253 * scaleTransform27._10 + _this__1253 * scaleTransform27._11 + _this__2253 * scaleTransform27._12,_this__0253 * scaleTransform27._20 + _this__1253 * scaleTransform27._21 + _this__2253 * scaleTransform27._22);
		} else {
			var wid42 = Main.wid;
			var hi42 = Main.hi;
			var scaleTransform30 = Main.scaleTransform;
			var _this__0054 = 1;
			var _this__1054 = 0;
			var _this__2054 = borderFromB;
			var _this__0154 = 0;
			var _this__1154 = 1;
			var _this__2154 = hi42 / 2 - sv_y12 / 2;
			var _this__0254 = 0;
			var _this__1254 = 0;
			var _this__2254 = 1;
			mFB = new kha_math_FastMatrix3(_this__0054 * scaleTransform30._00 + _this__1054 * scaleTransform30._01 + _this__2054 * scaleTransform30._02,_this__0054 * scaleTransform30._10 + _this__1054 * scaleTransform30._11 + _this__2054 * scaleTransform30._12,_this__0054 * scaleTransform30._20 + _this__1054 * scaleTransform30._21 + _this__2054 * scaleTransform30._22,_this__0154 * scaleTransform30._00 + _this__1154 * scaleTransform30._01 + _this__2154 * scaleTransform30._02,_this__0154 * scaleTransform30._10 + _this__1154 * scaleTransform30._11 + _this__2154 * scaleTransform30._12,_this__0154 * scaleTransform30._20 + _this__1154 * scaleTransform30._21 + _this__2154 * scaleTransform30._22,_this__0254 * scaleTransform30._00 + _this__1254 * scaleTransform30._01 + _this__2254 * scaleTransform30._02,_this__0254 * scaleTransform30._10 + _this__1254 * scaleTransform30._11 + _this__2254 * scaleTransform30._12,_this__0254 * scaleTransform30._20 + _this__1254 * scaleTransform30._21 + _this__2254 * scaleTransform30._22);
		}
		break;
	case 16:case 17:
		if(borderFromB * 2 + sv_y12 < hi34) {
			var _this__0055 = 1;
			var _this__1055 = 0;
			var _this__2055 = wid34 - sv_x12 - borderFromB;
			var _this__0155 = 0;
			var _this__1155 = 1;
			var _this__2155 = hi34 - sv_y12 - borderFromB;
			var _this__0255 = 0;
			var _this__1255 = 0;
			var _this__2255 = 1;
			mFB = new kha_math_FastMatrix3(_this__0055 * scaleTransform27._00 + _this__1055 * scaleTransform27._01 + _this__2055 * scaleTransform27._02,_this__0055 * scaleTransform27._10 + _this__1055 * scaleTransform27._11 + _this__2055 * scaleTransform27._12,_this__0055 * scaleTransform27._20 + _this__1055 * scaleTransform27._21 + _this__2055 * scaleTransform27._22,_this__0155 * scaleTransform27._00 + _this__1155 * scaleTransform27._01 + _this__2155 * scaleTransform27._02,_this__0155 * scaleTransform27._10 + _this__1155 * scaleTransform27._11 + _this__2155 * scaleTransform27._12,_this__0155 * scaleTransform27._20 + _this__1155 * scaleTransform27._21 + _this__2155 * scaleTransform27._22,_this__0255 * scaleTransform27._00 + _this__1255 * scaleTransform27._01 + _this__2255 * scaleTransform27._02,_this__0255 * scaleTransform27._10 + _this__1255 * scaleTransform27._11 + _this__2255 * scaleTransform27._12,_this__0255 * scaleTransform27._20 + _this__1255 * scaleTransform27._21 + _this__2255 * scaleTransform27._22);
		} else {
			var wid43 = Main.wid;
			var hi43 = Main.hi;
			var scaleTransform31 = Main.scaleTransform;
			var _this__0056 = 1;
			var _this__1056 = 0;
			var _this__2056 = wid43 - sv_x12 - borderFromB;
			var _this__0156 = 0;
			var _this__1156 = 1;
			var _this__2156 = hi43 / 2 - sv_y12 / 2;
			var _this__0256 = 0;
			var _this__1256 = 0;
			var _this__2256 = 1;
			mFB = new kha_math_FastMatrix3(_this__0056 * scaleTransform31._00 + _this__1056 * scaleTransform31._01 + _this__2056 * scaleTransform31._02,_this__0056 * scaleTransform31._10 + _this__1056 * scaleTransform31._11 + _this__2056 * scaleTransform31._12,_this__0056 * scaleTransform31._20 + _this__1056 * scaleTransform31._21 + _this__2056 * scaleTransform31._22,_this__0156 * scaleTransform31._00 + _this__1156 * scaleTransform31._01 + _this__2156 * scaleTransform31._02,_this__0156 * scaleTransform31._10 + _this__1156 * scaleTransform31._11 + _this__2156 * scaleTransform31._12,_this__0156 * scaleTransform31._20 + _this__1156 * scaleTransform31._21 + _this__2156 * scaleTransform31._22,_this__0256 * scaleTransform31._00 + _this__1256 * scaleTransform31._01 + _this__2256 * scaleTransform31._02,_this__0256 * scaleTransform31._10 + _this__1256 * scaleTransform31._11 + _this__2256 * scaleTransform31._12,_this__0256 * scaleTransform31._20 + _this__1256 * scaleTransform31._21 + _this__2256 * scaleTransform31._22);
		}
		break;
	case 18:
		var wid44 = Main.wid;
		var hi44 = Main.hi;
		var scaleTransform32 = Main.scaleTransform;
		var _this__0057 = 1;
		var _this__1057 = 0;
		var _this__2057 = wid44 / 2 - sv_x12 / 2;
		var _this__0157 = 0;
		var _this__1157 = 1;
		var _this__2157 = hi44 / 2 - sv_y12 / 2;
		var _this__0257 = 0;
		var _this__1257 = 0;
		var _this__2257 = 1;
		mFB = new kha_math_FastMatrix3(_this__0057 * scaleTransform32._00 + _this__1057 * scaleTransform32._01 + _this__2057 * scaleTransform32._02,_this__0057 * scaleTransform32._10 + _this__1057 * scaleTransform32._11 + _this__2057 * scaleTransform32._12,_this__0057 * scaleTransform32._20 + _this__1057 * scaleTransform32._21 + _this__2057 * scaleTransform32._22,_this__0157 * scaleTransform32._00 + _this__1157 * scaleTransform32._01 + _this__2157 * scaleTransform32._02,_this__0157 * scaleTransform32._10 + _this__1157 * scaleTransform32._11 + _this__2157 * scaleTransform32._12,_this__0157 * scaleTransform32._20 + _this__1157 * scaleTransform32._21 + _this__2157 * scaleTransform32._22,_this__0257 * scaleTransform32._00 + _this__1257 * scaleTransform32._01 + _this__2257 * scaleTransform32._02,_this__0257 * scaleTransform32._10 + _this__1257 * scaleTransform32._11 + _this__2257 * scaleTransform32._12,_this__0257 * scaleTransform32._20 + _this__1257 * scaleTransform32._21 + _this__2257 * scaleTransform32._22);
		break;
	case 19:case 20:case 21:
		if(borderFromB * 2 + sv_x12 < wid34) {
			var wid45 = Main.wid;
			var hi45 = Main.hi;
			var scaleTransform33 = Main.scaleTransform;
			var _this__0058 = 1;
			var _this__1058 = 0;
			var _this__2058 = borderFromB;
			var _this__0158 = 0;
			var _this__1158 = 1;
			var _this__2158 = hi45 / 2 - sv_y12 / 2;
			var _this__0258 = 0;
			var _this__1258 = 0;
			var _this__2258 = 1;
			mFB = new kha_math_FastMatrix3(_this__0058 * scaleTransform33._00 + _this__1058 * scaleTransform33._01 + _this__2058 * scaleTransform33._02,_this__0058 * scaleTransform33._10 + _this__1058 * scaleTransform33._11 + _this__2058 * scaleTransform33._12,_this__0058 * scaleTransform33._20 + _this__1058 * scaleTransform33._21 + _this__2058 * scaleTransform33._22,_this__0158 * scaleTransform33._00 + _this__1158 * scaleTransform33._01 + _this__2158 * scaleTransform33._02,_this__0158 * scaleTransform33._10 + _this__1158 * scaleTransform33._11 + _this__2158 * scaleTransform33._12,_this__0158 * scaleTransform33._20 + _this__1158 * scaleTransform33._21 + _this__2158 * scaleTransform33._22,_this__0258 * scaleTransform33._00 + _this__1258 * scaleTransform33._01 + _this__2258 * scaleTransform33._02,_this__0258 * scaleTransform33._10 + _this__1258 * scaleTransform33._11 + _this__2258 * scaleTransform33._12,_this__0258 * scaleTransform33._20 + _this__1258 * scaleTransform33._21 + _this__2258 * scaleTransform33._22);
		} else {
			var wid46 = Main.wid;
			var hi46 = Main.hi;
			var scaleTransform34 = Main.scaleTransform;
			var _this__0059 = 1;
			var _this__1059 = 0;
			var _this__2059 = wid46 / 2 - sv_x12 / 2;
			var _this__0159 = 0;
			var _this__1159 = 1;
			var _this__2159 = hi46 / 2 - sv_y12 / 2;
			var _this__0259 = 0;
			var _this__1259 = 0;
			var _this__2259 = 1;
			mFB = new kha_math_FastMatrix3(_this__0059 * scaleTransform34._00 + _this__1059 * scaleTransform34._01 + _this__2059 * scaleTransform34._02,_this__0059 * scaleTransform34._10 + _this__1059 * scaleTransform34._11 + _this__2059 * scaleTransform34._12,_this__0059 * scaleTransform34._20 + _this__1059 * scaleTransform34._21 + _this__2059 * scaleTransform34._22,_this__0159 * scaleTransform34._00 + _this__1159 * scaleTransform34._01 + _this__2159 * scaleTransform34._02,_this__0159 * scaleTransform34._10 + _this__1159 * scaleTransform34._11 + _this__2159 * scaleTransform34._12,_this__0159 * scaleTransform34._20 + _this__1159 * scaleTransform34._21 + _this__2159 * scaleTransform34._22,_this__0259 * scaleTransform34._00 + _this__1259 * scaleTransform34._01 + _this__2259 * scaleTransform34._02,_this__0259 * scaleTransform34._10 + _this__1259 * scaleTransform34._11 + _this__2259 * scaleTransform34._12,_this__0259 * scaleTransform34._20 + _this__1259 * scaleTransform34._21 + _this__2259 * scaleTransform34._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderFromB * 2 + sv_x12 < wid34) {
			var wid47 = Main.wid;
			var hi47 = Main.hi;
			var scaleTransform35 = Main.scaleTransform;
			var _this__0060 = 1;
			var _this__1060 = 0;
			var _this__2060 = wid47 - sv_x12 - borderFromB;
			var _this__0160 = 0;
			var _this__1160 = 1;
			var _this__2160 = hi47 / 2 - sv_y12 / 2;
			var _this__0260 = 0;
			var _this__1260 = 0;
			var _this__2260 = 1;
			mFB = new kha_math_FastMatrix3(_this__0060 * scaleTransform35._00 + _this__1060 * scaleTransform35._01 + _this__2060 * scaleTransform35._02,_this__0060 * scaleTransform35._10 + _this__1060 * scaleTransform35._11 + _this__2060 * scaleTransform35._12,_this__0060 * scaleTransform35._20 + _this__1060 * scaleTransform35._21 + _this__2060 * scaleTransform35._22,_this__0160 * scaleTransform35._00 + _this__1160 * scaleTransform35._01 + _this__2160 * scaleTransform35._02,_this__0160 * scaleTransform35._10 + _this__1160 * scaleTransform35._11 + _this__2160 * scaleTransform35._12,_this__0160 * scaleTransform35._20 + _this__1160 * scaleTransform35._21 + _this__2160 * scaleTransform35._22,_this__0260 * scaleTransform35._00 + _this__1260 * scaleTransform35._01 + _this__2260 * scaleTransform35._02,_this__0260 * scaleTransform35._10 + _this__1260 * scaleTransform35._11 + _this__2260 * scaleTransform35._12,_this__0260 * scaleTransform35._20 + _this__1260 * scaleTransform35._21 + _this__2260 * scaleTransform35._22);
		} else {
			var wid48 = Main.wid;
			var hi48 = Main.hi;
			var scaleTransform36 = Main.scaleTransform;
			var _this__0061 = 1;
			var _this__1061 = 0;
			var _this__2061 = wid48 / 2 - sv_x12 / 2;
			var _this__0161 = 0;
			var _this__1161 = 1;
			var _this__2161 = hi48 / 2 - sv_y12 / 2;
			var _this__0261 = 0;
			var _this__1261 = 0;
			var _this__2261 = 1;
			mFB = new kha_math_FastMatrix3(_this__0061 * scaleTransform36._00 + _this__1061 * scaleTransform36._01 + _this__2061 * scaleTransform36._02,_this__0061 * scaleTransform36._10 + _this__1061 * scaleTransform36._11 + _this__2061 * scaleTransform36._12,_this__0061 * scaleTransform36._20 + _this__1061 * scaleTransform36._21 + _this__2061 * scaleTransform36._22,_this__0161 * scaleTransform36._00 + _this__1161 * scaleTransform36._01 + _this__2161 * scaleTransform36._02,_this__0161 * scaleTransform36._10 + _this__1161 * scaleTransform36._11 + _this__2161 * scaleTransform36._12,_this__0161 * scaleTransform36._20 + _this__1161 * scaleTransform36._21 + _this__2161 * scaleTransform36._22,_this__0261 * scaleTransform36._00 + _this__1261 * scaleTransform36._01 + _this__2261 * scaleTransform36._02,_this__0261 * scaleTransform36._10 + _this__1261 * scaleTransform36._11 + _this__2261 * scaleTransform36._12,_this__0261 * scaleTransform36._20 + _this__1261 * scaleTransform36._21 + _this__2261 * scaleTransform36._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderFromB * 2 + sv_y12 < hi34) {
			var _this__0062 = 1;
			var _this__1062 = 0;
			var _this__2062 = wid34 / 2 - sv_x12 / 2;
			var _this__0162 = 0;
			var _this__1162 = 1;
			var _this__2162 = hi34 - sv_y12 - borderFromB;
			var _this__0262 = 0;
			var _this__1262 = 0;
			var _this__2262 = 1;
			mFB = new kha_math_FastMatrix3(_this__0062 * scaleTransform27._00 + _this__1062 * scaleTransform27._01 + _this__2062 * scaleTransform27._02,_this__0062 * scaleTransform27._10 + _this__1062 * scaleTransform27._11 + _this__2062 * scaleTransform27._12,_this__0062 * scaleTransform27._20 + _this__1062 * scaleTransform27._21 + _this__2062 * scaleTransform27._22,_this__0162 * scaleTransform27._00 + _this__1162 * scaleTransform27._01 + _this__2162 * scaleTransform27._02,_this__0162 * scaleTransform27._10 + _this__1162 * scaleTransform27._11 + _this__2162 * scaleTransform27._12,_this__0162 * scaleTransform27._20 + _this__1162 * scaleTransform27._21 + _this__2162 * scaleTransform27._22,_this__0262 * scaleTransform27._00 + _this__1262 * scaleTransform27._01 + _this__2262 * scaleTransform27._02,_this__0262 * scaleTransform27._10 + _this__1262 * scaleTransform27._11 + _this__2262 * scaleTransform27._12,_this__0262 * scaleTransform27._20 + _this__1262 * scaleTransform27._21 + _this__2262 * scaleTransform27._22);
		} else {
			var wid49 = Main.wid;
			var hi49 = Main.hi;
			var scaleTransform37 = Main.scaleTransform;
			var _this__0063 = 1;
			var _this__1063 = 0;
			var _this__2063 = wid49 / 2 - sv_x12 / 2;
			var _this__0163 = 0;
			var _this__1163 = 1;
			var _this__2163 = hi49 / 2 - sv_y12 / 2;
			var _this__0263 = 0;
			var _this__1263 = 0;
			var _this__2263 = 1;
			mFB = new kha_math_FastMatrix3(_this__0063 * scaleTransform37._00 + _this__1063 * scaleTransform37._01 + _this__2063 * scaleTransform37._02,_this__0063 * scaleTransform37._10 + _this__1063 * scaleTransform37._11 + _this__2063 * scaleTransform37._12,_this__0063 * scaleTransform37._20 + _this__1063 * scaleTransform37._21 + _this__2063 * scaleTransform37._22,_this__0163 * scaleTransform37._00 + _this__1163 * scaleTransform37._01 + _this__2163 * scaleTransform37._02,_this__0163 * scaleTransform37._10 + _this__1163 * scaleTransform37._11 + _this__2163 * scaleTransform37._12,_this__0163 * scaleTransform37._20 + _this__1163 * scaleTransform37._21 + _this__2163 * scaleTransform37._22,_this__0263 * scaleTransform37._00 + _this__1263 * scaleTransform37._01 + _this__2263 * scaleTransform37._02,_this__0263 * scaleTransform37._10 + _this__1263 * scaleTransform37._11 + _this__2263 * scaleTransform37._12,_this__0263 * scaleTransform37._20 + _this__1263 * scaleTransform37._21 + _this__2263 * scaleTransform37._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderFromB * 2 + sv_y12 < hi34) {
			var _this__0064 = 1;
			var _this__1064 = 0;
			var _this__2064 = wid34 / 2 - sv_x12 / 2;
			var _this__0164 = 0;
			var _this__1164 = 1;
			var _this__2164 = borderFromB;
			var _this__0264 = 0;
			var _this__1264 = 0;
			var _this__2264 = 1;
			mFB = new kha_math_FastMatrix3(_this__0064 * scaleTransform27._00 + _this__1064 * scaleTransform27._01 + _this__2064 * scaleTransform27._02,_this__0064 * scaleTransform27._10 + _this__1064 * scaleTransform27._11 + _this__2064 * scaleTransform27._12,_this__0064 * scaleTransform27._20 + _this__1064 * scaleTransform27._21 + _this__2064 * scaleTransform27._22,_this__0164 * scaleTransform27._00 + _this__1164 * scaleTransform27._01 + _this__2164 * scaleTransform27._02,_this__0164 * scaleTransform27._10 + _this__1164 * scaleTransform27._11 + _this__2164 * scaleTransform27._12,_this__0164 * scaleTransform27._20 + _this__1164 * scaleTransform27._21 + _this__2164 * scaleTransform27._22,_this__0264 * scaleTransform27._00 + _this__1264 * scaleTransform27._01 + _this__2264 * scaleTransform27._02,_this__0264 * scaleTransform27._10 + _this__1264 * scaleTransform27._11 + _this__2264 * scaleTransform27._12,_this__0264 * scaleTransform27._20 + _this__1264 * scaleTransform27._21 + _this__2264 * scaleTransform27._22);
		} else {
			var wid50 = Main.wid;
			var hi50 = Main.hi;
			var scaleTransform38 = Main.scaleTransform;
			var _this__0065 = 1;
			var _this__1065 = 0;
			var _this__2065 = wid50 / 2 - sv_x12 / 2;
			var _this__0165 = 0;
			var _this__1165 = 1;
			var _this__2165 = hi50 / 2 - sv_y12 / 2;
			var _this__0265 = 0;
			var _this__1265 = 0;
			var _this__2265 = 1;
			mFB = new kha_math_FastMatrix3(_this__0065 * scaleTransform38._00 + _this__1065 * scaleTransform38._01 + _this__2065 * scaleTransform38._02,_this__0065 * scaleTransform38._10 + _this__1065 * scaleTransform38._11 + _this__2065 * scaleTransform38._12,_this__0065 * scaleTransform38._20 + _this__1065 * scaleTransform38._21 + _this__2065 * scaleTransform38._22,_this__0165 * scaleTransform38._00 + _this__1165 * scaleTransform38._01 + _this__2165 * scaleTransform38._02,_this__0165 * scaleTransform38._10 + _this__1165 * scaleTransform38._11 + _this__2165 * scaleTransform38._12,_this__0165 * scaleTransform38._20 + _this__1165 * scaleTransform38._21 + _this__2165 * scaleTransform38._22,_this__0265 * scaleTransform38._00 + _this__1265 * scaleTransform38._01 + _this__2265 * scaleTransform38._02,_this__0265 * scaleTransform38._10 + _this__1265 * scaleTransform38._11 + _this__2265 * scaleTransform38._12,_this__0265 * scaleTransform38._20 + _this__1265 * scaleTransform38._21 + _this__2265 * scaleTransform38._22);
		}
		break;
	}
	var scaleTransform39 = Main.scaleTransform;
	var v_x3 = w;
	var v_y3 = h;
	var w20 = scaleTransform39._02 * v_x3 + scaleTransform39._12 * v_y3 + scaleTransform39._22;
	var x18 = (scaleTransform39._00 * v_x3 + scaleTransform39._10 * v_y3 + scaleTransform39._20) / w20;
	var y18 = (scaleTransform39._01 * v_x3 + scaleTransform39._11 * v_y3 + scaleTransform39._21) / w20;
	var sv_x18 = x18;
	var sv_y18 = y18;
	var wid51 = Main.wid;
	var hi51 = Main.hi;
	var scaleTransform40 = Main.scaleTransform;
	var mTB;
	switch(toB._hx_index) {
	case 2:case 7:
		var wid52 = Main.wid;
		var hi52 = Main.hi;
		var w215 = wid52 - borderToB * 2;
		var h215 = hi52 - borderToB * 2;
		var dw15 = w215 - w;
		var dh15 = h215 - h;
		var scale15 = dw15 < dh15 ? w215 / w : h215 / h;
		if(scale15 < 0) {
			scale15 = 0.;
		}
		var scaleTransform__0015 = scale15;
		var scaleTransform__1015 = 0;
		var scaleTransform__2015 = 0;
		var scaleTransform__0115 = 0;
		var scaleTransform__1115 = scale15;
		var scaleTransform__2115 = 0;
		var scaleTransform__0215 = 0;
		var scaleTransform__1215 = 0;
		var scaleTransform__2215 = 1;
		var value_x15 = w;
		var value_y15 = h;
		var w30 = scaleTransform__0215 * value_x15 + scaleTransform__1215 * value_y15 + scaleTransform__2215;
		var x19 = (scaleTransform__0015 * value_x15 + scaleTransform__1015 * value_y15 + scaleTransform__2015) / w30;
		var y19 = (scaleTransform__0115 * value_x15 + scaleTransform__1115 * value_y15 + scaleTransform__2115) / w30;
		var sv_x19 = x19;
		var sv_y19 = y19;
		var _this__0066 = 1;
		var _this__1066 = 0;
		var _this__2066 = wid52 - sv_x19 - borderToB;
		var _this__0166 = 0;
		var _this__1166 = 1;
		var _this__2166 = hi52 / 2 - sv_y19 / 2;
		var _this__0266 = 0;
		var _this__1266 = 0;
		var _this__2266 = 1;
		mTB = new kha_math_FastMatrix3(_this__0066 * scaleTransform__0015 + _this__1066 * scaleTransform__0115 + _this__2066 * scaleTransform__0215,_this__0066 * scaleTransform__1015 + _this__1066 * scaleTransform__1115 + _this__2066 * scaleTransform__1215,_this__0066 * scaleTransform__2015 + _this__1066 * scaleTransform__2115 + _this__2066 * scaleTransform__2215,_this__0166 * scaleTransform__0015 + _this__1166 * scaleTransform__0115 + _this__2166 * scaleTransform__0215,_this__0166 * scaleTransform__1015 + _this__1166 * scaleTransform__1115 + _this__2166 * scaleTransform__1215,_this__0166 * scaleTransform__2015 + _this__1166 * scaleTransform__2115 + _this__2166 * scaleTransform__2215,_this__0266 * scaleTransform__0015 + _this__1266 * scaleTransform__0115 + _this__2266 * scaleTransform__0215,_this__0266 * scaleTransform__1015 + _this__1266 * scaleTransform__1115 + _this__2266 * scaleTransform__1215,_this__0266 * scaleTransform__2015 + _this__1266 * scaleTransform__2115 + _this__2266 * scaleTransform__2215);
		break;
	case 0:case 5:
		var wid53 = Main.wid;
		var hi53 = Main.hi;
		var w216 = wid53 - borderToB * 2;
		var h216 = hi53 - borderToB * 2;
		var dw16 = w216 - w;
		var dh16 = h216 - h;
		var scale16 = dw16 < dh16 ? w216 / w : h216 / h;
		if(scale16 < 0) {
			scale16 = 0.;
		}
		var scaleTransform__0016 = scale16;
		var scaleTransform__1016 = 0;
		var scaleTransform__2016 = 0;
		var scaleTransform__0116 = 0;
		var scaleTransform__1116 = scale16;
		var scaleTransform__2116 = 0;
		var scaleTransform__0216 = 0;
		var scaleTransform__1216 = 0;
		var scaleTransform__2216 = 1;
		var value_x16 = w;
		var value_y16 = h;
		var w31 = scaleTransform__0216 * value_x16 + scaleTransform__1216 * value_y16 + scaleTransform__2216;
		var x20 = (scaleTransform__0016 * value_x16 + scaleTransform__1016 * value_y16 + scaleTransform__2016) / w31;
		var y20 = (scaleTransform__0116 * value_x16 + scaleTransform__1116 * value_y16 + scaleTransform__2116) / w31;
		var sv_x20 = x20;
		var sv_y20 = y20;
		var _this__0067 = 1;
		var _this__1067 = 0;
		var _this__2067 = wid53 / 2 - sv_x20 / 2;
		var _this__0167 = 0;
		var _this__1167 = 1;
		var _this__2167 = hi53 / 2 - sv_y20 / 2;
		var _this__0267 = 0;
		var _this__1267 = 0;
		var _this__2267 = 1;
		mTB = new kha_math_FastMatrix3(_this__0067 * scaleTransform__0016 + _this__1067 * scaleTransform__0116 + _this__2067 * scaleTransform__0216,_this__0067 * scaleTransform__1016 + _this__1067 * scaleTransform__1116 + _this__2067 * scaleTransform__1216,_this__0067 * scaleTransform__2016 + _this__1067 * scaleTransform__2116 + _this__2067 * scaleTransform__2216,_this__0167 * scaleTransform__0016 + _this__1167 * scaleTransform__0116 + _this__2167 * scaleTransform__0216,_this__0167 * scaleTransform__1016 + _this__1167 * scaleTransform__1116 + _this__2167 * scaleTransform__1216,_this__0167 * scaleTransform__2016 + _this__1167 * scaleTransform__2116 + _this__2167 * scaleTransform__2216,_this__0267 * scaleTransform__0016 + _this__1267 * scaleTransform__0116 + _this__2267 * scaleTransform__0216,_this__0267 * scaleTransform__1016 + _this__1267 * scaleTransform__1116 + _this__2267 * scaleTransform__1216,_this__0267 * scaleTransform__2016 + _this__1267 * scaleTransform__2116 + _this__2267 * scaleTransform__2216);
		break;
	case 1:case 6:
		var wid54 = Main.wid;
		var hi54 = Main.hi;
		var w217 = wid54 - borderToB * 2;
		var h217 = hi54 - borderToB * 2;
		var dw17 = w217 - w;
		var dh17 = h217 - h;
		var scale17 = dw17 < dh17 ? w217 / w : h217 / h;
		if(scale17 < 0) {
			scale17 = 0.;
		}
		var scaleTransform__0017 = scale17;
		var scaleTransform__1017 = 0;
		var scaleTransform__2017 = 0;
		var scaleTransform__0117 = 0;
		var scaleTransform__1117 = scale17;
		var scaleTransform__2117 = 0;
		var scaleTransform__0217 = 0;
		var scaleTransform__1217 = 0;
		var scaleTransform__2217 = 1;
		var value_x17 = w;
		var value_y17 = h;
		var w32 = scaleTransform__0217 * value_x17 + scaleTransform__1217 * value_y17 + scaleTransform__2217;
		var x21 = (scaleTransform__0017 * value_x17 + scaleTransform__1017 * value_y17 + scaleTransform__2017) / w32;
		var y21 = (scaleTransform__0117 * value_x17 + scaleTransform__1117 * value_y17 + scaleTransform__2117) / w32;
		var sv_x21 = x21;
		var sv_y21 = y21;
		var _this__0068 = 1;
		var _this__1068 = 0;
		var _this__2068 = borderToB;
		var _this__0168 = 0;
		var _this__1168 = 1;
		var _this__2168 = hi54 / 2 - sv_y21 / 2;
		var _this__0268 = 0;
		var _this__1268 = 0;
		var _this__2268 = 1;
		mTB = new kha_math_FastMatrix3(_this__0068 * scaleTransform__0017 + _this__1068 * scaleTransform__0117 + _this__2068 * scaleTransform__0217,_this__0068 * scaleTransform__1017 + _this__1068 * scaleTransform__1117 + _this__2068 * scaleTransform__1217,_this__0068 * scaleTransform__2017 + _this__1068 * scaleTransform__2117 + _this__2068 * scaleTransform__2217,_this__0168 * scaleTransform__0017 + _this__1168 * scaleTransform__0117 + _this__2168 * scaleTransform__0217,_this__0168 * scaleTransform__1017 + _this__1168 * scaleTransform__1117 + _this__2168 * scaleTransform__1217,_this__0168 * scaleTransform__2017 + _this__1168 * scaleTransform__2117 + _this__2168 * scaleTransform__2217,_this__0268 * scaleTransform__0017 + _this__1268 * scaleTransform__0117 + _this__2268 * scaleTransform__0217,_this__0268 * scaleTransform__1017 + _this__1268 * scaleTransform__1117 + _this__2268 * scaleTransform__1217,_this__0268 * scaleTransform__2017 + _this__1268 * scaleTransform__2117 + _this__2268 * scaleTransform__2217);
		break;
	case 3:case 8:
		var wid55 = Main.wid;
		var hi55 = Main.hi;
		var w218 = wid55 - borderToB * 2;
		var h218 = hi55 - borderToB * 2;
		var dw18 = w218 - w;
		var dh18 = h218 - h;
		var scale18 = dw18 < dh18 ? w218 / w : h218 / h;
		if(scale18 < 0) {
			scale18 = 0.;
		}
		var scaleTransform__0018 = scale18;
		var scaleTransform__1018 = 0;
		var scaleTransform__2018 = 0;
		var scaleTransform__0118 = 0;
		var scaleTransform__1118 = scale18;
		var scaleTransform__2118 = 0;
		var scaleTransform__0218 = 0;
		var scaleTransform__1218 = 0;
		var scaleTransform__2218 = 1;
		var value_x18 = w;
		var value_y18 = h;
		var w33 = scaleTransform__0218 * value_x18 + scaleTransform__1218 * value_y18 + scaleTransform__2218;
		var x22 = (scaleTransform__0018 * value_x18 + scaleTransform__1018 * value_y18 + scaleTransform__2018) / w33;
		var y22 = (scaleTransform__0118 * value_x18 + scaleTransform__1118 * value_y18 + scaleTransform__2118) / w33;
		var sv_x22 = x22;
		var sv_y22 = y22;
		var _this__0069 = 1;
		var _this__1069 = 0;
		var _this__2069 = wid55 / 2 - sv_x22 / 2;
		var _this__0169 = 0;
		var _this__1169 = 1;
		var _this__2169 = borderToB;
		var _this__0269 = 0;
		var _this__1269 = 0;
		var _this__2269 = 1;
		mTB = new kha_math_FastMatrix3(_this__0069 * scaleTransform__0018 + _this__1069 * scaleTransform__0118 + _this__2069 * scaleTransform__0218,_this__0069 * scaleTransform__1018 + _this__1069 * scaleTransform__1118 + _this__2069 * scaleTransform__1218,_this__0069 * scaleTransform__2018 + _this__1069 * scaleTransform__2118 + _this__2069 * scaleTransform__2218,_this__0169 * scaleTransform__0018 + _this__1169 * scaleTransform__0118 + _this__2169 * scaleTransform__0218,_this__0169 * scaleTransform__1018 + _this__1169 * scaleTransform__1118 + _this__2169 * scaleTransform__1218,_this__0169 * scaleTransform__2018 + _this__1169 * scaleTransform__2118 + _this__2169 * scaleTransform__2218,_this__0269 * scaleTransform__0018 + _this__1269 * scaleTransform__0118 + _this__2269 * scaleTransform__0218,_this__0269 * scaleTransform__1018 + _this__1269 * scaleTransform__1118 + _this__2269 * scaleTransform__1218,_this__0269 * scaleTransform__2018 + _this__1269 * scaleTransform__2118 + _this__2269 * scaleTransform__2218);
		break;
	case 4:case 9:
		var wid56 = Main.wid;
		var hi56 = Main.hi;
		var w219 = wid56 - borderToB * 2;
		var h219 = hi56 - borderToB * 2;
		var dw19 = w219 - w;
		var dh19 = h219 - h;
		var scale19 = dw19 < dh19 ? w219 / w : h219 / h;
		if(scale19 < 0) {
			scale19 = 0.;
		}
		var scaleTransform__0019 = scale19;
		var scaleTransform__1019 = 0;
		var scaleTransform__2019 = 0;
		var scaleTransform__0119 = 0;
		var scaleTransform__1119 = scale19;
		var scaleTransform__2119 = 0;
		var scaleTransform__0219 = 0;
		var scaleTransform__1219 = 0;
		var scaleTransform__2219 = 1;
		var value_x19 = w;
		var value_y19 = h;
		var w34 = scaleTransform__0219 * value_x19 + scaleTransform__1219 * value_y19 + scaleTransform__2219;
		var x23 = (scaleTransform__0019 * value_x19 + scaleTransform__1019 * value_y19 + scaleTransform__2019) / w34;
		var y23 = (scaleTransform__0119 * value_x19 + scaleTransform__1119 * value_y19 + scaleTransform__2119) / w34;
		var sv_x23 = x23;
		var sv_y23 = y23;
		var _this__0070 = 1;
		var _this__1070 = 0;
		var _this__2070 = wid56 / 2 - sv_x23 / 2;
		var _this__0170 = 0;
		var _this__1170 = 1;
		var _this__2170 = hi56 - sv_y23 - borderToB;
		var _this__0270 = 0;
		var _this__1270 = 0;
		var _this__2270 = 1;
		mTB = new kha_math_FastMatrix3(_this__0070 * scaleTransform__0019 + _this__1070 * scaleTransform__0119 + _this__2070 * scaleTransform__0219,_this__0070 * scaleTransform__1019 + _this__1070 * scaleTransform__1119 + _this__2070 * scaleTransform__1219,_this__0070 * scaleTransform__2019 + _this__1070 * scaleTransform__2119 + _this__2070 * scaleTransform__2219,_this__0170 * scaleTransform__0019 + _this__1170 * scaleTransform__0119 + _this__2170 * scaleTransform__0219,_this__0170 * scaleTransform__1019 + _this__1170 * scaleTransform__1119 + _this__2170 * scaleTransform__1219,_this__0170 * scaleTransform__2019 + _this__1170 * scaleTransform__2119 + _this__2170 * scaleTransform__2219,_this__0270 * scaleTransform__0019 + _this__1270 * scaleTransform__0119 + _this__2270 * scaleTransform__0219,_this__0270 * scaleTransform__1019 + _this__1270 * scaleTransform__1119 + _this__2270 * scaleTransform__1219,_this__0270 * scaleTransform__2019 + _this__1270 * scaleTransform__2119 + _this__2270 * scaleTransform__2219);
		break;
	case 10:case 11:
		if(borderToB * 2 + sv_x18 < wid51) {
			var _this__0071 = 1;
			var _this__1071 = 0;
			var _this__2071 = borderToB;
			var _this__0171 = 0;
			var _this__1171 = 1;
			var _this__2171 = borderToB;
			var _this__0271 = 0;
			var _this__1271 = 0;
			var _this__2271 = 1;
			mTB = new kha_math_FastMatrix3(_this__0071 * scaleTransform40._00 + _this__1071 * scaleTransform40._01 + _this__2071 * scaleTransform40._02,_this__0071 * scaleTransform40._10 + _this__1071 * scaleTransform40._11 + _this__2071 * scaleTransform40._12,_this__0071 * scaleTransform40._20 + _this__1071 * scaleTransform40._21 + _this__2071 * scaleTransform40._22,_this__0171 * scaleTransform40._00 + _this__1171 * scaleTransform40._01 + _this__2171 * scaleTransform40._02,_this__0171 * scaleTransform40._10 + _this__1171 * scaleTransform40._11 + _this__2171 * scaleTransform40._12,_this__0171 * scaleTransform40._20 + _this__1171 * scaleTransform40._21 + _this__2171 * scaleTransform40._22,_this__0271 * scaleTransform40._00 + _this__1271 * scaleTransform40._01 + _this__2271 * scaleTransform40._02,_this__0271 * scaleTransform40._10 + _this__1271 * scaleTransform40._11 + _this__2271 * scaleTransform40._12,_this__0271 * scaleTransform40._20 + _this__1271 * scaleTransform40._21 + _this__2271 * scaleTransform40._22);
		} else {
			var wid57 = Main.wid;
			var hi57 = Main.hi;
			var scaleTransform41 = Main.scaleTransform;
			var _this__0072 = 1;
			var _this__1072 = 0;
			var _this__2072 = borderToB;
			var _this__0172 = 0;
			var _this__1172 = 1;
			var _this__2172 = hi57 / 2 - sv_y18 / 2;
			var _this__0272 = 0;
			var _this__1272 = 0;
			var _this__2272 = 1;
			mTB = new kha_math_FastMatrix3(_this__0072 * scaleTransform41._00 + _this__1072 * scaleTransform41._01 + _this__2072 * scaleTransform41._02,_this__0072 * scaleTransform41._10 + _this__1072 * scaleTransform41._11 + _this__2072 * scaleTransform41._12,_this__0072 * scaleTransform41._20 + _this__1072 * scaleTransform41._21 + _this__2072 * scaleTransform41._22,_this__0172 * scaleTransform41._00 + _this__1172 * scaleTransform41._01 + _this__2172 * scaleTransform41._02,_this__0172 * scaleTransform41._10 + _this__1172 * scaleTransform41._11 + _this__2172 * scaleTransform41._12,_this__0172 * scaleTransform41._20 + _this__1172 * scaleTransform41._21 + _this__2172 * scaleTransform41._22,_this__0272 * scaleTransform41._00 + _this__1272 * scaleTransform41._01 + _this__2272 * scaleTransform41._02,_this__0272 * scaleTransform41._10 + _this__1272 * scaleTransform41._11 + _this__2272 * scaleTransform41._12,_this__0272 * scaleTransform41._20 + _this__1272 * scaleTransform41._21 + _this__2272 * scaleTransform41._22);
		}
		break;
	case 12:case 13:
		if(borderToB * 2 + sv_x18 < wid51) {
			var _this__0073 = 1;
			var _this__1073 = 0;
			var _this__2073 = wid51 - sv_x18 - borderToB;
			var _this__0173 = 0;
			var _this__1173 = 1;
			var _this__2173 = borderToB;
			var _this__0273 = 0;
			var _this__1273 = 0;
			var _this__2273 = 1;
			mTB = new kha_math_FastMatrix3(_this__0073 * scaleTransform40._00 + _this__1073 * scaleTransform40._01 + _this__2073 * scaleTransform40._02,_this__0073 * scaleTransform40._10 + _this__1073 * scaleTransform40._11 + _this__2073 * scaleTransform40._12,_this__0073 * scaleTransform40._20 + _this__1073 * scaleTransform40._21 + _this__2073 * scaleTransform40._22,_this__0173 * scaleTransform40._00 + _this__1173 * scaleTransform40._01 + _this__2173 * scaleTransform40._02,_this__0173 * scaleTransform40._10 + _this__1173 * scaleTransform40._11 + _this__2173 * scaleTransform40._12,_this__0173 * scaleTransform40._20 + _this__1173 * scaleTransform40._21 + _this__2173 * scaleTransform40._22,_this__0273 * scaleTransform40._00 + _this__1273 * scaleTransform40._01 + _this__2273 * scaleTransform40._02,_this__0273 * scaleTransform40._10 + _this__1273 * scaleTransform40._11 + _this__2273 * scaleTransform40._12,_this__0273 * scaleTransform40._20 + _this__1273 * scaleTransform40._21 + _this__2273 * scaleTransform40._22);
		} else {
			var wid58 = Main.wid;
			var hi58 = Main.hi;
			var scaleTransform42 = Main.scaleTransform;
			var _this__0074 = 1;
			var _this__1074 = 0;
			var _this__2074 = wid58 - sv_x18 - borderToB;
			var _this__0174 = 0;
			var _this__1174 = 1;
			var _this__2174 = hi58 / 2 - sv_y18 / 2;
			var _this__0274 = 0;
			var _this__1274 = 0;
			var _this__2274 = 1;
			mTB = new kha_math_FastMatrix3(_this__0074 * scaleTransform42._00 + _this__1074 * scaleTransform42._01 + _this__2074 * scaleTransform42._02,_this__0074 * scaleTransform42._10 + _this__1074 * scaleTransform42._11 + _this__2074 * scaleTransform42._12,_this__0074 * scaleTransform42._20 + _this__1074 * scaleTransform42._21 + _this__2074 * scaleTransform42._22,_this__0174 * scaleTransform42._00 + _this__1174 * scaleTransform42._01 + _this__2174 * scaleTransform42._02,_this__0174 * scaleTransform42._10 + _this__1174 * scaleTransform42._11 + _this__2174 * scaleTransform42._12,_this__0174 * scaleTransform42._20 + _this__1174 * scaleTransform42._21 + _this__2174 * scaleTransform42._22,_this__0274 * scaleTransform42._00 + _this__1274 * scaleTransform42._01 + _this__2274 * scaleTransform42._02,_this__0274 * scaleTransform42._10 + _this__1274 * scaleTransform42._11 + _this__2274 * scaleTransform42._12,_this__0274 * scaleTransform42._20 + _this__1274 * scaleTransform42._21 + _this__2274 * scaleTransform42._22);
		}
		break;
	case 14:case 15:
		if(borderToB * 2 + sv_y18 < hi51) {
			var _this__0075 = 1;
			var _this__1075 = 0;
			var _this__2075 = borderToB;
			var _this__0175 = 0;
			var _this__1175 = 1;
			var _this__2175 = hi51 - sv_y18 - borderToB;
			var _this__0275 = 0;
			var _this__1275 = 0;
			var _this__2275 = 1;
			mTB = new kha_math_FastMatrix3(_this__0075 * scaleTransform40._00 + _this__1075 * scaleTransform40._01 + _this__2075 * scaleTransform40._02,_this__0075 * scaleTransform40._10 + _this__1075 * scaleTransform40._11 + _this__2075 * scaleTransform40._12,_this__0075 * scaleTransform40._20 + _this__1075 * scaleTransform40._21 + _this__2075 * scaleTransform40._22,_this__0175 * scaleTransform40._00 + _this__1175 * scaleTransform40._01 + _this__2175 * scaleTransform40._02,_this__0175 * scaleTransform40._10 + _this__1175 * scaleTransform40._11 + _this__2175 * scaleTransform40._12,_this__0175 * scaleTransform40._20 + _this__1175 * scaleTransform40._21 + _this__2175 * scaleTransform40._22,_this__0275 * scaleTransform40._00 + _this__1275 * scaleTransform40._01 + _this__2275 * scaleTransform40._02,_this__0275 * scaleTransform40._10 + _this__1275 * scaleTransform40._11 + _this__2275 * scaleTransform40._12,_this__0275 * scaleTransform40._20 + _this__1275 * scaleTransform40._21 + _this__2275 * scaleTransform40._22);
		} else {
			var wid59 = Main.wid;
			var hi59 = Main.hi;
			var scaleTransform43 = Main.scaleTransform;
			var _this__0076 = 1;
			var _this__1076 = 0;
			var _this__2076 = borderToB;
			var _this__0176 = 0;
			var _this__1176 = 1;
			var _this__2176 = hi59 / 2 - sv_y18 / 2;
			var _this__0276 = 0;
			var _this__1276 = 0;
			var _this__2276 = 1;
			mTB = new kha_math_FastMatrix3(_this__0076 * scaleTransform43._00 + _this__1076 * scaleTransform43._01 + _this__2076 * scaleTransform43._02,_this__0076 * scaleTransform43._10 + _this__1076 * scaleTransform43._11 + _this__2076 * scaleTransform43._12,_this__0076 * scaleTransform43._20 + _this__1076 * scaleTransform43._21 + _this__2076 * scaleTransform43._22,_this__0176 * scaleTransform43._00 + _this__1176 * scaleTransform43._01 + _this__2176 * scaleTransform43._02,_this__0176 * scaleTransform43._10 + _this__1176 * scaleTransform43._11 + _this__2176 * scaleTransform43._12,_this__0176 * scaleTransform43._20 + _this__1176 * scaleTransform43._21 + _this__2176 * scaleTransform43._22,_this__0276 * scaleTransform43._00 + _this__1276 * scaleTransform43._01 + _this__2276 * scaleTransform43._02,_this__0276 * scaleTransform43._10 + _this__1276 * scaleTransform43._11 + _this__2276 * scaleTransform43._12,_this__0276 * scaleTransform43._20 + _this__1276 * scaleTransform43._21 + _this__2276 * scaleTransform43._22);
		}
		break;
	case 16:case 17:
		if(borderToB * 2 + sv_y18 < hi51) {
			var _this__0077 = 1;
			var _this__1077 = 0;
			var _this__2077 = wid51 - sv_x18 - borderToB;
			var _this__0177 = 0;
			var _this__1177 = 1;
			var _this__2177 = hi51 - sv_y18 - borderToB;
			var _this__0277 = 0;
			var _this__1277 = 0;
			var _this__2277 = 1;
			mTB = new kha_math_FastMatrix3(_this__0077 * scaleTransform40._00 + _this__1077 * scaleTransform40._01 + _this__2077 * scaleTransform40._02,_this__0077 * scaleTransform40._10 + _this__1077 * scaleTransform40._11 + _this__2077 * scaleTransform40._12,_this__0077 * scaleTransform40._20 + _this__1077 * scaleTransform40._21 + _this__2077 * scaleTransform40._22,_this__0177 * scaleTransform40._00 + _this__1177 * scaleTransform40._01 + _this__2177 * scaleTransform40._02,_this__0177 * scaleTransform40._10 + _this__1177 * scaleTransform40._11 + _this__2177 * scaleTransform40._12,_this__0177 * scaleTransform40._20 + _this__1177 * scaleTransform40._21 + _this__2177 * scaleTransform40._22,_this__0277 * scaleTransform40._00 + _this__1277 * scaleTransform40._01 + _this__2277 * scaleTransform40._02,_this__0277 * scaleTransform40._10 + _this__1277 * scaleTransform40._11 + _this__2277 * scaleTransform40._12,_this__0277 * scaleTransform40._20 + _this__1277 * scaleTransform40._21 + _this__2277 * scaleTransform40._22);
		} else {
			var wid60 = Main.wid;
			var hi60 = Main.hi;
			var scaleTransform44 = Main.scaleTransform;
			var _this__0078 = 1;
			var _this__1078 = 0;
			var _this__2078 = wid60 - sv_x18 - borderToB;
			var _this__0178 = 0;
			var _this__1178 = 1;
			var _this__2178 = hi60 / 2 - sv_y18 / 2;
			var _this__0278 = 0;
			var _this__1278 = 0;
			var _this__2278 = 1;
			mTB = new kha_math_FastMatrix3(_this__0078 * scaleTransform44._00 + _this__1078 * scaleTransform44._01 + _this__2078 * scaleTransform44._02,_this__0078 * scaleTransform44._10 + _this__1078 * scaleTransform44._11 + _this__2078 * scaleTransform44._12,_this__0078 * scaleTransform44._20 + _this__1078 * scaleTransform44._21 + _this__2078 * scaleTransform44._22,_this__0178 * scaleTransform44._00 + _this__1178 * scaleTransform44._01 + _this__2178 * scaleTransform44._02,_this__0178 * scaleTransform44._10 + _this__1178 * scaleTransform44._11 + _this__2178 * scaleTransform44._12,_this__0178 * scaleTransform44._20 + _this__1178 * scaleTransform44._21 + _this__2178 * scaleTransform44._22,_this__0278 * scaleTransform44._00 + _this__1278 * scaleTransform44._01 + _this__2278 * scaleTransform44._02,_this__0278 * scaleTransform44._10 + _this__1278 * scaleTransform44._11 + _this__2278 * scaleTransform44._12,_this__0278 * scaleTransform44._20 + _this__1278 * scaleTransform44._21 + _this__2278 * scaleTransform44._22);
		}
		break;
	case 18:
		var wid61 = Main.wid;
		var hi61 = Main.hi;
		var scaleTransform45 = Main.scaleTransform;
		var _this__0079 = 1;
		var _this__1079 = 0;
		var _this__2079 = wid61 / 2 - sv_x18 / 2;
		var _this__0179 = 0;
		var _this__1179 = 1;
		var _this__2179 = hi61 / 2 - sv_y18 / 2;
		var _this__0279 = 0;
		var _this__1279 = 0;
		var _this__2279 = 1;
		mTB = new kha_math_FastMatrix3(_this__0079 * scaleTransform45._00 + _this__1079 * scaleTransform45._01 + _this__2079 * scaleTransform45._02,_this__0079 * scaleTransform45._10 + _this__1079 * scaleTransform45._11 + _this__2079 * scaleTransform45._12,_this__0079 * scaleTransform45._20 + _this__1079 * scaleTransform45._21 + _this__2079 * scaleTransform45._22,_this__0179 * scaleTransform45._00 + _this__1179 * scaleTransform45._01 + _this__2179 * scaleTransform45._02,_this__0179 * scaleTransform45._10 + _this__1179 * scaleTransform45._11 + _this__2179 * scaleTransform45._12,_this__0179 * scaleTransform45._20 + _this__1179 * scaleTransform45._21 + _this__2179 * scaleTransform45._22,_this__0279 * scaleTransform45._00 + _this__1279 * scaleTransform45._01 + _this__2279 * scaleTransform45._02,_this__0279 * scaleTransform45._10 + _this__1279 * scaleTransform45._11 + _this__2279 * scaleTransform45._12,_this__0279 * scaleTransform45._20 + _this__1279 * scaleTransform45._21 + _this__2279 * scaleTransform45._22);
		break;
	case 19:case 20:case 21:
		if(borderToB * 2 + sv_x18 < wid51) {
			var wid62 = Main.wid;
			var hi62 = Main.hi;
			var scaleTransform46 = Main.scaleTransform;
			var _this__0080 = 1;
			var _this__1080 = 0;
			var _this__2080 = borderToB;
			var _this__0180 = 0;
			var _this__1180 = 1;
			var _this__2180 = hi62 / 2 - sv_y18 / 2;
			var _this__0280 = 0;
			var _this__1280 = 0;
			var _this__2280 = 1;
			mTB = new kha_math_FastMatrix3(_this__0080 * scaleTransform46._00 + _this__1080 * scaleTransform46._01 + _this__2080 * scaleTransform46._02,_this__0080 * scaleTransform46._10 + _this__1080 * scaleTransform46._11 + _this__2080 * scaleTransform46._12,_this__0080 * scaleTransform46._20 + _this__1080 * scaleTransform46._21 + _this__2080 * scaleTransform46._22,_this__0180 * scaleTransform46._00 + _this__1180 * scaleTransform46._01 + _this__2180 * scaleTransform46._02,_this__0180 * scaleTransform46._10 + _this__1180 * scaleTransform46._11 + _this__2180 * scaleTransform46._12,_this__0180 * scaleTransform46._20 + _this__1180 * scaleTransform46._21 + _this__2180 * scaleTransform46._22,_this__0280 * scaleTransform46._00 + _this__1280 * scaleTransform46._01 + _this__2280 * scaleTransform46._02,_this__0280 * scaleTransform46._10 + _this__1280 * scaleTransform46._11 + _this__2280 * scaleTransform46._12,_this__0280 * scaleTransform46._20 + _this__1280 * scaleTransform46._21 + _this__2280 * scaleTransform46._22);
		} else {
			var wid63 = Main.wid;
			var hi63 = Main.hi;
			var scaleTransform47 = Main.scaleTransform;
			var _this__0081 = 1;
			var _this__1081 = 0;
			var _this__2081 = wid63 / 2 - sv_x18 / 2;
			var _this__0181 = 0;
			var _this__1181 = 1;
			var _this__2181 = hi63 / 2 - sv_y18 / 2;
			var _this__0281 = 0;
			var _this__1281 = 0;
			var _this__2281 = 1;
			mTB = new kha_math_FastMatrix3(_this__0081 * scaleTransform47._00 + _this__1081 * scaleTransform47._01 + _this__2081 * scaleTransform47._02,_this__0081 * scaleTransform47._10 + _this__1081 * scaleTransform47._11 + _this__2081 * scaleTransform47._12,_this__0081 * scaleTransform47._20 + _this__1081 * scaleTransform47._21 + _this__2081 * scaleTransform47._22,_this__0181 * scaleTransform47._00 + _this__1181 * scaleTransform47._01 + _this__2181 * scaleTransform47._02,_this__0181 * scaleTransform47._10 + _this__1181 * scaleTransform47._11 + _this__2181 * scaleTransform47._12,_this__0181 * scaleTransform47._20 + _this__1181 * scaleTransform47._21 + _this__2181 * scaleTransform47._22,_this__0281 * scaleTransform47._00 + _this__1281 * scaleTransform47._01 + _this__2281 * scaleTransform47._02,_this__0281 * scaleTransform47._10 + _this__1281 * scaleTransform47._11 + _this__2281 * scaleTransform47._12,_this__0281 * scaleTransform47._20 + _this__1281 * scaleTransform47._21 + _this__2281 * scaleTransform47._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderToB * 2 + sv_x18 < wid51) {
			var wid64 = Main.wid;
			var hi64 = Main.hi;
			var scaleTransform48 = Main.scaleTransform;
			var _this__0082 = 1;
			var _this__1082 = 0;
			var _this__2082 = wid64 - sv_x18 - borderToB;
			var _this__0182 = 0;
			var _this__1182 = 1;
			var _this__2182 = hi64 / 2 - sv_y18 / 2;
			var _this__0282 = 0;
			var _this__1282 = 0;
			var _this__2282 = 1;
			mTB = new kha_math_FastMatrix3(_this__0082 * scaleTransform48._00 + _this__1082 * scaleTransform48._01 + _this__2082 * scaleTransform48._02,_this__0082 * scaleTransform48._10 + _this__1082 * scaleTransform48._11 + _this__2082 * scaleTransform48._12,_this__0082 * scaleTransform48._20 + _this__1082 * scaleTransform48._21 + _this__2082 * scaleTransform48._22,_this__0182 * scaleTransform48._00 + _this__1182 * scaleTransform48._01 + _this__2182 * scaleTransform48._02,_this__0182 * scaleTransform48._10 + _this__1182 * scaleTransform48._11 + _this__2182 * scaleTransform48._12,_this__0182 * scaleTransform48._20 + _this__1182 * scaleTransform48._21 + _this__2182 * scaleTransform48._22,_this__0282 * scaleTransform48._00 + _this__1282 * scaleTransform48._01 + _this__2282 * scaleTransform48._02,_this__0282 * scaleTransform48._10 + _this__1282 * scaleTransform48._11 + _this__2282 * scaleTransform48._12,_this__0282 * scaleTransform48._20 + _this__1282 * scaleTransform48._21 + _this__2282 * scaleTransform48._22);
		} else {
			var wid65 = Main.wid;
			var hi65 = Main.hi;
			var scaleTransform49 = Main.scaleTransform;
			var _this__0083 = 1;
			var _this__1083 = 0;
			var _this__2083 = wid65 / 2 - sv_x18 / 2;
			var _this__0183 = 0;
			var _this__1183 = 1;
			var _this__2183 = hi65 / 2 - sv_y18 / 2;
			var _this__0283 = 0;
			var _this__1283 = 0;
			var _this__2283 = 1;
			mTB = new kha_math_FastMatrix3(_this__0083 * scaleTransform49._00 + _this__1083 * scaleTransform49._01 + _this__2083 * scaleTransform49._02,_this__0083 * scaleTransform49._10 + _this__1083 * scaleTransform49._11 + _this__2083 * scaleTransform49._12,_this__0083 * scaleTransform49._20 + _this__1083 * scaleTransform49._21 + _this__2083 * scaleTransform49._22,_this__0183 * scaleTransform49._00 + _this__1183 * scaleTransform49._01 + _this__2183 * scaleTransform49._02,_this__0183 * scaleTransform49._10 + _this__1183 * scaleTransform49._11 + _this__2183 * scaleTransform49._12,_this__0183 * scaleTransform49._20 + _this__1183 * scaleTransform49._21 + _this__2183 * scaleTransform49._22,_this__0283 * scaleTransform49._00 + _this__1283 * scaleTransform49._01 + _this__2283 * scaleTransform49._02,_this__0283 * scaleTransform49._10 + _this__1283 * scaleTransform49._11 + _this__2283 * scaleTransform49._12,_this__0283 * scaleTransform49._20 + _this__1283 * scaleTransform49._21 + _this__2283 * scaleTransform49._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderToB * 2 + sv_y18 < hi51) {
			var _this__0084 = 1;
			var _this__1084 = 0;
			var _this__2084 = wid51 / 2 - sv_x18 / 2;
			var _this__0184 = 0;
			var _this__1184 = 1;
			var _this__2184 = hi51 - sv_y18 - borderToB;
			var _this__0284 = 0;
			var _this__1284 = 0;
			var _this__2284 = 1;
			mTB = new kha_math_FastMatrix3(_this__0084 * scaleTransform40._00 + _this__1084 * scaleTransform40._01 + _this__2084 * scaleTransform40._02,_this__0084 * scaleTransform40._10 + _this__1084 * scaleTransform40._11 + _this__2084 * scaleTransform40._12,_this__0084 * scaleTransform40._20 + _this__1084 * scaleTransform40._21 + _this__2084 * scaleTransform40._22,_this__0184 * scaleTransform40._00 + _this__1184 * scaleTransform40._01 + _this__2184 * scaleTransform40._02,_this__0184 * scaleTransform40._10 + _this__1184 * scaleTransform40._11 + _this__2184 * scaleTransform40._12,_this__0184 * scaleTransform40._20 + _this__1184 * scaleTransform40._21 + _this__2184 * scaleTransform40._22,_this__0284 * scaleTransform40._00 + _this__1284 * scaleTransform40._01 + _this__2284 * scaleTransform40._02,_this__0284 * scaleTransform40._10 + _this__1284 * scaleTransform40._11 + _this__2284 * scaleTransform40._12,_this__0284 * scaleTransform40._20 + _this__1284 * scaleTransform40._21 + _this__2284 * scaleTransform40._22);
		} else {
			var wid66 = Main.wid;
			var hi66 = Main.hi;
			var scaleTransform50 = Main.scaleTransform;
			var _this__0085 = 1;
			var _this__1085 = 0;
			var _this__2085 = wid66 / 2 - sv_x18 / 2;
			var _this__0185 = 0;
			var _this__1185 = 1;
			var _this__2185 = hi66 / 2 - sv_y18 / 2;
			var _this__0285 = 0;
			var _this__1285 = 0;
			var _this__2285 = 1;
			mTB = new kha_math_FastMatrix3(_this__0085 * scaleTransform50._00 + _this__1085 * scaleTransform50._01 + _this__2085 * scaleTransform50._02,_this__0085 * scaleTransform50._10 + _this__1085 * scaleTransform50._11 + _this__2085 * scaleTransform50._12,_this__0085 * scaleTransform50._20 + _this__1085 * scaleTransform50._21 + _this__2085 * scaleTransform50._22,_this__0185 * scaleTransform50._00 + _this__1185 * scaleTransform50._01 + _this__2185 * scaleTransform50._02,_this__0185 * scaleTransform50._10 + _this__1185 * scaleTransform50._11 + _this__2185 * scaleTransform50._12,_this__0185 * scaleTransform50._20 + _this__1185 * scaleTransform50._21 + _this__2185 * scaleTransform50._22,_this__0285 * scaleTransform50._00 + _this__1285 * scaleTransform50._01 + _this__2285 * scaleTransform50._02,_this__0285 * scaleTransform50._10 + _this__1285 * scaleTransform50._11 + _this__2285 * scaleTransform50._12,_this__0285 * scaleTransform50._20 + _this__1285 * scaleTransform50._21 + _this__2285 * scaleTransform50._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderToB * 2 + sv_y18 < hi51) {
			var _this__0086 = 1;
			var _this__1086 = 0;
			var _this__2086 = wid51 / 2 - sv_x18 / 2;
			var _this__0186 = 0;
			var _this__1186 = 1;
			var _this__2186 = borderToB;
			var _this__0286 = 0;
			var _this__1286 = 0;
			var _this__2286 = 1;
			mTB = new kha_math_FastMatrix3(_this__0086 * scaleTransform40._00 + _this__1086 * scaleTransform40._01 + _this__2086 * scaleTransform40._02,_this__0086 * scaleTransform40._10 + _this__1086 * scaleTransform40._11 + _this__2086 * scaleTransform40._12,_this__0086 * scaleTransform40._20 + _this__1086 * scaleTransform40._21 + _this__2086 * scaleTransform40._22,_this__0186 * scaleTransform40._00 + _this__1186 * scaleTransform40._01 + _this__2186 * scaleTransform40._02,_this__0186 * scaleTransform40._10 + _this__1186 * scaleTransform40._11 + _this__2186 * scaleTransform40._12,_this__0186 * scaleTransform40._20 + _this__1186 * scaleTransform40._21 + _this__2186 * scaleTransform40._22,_this__0286 * scaleTransform40._00 + _this__1286 * scaleTransform40._01 + _this__2286 * scaleTransform40._02,_this__0286 * scaleTransform40._10 + _this__1286 * scaleTransform40._11 + _this__2286 * scaleTransform40._12,_this__0286 * scaleTransform40._20 + _this__1286 * scaleTransform40._21 + _this__2286 * scaleTransform40._22);
		} else {
			var wid67 = Main.wid;
			var hi67 = Main.hi;
			var scaleTransform51 = Main.scaleTransform;
			var _this__0087 = 1;
			var _this__1087 = 0;
			var _this__2087 = wid67 / 2 - sv_x18 / 2;
			var _this__0187 = 0;
			var _this__1187 = 1;
			var _this__2187 = hi67 / 2 - sv_y18 / 2;
			var _this__0287 = 0;
			var _this__1287 = 0;
			var _this__2287 = 1;
			mTB = new kha_math_FastMatrix3(_this__0087 * scaleTransform51._00 + _this__1087 * scaleTransform51._01 + _this__2087 * scaleTransform51._02,_this__0087 * scaleTransform51._10 + _this__1087 * scaleTransform51._11 + _this__2087 * scaleTransform51._12,_this__0087 * scaleTransform51._20 + _this__1087 * scaleTransform51._21 + _this__2087 * scaleTransform51._22,_this__0187 * scaleTransform51._00 + _this__1187 * scaleTransform51._01 + _this__2187 * scaleTransform51._02,_this__0187 * scaleTransform51._10 + _this__1187 * scaleTransform51._11 + _this__2187 * scaleTransform51._12,_this__0187 * scaleTransform51._20 + _this__1187 * scaleTransform51._21 + _this__2187 * scaleTransform51._22,_this__0287 * scaleTransform51._00 + _this__1287 * scaleTransform51._01 + _this__2287 * scaleTransform51._02,_this__0287 * scaleTransform51._10 + _this__1287 * scaleTransform51._11 + _this__2287 * scaleTransform51._12,_this__0287 * scaleTransform51._20 + _this__1287 * scaleTransform51._21 + _this__2287 * scaleTransform51._22);
		}
		break;
	}
	var outA__00 = 1;
	var outA__10 = 0;
	var outA__20 = 0;
	var outA__01 = 0;
	var outA__11 = 1;
	var outA__21 = 0;
	var outA__02 = 0;
	var outA__12 = 0;
	var outA__22 = 1;
	outA__00 = mFA._00 + (mTA._00 - mFA._00) * tA;
	outA__10 = mFA._10 + (mTA._10 - mFA._10) * tA;
	outA__20 = mFA._20 + (mTA._20 - mFA._20) * tA;
	outA__01 = mFA._01 + (mTA._01 - mFA._01) * tA;
	outA__11 = mFA._11 + (mTA._11 - mFA._11) * tA;
	outA__21 = mFA._21 + (mTA._21 - mFA._21) * tA;
	outA__02 = mFA._02 + (mTA._02 - mFA._02) * tA;
	outA__12 = mFA._12 + (mTA._12 - mFA._12) * tA;
	outA__22 = mFA._22 + (mTA._22 - mFA._22) * tA;
	var outB__00 = 1;
	var outB__10 = 0;
	var outB__20 = 0;
	var outB__01 = 0;
	var outB__11 = 1;
	var outB__21 = 0;
	var outB__02 = 0;
	var outB__12 = 0;
	var outB__22 = 1;
	outB__00 = mFB._00 + (mTB._00 - mFB._00) * tB;
	outB__10 = mFB._10 + (mTB._10 - mFB._10) * tB;
	outB__20 = mFB._20 + (mTB._20 - mFB._20) * tB;
	outB__01 = mFB._01 + (mTB._01 - mFB._01) * tB;
	outB__11 = mFB._11 + (mTB._11 - mFB._11) * tB;
	outB__21 = mFB._21 + (mTB._21 - mFB._21) * tB;
	outB__02 = mFB._02 + (mTB._02 - mFB._02) * tB;
	outB__12 = mFB._12 + (mTB._12 - mFB._12) * tB;
	outB__22 = mFB._22 + (mTB._22 - mFB._22) * tB;
	var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
	out._00 = outA__00 + (outB__00 - outA__00) * tC;
	out._10 = outA__10 + (outB__10 - outA__10) * tC;
	out._20 = outA__20 + (outB__20 - outA__20) * tC;
	out._01 = outA__01 + (outB__01 - outA__01) * tC;
	out._11 = outA__11 + (outB__11 - outA__11) * tC;
	out._21 = outA__21 + (outB__21 - outA__21) * tC;
	out._02 = outA__02 + (outB__02 - outA__02) * tC;
	out._12 = outA__12 + (outB__12 - outA__12) * tC;
	out._22 = outA__22 + (outB__22 - outA__22) * tC;
	return out;
};
simpleText_AlignWindow.interpolate4 = function(mFA,mTA,mFB,mTB,tA,tB,tC) {
	var outA__00 = 1;
	var outA__10 = 0;
	var outA__20 = 0;
	var outA__01 = 0;
	var outA__11 = 1;
	var outA__21 = 0;
	var outA__02 = 0;
	var outA__12 = 0;
	var outA__22 = 1;
	outA__00 = mFA._00 + (mTA._00 - mFA._00) * tA;
	outA__10 = mFA._10 + (mTA._10 - mFA._10) * tA;
	outA__20 = mFA._20 + (mTA._20 - mFA._20) * tA;
	outA__01 = mFA._01 + (mTA._01 - mFA._01) * tA;
	outA__11 = mFA._11 + (mTA._11 - mFA._11) * tA;
	outA__21 = mFA._21 + (mTA._21 - mFA._21) * tA;
	outA__02 = mFA._02 + (mTA._02 - mFA._02) * tA;
	outA__12 = mFA._12 + (mTA._12 - mFA._12) * tA;
	outA__22 = mFA._22 + (mTA._22 - mFA._22) * tA;
	var outB__00 = 1;
	var outB__10 = 0;
	var outB__20 = 0;
	var outB__01 = 0;
	var outB__11 = 1;
	var outB__21 = 0;
	var outB__02 = 0;
	var outB__12 = 0;
	var outB__22 = 1;
	outB__00 = mFB._00 + (mTB._00 - mFB._00) * tB;
	outB__10 = mFB._10 + (mTB._10 - mFB._10) * tB;
	outB__20 = mFB._20 + (mTB._20 - mFB._20) * tB;
	outB__01 = mFB._01 + (mTB._01 - mFB._01) * tB;
	outB__11 = mFB._11 + (mTB._11 - mFB._11) * tB;
	outB__21 = mFB._21 + (mTB._21 - mFB._21) * tB;
	outB__02 = mFB._02 + (mTB._02 - mFB._02) * tB;
	outB__12 = mFB._12 + (mTB._12 - mFB._12) * tB;
	outB__22 = mFB._22 + (mTB._22 - mFB._22) * tB;
	var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
	out._00 = outA__00 + (outB__00 - outA__00) * tC;
	out._10 = outA__10 + (outB__10 - outA__10) * tC;
	out._20 = outA__20 + (outB__20 - outA__20) * tC;
	out._01 = outA__01 + (outB__01 - outA__01) * tC;
	out._11 = outA__11 + (outB__11 - outA__11) * tC;
	out._21 = outA__21 + (outB__21 - outA__21) * tC;
	out._02 = outA__02 + (outB__02 - outA__02) * tC;
	out._12 = outA__12 + (outB__12 - outA__12) * tC;
	out._22 = outA__22 + (outB__22 - outA__22) * tC;
	return out;
};
simpleText_AlignWindow.between3 = function(a,b,c,w,h,tAB,tC,borderA,borderB,borderC) {
	if(borderC == null) {
		borderC = 0;
	}
	if(borderB == null) {
		borderB = 0;
	}
	if(borderA == null) {
		borderA = 0;
	}
	var scaleTransform = Main.scaleTransform;
	var v_x = w;
	var v_y = h;
	var w1 = scaleTransform._02 * v_x + scaleTransform._12 * v_y + scaleTransform._22;
	var x = (scaleTransform._00 * v_x + scaleTransform._10 * v_y + scaleTransform._20) / w1;
	var y = (scaleTransform._01 * v_x + scaleTransform._11 * v_y + scaleTransform._21) / w1;
	var sv_x = x;
	var sv_y = y;
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform1 = Main.scaleTransform;
	var mA;
	switch(a._hx_index) {
	case 2:case 7:
		var wid1 = Main.wid;
		var hi1 = Main.hi;
		var w2 = wid1 - borderA * 2;
		var h2 = hi1 - borderA * 2;
		var dw = w2 - w;
		var dh = h2 - h;
		var scale = dw < dh ? w2 / w : h2 / h;
		if(scale < 0) {
			scale = 0.;
		}
		var scaleTransform__00 = scale;
		var scaleTransform__10 = 0;
		var scaleTransform__20 = 0;
		var scaleTransform__01 = 0;
		var scaleTransform__11 = scale;
		var scaleTransform__21 = 0;
		var scaleTransform__02 = 0;
		var scaleTransform__12 = 0;
		var scaleTransform__22 = 1;
		var value_x = w;
		var value_y = h;
		var w3 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
		var x1 = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w3;
		var y1 = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w3;
		var sv_x1 = x1;
		var sv_y1 = y1;
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = wid1 - sv_x1 - borderA;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = hi1 / 2 - sv_y1 / 2;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		mA = new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
		break;
	case 0:case 5:
		var wid2 = Main.wid;
		var hi2 = Main.hi;
		var w21 = wid2 - borderA * 2;
		var h21 = hi2 - borderA * 2;
		var dw1 = w21 - w;
		var dh1 = h21 - h;
		var scale1 = dw1 < dh1 ? w21 / w : h21 / h;
		if(scale1 < 0) {
			scale1 = 0.;
		}
		var scaleTransform__001 = scale1;
		var scaleTransform__101 = 0;
		var scaleTransform__201 = 0;
		var scaleTransform__011 = 0;
		var scaleTransform__111 = scale1;
		var scaleTransform__211 = 0;
		var scaleTransform__021 = 0;
		var scaleTransform__121 = 0;
		var scaleTransform__221 = 1;
		var value_x1 = w;
		var value_y1 = h;
		var w4 = scaleTransform__021 * value_x1 + scaleTransform__121 * value_y1 + scaleTransform__221;
		var x2 = (scaleTransform__001 * value_x1 + scaleTransform__101 * value_y1 + scaleTransform__201) / w4;
		var y2 = (scaleTransform__011 * value_x1 + scaleTransform__111 * value_y1 + scaleTransform__211) / w4;
		var sv_x2 = x2;
		var sv_y2 = y2;
		var _this__001 = 1;
		var _this__101 = 0;
		var _this__201 = wid2 / 2 - sv_x2 / 2;
		var _this__011 = 0;
		var _this__111 = 1;
		var _this__211 = hi2 / 2 - sv_y2 / 2;
		var _this__021 = 0;
		var _this__121 = 0;
		var _this__221 = 1;
		mA = new kha_math_FastMatrix3(_this__001 * scaleTransform__001 + _this__101 * scaleTransform__011 + _this__201 * scaleTransform__021,_this__001 * scaleTransform__101 + _this__101 * scaleTransform__111 + _this__201 * scaleTransform__121,_this__001 * scaleTransform__201 + _this__101 * scaleTransform__211 + _this__201 * scaleTransform__221,_this__011 * scaleTransform__001 + _this__111 * scaleTransform__011 + _this__211 * scaleTransform__021,_this__011 * scaleTransform__101 + _this__111 * scaleTransform__111 + _this__211 * scaleTransform__121,_this__011 * scaleTransform__201 + _this__111 * scaleTransform__211 + _this__211 * scaleTransform__221,_this__021 * scaleTransform__001 + _this__121 * scaleTransform__011 + _this__221 * scaleTransform__021,_this__021 * scaleTransform__101 + _this__121 * scaleTransform__111 + _this__221 * scaleTransform__121,_this__021 * scaleTransform__201 + _this__121 * scaleTransform__211 + _this__221 * scaleTransform__221);
		break;
	case 1:case 6:
		var wid3 = Main.wid;
		var hi3 = Main.hi;
		var w22 = wid3 - borderA * 2;
		var h22 = hi3 - borderA * 2;
		var dw2 = w22 - w;
		var dh2 = h22 - h;
		var scale2 = dw2 < dh2 ? w22 / w : h22 / h;
		if(scale2 < 0) {
			scale2 = 0.;
		}
		var scaleTransform__002 = scale2;
		var scaleTransform__102 = 0;
		var scaleTransform__202 = 0;
		var scaleTransform__012 = 0;
		var scaleTransform__112 = scale2;
		var scaleTransform__212 = 0;
		var scaleTransform__022 = 0;
		var scaleTransform__122 = 0;
		var scaleTransform__222 = 1;
		var value_x2 = w;
		var value_y2 = h;
		var w5 = scaleTransform__022 * value_x2 + scaleTransform__122 * value_y2 + scaleTransform__222;
		var x3 = (scaleTransform__002 * value_x2 + scaleTransform__102 * value_y2 + scaleTransform__202) / w5;
		var y3 = (scaleTransform__012 * value_x2 + scaleTransform__112 * value_y2 + scaleTransform__212) / w5;
		var sv_x3 = x3;
		var sv_y3 = y3;
		var _this__002 = 1;
		var _this__102 = 0;
		var _this__202 = borderA;
		var _this__012 = 0;
		var _this__112 = 1;
		var _this__212 = hi3 / 2 - sv_y3 / 2;
		var _this__022 = 0;
		var _this__122 = 0;
		var _this__222 = 1;
		mA = new kha_math_FastMatrix3(_this__002 * scaleTransform__002 + _this__102 * scaleTransform__012 + _this__202 * scaleTransform__022,_this__002 * scaleTransform__102 + _this__102 * scaleTransform__112 + _this__202 * scaleTransform__122,_this__002 * scaleTransform__202 + _this__102 * scaleTransform__212 + _this__202 * scaleTransform__222,_this__012 * scaleTransform__002 + _this__112 * scaleTransform__012 + _this__212 * scaleTransform__022,_this__012 * scaleTransform__102 + _this__112 * scaleTransform__112 + _this__212 * scaleTransform__122,_this__012 * scaleTransform__202 + _this__112 * scaleTransform__212 + _this__212 * scaleTransform__222,_this__022 * scaleTransform__002 + _this__122 * scaleTransform__012 + _this__222 * scaleTransform__022,_this__022 * scaleTransform__102 + _this__122 * scaleTransform__112 + _this__222 * scaleTransform__122,_this__022 * scaleTransform__202 + _this__122 * scaleTransform__212 + _this__222 * scaleTransform__222);
		break;
	case 3:case 8:
		var wid4 = Main.wid;
		var hi4 = Main.hi;
		var w23 = wid4 - borderA * 2;
		var h23 = hi4 - borderA * 2;
		var dw3 = w23 - w;
		var dh3 = h23 - h;
		var scale3 = dw3 < dh3 ? w23 / w : h23 / h;
		if(scale3 < 0) {
			scale3 = 0.;
		}
		var scaleTransform__003 = scale3;
		var scaleTransform__103 = 0;
		var scaleTransform__203 = 0;
		var scaleTransform__013 = 0;
		var scaleTransform__113 = scale3;
		var scaleTransform__213 = 0;
		var scaleTransform__023 = 0;
		var scaleTransform__123 = 0;
		var scaleTransform__223 = 1;
		var value_x3 = w;
		var value_y3 = h;
		var w6 = scaleTransform__023 * value_x3 + scaleTransform__123 * value_y3 + scaleTransform__223;
		var x4 = (scaleTransform__003 * value_x3 + scaleTransform__103 * value_y3 + scaleTransform__203) / w6;
		var y4 = (scaleTransform__013 * value_x3 + scaleTransform__113 * value_y3 + scaleTransform__213) / w6;
		var sv_x4 = x4;
		var sv_y4 = y4;
		var _this__003 = 1;
		var _this__103 = 0;
		var _this__203 = wid4 / 2 - sv_x4 / 2;
		var _this__013 = 0;
		var _this__113 = 1;
		var _this__213 = borderA;
		var _this__023 = 0;
		var _this__123 = 0;
		var _this__223 = 1;
		mA = new kha_math_FastMatrix3(_this__003 * scaleTransform__003 + _this__103 * scaleTransform__013 + _this__203 * scaleTransform__023,_this__003 * scaleTransform__103 + _this__103 * scaleTransform__113 + _this__203 * scaleTransform__123,_this__003 * scaleTransform__203 + _this__103 * scaleTransform__213 + _this__203 * scaleTransform__223,_this__013 * scaleTransform__003 + _this__113 * scaleTransform__013 + _this__213 * scaleTransform__023,_this__013 * scaleTransform__103 + _this__113 * scaleTransform__113 + _this__213 * scaleTransform__123,_this__013 * scaleTransform__203 + _this__113 * scaleTransform__213 + _this__213 * scaleTransform__223,_this__023 * scaleTransform__003 + _this__123 * scaleTransform__013 + _this__223 * scaleTransform__023,_this__023 * scaleTransform__103 + _this__123 * scaleTransform__113 + _this__223 * scaleTransform__123,_this__023 * scaleTransform__203 + _this__123 * scaleTransform__213 + _this__223 * scaleTransform__223);
		break;
	case 4:case 9:
		var wid5 = Main.wid;
		var hi5 = Main.hi;
		var w24 = wid5 - borderA * 2;
		var h24 = hi5 - borderA * 2;
		var dw4 = w24 - w;
		var dh4 = h24 - h;
		var scale4 = dw4 < dh4 ? w24 / w : h24 / h;
		if(scale4 < 0) {
			scale4 = 0.;
		}
		var scaleTransform__004 = scale4;
		var scaleTransform__104 = 0;
		var scaleTransform__204 = 0;
		var scaleTransform__014 = 0;
		var scaleTransform__114 = scale4;
		var scaleTransform__214 = 0;
		var scaleTransform__024 = 0;
		var scaleTransform__124 = 0;
		var scaleTransform__224 = 1;
		var value_x4 = w;
		var value_y4 = h;
		var w7 = scaleTransform__024 * value_x4 + scaleTransform__124 * value_y4 + scaleTransform__224;
		var x5 = (scaleTransform__004 * value_x4 + scaleTransform__104 * value_y4 + scaleTransform__204) / w7;
		var y5 = (scaleTransform__014 * value_x4 + scaleTransform__114 * value_y4 + scaleTransform__214) / w7;
		var sv_x5 = x5;
		var sv_y5 = y5;
		var _this__004 = 1;
		var _this__104 = 0;
		var _this__204 = wid5 / 2 - sv_x5 / 2;
		var _this__014 = 0;
		var _this__114 = 1;
		var _this__214 = hi5 - sv_y5 - borderA;
		var _this__024 = 0;
		var _this__124 = 0;
		var _this__224 = 1;
		mA = new kha_math_FastMatrix3(_this__004 * scaleTransform__004 + _this__104 * scaleTransform__014 + _this__204 * scaleTransform__024,_this__004 * scaleTransform__104 + _this__104 * scaleTransform__114 + _this__204 * scaleTransform__124,_this__004 * scaleTransform__204 + _this__104 * scaleTransform__214 + _this__204 * scaleTransform__224,_this__014 * scaleTransform__004 + _this__114 * scaleTransform__014 + _this__214 * scaleTransform__024,_this__014 * scaleTransform__104 + _this__114 * scaleTransform__114 + _this__214 * scaleTransform__124,_this__014 * scaleTransform__204 + _this__114 * scaleTransform__214 + _this__214 * scaleTransform__224,_this__024 * scaleTransform__004 + _this__124 * scaleTransform__014 + _this__224 * scaleTransform__024,_this__024 * scaleTransform__104 + _this__124 * scaleTransform__114 + _this__224 * scaleTransform__124,_this__024 * scaleTransform__204 + _this__124 * scaleTransform__214 + _this__224 * scaleTransform__224);
		break;
	case 10:case 11:
		if(borderA * 2 + sv_x < wid) {
			var _this__005 = 1;
			var _this__105 = 0;
			var _this__205 = borderA;
			var _this__015 = 0;
			var _this__115 = 1;
			var _this__215 = borderA;
			var _this__025 = 0;
			var _this__125 = 0;
			var _this__225 = 1;
			mA = new kha_math_FastMatrix3(_this__005 * scaleTransform1._00 + _this__105 * scaleTransform1._01 + _this__205 * scaleTransform1._02,_this__005 * scaleTransform1._10 + _this__105 * scaleTransform1._11 + _this__205 * scaleTransform1._12,_this__005 * scaleTransform1._20 + _this__105 * scaleTransform1._21 + _this__205 * scaleTransform1._22,_this__015 * scaleTransform1._00 + _this__115 * scaleTransform1._01 + _this__215 * scaleTransform1._02,_this__015 * scaleTransform1._10 + _this__115 * scaleTransform1._11 + _this__215 * scaleTransform1._12,_this__015 * scaleTransform1._20 + _this__115 * scaleTransform1._21 + _this__215 * scaleTransform1._22,_this__025 * scaleTransform1._00 + _this__125 * scaleTransform1._01 + _this__225 * scaleTransform1._02,_this__025 * scaleTransform1._10 + _this__125 * scaleTransform1._11 + _this__225 * scaleTransform1._12,_this__025 * scaleTransform1._20 + _this__125 * scaleTransform1._21 + _this__225 * scaleTransform1._22);
		} else {
			var wid6 = Main.wid;
			var hi6 = Main.hi;
			var scaleTransform2 = Main.scaleTransform;
			var _this__006 = 1;
			var _this__106 = 0;
			var _this__206 = borderA;
			var _this__016 = 0;
			var _this__116 = 1;
			var _this__216 = hi6 / 2 - sv_y / 2;
			var _this__026 = 0;
			var _this__126 = 0;
			var _this__226 = 1;
			mA = new kha_math_FastMatrix3(_this__006 * scaleTransform2._00 + _this__106 * scaleTransform2._01 + _this__206 * scaleTransform2._02,_this__006 * scaleTransform2._10 + _this__106 * scaleTransform2._11 + _this__206 * scaleTransform2._12,_this__006 * scaleTransform2._20 + _this__106 * scaleTransform2._21 + _this__206 * scaleTransform2._22,_this__016 * scaleTransform2._00 + _this__116 * scaleTransform2._01 + _this__216 * scaleTransform2._02,_this__016 * scaleTransform2._10 + _this__116 * scaleTransform2._11 + _this__216 * scaleTransform2._12,_this__016 * scaleTransform2._20 + _this__116 * scaleTransform2._21 + _this__216 * scaleTransform2._22,_this__026 * scaleTransform2._00 + _this__126 * scaleTransform2._01 + _this__226 * scaleTransform2._02,_this__026 * scaleTransform2._10 + _this__126 * scaleTransform2._11 + _this__226 * scaleTransform2._12,_this__026 * scaleTransform2._20 + _this__126 * scaleTransform2._21 + _this__226 * scaleTransform2._22);
		}
		break;
	case 12:case 13:
		if(borderA * 2 + sv_x < wid) {
			var _this__007 = 1;
			var _this__107 = 0;
			var _this__207 = wid - sv_x - borderA;
			var _this__017 = 0;
			var _this__117 = 1;
			var _this__217 = borderA;
			var _this__027 = 0;
			var _this__127 = 0;
			var _this__227 = 1;
			mA = new kha_math_FastMatrix3(_this__007 * scaleTransform1._00 + _this__107 * scaleTransform1._01 + _this__207 * scaleTransform1._02,_this__007 * scaleTransform1._10 + _this__107 * scaleTransform1._11 + _this__207 * scaleTransform1._12,_this__007 * scaleTransform1._20 + _this__107 * scaleTransform1._21 + _this__207 * scaleTransform1._22,_this__017 * scaleTransform1._00 + _this__117 * scaleTransform1._01 + _this__217 * scaleTransform1._02,_this__017 * scaleTransform1._10 + _this__117 * scaleTransform1._11 + _this__217 * scaleTransform1._12,_this__017 * scaleTransform1._20 + _this__117 * scaleTransform1._21 + _this__217 * scaleTransform1._22,_this__027 * scaleTransform1._00 + _this__127 * scaleTransform1._01 + _this__227 * scaleTransform1._02,_this__027 * scaleTransform1._10 + _this__127 * scaleTransform1._11 + _this__227 * scaleTransform1._12,_this__027 * scaleTransform1._20 + _this__127 * scaleTransform1._21 + _this__227 * scaleTransform1._22);
		} else {
			var wid7 = Main.wid;
			var hi7 = Main.hi;
			var scaleTransform3 = Main.scaleTransform;
			var _this__008 = 1;
			var _this__108 = 0;
			var _this__208 = wid7 - sv_x - borderA;
			var _this__018 = 0;
			var _this__118 = 1;
			var _this__218 = hi7 / 2 - sv_y / 2;
			var _this__028 = 0;
			var _this__128 = 0;
			var _this__228 = 1;
			mA = new kha_math_FastMatrix3(_this__008 * scaleTransform3._00 + _this__108 * scaleTransform3._01 + _this__208 * scaleTransform3._02,_this__008 * scaleTransform3._10 + _this__108 * scaleTransform3._11 + _this__208 * scaleTransform3._12,_this__008 * scaleTransform3._20 + _this__108 * scaleTransform3._21 + _this__208 * scaleTransform3._22,_this__018 * scaleTransform3._00 + _this__118 * scaleTransform3._01 + _this__218 * scaleTransform3._02,_this__018 * scaleTransform3._10 + _this__118 * scaleTransform3._11 + _this__218 * scaleTransform3._12,_this__018 * scaleTransform3._20 + _this__118 * scaleTransform3._21 + _this__218 * scaleTransform3._22,_this__028 * scaleTransform3._00 + _this__128 * scaleTransform3._01 + _this__228 * scaleTransform3._02,_this__028 * scaleTransform3._10 + _this__128 * scaleTransform3._11 + _this__228 * scaleTransform3._12,_this__028 * scaleTransform3._20 + _this__128 * scaleTransform3._21 + _this__228 * scaleTransform3._22);
		}
		break;
	case 14:case 15:
		if(borderA * 2 + sv_y < hi) {
			var _this__009 = 1;
			var _this__109 = 0;
			var _this__209 = borderA;
			var _this__019 = 0;
			var _this__119 = 1;
			var _this__219 = hi - sv_y - borderA;
			var _this__029 = 0;
			var _this__129 = 0;
			var _this__229 = 1;
			mA = new kha_math_FastMatrix3(_this__009 * scaleTransform1._00 + _this__109 * scaleTransform1._01 + _this__209 * scaleTransform1._02,_this__009 * scaleTransform1._10 + _this__109 * scaleTransform1._11 + _this__209 * scaleTransform1._12,_this__009 * scaleTransform1._20 + _this__109 * scaleTransform1._21 + _this__209 * scaleTransform1._22,_this__019 * scaleTransform1._00 + _this__119 * scaleTransform1._01 + _this__219 * scaleTransform1._02,_this__019 * scaleTransform1._10 + _this__119 * scaleTransform1._11 + _this__219 * scaleTransform1._12,_this__019 * scaleTransform1._20 + _this__119 * scaleTransform1._21 + _this__219 * scaleTransform1._22,_this__029 * scaleTransform1._00 + _this__129 * scaleTransform1._01 + _this__229 * scaleTransform1._02,_this__029 * scaleTransform1._10 + _this__129 * scaleTransform1._11 + _this__229 * scaleTransform1._12,_this__029 * scaleTransform1._20 + _this__129 * scaleTransform1._21 + _this__229 * scaleTransform1._22);
		} else {
			var wid8 = Main.wid;
			var hi8 = Main.hi;
			var scaleTransform4 = Main.scaleTransform;
			var _this__0010 = 1;
			var _this__1010 = 0;
			var _this__2010 = borderA;
			var _this__0110 = 0;
			var _this__1110 = 1;
			var _this__2110 = hi8 / 2 - sv_y / 2;
			var _this__0210 = 0;
			var _this__1210 = 0;
			var _this__2210 = 1;
			mA = new kha_math_FastMatrix3(_this__0010 * scaleTransform4._00 + _this__1010 * scaleTransform4._01 + _this__2010 * scaleTransform4._02,_this__0010 * scaleTransform4._10 + _this__1010 * scaleTransform4._11 + _this__2010 * scaleTransform4._12,_this__0010 * scaleTransform4._20 + _this__1010 * scaleTransform4._21 + _this__2010 * scaleTransform4._22,_this__0110 * scaleTransform4._00 + _this__1110 * scaleTransform4._01 + _this__2110 * scaleTransform4._02,_this__0110 * scaleTransform4._10 + _this__1110 * scaleTransform4._11 + _this__2110 * scaleTransform4._12,_this__0110 * scaleTransform4._20 + _this__1110 * scaleTransform4._21 + _this__2110 * scaleTransform4._22,_this__0210 * scaleTransform4._00 + _this__1210 * scaleTransform4._01 + _this__2210 * scaleTransform4._02,_this__0210 * scaleTransform4._10 + _this__1210 * scaleTransform4._11 + _this__2210 * scaleTransform4._12,_this__0210 * scaleTransform4._20 + _this__1210 * scaleTransform4._21 + _this__2210 * scaleTransform4._22);
		}
		break;
	case 16:case 17:
		if(borderA * 2 + sv_y < hi) {
			var _this__0011 = 1;
			var _this__1011 = 0;
			var _this__2011 = wid - sv_x - borderA;
			var _this__0111 = 0;
			var _this__1111 = 1;
			var _this__2111 = hi - sv_y - borderA;
			var _this__0211 = 0;
			var _this__1211 = 0;
			var _this__2211 = 1;
			mA = new kha_math_FastMatrix3(_this__0011 * scaleTransform1._00 + _this__1011 * scaleTransform1._01 + _this__2011 * scaleTransform1._02,_this__0011 * scaleTransform1._10 + _this__1011 * scaleTransform1._11 + _this__2011 * scaleTransform1._12,_this__0011 * scaleTransform1._20 + _this__1011 * scaleTransform1._21 + _this__2011 * scaleTransform1._22,_this__0111 * scaleTransform1._00 + _this__1111 * scaleTransform1._01 + _this__2111 * scaleTransform1._02,_this__0111 * scaleTransform1._10 + _this__1111 * scaleTransform1._11 + _this__2111 * scaleTransform1._12,_this__0111 * scaleTransform1._20 + _this__1111 * scaleTransform1._21 + _this__2111 * scaleTransform1._22,_this__0211 * scaleTransform1._00 + _this__1211 * scaleTransform1._01 + _this__2211 * scaleTransform1._02,_this__0211 * scaleTransform1._10 + _this__1211 * scaleTransform1._11 + _this__2211 * scaleTransform1._12,_this__0211 * scaleTransform1._20 + _this__1211 * scaleTransform1._21 + _this__2211 * scaleTransform1._22);
		} else {
			var wid9 = Main.wid;
			var hi9 = Main.hi;
			var scaleTransform5 = Main.scaleTransform;
			var _this__0012 = 1;
			var _this__1012 = 0;
			var _this__2012 = wid9 - sv_x - borderA;
			var _this__0112 = 0;
			var _this__1112 = 1;
			var _this__2112 = hi9 / 2 - sv_y / 2;
			var _this__0212 = 0;
			var _this__1212 = 0;
			var _this__2212 = 1;
			mA = new kha_math_FastMatrix3(_this__0012 * scaleTransform5._00 + _this__1012 * scaleTransform5._01 + _this__2012 * scaleTransform5._02,_this__0012 * scaleTransform5._10 + _this__1012 * scaleTransform5._11 + _this__2012 * scaleTransform5._12,_this__0012 * scaleTransform5._20 + _this__1012 * scaleTransform5._21 + _this__2012 * scaleTransform5._22,_this__0112 * scaleTransform5._00 + _this__1112 * scaleTransform5._01 + _this__2112 * scaleTransform5._02,_this__0112 * scaleTransform5._10 + _this__1112 * scaleTransform5._11 + _this__2112 * scaleTransform5._12,_this__0112 * scaleTransform5._20 + _this__1112 * scaleTransform5._21 + _this__2112 * scaleTransform5._22,_this__0212 * scaleTransform5._00 + _this__1212 * scaleTransform5._01 + _this__2212 * scaleTransform5._02,_this__0212 * scaleTransform5._10 + _this__1212 * scaleTransform5._11 + _this__2212 * scaleTransform5._12,_this__0212 * scaleTransform5._20 + _this__1212 * scaleTransform5._21 + _this__2212 * scaleTransform5._22);
		}
		break;
	case 18:
		var wid10 = Main.wid;
		var hi10 = Main.hi;
		var scaleTransform6 = Main.scaleTransform;
		var _this__0013 = 1;
		var _this__1013 = 0;
		var _this__2013 = wid10 / 2 - sv_x / 2;
		var _this__0113 = 0;
		var _this__1113 = 1;
		var _this__2113 = hi10 / 2 - sv_y / 2;
		var _this__0213 = 0;
		var _this__1213 = 0;
		var _this__2213 = 1;
		mA = new kha_math_FastMatrix3(_this__0013 * scaleTransform6._00 + _this__1013 * scaleTransform6._01 + _this__2013 * scaleTransform6._02,_this__0013 * scaleTransform6._10 + _this__1013 * scaleTransform6._11 + _this__2013 * scaleTransform6._12,_this__0013 * scaleTransform6._20 + _this__1013 * scaleTransform6._21 + _this__2013 * scaleTransform6._22,_this__0113 * scaleTransform6._00 + _this__1113 * scaleTransform6._01 + _this__2113 * scaleTransform6._02,_this__0113 * scaleTransform6._10 + _this__1113 * scaleTransform6._11 + _this__2113 * scaleTransform6._12,_this__0113 * scaleTransform6._20 + _this__1113 * scaleTransform6._21 + _this__2113 * scaleTransform6._22,_this__0213 * scaleTransform6._00 + _this__1213 * scaleTransform6._01 + _this__2213 * scaleTransform6._02,_this__0213 * scaleTransform6._10 + _this__1213 * scaleTransform6._11 + _this__2213 * scaleTransform6._12,_this__0213 * scaleTransform6._20 + _this__1213 * scaleTransform6._21 + _this__2213 * scaleTransform6._22);
		break;
	case 19:case 20:case 21:
		if(borderA * 2 + sv_x < wid) {
			var wid11 = Main.wid;
			var hi11 = Main.hi;
			var scaleTransform7 = Main.scaleTransform;
			var _this__0014 = 1;
			var _this__1014 = 0;
			var _this__2014 = borderA;
			var _this__0114 = 0;
			var _this__1114 = 1;
			var _this__2114 = hi11 / 2 - sv_y / 2;
			var _this__0214 = 0;
			var _this__1214 = 0;
			var _this__2214 = 1;
			mA = new kha_math_FastMatrix3(_this__0014 * scaleTransform7._00 + _this__1014 * scaleTransform7._01 + _this__2014 * scaleTransform7._02,_this__0014 * scaleTransform7._10 + _this__1014 * scaleTransform7._11 + _this__2014 * scaleTransform7._12,_this__0014 * scaleTransform7._20 + _this__1014 * scaleTransform7._21 + _this__2014 * scaleTransform7._22,_this__0114 * scaleTransform7._00 + _this__1114 * scaleTransform7._01 + _this__2114 * scaleTransform7._02,_this__0114 * scaleTransform7._10 + _this__1114 * scaleTransform7._11 + _this__2114 * scaleTransform7._12,_this__0114 * scaleTransform7._20 + _this__1114 * scaleTransform7._21 + _this__2114 * scaleTransform7._22,_this__0214 * scaleTransform7._00 + _this__1214 * scaleTransform7._01 + _this__2214 * scaleTransform7._02,_this__0214 * scaleTransform7._10 + _this__1214 * scaleTransform7._11 + _this__2214 * scaleTransform7._12,_this__0214 * scaleTransform7._20 + _this__1214 * scaleTransform7._21 + _this__2214 * scaleTransform7._22);
		} else {
			var wid12 = Main.wid;
			var hi12 = Main.hi;
			var scaleTransform8 = Main.scaleTransform;
			var _this__0015 = 1;
			var _this__1015 = 0;
			var _this__2015 = wid12 / 2 - sv_x / 2;
			var _this__0115 = 0;
			var _this__1115 = 1;
			var _this__2115 = hi12 / 2 - sv_y / 2;
			var _this__0215 = 0;
			var _this__1215 = 0;
			var _this__2215 = 1;
			mA = new kha_math_FastMatrix3(_this__0015 * scaleTransform8._00 + _this__1015 * scaleTransform8._01 + _this__2015 * scaleTransform8._02,_this__0015 * scaleTransform8._10 + _this__1015 * scaleTransform8._11 + _this__2015 * scaleTransform8._12,_this__0015 * scaleTransform8._20 + _this__1015 * scaleTransform8._21 + _this__2015 * scaleTransform8._22,_this__0115 * scaleTransform8._00 + _this__1115 * scaleTransform8._01 + _this__2115 * scaleTransform8._02,_this__0115 * scaleTransform8._10 + _this__1115 * scaleTransform8._11 + _this__2115 * scaleTransform8._12,_this__0115 * scaleTransform8._20 + _this__1115 * scaleTransform8._21 + _this__2115 * scaleTransform8._22,_this__0215 * scaleTransform8._00 + _this__1215 * scaleTransform8._01 + _this__2215 * scaleTransform8._02,_this__0215 * scaleTransform8._10 + _this__1215 * scaleTransform8._11 + _this__2215 * scaleTransform8._12,_this__0215 * scaleTransform8._20 + _this__1215 * scaleTransform8._21 + _this__2215 * scaleTransform8._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderA * 2 + sv_x < wid) {
			var wid13 = Main.wid;
			var hi13 = Main.hi;
			var scaleTransform9 = Main.scaleTransform;
			var _this__0016 = 1;
			var _this__1016 = 0;
			var _this__2016 = wid13 - sv_x - borderA;
			var _this__0116 = 0;
			var _this__1116 = 1;
			var _this__2116 = hi13 / 2 - sv_y / 2;
			var _this__0216 = 0;
			var _this__1216 = 0;
			var _this__2216 = 1;
			mA = new kha_math_FastMatrix3(_this__0016 * scaleTransform9._00 + _this__1016 * scaleTransform9._01 + _this__2016 * scaleTransform9._02,_this__0016 * scaleTransform9._10 + _this__1016 * scaleTransform9._11 + _this__2016 * scaleTransform9._12,_this__0016 * scaleTransform9._20 + _this__1016 * scaleTransform9._21 + _this__2016 * scaleTransform9._22,_this__0116 * scaleTransform9._00 + _this__1116 * scaleTransform9._01 + _this__2116 * scaleTransform9._02,_this__0116 * scaleTransform9._10 + _this__1116 * scaleTransform9._11 + _this__2116 * scaleTransform9._12,_this__0116 * scaleTransform9._20 + _this__1116 * scaleTransform9._21 + _this__2116 * scaleTransform9._22,_this__0216 * scaleTransform9._00 + _this__1216 * scaleTransform9._01 + _this__2216 * scaleTransform9._02,_this__0216 * scaleTransform9._10 + _this__1216 * scaleTransform9._11 + _this__2216 * scaleTransform9._12,_this__0216 * scaleTransform9._20 + _this__1216 * scaleTransform9._21 + _this__2216 * scaleTransform9._22);
		} else {
			var wid14 = Main.wid;
			var hi14 = Main.hi;
			var scaleTransform10 = Main.scaleTransform;
			var _this__0017 = 1;
			var _this__1017 = 0;
			var _this__2017 = wid14 / 2 - sv_x / 2;
			var _this__0117 = 0;
			var _this__1117 = 1;
			var _this__2117 = hi14 / 2 - sv_y / 2;
			var _this__0217 = 0;
			var _this__1217 = 0;
			var _this__2217 = 1;
			mA = new kha_math_FastMatrix3(_this__0017 * scaleTransform10._00 + _this__1017 * scaleTransform10._01 + _this__2017 * scaleTransform10._02,_this__0017 * scaleTransform10._10 + _this__1017 * scaleTransform10._11 + _this__2017 * scaleTransform10._12,_this__0017 * scaleTransform10._20 + _this__1017 * scaleTransform10._21 + _this__2017 * scaleTransform10._22,_this__0117 * scaleTransform10._00 + _this__1117 * scaleTransform10._01 + _this__2117 * scaleTransform10._02,_this__0117 * scaleTransform10._10 + _this__1117 * scaleTransform10._11 + _this__2117 * scaleTransform10._12,_this__0117 * scaleTransform10._20 + _this__1117 * scaleTransform10._21 + _this__2117 * scaleTransform10._22,_this__0217 * scaleTransform10._00 + _this__1217 * scaleTransform10._01 + _this__2217 * scaleTransform10._02,_this__0217 * scaleTransform10._10 + _this__1217 * scaleTransform10._11 + _this__2217 * scaleTransform10._12,_this__0217 * scaleTransform10._20 + _this__1217 * scaleTransform10._21 + _this__2217 * scaleTransform10._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderA * 2 + sv_y < hi) {
			var _this__0018 = 1;
			var _this__1018 = 0;
			var _this__2018 = wid / 2 - sv_x / 2;
			var _this__0118 = 0;
			var _this__1118 = 1;
			var _this__2118 = hi - sv_y - borderA;
			var _this__0218 = 0;
			var _this__1218 = 0;
			var _this__2218 = 1;
			mA = new kha_math_FastMatrix3(_this__0018 * scaleTransform1._00 + _this__1018 * scaleTransform1._01 + _this__2018 * scaleTransform1._02,_this__0018 * scaleTransform1._10 + _this__1018 * scaleTransform1._11 + _this__2018 * scaleTransform1._12,_this__0018 * scaleTransform1._20 + _this__1018 * scaleTransform1._21 + _this__2018 * scaleTransform1._22,_this__0118 * scaleTransform1._00 + _this__1118 * scaleTransform1._01 + _this__2118 * scaleTransform1._02,_this__0118 * scaleTransform1._10 + _this__1118 * scaleTransform1._11 + _this__2118 * scaleTransform1._12,_this__0118 * scaleTransform1._20 + _this__1118 * scaleTransform1._21 + _this__2118 * scaleTransform1._22,_this__0218 * scaleTransform1._00 + _this__1218 * scaleTransform1._01 + _this__2218 * scaleTransform1._02,_this__0218 * scaleTransform1._10 + _this__1218 * scaleTransform1._11 + _this__2218 * scaleTransform1._12,_this__0218 * scaleTransform1._20 + _this__1218 * scaleTransform1._21 + _this__2218 * scaleTransform1._22);
		} else {
			var wid15 = Main.wid;
			var hi15 = Main.hi;
			var scaleTransform11 = Main.scaleTransform;
			var _this__0019 = 1;
			var _this__1019 = 0;
			var _this__2019 = wid15 / 2 - sv_x / 2;
			var _this__0119 = 0;
			var _this__1119 = 1;
			var _this__2119 = hi15 / 2 - sv_y / 2;
			var _this__0219 = 0;
			var _this__1219 = 0;
			var _this__2219 = 1;
			mA = new kha_math_FastMatrix3(_this__0019 * scaleTransform11._00 + _this__1019 * scaleTransform11._01 + _this__2019 * scaleTransform11._02,_this__0019 * scaleTransform11._10 + _this__1019 * scaleTransform11._11 + _this__2019 * scaleTransform11._12,_this__0019 * scaleTransform11._20 + _this__1019 * scaleTransform11._21 + _this__2019 * scaleTransform11._22,_this__0119 * scaleTransform11._00 + _this__1119 * scaleTransform11._01 + _this__2119 * scaleTransform11._02,_this__0119 * scaleTransform11._10 + _this__1119 * scaleTransform11._11 + _this__2119 * scaleTransform11._12,_this__0119 * scaleTransform11._20 + _this__1119 * scaleTransform11._21 + _this__2119 * scaleTransform11._22,_this__0219 * scaleTransform11._00 + _this__1219 * scaleTransform11._01 + _this__2219 * scaleTransform11._02,_this__0219 * scaleTransform11._10 + _this__1219 * scaleTransform11._11 + _this__2219 * scaleTransform11._12,_this__0219 * scaleTransform11._20 + _this__1219 * scaleTransform11._21 + _this__2219 * scaleTransform11._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderA * 2 + sv_y < hi) {
			var _this__0020 = 1;
			var _this__1020 = 0;
			var _this__2020 = wid / 2 - sv_x / 2;
			var _this__0120 = 0;
			var _this__1120 = 1;
			var _this__2120 = borderA;
			var _this__0220 = 0;
			var _this__1220 = 0;
			var _this__2220 = 1;
			mA = new kha_math_FastMatrix3(_this__0020 * scaleTransform1._00 + _this__1020 * scaleTransform1._01 + _this__2020 * scaleTransform1._02,_this__0020 * scaleTransform1._10 + _this__1020 * scaleTransform1._11 + _this__2020 * scaleTransform1._12,_this__0020 * scaleTransform1._20 + _this__1020 * scaleTransform1._21 + _this__2020 * scaleTransform1._22,_this__0120 * scaleTransform1._00 + _this__1120 * scaleTransform1._01 + _this__2120 * scaleTransform1._02,_this__0120 * scaleTransform1._10 + _this__1120 * scaleTransform1._11 + _this__2120 * scaleTransform1._12,_this__0120 * scaleTransform1._20 + _this__1120 * scaleTransform1._21 + _this__2120 * scaleTransform1._22,_this__0220 * scaleTransform1._00 + _this__1220 * scaleTransform1._01 + _this__2220 * scaleTransform1._02,_this__0220 * scaleTransform1._10 + _this__1220 * scaleTransform1._11 + _this__2220 * scaleTransform1._12,_this__0220 * scaleTransform1._20 + _this__1220 * scaleTransform1._21 + _this__2220 * scaleTransform1._22);
		} else {
			var wid16 = Main.wid;
			var hi16 = Main.hi;
			var scaleTransform12 = Main.scaleTransform;
			var _this__0021 = 1;
			var _this__1021 = 0;
			var _this__2021 = wid16 / 2 - sv_x / 2;
			var _this__0121 = 0;
			var _this__1121 = 1;
			var _this__2121 = hi16 / 2 - sv_y / 2;
			var _this__0221 = 0;
			var _this__1221 = 0;
			var _this__2221 = 1;
			mA = new kha_math_FastMatrix3(_this__0021 * scaleTransform12._00 + _this__1021 * scaleTransform12._01 + _this__2021 * scaleTransform12._02,_this__0021 * scaleTransform12._10 + _this__1021 * scaleTransform12._11 + _this__2021 * scaleTransform12._12,_this__0021 * scaleTransform12._20 + _this__1021 * scaleTransform12._21 + _this__2021 * scaleTransform12._22,_this__0121 * scaleTransform12._00 + _this__1121 * scaleTransform12._01 + _this__2121 * scaleTransform12._02,_this__0121 * scaleTransform12._10 + _this__1121 * scaleTransform12._11 + _this__2121 * scaleTransform12._12,_this__0121 * scaleTransform12._20 + _this__1121 * scaleTransform12._21 + _this__2121 * scaleTransform12._22,_this__0221 * scaleTransform12._00 + _this__1221 * scaleTransform12._01 + _this__2221 * scaleTransform12._02,_this__0221 * scaleTransform12._10 + _this__1221 * scaleTransform12._11 + _this__2221 * scaleTransform12._12,_this__0221 * scaleTransform12._20 + _this__1221 * scaleTransform12._21 + _this__2221 * scaleTransform12._22);
		}
		break;
	}
	var scaleTransform13 = Main.scaleTransform;
	var v_x1 = w;
	var v_y1 = h;
	var w8 = scaleTransform13._02 * v_x1 + scaleTransform13._12 * v_y1 + scaleTransform13._22;
	var x6 = (scaleTransform13._00 * v_x1 + scaleTransform13._10 * v_y1 + scaleTransform13._20) / w8;
	var y6 = (scaleTransform13._01 * v_x1 + scaleTransform13._11 * v_y1 + scaleTransform13._21) / w8;
	var sv_x6 = x6;
	var sv_y6 = y6;
	var wid17 = Main.wid;
	var hi17 = Main.hi;
	var scaleTransform14 = Main.scaleTransform;
	var mB;
	switch(b._hx_index) {
	case 2:case 7:
		var wid18 = Main.wid;
		var hi18 = Main.hi;
		var w25 = wid18 - borderB * 2;
		var h25 = hi18 - borderB * 2;
		var dw5 = w25 - w;
		var dh5 = h25 - h;
		var scale5 = dw5 < dh5 ? w25 / w : h25 / h;
		if(scale5 < 0) {
			scale5 = 0.;
		}
		var scaleTransform__005 = scale5;
		var scaleTransform__105 = 0;
		var scaleTransform__205 = 0;
		var scaleTransform__015 = 0;
		var scaleTransform__115 = scale5;
		var scaleTransform__215 = 0;
		var scaleTransform__025 = 0;
		var scaleTransform__125 = 0;
		var scaleTransform__225 = 1;
		var value_x5 = w;
		var value_y5 = h;
		var w9 = scaleTransform__025 * value_x5 + scaleTransform__125 * value_y5 + scaleTransform__225;
		var x7 = (scaleTransform__005 * value_x5 + scaleTransform__105 * value_y5 + scaleTransform__205) / w9;
		var y7 = (scaleTransform__015 * value_x5 + scaleTransform__115 * value_y5 + scaleTransform__215) / w9;
		var sv_x7 = x7;
		var sv_y7 = y7;
		var _this__0022 = 1;
		var _this__1022 = 0;
		var _this__2022 = wid18 - sv_x7 - borderB;
		var _this__0122 = 0;
		var _this__1122 = 1;
		var _this__2122 = hi18 / 2 - sv_y7 / 2;
		var _this__0222 = 0;
		var _this__1222 = 0;
		var _this__2222 = 1;
		mB = new kha_math_FastMatrix3(_this__0022 * scaleTransform__005 + _this__1022 * scaleTransform__015 + _this__2022 * scaleTransform__025,_this__0022 * scaleTransform__105 + _this__1022 * scaleTransform__115 + _this__2022 * scaleTransform__125,_this__0022 * scaleTransform__205 + _this__1022 * scaleTransform__215 + _this__2022 * scaleTransform__225,_this__0122 * scaleTransform__005 + _this__1122 * scaleTransform__015 + _this__2122 * scaleTransform__025,_this__0122 * scaleTransform__105 + _this__1122 * scaleTransform__115 + _this__2122 * scaleTransform__125,_this__0122 * scaleTransform__205 + _this__1122 * scaleTransform__215 + _this__2122 * scaleTransform__225,_this__0222 * scaleTransform__005 + _this__1222 * scaleTransform__015 + _this__2222 * scaleTransform__025,_this__0222 * scaleTransform__105 + _this__1222 * scaleTransform__115 + _this__2222 * scaleTransform__125,_this__0222 * scaleTransform__205 + _this__1222 * scaleTransform__215 + _this__2222 * scaleTransform__225);
		break;
	case 0:case 5:
		var wid19 = Main.wid;
		var hi19 = Main.hi;
		var w26 = wid19 - borderB * 2;
		var h26 = hi19 - borderB * 2;
		var dw6 = w26 - w;
		var dh6 = h26 - h;
		var scale6 = dw6 < dh6 ? w26 / w : h26 / h;
		if(scale6 < 0) {
			scale6 = 0.;
		}
		var scaleTransform__006 = scale6;
		var scaleTransform__106 = 0;
		var scaleTransform__206 = 0;
		var scaleTransform__016 = 0;
		var scaleTransform__116 = scale6;
		var scaleTransform__216 = 0;
		var scaleTransform__026 = 0;
		var scaleTransform__126 = 0;
		var scaleTransform__226 = 1;
		var value_x6 = w;
		var value_y6 = h;
		var w10 = scaleTransform__026 * value_x6 + scaleTransform__126 * value_y6 + scaleTransform__226;
		var x8 = (scaleTransform__006 * value_x6 + scaleTransform__106 * value_y6 + scaleTransform__206) / w10;
		var y8 = (scaleTransform__016 * value_x6 + scaleTransform__116 * value_y6 + scaleTransform__216) / w10;
		var sv_x8 = x8;
		var sv_y8 = y8;
		var _this__0023 = 1;
		var _this__1023 = 0;
		var _this__2023 = wid19 / 2 - sv_x8 / 2;
		var _this__0123 = 0;
		var _this__1123 = 1;
		var _this__2123 = hi19 / 2 - sv_y8 / 2;
		var _this__0223 = 0;
		var _this__1223 = 0;
		var _this__2223 = 1;
		mB = new kha_math_FastMatrix3(_this__0023 * scaleTransform__006 + _this__1023 * scaleTransform__016 + _this__2023 * scaleTransform__026,_this__0023 * scaleTransform__106 + _this__1023 * scaleTransform__116 + _this__2023 * scaleTransform__126,_this__0023 * scaleTransform__206 + _this__1023 * scaleTransform__216 + _this__2023 * scaleTransform__226,_this__0123 * scaleTransform__006 + _this__1123 * scaleTransform__016 + _this__2123 * scaleTransform__026,_this__0123 * scaleTransform__106 + _this__1123 * scaleTransform__116 + _this__2123 * scaleTransform__126,_this__0123 * scaleTransform__206 + _this__1123 * scaleTransform__216 + _this__2123 * scaleTransform__226,_this__0223 * scaleTransform__006 + _this__1223 * scaleTransform__016 + _this__2223 * scaleTransform__026,_this__0223 * scaleTransform__106 + _this__1223 * scaleTransform__116 + _this__2223 * scaleTransform__126,_this__0223 * scaleTransform__206 + _this__1223 * scaleTransform__216 + _this__2223 * scaleTransform__226);
		break;
	case 1:case 6:
		var wid20 = Main.wid;
		var hi20 = Main.hi;
		var w27 = wid20 - borderB * 2;
		var h27 = hi20 - borderB * 2;
		var dw7 = w27 - w;
		var dh7 = h27 - h;
		var scale7 = dw7 < dh7 ? w27 / w : h27 / h;
		if(scale7 < 0) {
			scale7 = 0.;
		}
		var scaleTransform__007 = scale7;
		var scaleTransform__107 = 0;
		var scaleTransform__207 = 0;
		var scaleTransform__017 = 0;
		var scaleTransform__117 = scale7;
		var scaleTransform__217 = 0;
		var scaleTransform__027 = 0;
		var scaleTransform__127 = 0;
		var scaleTransform__227 = 1;
		var value_x7 = w;
		var value_y7 = h;
		var w11 = scaleTransform__027 * value_x7 + scaleTransform__127 * value_y7 + scaleTransform__227;
		var x9 = (scaleTransform__007 * value_x7 + scaleTransform__107 * value_y7 + scaleTransform__207) / w11;
		var y9 = (scaleTransform__017 * value_x7 + scaleTransform__117 * value_y7 + scaleTransform__217) / w11;
		var sv_x9 = x9;
		var sv_y9 = y9;
		var _this__0024 = 1;
		var _this__1024 = 0;
		var _this__2024 = borderB;
		var _this__0124 = 0;
		var _this__1124 = 1;
		var _this__2124 = hi20 / 2 - sv_y9 / 2;
		var _this__0224 = 0;
		var _this__1224 = 0;
		var _this__2224 = 1;
		mB = new kha_math_FastMatrix3(_this__0024 * scaleTransform__007 + _this__1024 * scaleTransform__017 + _this__2024 * scaleTransform__027,_this__0024 * scaleTransform__107 + _this__1024 * scaleTransform__117 + _this__2024 * scaleTransform__127,_this__0024 * scaleTransform__207 + _this__1024 * scaleTransform__217 + _this__2024 * scaleTransform__227,_this__0124 * scaleTransform__007 + _this__1124 * scaleTransform__017 + _this__2124 * scaleTransform__027,_this__0124 * scaleTransform__107 + _this__1124 * scaleTransform__117 + _this__2124 * scaleTransform__127,_this__0124 * scaleTransform__207 + _this__1124 * scaleTransform__217 + _this__2124 * scaleTransform__227,_this__0224 * scaleTransform__007 + _this__1224 * scaleTransform__017 + _this__2224 * scaleTransform__027,_this__0224 * scaleTransform__107 + _this__1224 * scaleTransform__117 + _this__2224 * scaleTransform__127,_this__0224 * scaleTransform__207 + _this__1224 * scaleTransform__217 + _this__2224 * scaleTransform__227);
		break;
	case 3:case 8:
		var wid21 = Main.wid;
		var hi21 = Main.hi;
		var w28 = wid21 - borderB * 2;
		var h28 = hi21 - borderB * 2;
		var dw8 = w28 - w;
		var dh8 = h28 - h;
		var scale8 = dw8 < dh8 ? w28 / w : h28 / h;
		if(scale8 < 0) {
			scale8 = 0.;
		}
		var scaleTransform__008 = scale8;
		var scaleTransform__108 = 0;
		var scaleTransform__208 = 0;
		var scaleTransform__018 = 0;
		var scaleTransform__118 = scale8;
		var scaleTransform__218 = 0;
		var scaleTransform__028 = 0;
		var scaleTransform__128 = 0;
		var scaleTransform__228 = 1;
		var value_x8 = w;
		var value_y8 = h;
		var w12 = scaleTransform__028 * value_x8 + scaleTransform__128 * value_y8 + scaleTransform__228;
		var x10 = (scaleTransform__008 * value_x8 + scaleTransform__108 * value_y8 + scaleTransform__208) / w12;
		var y10 = (scaleTransform__018 * value_x8 + scaleTransform__118 * value_y8 + scaleTransform__218) / w12;
		var sv_x10 = x10;
		var sv_y10 = y10;
		var _this__0025 = 1;
		var _this__1025 = 0;
		var _this__2025 = wid21 / 2 - sv_x10 / 2;
		var _this__0125 = 0;
		var _this__1125 = 1;
		var _this__2125 = borderB;
		var _this__0225 = 0;
		var _this__1225 = 0;
		var _this__2225 = 1;
		mB = new kha_math_FastMatrix3(_this__0025 * scaleTransform__008 + _this__1025 * scaleTransform__018 + _this__2025 * scaleTransform__028,_this__0025 * scaleTransform__108 + _this__1025 * scaleTransform__118 + _this__2025 * scaleTransform__128,_this__0025 * scaleTransform__208 + _this__1025 * scaleTransform__218 + _this__2025 * scaleTransform__228,_this__0125 * scaleTransform__008 + _this__1125 * scaleTransform__018 + _this__2125 * scaleTransform__028,_this__0125 * scaleTransform__108 + _this__1125 * scaleTransform__118 + _this__2125 * scaleTransform__128,_this__0125 * scaleTransform__208 + _this__1125 * scaleTransform__218 + _this__2125 * scaleTransform__228,_this__0225 * scaleTransform__008 + _this__1225 * scaleTransform__018 + _this__2225 * scaleTransform__028,_this__0225 * scaleTransform__108 + _this__1225 * scaleTransform__118 + _this__2225 * scaleTransform__128,_this__0225 * scaleTransform__208 + _this__1225 * scaleTransform__218 + _this__2225 * scaleTransform__228);
		break;
	case 4:case 9:
		var wid22 = Main.wid;
		var hi22 = Main.hi;
		var w29 = wid22 - borderB * 2;
		var h29 = hi22 - borderB * 2;
		var dw9 = w29 - w;
		var dh9 = h29 - h;
		var scale9 = dw9 < dh9 ? w29 / w : h29 / h;
		if(scale9 < 0) {
			scale9 = 0.;
		}
		var scaleTransform__009 = scale9;
		var scaleTransform__109 = 0;
		var scaleTransform__209 = 0;
		var scaleTransform__019 = 0;
		var scaleTransform__119 = scale9;
		var scaleTransform__219 = 0;
		var scaleTransform__029 = 0;
		var scaleTransform__129 = 0;
		var scaleTransform__229 = 1;
		var value_x9 = w;
		var value_y9 = h;
		var w13 = scaleTransform__029 * value_x9 + scaleTransform__129 * value_y9 + scaleTransform__229;
		var x11 = (scaleTransform__009 * value_x9 + scaleTransform__109 * value_y9 + scaleTransform__209) / w13;
		var y11 = (scaleTransform__019 * value_x9 + scaleTransform__119 * value_y9 + scaleTransform__219) / w13;
		var sv_x11 = x11;
		var sv_y11 = y11;
		var _this__0026 = 1;
		var _this__1026 = 0;
		var _this__2026 = wid22 / 2 - sv_x11 / 2;
		var _this__0126 = 0;
		var _this__1126 = 1;
		var _this__2126 = hi22 - sv_y11 - borderB;
		var _this__0226 = 0;
		var _this__1226 = 0;
		var _this__2226 = 1;
		mB = new kha_math_FastMatrix3(_this__0026 * scaleTransform__009 + _this__1026 * scaleTransform__019 + _this__2026 * scaleTransform__029,_this__0026 * scaleTransform__109 + _this__1026 * scaleTransform__119 + _this__2026 * scaleTransform__129,_this__0026 * scaleTransform__209 + _this__1026 * scaleTransform__219 + _this__2026 * scaleTransform__229,_this__0126 * scaleTransform__009 + _this__1126 * scaleTransform__019 + _this__2126 * scaleTransform__029,_this__0126 * scaleTransform__109 + _this__1126 * scaleTransform__119 + _this__2126 * scaleTransform__129,_this__0126 * scaleTransform__209 + _this__1126 * scaleTransform__219 + _this__2126 * scaleTransform__229,_this__0226 * scaleTransform__009 + _this__1226 * scaleTransform__019 + _this__2226 * scaleTransform__029,_this__0226 * scaleTransform__109 + _this__1226 * scaleTransform__119 + _this__2226 * scaleTransform__129,_this__0226 * scaleTransform__209 + _this__1226 * scaleTransform__219 + _this__2226 * scaleTransform__229);
		break;
	case 10:case 11:
		if(borderB * 2 + sv_x6 < wid17) {
			var _this__0027 = 1;
			var _this__1027 = 0;
			var _this__2027 = borderB;
			var _this__0127 = 0;
			var _this__1127 = 1;
			var _this__2127 = borderB;
			var _this__0227 = 0;
			var _this__1227 = 0;
			var _this__2227 = 1;
			mB = new kha_math_FastMatrix3(_this__0027 * scaleTransform14._00 + _this__1027 * scaleTransform14._01 + _this__2027 * scaleTransform14._02,_this__0027 * scaleTransform14._10 + _this__1027 * scaleTransform14._11 + _this__2027 * scaleTransform14._12,_this__0027 * scaleTransform14._20 + _this__1027 * scaleTransform14._21 + _this__2027 * scaleTransform14._22,_this__0127 * scaleTransform14._00 + _this__1127 * scaleTransform14._01 + _this__2127 * scaleTransform14._02,_this__0127 * scaleTransform14._10 + _this__1127 * scaleTransform14._11 + _this__2127 * scaleTransform14._12,_this__0127 * scaleTransform14._20 + _this__1127 * scaleTransform14._21 + _this__2127 * scaleTransform14._22,_this__0227 * scaleTransform14._00 + _this__1227 * scaleTransform14._01 + _this__2227 * scaleTransform14._02,_this__0227 * scaleTransform14._10 + _this__1227 * scaleTransform14._11 + _this__2227 * scaleTransform14._12,_this__0227 * scaleTransform14._20 + _this__1227 * scaleTransform14._21 + _this__2227 * scaleTransform14._22);
		} else {
			var wid23 = Main.wid;
			var hi23 = Main.hi;
			var scaleTransform15 = Main.scaleTransform;
			var _this__0028 = 1;
			var _this__1028 = 0;
			var _this__2028 = borderB;
			var _this__0128 = 0;
			var _this__1128 = 1;
			var _this__2128 = hi23 / 2 - sv_y6 / 2;
			var _this__0228 = 0;
			var _this__1228 = 0;
			var _this__2228 = 1;
			mB = new kha_math_FastMatrix3(_this__0028 * scaleTransform15._00 + _this__1028 * scaleTransform15._01 + _this__2028 * scaleTransform15._02,_this__0028 * scaleTransform15._10 + _this__1028 * scaleTransform15._11 + _this__2028 * scaleTransform15._12,_this__0028 * scaleTransform15._20 + _this__1028 * scaleTransform15._21 + _this__2028 * scaleTransform15._22,_this__0128 * scaleTransform15._00 + _this__1128 * scaleTransform15._01 + _this__2128 * scaleTransform15._02,_this__0128 * scaleTransform15._10 + _this__1128 * scaleTransform15._11 + _this__2128 * scaleTransform15._12,_this__0128 * scaleTransform15._20 + _this__1128 * scaleTransform15._21 + _this__2128 * scaleTransform15._22,_this__0228 * scaleTransform15._00 + _this__1228 * scaleTransform15._01 + _this__2228 * scaleTransform15._02,_this__0228 * scaleTransform15._10 + _this__1228 * scaleTransform15._11 + _this__2228 * scaleTransform15._12,_this__0228 * scaleTransform15._20 + _this__1228 * scaleTransform15._21 + _this__2228 * scaleTransform15._22);
		}
		break;
	case 12:case 13:
		if(borderB * 2 + sv_x6 < wid17) {
			var _this__0029 = 1;
			var _this__1029 = 0;
			var _this__2029 = wid17 - sv_x6 - borderB;
			var _this__0129 = 0;
			var _this__1129 = 1;
			var _this__2129 = borderB;
			var _this__0229 = 0;
			var _this__1229 = 0;
			var _this__2229 = 1;
			mB = new kha_math_FastMatrix3(_this__0029 * scaleTransform14._00 + _this__1029 * scaleTransform14._01 + _this__2029 * scaleTransform14._02,_this__0029 * scaleTransform14._10 + _this__1029 * scaleTransform14._11 + _this__2029 * scaleTransform14._12,_this__0029 * scaleTransform14._20 + _this__1029 * scaleTransform14._21 + _this__2029 * scaleTransform14._22,_this__0129 * scaleTransform14._00 + _this__1129 * scaleTransform14._01 + _this__2129 * scaleTransform14._02,_this__0129 * scaleTransform14._10 + _this__1129 * scaleTransform14._11 + _this__2129 * scaleTransform14._12,_this__0129 * scaleTransform14._20 + _this__1129 * scaleTransform14._21 + _this__2129 * scaleTransform14._22,_this__0229 * scaleTransform14._00 + _this__1229 * scaleTransform14._01 + _this__2229 * scaleTransform14._02,_this__0229 * scaleTransform14._10 + _this__1229 * scaleTransform14._11 + _this__2229 * scaleTransform14._12,_this__0229 * scaleTransform14._20 + _this__1229 * scaleTransform14._21 + _this__2229 * scaleTransform14._22);
		} else {
			var wid24 = Main.wid;
			var hi24 = Main.hi;
			var scaleTransform16 = Main.scaleTransform;
			var _this__0030 = 1;
			var _this__1030 = 0;
			var _this__2030 = wid24 - sv_x6 - borderB;
			var _this__0130 = 0;
			var _this__1130 = 1;
			var _this__2130 = hi24 / 2 - sv_y6 / 2;
			var _this__0230 = 0;
			var _this__1230 = 0;
			var _this__2230 = 1;
			mB = new kha_math_FastMatrix3(_this__0030 * scaleTransform16._00 + _this__1030 * scaleTransform16._01 + _this__2030 * scaleTransform16._02,_this__0030 * scaleTransform16._10 + _this__1030 * scaleTransform16._11 + _this__2030 * scaleTransform16._12,_this__0030 * scaleTransform16._20 + _this__1030 * scaleTransform16._21 + _this__2030 * scaleTransform16._22,_this__0130 * scaleTransform16._00 + _this__1130 * scaleTransform16._01 + _this__2130 * scaleTransform16._02,_this__0130 * scaleTransform16._10 + _this__1130 * scaleTransform16._11 + _this__2130 * scaleTransform16._12,_this__0130 * scaleTransform16._20 + _this__1130 * scaleTransform16._21 + _this__2130 * scaleTransform16._22,_this__0230 * scaleTransform16._00 + _this__1230 * scaleTransform16._01 + _this__2230 * scaleTransform16._02,_this__0230 * scaleTransform16._10 + _this__1230 * scaleTransform16._11 + _this__2230 * scaleTransform16._12,_this__0230 * scaleTransform16._20 + _this__1230 * scaleTransform16._21 + _this__2230 * scaleTransform16._22);
		}
		break;
	case 14:case 15:
		if(borderB * 2 + sv_y6 < hi17) {
			var _this__0031 = 1;
			var _this__1031 = 0;
			var _this__2031 = borderB;
			var _this__0131 = 0;
			var _this__1131 = 1;
			var _this__2131 = hi17 - sv_y6 - borderB;
			var _this__0231 = 0;
			var _this__1231 = 0;
			var _this__2231 = 1;
			mB = new kha_math_FastMatrix3(_this__0031 * scaleTransform14._00 + _this__1031 * scaleTransform14._01 + _this__2031 * scaleTransform14._02,_this__0031 * scaleTransform14._10 + _this__1031 * scaleTransform14._11 + _this__2031 * scaleTransform14._12,_this__0031 * scaleTransform14._20 + _this__1031 * scaleTransform14._21 + _this__2031 * scaleTransform14._22,_this__0131 * scaleTransform14._00 + _this__1131 * scaleTransform14._01 + _this__2131 * scaleTransform14._02,_this__0131 * scaleTransform14._10 + _this__1131 * scaleTransform14._11 + _this__2131 * scaleTransform14._12,_this__0131 * scaleTransform14._20 + _this__1131 * scaleTransform14._21 + _this__2131 * scaleTransform14._22,_this__0231 * scaleTransform14._00 + _this__1231 * scaleTransform14._01 + _this__2231 * scaleTransform14._02,_this__0231 * scaleTransform14._10 + _this__1231 * scaleTransform14._11 + _this__2231 * scaleTransform14._12,_this__0231 * scaleTransform14._20 + _this__1231 * scaleTransform14._21 + _this__2231 * scaleTransform14._22);
		} else {
			var wid25 = Main.wid;
			var hi25 = Main.hi;
			var scaleTransform17 = Main.scaleTransform;
			var _this__0032 = 1;
			var _this__1032 = 0;
			var _this__2032 = borderB;
			var _this__0132 = 0;
			var _this__1132 = 1;
			var _this__2132 = hi25 / 2 - sv_y6 / 2;
			var _this__0232 = 0;
			var _this__1232 = 0;
			var _this__2232 = 1;
			mB = new kha_math_FastMatrix3(_this__0032 * scaleTransform17._00 + _this__1032 * scaleTransform17._01 + _this__2032 * scaleTransform17._02,_this__0032 * scaleTransform17._10 + _this__1032 * scaleTransform17._11 + _this__2032 * scaleTransform17._12,_this__0032 * scaleTransform17._20 + _this__1032 * scaleTransform17._21 + _this__2032 * scaleTransform17._22,_this__0132 * scaleTransform17._00 + _this__1132 * scaleTransform17._01 + _this__2132 * scaleTransform17._02,_this__0132 * scaleTransform17._10 + _this__1132 * scaleTransform17._11 + _this__2132 * scaleTransform17._12,_this__0132 * scaleTransform17._20 + _this__1132 * scaleTransform17._21 + _this__2132 * scaleTransform17._22,_this__0232 * scaleTransform17._00 + _this__1232 * scaleTransform17._01 + _this__2232 * scaleTransform17._02,_this__0232 * scaleTransform17._10 + _this__1232 * scaleTransform17._11 + _this__2232 * scaleTransform17._12,_this__0232 * scaleTransform17._20 + _this__1232 * scaleTransform17._21 + _this__2232 * scaleTransform17._22);
		}
		break;
	case 16:case 17:
		if(borderB * 2 + sv_y6 < hi17) {
			var _this__0033 = 1;
			var _this__1033 = 0;
			var _this__2033 = wid17 - sv_x6 - borderB;
			var _this__0133 = 0;
			var _this__1133 = 1;
			var _this__2133 = hi17 - sv_y6 - borderB;
			var _this__0233 = 0;
			var _this__1233 = 0;
			var _this__2233 = 1;
			mB = new kha_math_FastMatrix3(_this__0033 * scaleTransform14._00 + _this__1033 * scaleTransform14._01 + _this__2033 * scaleTransform14._02,_this__0033 * scaleTransform14._10 + _this__1033 * scaleTransform14._11 + _this__2033 * scaleTransform14._12,_this__0033 * scaleTransform14._20 + _this__1033 * scaleTransform14._21 + _this__2033 * scaleTransform14._22,_this__0133 * scaleTransform14._00 + _this__1133 * scaleTransform14._01 + _this__2133 * scaleTransform14._02,_this__0133 * scaleTransform14._10 + _this__1133 * scaleTransform14._11 + _this__2133 * scaleTransform14._12,_this__0133 * scaleTransform14._20 + _this__1133 * scaleTransform14._21 + _this__2133 * scaleTransform14._22,_this__0233 * scaleTransform14._00 + _this__1233 * scaleTransform14._01 + _this__2233 * scaleTransform14._02,_this__0233 * scaleTransform14._10 + _this__1233 * scaleTransform14._11 + _this__2233 * scaleTransform14._12,_this__0233 * scaleTransform14._20 + _this__1233 * scaleTransform14._21 + _this__2233 * scaleTransform14._22);
		} else {
			var wid26 = Main.wid;
			var hi26 = Main.hi;
			var scaleTransform18 = Main.scaleTransform;
			var _this__0034 = 1;
			var _this__1034 = 0;
			var _this__2034 = wid26 - sv_x6 - borderB;
			var _this__0134 = 0;
			var _this__1134 = 1;
			var _this__2134 = hi26 / 2 - sv_y6 / 2;
			var _this__0234 = 0;
			var _this__1234 = 0;
			var _this__2234 = 1;
			mB = new kha_math_FastMatrix3(_this__0034 * scaleTransform18._00 + _this__1034 * scaleTransform18._01 + _this__2034 * scaleTransform18._02,_this__0034 * scaleTransform18._10 + _this__1034 * scaleTransform18._11 + _this__2034 * scaleTransform18._12,_this__0034 * scaleTransform18._20 + _this__1034 * scaleTransform18._21 + _this__2034 * scaleTransform18._22,_this__0134 * scaleTransform18._00 + _this__1134 * scaleTransform18._01 + _this__2134 * scaleTransform18._02,_this__0134 * scaleTransform18._10 + _this__1134 * scaleTransform18._11 + _this__2134 * scaleTransform18._12,_this__0134 * scaleTransform18._20 + _this__1134 * scaleTransform18._21 + _this__2134 * scaleTransform18._22,_this__0234 * scaleTransform18._00 + _this__1234 * scaleTransform18._01 + _this__2234 * scaleTransform18._02,_this__0234 * scaleTransform18._10 + _this__1234 * scaleTransform18._11 + _this__2234 * scaleTransform18._12,_this__0234 * scaleTransform18._20 + _this__1234 * scaleTransform18._21 + _this__2234 * scaleTransform18._22);
		}
		break;
	case 18:
		var wid27 = Main.wid;
		var hi27 = Main.hi;
		var scaleTransform19 = Main.scaleTransform;
		var _this__0035 = 1;
		var _this__1035 = 0;
		var _this__2035 = wid27 / 2 - sv_x6 / 2;
		var _this__0135 = 0;
		var _this__1135 = 1;
		var _this__2135 = hi27 / 2 - sv_y6 / 2;
		var _this__0235 = 0;
		var _this__1235 = 0;
		var _this__2235 = 1;
		mB = new kha_math_FastMatrix3(_this__0035 * scaleTransform19._00 + _this__1035 * scaleTransform19._01 + _this__2035 * scaleTransform19._02,_this__0035 * scaleTransform19._10 + _this__1035 * scaleTransform19._11 + _this__2035 * scaleTransform19._12,_this__0035 * scaleTransform19._20 + _this__1035 * scaleTransform19._21 + _this__2035 * scaleTransform19._22,_this__0135 * scaleTransform19._00 + _this__1135 * scaleTransform19._01 + _this__2135 * scaleTransform19._02,_this__0135 * scaleTransform19._10 + _this__1135 * scaleTransform19._11 + _this__2135 * scaleTransform19._12,_this__0135 * scaleTransform19._20 + _this__1135 * scaleTransform19._21 + _this__2135 * scaleTransform19._22,_this__0235 * scaleTransform19._00 + _this__1235 * scaleTransform19._01 + _this__2235 * scaleTransform19._02,_this__0235 * scaleTransform19._10 + _this__1235 * scaleTransform19._11 + _this__2235 * scaleTransform19._12,_this__0235 * scaleTransform19._20 + _this__1235 * scaleTransform19._21 + _this__2235 * scaleTransform19._22);
		break;
	case 19:case 20:case 21:
		if(borderB * 2 + sv_x6 < wid17) {
			var wid28 = Main.wid;
			var hi28 = Main.hi;
			var scaleTransform20 = Main.scaleTransform;
			var _this__0036 = 1;
			var _this__1036 = 0;
			var _this__2036 = borderB;
			var _this__0136 = 0;
			var _this__1136 = 1;
			var _this__2136 = hi28 / 2 - sv_y6 / 2;
			var _this__0236 = 0;
			var _this__1236 = 0;
			var _this__2236 = 1;
			mB = new kha_math_FastMatrix3(_this__0036 * scaleTransform20._00 + _this__1036 * scaleTransform20._01 + _this__2036 * scaleTransform20._02,_this__0036 * scaleTransform20._10 + _this__1036 * scaleTransform20._11 + _this__2036 * scaleTransform20._12,_this__0036 * scaleTransform20._20 + _this__1036 * scaleTransform20._21 + _this__2036 * scaleTransform20._22,_this__0136 * scaleTransform20._00 + _this__1136 * scaleTransform20._01 + _this__2136 * scaleTransform20._02,_this__0136 * scaleTransform20._10 + _this__1136 * scaleTransform20._11 + _this__2136 * scaleTransform20._12,_this__0136 * scaleTransform20._20 + _this__1136 * scaleTransform20._21 + _this__2136 * scaleTransform20._22,_this__0236 * scaleTransform20._00 + _this__1236 * scaleTransform20._01 + _this__2236 * scaleTransform20._02,_this__0236 * scaleTransform20._10 + _this__1236 * scaleTransform20._11 + _this__2236 * scaleTransform20._12,_this__0236 * scaleTransform20._20 + _this__1236 * scaleTransform20._21 + _this__2236 * scaleTransform20._22);
		} else {
			var wid29 = Main.wid;
			var hi29 = Main.hi;
			var scaleTransform21 = Main.scaleTransform;
			var _this__0037 = 1;
			var _this__1037 = 0;
			var _this__2037 = wid29 / 2 - sv_x6 / 2;
			var _this__0137 = 0;
			var _this__1137 = 1;
			var _this__2137 = hi29 / 2 - sv_y6 / 2;
			var _this__0237 = 0;
			var _this__1237 = 0;
			var _this__2237 = 1;
			mB = new kha_math_FastMatrix3(_this__0037 * scaleTransform21._00 + _this__1037 * scaleTransform21._01 + _this__2037 * scaleTransform21._02,_this__0037 * scaleTransform21._10 + _this__1037 * scaleTransform21._11 + _this__2037 * scaleTransform21._12,_this__0037 * scaleTransform21._20 + _this__1037 * scaleTransform21._21 + _this__2037 * scaleTransform21._22,_this__0137 * scaleTransform21._00 + _this__1137 * scaleTransform21._01 + _this__2137 * scaleTransform21._02,_this__0137 * scaleTransform21._10 + _this__1137 * scaleTransform21._11 + _this__2137 * scaleTransform21._12,_this__0137 * scaleTransform21._20 + _this__1137 * scaleTransform21._21 + _this__2137 * scaleTransform21._22,_this__0237 * scaleTransform21._00 + _this__1237 * scaleTransform21._01 + _this__2237 * scaleTransform21._02,_this__0237 * scaleTransform21._10 + _this__1237 * scaleTransform21._11 + _this__2237 * scaleTransform21._12,_this__0237 * scaleTransform21._20 + _this__1237 * scaleTransform21._21 + _this__2237 * scaleTransform21._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderB * 2 + sv_x6 < wid17) {
			var wid30 = Main.wid;
			var hi30 = Main.hi;
			var scaleTransform22 = Main.scaleTransform;
			var _this__0038 = 1;
			var _this__1038 = 0;
			var _this__2038 = wid30 - sv_x6 - borderB;
			var _this__0138 = 0;
			var _this__1138 = 1;
			var _this__2138 = hi30 / 2 - sv_y6 / 2;
			var _this__0238 = 0;
			var _this__1238 = 0;
			var _this__2238 = 1;
			mB = new kha_math_FastMatrix3(_this__0038 * scaleTransform22._00 + _this__1038 * scaleTransform22._01 + _this__2038 * scaleTransform22._02,_this__0038 * scaleTransform22._10 + _this__1038 * scaleTransform22._11 + _this__2038 * scaleTransform22._12,_this__0038 * scaleTransform22._20 + _this__1038 * scaleTransform22._21 + _this__2038 * scaleTransform22._22,_this__0138 * scaleTransform22._00 + _this__1138 * scaleTransform22._01 + _this__2138 * scaleTransform22._02,_this__0138 * scaleTransform22._10 + _this__1138 * scaleTransform22._11 + _this__2138 * scaleTransform22._12,_this__0138 * scaleTransform22._20 + _this__1138 * scaleTransform22._21 + _this__2138 * scaleTransform22._22,_this__0238 * scaleTransform22._00 + _this__1238 * scaleTransform22._01 + _this__2238 * scaleTransform22._02,_this__0238 * scaleTransform22._10 + _this__1238 * scaleTransform22._11 + _this__2238 * scaleTransform22._12,_this__0238 * scaleTransform22._20 + _this__1238 * scaleTransform22._21 + _this__2238 * scaleTransform22._22);
		} else {
			var wid31 = Main.wid;
			var hi31 = Main.hi;
			var scaleTransform23 = Main.scaleTransform;
			var _this__0039 = 1;
			var _this__1039 = 0;
			var _this__2039 = wid31 / 2 - sv_x6 / 2;
			var _this__0139 = 0;
			var _this__1139 = 1;
			var _this__2139 = hi31 / 2 - sv_y6 / 2;
			var _this__0239 = 0;
			var _this__1239 = 0;
			var _this__2239 = 1;
			mB = new kha_math_FastMatrix3(_this__0039 * scaleTransform23._00 + _this__1039 * scaleTransform23._01 + _this__2039 * scaleTransform23._02,_this__0039 * scaleTransform23._10 + _this__1039 * scaleTransform23._11 + _this__2039 * scaleTransform23._12,_this__0039 * scaleTransform23._20 + _this__1039 * scaleTransform23._21 + _this__2039 * scaleTransform23._22,_this__0139 * scaleTransform23._00 + _this__1139 * scaleTransform23._01 + _this__2139 * scaleTransform23._02,_this__0139 * scaleTransform23._10 + _this__1139 * scaleTransform23._11 + _this__2139 * scaleTransform23._12,_this__0139 * scaleTransform23._20 + _this__1139 * scaleTransform23._21 + _this__2139 * scaleTransform23._22,_this__0239 * scaleTransform23._00 + _this__1239 * scaleTransform23._01 + _this__2239 * scaleTransform23._02,_this__0239 * scaleTransform23._10 + _this__1239 * scaleTransform23._11 + _this__2239 * scaleTransform23._12,_this__0239 * scaleTransform23._20 + _this__1239 * scaleTransform23._21 + _this__2239 * scaleTransform23._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderB * 2 + sv_y6 < hi17) {
			var _this__0040 = 1;
			var _this__1040 = 0;
			var _this__2040 = wid17 / 2 - sv_x6 / 2;
			var _this__0140 = 0;
			var _this__1140 = 1;
			var _this__2140 = hi17 - sv_y6 - borderB;
			var _this__0240 = 0;
			var _this__1240 = 0;
			var _this__2240 = 1;
			mB = new kha_math_FastMatrix3(_this__0040 * scaleTransform14._00 + _this__1040 * scaleTransform14._01 + _this__2040 * scaleTransform14._02,_this__0040 * scaleTransform14._10 + _this__1040 * scaleTransform14._11 + _this__2040 * scaleTransform14._12,_this__0040 * scaleTransform14._20 + _this__1040 * scaleTransform14._21 + _this__2040 * scaleTransform14._22,_this__0140 * scaleTransform14._00 + _this__1140 * scaleTransform14._01 + _this__2140 * scaleTransform14._02,_this__0140 * scaleTransform14._10 + _this__1140 * scaleTransform14._11 + _this__2140 * scaleTransform14._12,_this__0140 * scaleTransform14._20 + _this__1140 * scaleTransform14._21 + _this__2140 * scaleTransform14._22,_this__0240 * scaleTransform14._00 + _this__1240 * scaleTransform14._01 + _this__2240 * scaleTransform14._02,_this__0240 * scaleTransform14._10 + _this__1240 * scaleTransform14._11 + _this__2240 * scaleTransform14._12,_this__0240 * scaleTransform14._20 + _this__1240 * scaleTransform14._21 + _this__2240 * scaleTransform14._22);
		} else {
			var wid32 = Main.wid;
			var hi32 = Main.hi;
			var scaleTransform24 = Main.scaleTransform;
			var _this__0041 = 1;
			var _this__1041 = 0;
			var _this__2041 = wid32 / 2 - sv_x6 / 2;
			var _this__0141 = 0;
			var _this__1141 = 1;
			var _this__2141 = hi32 / 2 - sv_y6 / 2;
			var _this__0241 = 0;
			var _this__1241 = 0;
			var _this__2241 = 1;
			mB = new kha_math_FastMatrix3(_this__0041 * scaleTransform24._00 + _this__1041 * scaleTransform24._01 + _this__2041 * scaleTransform24._02,_this__0041 * scaleTransform24._10 + _this__1041 * scaleTransform24._11 + _this__2041 * scaleTransform24._12,_this__0041 * scaleTransform24._20 + _this__1041 * scaleTransform24._21 + _this__2041 * scaleTransform24._22,_this__0141 * scaleTransform24._00 + _this__1141 * scaleTransform24._01 + _this__2141 * scaleTransform24._02,_this__0141 * scaleTransform24._10 + _this__1141 * scaleTransform24._11 + _this__2141 * scaleTransform24._12,_this__0141 * scaleTransform24._20 + _this__1141 * scaleTransform24._21 + _this__2141 * scaleTransform24._22,_this__0241 * scaleTransform24._00 + _this__1241 * scaleTransform24._01 + _this__2241 * scaleTransform24._02,_this__0241 * scaleTransform24._10 + _this__1241 * scaleTransform24._11 + _this__2241 * scaleTransform24._12,_this__0241 * scaleTransform24._20 + _this__1241 * scaleTransform24._21 + _this__2241 * scaleTransform24._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderB * 2 + sv_y6 < hi17) {
			var _this__0042 = 1;
			var _this__1042 = 0;
			var _this__2042 = wid17 / 2 - sv_x6 / 2;
			var _this__0142 = 0;
			var _this__1142 = 1;
			var _this__2142 = borderB;
			var _this__0242 = 0;
			var _this__1242 = 0;
			var _this__2242 = 1;
			mB = new kha_math_FastMatrix3(_this__0042 * scaleTransform14._00 + _this__1042 * scaleTransform14._01 + _this__2042 * scaleTransform14._02,_this__0042 * scaleTransform14._10 + _this__1042 * scaleTransform14._11 + _this__2042 * scaleTransform14._12,_this__0042 * scaleTransform14._20 + _this__1042 * scaleTransform14._21 + _this__2042 * scaleTransform14._22,_this__0142 * scaleTransform14._00 + _this__1142 * scaleTransform14._01 + _this__2142 * scaleTransform14._02,_this__0142 * scaleTransform14._10 + _this__1142 * scaleTransform14._11 + _this__2142 * scaleTransform14._12,_this__0142 * scaleTransform14._20 + _this__1142 * scaleTransform14._21 + _this__2142 * scaleTransform14._22,_this__0242 * scaleTransform14._00 + _this__1242 * scaleTransform14._01 + _this__2242 * scaleTransform14._02,_this__0242 * scaleTransform14._10 + _this__1242 * scaleTransform14._11 + _this__2242 * scaleTransform14._12,_this__0242 * scaleTransform14._20 + _this__1242 * scaleTransform14._21 + _this__2242 * scaleTransform14._22);
		} else {
			var wid33 = Main.wid;
			var hi33 = Main.hi;
			var scaleTransform25 = Main.scaleTransform;
			var _this__0043 = 1;
			var _this__1043 = 0;
			var _this__2043 = wid33 / 2 - sv_x6 / 2;
			var _this__0143 = 0;
			var _this__1143 = 1;
			var _this__2143 = hi33 / 2 - sv_y6 / 2;
			var _this__0243 = 0;
			var _this__1243 = 0;
			var _this__2243 = 1;
			mB = new kha_math_FastMatrix3(_this__0043 * scaleTransform25._00 + _this__1043 * scaleTransform25._01 + _this__2043 * scaleTransform25._02,_this__0043 * scaleTransform25._10 + _this__1043 * scaleTransform25._11 + _this__2043 * scaleTransform25._12,_this__0043 * scaleTransform25._20 + _this__1043 * scaleTransform25._21 + _this__2043 * scaleTransform25._22,_this__0143 * scaleTransform25._00 + _this__1143 * scaleTransform25._01 + _this__2143 * scaleTransform25._02,_this__0143 * scaleTransform25._10 + _this__1143 * scaleTransform25._11 + _this__2143 * scaleTransform25._12,_this__0143 * scaleTransform25._20 + _this__1143 * scaleTransform25._21 + _this__2143 * scaleTransform25._22,_this__0243 * scaleTransform25._00 + _this__1243 * scaleTransform25._01 + _this__2243 * scaleTransform25._02,_this__0243 * scaleTransform25._10 + _this__1243 * scaleTransform25._11 + _this__2243 * scaleTransform25._12,_this__0243 * scaleTransform25._20 + _this__1243 * scaleTransform25._21 + _this__2243 * scaleTransform25._22);
		}
		break;
	}
	var scaleTransform26 = Main.scaleTransform;
	var v_x2 = w;
	var v_y2 = h;
	var w14 = scaleTransform26._02 * v_x2 + scaleTransform26._12 * v_y2 + scaleTransform26._22;
	var x12 = (scaleTransform26._00 * v_x2 + scaleTransform26._10 * v_y2 + scaleTransform26._20) / w14;
	var y12 = (scaleTransform26._01 * v_x2 + scaleTransform26._11 * v_y2 + scaleTransform26._21) / w14;
	var sv_x12 = x12;
	var sv_y12 = y12;
	var wid34 = Main.wid;
	var hi34 = Main.hi;
	var scaleTransform27 = Main.scaleTransform;
	var mC;
	switch(c._hx_index) {
	case 2:case 7:
		var wid35 = Main.wid;
		var hi35 = Main.hi;
		var w210 = wid35 - borderC * 2;
		var h210 = hi35 - borderC * 2;
		var dw10 = w210 - w;
		var dh10 = h210 - h;
		var scale10 = dw10 < dh10 ? w210 / w : h210 / h;
		if(scale10 < 0) {
			scale10 = 0.;
		}
		var scaleTransform__0010 = scale10;
		var scaleTransform__1010 = 0;
		var scaleTransform__2010 = 0;
		var scaleTransform__0110 = 0;
		var scaleTransform__1110 = scale10;
		var scaleTransform__2110 = 0;
		var scaleTransform__0210 = 0;
		var scaleTransform__1210 = 0;
		var scaleTransform__2210 = 1;
		var value_x10 = w;
		var value_y10 = h;
		var w15 = scaleTransform__0210 * value_x10 + scaleTransform__1210 * value_y10 + scaleTransform__2210;
		var x13 = (scaleTransform__0010 * value_x10 + scaleTransform__1010 * value_y10 + scaleTransform__2010) / w15;
		var y13 = (scaleTransform__0110 * value_x10 + scaleTransform__1110 * value_y10 + scaleTransform__2110) / w15;
		var sv_x13 = x13;
		var sv_y13 = y13;
		var _this__0044 = 1;
		var _this__1044 = 0;
		var _this__2044 = wid35 - sv_x13 - borderC;
		var _this__0144 = 0;
		var _this__1144 = 1;
		var _this__2144 = hi35 / 2 - sv_y13 / 2;
		var _this__0244 = 0;
		var _this__1244 = 0;
		var _this__2244 = 1;
		mC = new kha_math_FastMatrix3(_this__0044 * scaleTransform__0010 + _this__1044 * scaleTransform__0110 + _this__2044 * scaleTransform__0210,_this__0044 * scaleTransform__1010 + _this__1044 * scaleTransform__1110 + _this__2044 * scaleTransform__1210,_this__0044 * scaleTransform__2010 + _this__1044 * scaleTransform__2110 + _this__2044 * scaleTransform__2210,_this__0144 * scaleTransform__0010 + _this__1144 * scaleTransform__0110 + _this__2144 * scaleTransform__0210,_this__0144 * scaleTransform__1010 + _this__1144 * scaleTransform__1110 + _this__2144 * scaleTransform__1210,_this__0144 * scaleTransform__2010 + _this__1144 * scaleTransform__2110 + _this__2144 * scaleTransform__2210,_this__0244 * scaleTransform__0010 + _this__1244 * scaleTransform__0110 + _this__2244 * scaleTransform__0210,_this__0244 * scaleTransform__1010 + _this__1244 * scaleTransform__1110 + _this__2244 * scaleTransform__1210,_this__0244 * scaleTransform__2010 + _this__1244 * scaleTransform__2110 + _this__2244 * scaleTransform__2210);
		break;
	case 0:case 5:
		var wid36 = Main.wid;
		var hi36 = Main.hi;
		var w211 = wid36 - borderC * 2;
		var h211 = hi36 - borderC * 2;
		var dw11 = w211 - w;
		var dh11 = h211 - h;
		var scale11 = dw11 < dh11 ? w211 / w : h211 / h;
		if(scale11 < 0) {
			scale11 = 0.;
		}
		var scaleTransform__0011 = scale11;
		var scaleTransform__1011 = 0;
		var scaleTransform__2011 = 0;
		var scaleTransform__0111 = 0;
		var scaleTransform__1111 = scale11;
		var scaleTransform__2111 = 0;
		var scaleTransform__0211 = 0;
		var scaleTransform__1211 = 0;
		var scaleTransform__2211 = 1;
		var value_x11 = w;
		var value_y11 = h;
		var w16 = scaleTransform__0211 * value_x11 + scaleTransform__1211 * value_y11 + scaleTransform__2211;
		var x14 = (scaleTransform__0011 * value_x11 + scaleTransform__1011 * value_y11 + scaleTransform__2011) / w16;
		var y14 = (scaleTransform__0111 * value_x11 + scaleTransform__1111 * value_y11 + scaleTransform__2111) / w16;
		var sv_x14 = x14;
		var sv_y14 = y14;
		var _this__0045 = 1;
		var _this__1045 = 0;
		var _this__2045 = wid36 / 2 - sv_x14 / 2;
		var _this__0145 = 0;
		var _this__1145 = 1;
		var _this__2145 = hi36 / 2 - sv_y14 / 2;
		var _this__0245 = 0;
		var _this__1245 = 0;
		var _this__2245 = 1;
		mC = new kha_math_FastMatrix3(_this__0045 * scaleTransform__0011 + _this__1045 * scaleTransform__0111 + _this__2045 * scaleTransform__0211,_this__0045 * scaleTransform__1011 + _this__1045 * scaleTransform__1111 + _this__2045 * scaleTransform__1211,_this__0045 * scaleTransform__2011 + _this__1045 * scaleTransform__2111 + _this__2045 * scaleTransform__2211,_this__0145 * scaleTransform__0011 + _this__1145 * scaleTransform__0111 + _this__2145 * scaleTransform__0211,_this__0145 * scaleTransform__1011 + _this__1145 * scaleTransform__1111 + _this__2145 * scaleTransform__1211,_this__0145 * scaleTransform__2011 + _this__1145 * scaleTransform__2111 + _this__2145 * scaleTransform__2211,_this__0245 * scaleTransform__0011 + _this__1245 * scaleTransform__0111 + _this__2245 * scaleTransform__0211,_this__0245 * scaleTransform__1011 + _this__1245 * scaleTransform__1111 + _this__2245 * scaleTransform__1211,_this__0245 * scaleTransform__2011 + _this__1245 * scaleTransform__2111 + _this__2245 * scaleTransform__2211);
		break;
	case 1:case 6:
		var wid37 = Main.wid;
		var hi37 = Main.hi;
		var w212 = wid37 - borderC * 2;
		var h212 = hi37 - borderC * 2;
		var dw12 = w212 - w;
		var dh12 = h212 - h;
		var scale12 = dw12 < dh12 ? w212 / w : h212 / h;
		if(scale12 < 0) {
			scale12 = 0.;
		}
		var scaleTransform__0012 = scale12;
		var scaleTransform__1012 = 0;
		var scaleTransform__2012 = 0;
		var scaleTransform__0112 = 0;
		var scaleTransform__1112 = scale12;
		var scaleTransform__2112 = 0;
		var scaleTransform__0212 = 0;
		var scaleTransform__1212 = 0;
		var scaleTransform__2212 = 1;
		var value_x12 = w;
		var value_y12 = h;
		var w17 = scaleTransform__0212 * value_x12 + scaleTransform__1212 * value_y12 + scaleTransform__2212;
		var x15 = (scaleTransform__0012 * value_x12 + scaleTransform__1012 * value_y12 + scaleTransform__2012) / w17;
		var y15 = (scaleTransform__0112 * value_x12 + scaleTransform__1112 * value_y12 + scaleTransform__2112) / w17;
		var sv_x15 = x15;
		var sv_y15 = y15;
		var _this__0046 = 1;
		var _this__1046 = 0;
		var _this__2046 = borderC;
		var _this__0146 = 0;
		var _this__1146 = 1;
		var _this__2146 = hi37 / 2 - sv_y15 / 2;
		var _this__0246 = 0;
		var _this__1246 = 0;
		var _this__2246 = 1;
		mC = new kha_math_FastMatrix3(_this__0046 * scaleTransform__0012 + _this__1046 * scaleTransform__0112 + _this__2046 * scaleTransform__0212,_this__0046 * scaleTransform__1012 + _this__1046 * scaleTransform__1112 + _this__2046 * scaleTransform__1212,_this__0046 * scaleTransform__2012 + _this__1046 * scaleTransform__2112 + _this__2046 * scaleTransform__2212,_this__0146 * scaleTransform__0012 + _this__1146 * scaleTransform__0112 + _this__2146 * scaleTransform__0212,_this__0146 * scaleTransform__1012 + _this__1146 * scaleTransform__1112 + _this__2146 * scaleTransform__1212,_this__0146 * scaleTransform__2012 + _this__1146 * scaleTransform__2112 + _this__2146 * scaleTransform__2212,_this__0246 * scaleTransform__0012 + _this__1246 * scaleTransform__0112 + _this__2246 * scaleTransform__0212,_this__0246 * scaleTransform__1012 + _this__1246 * scaleTransform__1112 + _this__2246 * scaleTransform__1212,_this__0246 * scaleTransform__2012 + _this__1246 * scaleTransform__2112 + _this__2246 * scaleTransform__2212);
		break;
	case 3:case 8:
		var wid38 = Main.wid;
		var hi38 = Main.hi;
		var w213 = wid38 - borderC * 2;
		var h213 = hi38 - borderC * 2;
		var dw13 = w213 - w;
		var dh13 = h213 - h;
		var scale13 = dw13 < dh13 ? w213 / w : h213 / h;
		if(scale13 < 0) {
			scale13 = 0.;
		}
		var scaleTransform__0013 = scale13;
		var scaleTransform__1013 = 0;
		var scaleTransform__2013 = 0;
		var scaleTransform__0113 = 0;
		var scaleTransform__1113 = scale13;
		var scaleTransform__2113 = 0;
		var scaleTransform__0213 = 0;
		var scaleTransform__1213 = 0;
		var scaleTransform__2213 = 1;
		var value_x13 = w;
		var value_y13 = h;
		var w18 = scaleTransform__0213 * value_x13 + scaleTransform__1213 * value_y13 + scaleTransform__2213;
		var x16 = (scaleTransform__0013 * value_x13 + scaleTransform__1013 * value_y13 + scaleTransform__2013) / w18;
		var y16 = (scaleTransform__0113 * value_x13 + scaleTransform__1113 * value_y13 + scaleTransform__2113) / w18;
		var sv_x16 = x16;
		var sv_y16 = y16;
		var _this__0047 = 1;
		var _this__1047 = 0;
		var _this__2047 = wid38 / 2 - sv_x16 / 2;
		var _this__0147 = 0;
		var _this__1147 = 1;
		var _this__2147 = borderC;
		var _this__0247 = 0;
		var _this__1247 = 0;
		var _this__2247 = 1;
		mC = new kha_math_FastMatrix3(_this__0047 * scaleTransform__0013 + _this__1047 * scaleTransform__0113 + _this__2047 * scaleTransform__0213,_this__0047 * scaleTransform__1013 + _this__1047 * scaleTransform__1113 + _this__2047 * scaleTransform__1213,_this__0047 * scaleTransform__2013 + _this__1047 * scaleTransform__2113 + _this__2047 * scaleTransform__2213,_this__0147 * scaleTransform__0013 + _this__1147 * scaleTransform__0113 + _this__2147 * scaleTransform__0213,_this__0147 * scaleTransform__1013 + _this__1147 * scaleTransform__1113 + _this__2147 * scaleTransform__1213,_this__0147 * scaleTransform__2013 + _this__1147 * scaleTransform__2113 + _this__2147 * scaleTransform__2213,_this__0247 * scaleTransform__0013 + _this__1247 * scaleTransform__0113 + _this__2247 * scaleTransform__0213,_this__0247 * scaleTransform__1013 + _this__1247 * scaleTransform__1113 + _this__2247 * scaleTransform__1213,_this__0247 * scaleTransform__2013 + _this__1247 * scaleTransform__2113 + _this__2247 * scaleTransform__2213);
		break;
	case 4:case 9:
		var wid39 = Main.wid;
		var hi39 = Main.hi;
		var w214 = wid39 - borderC * 2;
		var h214 = hi39 - borderC * 2;
		var dw14 = w214 - w;
		var dh14 = h214 - h;
		var scale14 = dw14 < dh14 ? w214 / w : h214 / h;
		if(scale14 < 0) {
			scale14 = 0.;
		}
		var scaleTransform__0014 = scale14;
		var scaleTransform__1014 = 0;
		var scaleTransform__2014 = 0;
		var scaleTransform__0114 = 0;
		var scaleTransform__1114 = scale14;
		var scaleTransform__2114 = 0;
		var scaleTransform__0214 = 0;
		var scaleTransform__1214 = 0;
		var scaleTransform__2214 = 1;
		var value_x14 = w;
		var value_y14 = h;
		var w19 = scaleTransform__0214 * value_x14 + scaleTransform__1214 * value_y14 + scaleTransform__2214;
		var x17 = (scaleTransform__0014 * value_x14 + scaleTransform__1014 * value_y14 + scaleTransform__2014) / w19;
		var y17 = (scaleTransform__0114 * value_x14 + scaleTransform__1114 * value_y14 + scaleTransform__2114) / w19;
		var sv_x17 = x17;
		var sv_y17 = y17;
		var _this__0048 = 1;
		var _this__1048 = 0;
		var _this__2048 = wid39 / 2 - sv_x17 / 2;
		var _this__0148 = 0;
		var _this__1148 = 1;
		var _this__2148 = hi39 - sv_y17 - borderC;
		var _this__0248 = 0;
		var _this__1248 = 0;
		var _this__2248 = 1;
		mC = new kha_math_FastMatrix3(_this__0048 * scaleTransform__0014 + _this__1048 * scaleTransform__0114 + _this__2048 * scaleTransform__0214,_this__0048 * scaleTransform__1014 + _this__1048 * scaleTransform__1114 + _this__2048 * scaleTransform__1214,_this__0048 * scaleTransform__2014 + _this__1048 * scaleTransform__2114 + _this__2048 * scaleTransform__2214,_this__0148 * scaleTransform__0014 + _this__1148 * scaleTransform__0114 + _this__2148 * scaleTransform__0214,_this__0148 * scaleTransform__1014 + _this__1148 * scaleTransform__1114 + _this__2148 * scaleTransform__1214,_this__0148 * scaleTransform__2014 + _this__1148 * scaleTransform__2114 + _this__2148 * scaleTransform__2214,_this__0248 * scaleTransform__0014 + _this__1248 * scaleTransform__0114 + _this__2248 * scaleTransform__0214,_this__0248 * scaleTransform__1014 + _this__1248 * scaleTransform__1114 + _this__2248 * scaleTransform__1214,_this__0248 * scaleTransform__2014 + _this__1248 * scaleTransform__2114 + _this__2248 * scaleTransform__2214);
		break;
	case 10:case 11:
		if(borderC * 2 + sv_x12 < wid34) {
			var _this__0049 = 1;
			var _this__1049 = 0;
			var _this__2049 = borderC;
			var _this__0149 = 0;
			var _this__1149 = 1;
			var _this__2149 = borderC;
			var _this__0249 = 0;
			var _this__1249 = 0;
			var _this__2249 = 1;
			mC = new kha_math_FastMatrix3(_this__0049 * scaleTransform27._00 + _this__1049 * scaleTransform27._01 + _this__2049 * scaleTransform27._02,_this__0049 * scaleTransform27._10 + _this__1049 * scaleTransform27._11 + _this__2049 * scaleTransform27._12,_this__0049 * scaleTransform27._20 + _this__1049 * scaleTransform27._21 + _this__2049 * scaleTransform27._22,_this__0149 * scaleTransform27._00 + _this__1149 * scaleTransform27._01 + _this__2149 * scaleTransform27._02,_this__0149 * scaleTransform27._10 + _this__1149 * scaleTransform27._11 + _this__2149 * scaleTransform27._12,_this__0149 * scaleTransform27._20 + _this__1149 * scaleTransform27._21 + _this__2149 * scaleTransform27._22,_this__0249 * scaleTransform27._00 + _this__1249 * scaleTransform27._01 + _this__2249 * scaleTransform27._02,_this__0249 * scaleTransform27._10 + _this__1249 * scaleTransform27._11 + _this__2249 * scaleTransform27._12,_this__0249 * scaleTransform27._20 + _this__1249 * scaleTransform27._21 + _this__2249 * scaleTransform27._22);
		} else {
			var wid40 = Main.wid;
			var hi40 = Main.hi;
			var scaleTransform28 = Main.scaleTransform;
			var _this__0050 = 1;
			var _this__1050 = 0;
			var _this__2050 = borderC;
			var _this__0150 = 0;
			var _this__1150 = 1;
			var _this__2150 = hi40 / 2 - sv_y12 / 2;
			var _this__0250 = 0;
			var _this__1250 = 0;
			var _this__2250 = 1;
			mC = new kha_math_FastMatrix3(_this__0050 * scaleTransform28._00 + _this__1050 * scaleTransform28._01 + _this__2050 * scaleTransform28._02,_this__0050 * scaleTransform28._10 + _this__1050 * scaleTransform28._11 + _this__2050 * scaleTransform28._12,_this__0050 * scaleTransform28._20 + _this__1050 * scaleTransform28._21 + _this__2050 * scaleTransform28._22,_this__0150 * scaleTransform28._00 + _this__1150 * scaleTransform28._01 + _this__2150 * scaleTransform28._02,_this__0150 * scaleTransform28._10 + _this__1150 * scaleTransform28._11 + _this__2150 * scaleTransform28._12,_this__0150 * scaleTransform28._20 + _this__1150 * scaleTransform28._21 + _this__2150 * scaleTransform28._22,_this__0250 * scaleTransform28._00 + _this__1250 * scaleTransform28._01 + _this__2250 * scaleTransform28._02,_this__0250 * scaleTransform28._10 + _this__1250 * scaleTransform28._11 + _this__2250 * scaleTransform28._12,_this__0250 * scaleTransform28._20 + _this__1250 * scaleTransform28._21 + _this__2250 * scaleTransform28._22);
		}
		break;
	case 12:case 13:
		if(borderC * 2 + sv_x12 < wid34) {
			var _this__0051 = 1;
			var _this__1051 = 0;
			var _this__2051 = wid34 - sv_x12 - borderC;
			var _this__0151 = 0;
			var _this__1151 = 1;
			var _this__2151 = borderC;
			var _this__0251 = 0;
			var _this__1251 = 0;
			var _this__2251 = 1;
			mC = new kha_math_FastMatrix3(_this__0051 * scaleTransform27._00 + _this__1051 * scaleTransform27._01 + _this__2051 * scaleTransform27._02,_this__0051 * scaleTransform27._10 + _this__1051 * scaleTransform27._11 + _this__2051 * scaleTransform27._12,_this__0051 * scaleTransform27._20 + _this__1051 * scaleTransform27._21 + _this__2051 * scaleTransform27._22,_this__0151 * scaleTransform27._00 + _this__1151 * scaleTransform27._01 + _this__2151 * scaleTransform27._02,_this__0151 * scaleTransform27._10 + _this__1151 * scaleTransform27._11 + _this__2151 * scaleTransform27._12,_this__0151 * scaleTransform27._20 + _this__1151 * scaleTransform27._21 + _this__2151 * scaleTransform27._22,_this__0251 * scaleTransform27._00 + _this__1251 * scaleTransform27._01 + _this__2251 * scaleTransform27._02,_this__0251 * scaleTransform27._10 + _this__1251 * scaleTransform27._11 + _this__2251 * scaleTransform27._12,_this__0251 * scaleTransform27._20 + _this__1251 * scaleTransform27._21 + _this__2251 * scaleTransform27._22);
		} else {
			var wid41 = Main.wid;
			var hi41 = Main.hi;
			var scaleTransform29 = Main.scaleTransform;
			var _this__0052 = 1;
			var _this__1052 = 0;
			var _this__2052 = wid41 - sv_x12 - borderC;
			var _this__0152 = 0;
			var _this__1152 = 1;
			var _this__2152 = hi41 / 2 - sv_y12 / 2;
			var _this__0252 = 0;
			var _this__1252 = 0;
			var _this__2252 = 1;
			mC = new kha_math_FastMatrix3(_this__0052 * scaleTransform29._00 + _this__1052 * scaleTransform29._01 + _this__2052 * scaleTransform29._02,_this__0052 * scaleTransform29._10 + _this__1052 * scaleTransform29._11 + _this__2052 * scaleTransform29._12,_this__0052 * scaleTransform29._20 + _this__1052 * scaleTransform29._21 + _this__2052 * scaleTransform29._22,_this__0152 * scaleTransform29._00 + _this__1152 * scaleTransform29._01 + _this__2152 * scaleTransform29._02,_this__0152 * scaleTransform29._10 + _this__1152 * scaleTransform29._11 + _this__2152 * scaleTransform29._12,_this__0152 * scaleTransform29._20 + _this__1152 * scaleTransform29._21 + _this__2152 * scaleTransform29._22,_this__0252 * scaleTransform29._00 + _this__1252 * scaleTransform29._01 + _this__2252 * scaleTransform29._02,_this__0252 * scaleTransform29._10 + _this__1252 * scaleTransform29._11 + _this__2252 * scaleTransform29._12,_this__0252 * scaleTransform29._20 + _this__1252 * scaleTransform29._21 + _this__2252 * scaleTransform29._22);
		}
		break;
	case 14:case 15:
		if(borderC * 2 + sv_y12 < hi34) {
			var _this__0053 = 1;
			var _this__1053 = 0;
			var _this__2053 = borderC;
			var _this__0153 = 0;
			var _this__1153 = 1;
			var _this__2153 = hi34 - sv_y12 - borderC;
			var _this__0253 = 0;
			var _this__1253 = 0;
			var _this__2253 = 1;
			mC = new kha_math_FastMatrix3(_this__0053 * scaleTransform27._00 + _this__1053 * scaleTransform27._01 + _this__2053 * scaleTransform27._02,_this__0053 * scaleTransform27._10 + _this__1053 * scaleTransform27._11 + _this__2053 * scaleTransform27._12,_this__0053 * scaleTransform27._20 + _this__1053 * scaleTransform27._21 + _this__2053 * scaleTransform27._22,_this__0153 * scaleTransform27._00 + _this__1153 * scaleTransform27._01 + _this__2153 * scaleTransform27._02,_this__0153 * scaleTransform27._10 + _this__1153 * scaleTransform27._11 + _this__2153 * scaleTransform27._12,_this__0153 * scaleTransform27._20 + _this__1153 * scaleTransform27._21 + _this__2153 * scaleTransform27._22,_this__0253 * scaleTransform27._00 + _this__1253 * scaleTransform27._01 + _this__2253 * scaleTransform27._02,_this__0253 * scaleTransform27._10 + _this__1253 * scaleTransform27._11 + _this__2253 * scaleTransform27._12,_this__0253 * scaleTransform27._20 + _this__1253 * scaleTransform27._21 + _this__2253 * scaleTransform27._22);
		} else {
			var wid42 = Main.wid;
			var hi42 = Main.hi;
			var scaleTransform30 = Main.scaleTransform;
			var _this__0054 = 1;
			var _this__1054 = 0;
			var _this__2054 = borderC;
			var _this__0154 = 0;
			var _this__1154 = 1;
			var _this__2154 = hi42 / 2 - sv_y12 / 2;
			var _this__0254 = 0;
			var _this__1254 = 0;
			var _this__2254 = 1;
			mC = new kha_math_FastMatrix3(_this__0054 * scaleTransform30._00 + _this__1054 * scaleTransform30._01 + _this__2054 * scaleTransform30._02,_this__0054 * scaleTransform30._10 + _this__1054 * scaleTransform30._11 + _this__2054 * scaleTransform30._12,_this__0054 * scaleTransform30._20 + _this__1054 * scaleTransform30._21 + _this__2054 * scaleTransform30._22,_this__0154 * scaleTransform30._00 + _this__1154 * scaleTransform30._01 + _this__2154 * scaleTransform30._02,_this__0154 * scaleTransform30._10 + _this__1154 * scaleTransform30._11 + _this__2154 * scaleTransform30._12,_this__0154 * scaleTransform30._20 + _this__1154 * scaleTransform30._21 + _this__2154 * scaleTransform30._22,_this__0254 * scaleTransform30._00 + _this__1254 * scaleTransform30._01 + _this__2254 * scaleTransform30._02,_this__0254 * scaleTransform30._10 + _this__1254 * scaleTransform30._11 + _this__2254 * scaleTransform30._12,_this__0254 * scaleTransform30._20 + _this__1254 * scaleTransform30._21 + _this__2254 * scaleTransform30._22);
		}
		break;
	case 16:case 17:
		if(borderC * 2 + sv_y12 < hi34) {
			var _this__0055 = 1;
			var _this__1055 = 0;
			var _this__2055 = wid34 - sv_x12 - borderC;
			var _this__0155 = 0;
			var _this__1155 = 1;
			var _this__2155 = hi34 - sv_y12 - borderC;
			var _this__0255 = 0;
			var _this__1255 = 0;
			var _this__2255 = 1;
			mC = new kha_math_FastMatrix3(_this__0055 * scaleTransform27._00 + _this__1055 * scaleTransform27._01 + _this__2055 * scaleTransform27._02,_this__0055 * scaleTransform27._10 + _this__1055 * scaleTransform27._11 + _this__2055 * scaleTransform27._12,_this__0055 * scaleTransform27._20 + _this__1055 * scaleTransform27._21 + _this__2055 * scaleTransform27._22,_this__0155 * scaleTransform27._00 + _this__1155 * scaleTransform27._01 + _this__2155 * scaleTransform27._02,_this__0155 * scaleTransform27._10 + _this__1155 * scaleTransform27._11 + _this__2155 * scaleTransform27._12,_this__0155 * scaleTransform27._20 + _this__1155 * scaleTransform27._21 + _this__2155 * scaleTransform27._22,_this__0255 * scaleTransform27._00 + _this__1255 * scaleTransform27._01 + _this__2255 * scaleTransform27._02,_this__0255 * scaleTransform27._10 + _this__1255 * scaleTransform27._11 + _this__2255 * scaleTransform27._12,_this__0255 * scaleTransform27._20 + _this__1255 * scaleTransform27._21 + _this__2255 * scaleTransform27._22);
		} else {
			var wid43 = Main.wid;
			var hi43 = Main.hi;
			var scaleTransform31 = Main.scaleTransform;
			var _this__0056 = 1;
			var _this__1056 = 0;
			var _this__2056 = wid43 - sv_x12 - borderC;
			var _this__0156 = 0;
			var _this__1156 = 1;
			var _this__2156 = hi43 / 2 - sv_y12 / 2;
			var _this__0256 = 0;
			var _this__1256 = 0;
			var _this__2256 = 1;
			mC = new kha_math_FastMatrix3(_this__0056 * scaleTransform31._00 + _this__1056 * scaleTransform31._01 + _this__2056 * scaleTransform31._02,_this__0056 * scaleTransform31._10 + _this__1056 * scaleTransform31._11 + _this__2056 * scaleTransform31._12,_this__0056 * scaleTransform31._20 + _this__1056 * scaleTransform31._21 + _this__2056 * scaleTransform31._22,_this__0156 * scaleTransform31._00 + _this__1156 * scaleTransform31._01 + _this__2156 * scaleTransform31._02,_this__0156 * scaleTransform31._10 + _this__1156 * scaleTransform31._11 + _this__2156 * scaleTransform31._12,_this__0156 * scaleTransform31._20 + _this__1156 * scaleTransform31._21 + _this__2156 * scaleTransform31._22,_this__0256 * scaleTransform31._00 + _this__1256 * scaleTransform31._01 + _this__2256 * scaleTransform31._02,_this__0256 * scaleTransform31._10 + _this__1256 * scaleTransform31._11 + _this__2256 * scaleTransform31._12,_this__0256 * scaleTransform31._20 + _this__1256 * scaleTransform31._21 + _this__2256 * scaleTransform31._22);
		}
		break;
	case 18:
		var wid44 = Main.wid;
		var hi44 = Main.hi;
		var scaleTransform32 = Main.scaleTransform;
		var _this__0057 = 1;
		var _this__1057 = 0;
		var _this__2057 = wid44 / 2 - sv_x12 / 2;
		var _this__0157 = 0;
		var _this__1157 = 1;
		var _this__2157 = hi44 / 2 - sv_y12 / 2;
		var _this__0257 = 0;
		var _this__1257 = 0;
		var _this__2257 = 1;
		mC = new kha_math_FastMatrix3(_this__0057 * scaleTransform32._00 + _this__1057 * scaleTransform32._01 + _this__2057 * scaleTransform32._02,_this__0057 * scaleTransform32._10 + _this__1057 * scaleTransform32._11 + _this__2057 * scaleTransform32._12,_this__0057 * scaleTransform32._20 + _this__1057 * scaleTransform32._21 + _this__2057 * scaleTransform32._22,_this__0157 * scaleTransform32._00 + _this__1157 * scaleTransform32._01 + _this__2157 * scaleTransform32._02,_this__0157 * scaleTransform32._10 + _this__1157 * scaleTransform32._11 + _this__2157 * scaleTransform32._12,_this__0157 * scaleTransform32._20 + _this__1157 * scaleTransform32._21 + _this__2157 * scaleTransform32._22,_this__0257 * scaleTransform32._00 + _this__1257 * scaleTransform32._01 + _this__2257 * scaleTransform32._02,_this__0257 * scaleTransform32._10 + _this__1257 * scaleTransform32._11 + _this__2257 * scaleTransform32._12,_this__0257 * scaleTransform32._20 + _this__1257 * scaleTransform32._21 + _this__2257 * scaleTransform32._22);
		break;
	case 19:case 20:case 21:
		if(borderC * 2 + sv_x12 < wid34) {
			var wid45 = Main.wid;
			var hi45 = Main.hi;
			var scaleTransform33 = Main.scaleTransform;
			var _this__0058 = 1;
			var _this__1058 = 0;
			var _this__2058 = borderC;
			var _this__0158 = 0;
			var _this__1158 = 1;
			var _this__2158 = hi45 / 2 - sv_y12 / 2;
			var _this__0258 = 0;
			var _this__1258 = 0;
			var _this__2258 = 1;
			mC = new kha_math_FastMatrix3(_this__0058 * scaleTransform33._00 + _this__1058 * scaleTransform33._01 + _this__2058 * scaleTransform33._02,_this__0058 * scaleTransform33._10 + _this__1058 * scaleTransform33._11 + _this__2058 * scaleTransform33._12,_this__0058 * scaleTransform33._20 + _this__1058 * scaleTransform33._21 + _this__2058 * scaleTransform33._22,_this__0158 * scaleTransform33._00 + _this__1158 * scaleTransform33._01 + _this__2158 * scaleTransform33._02,_this__0158 * scaleTransform33._10 + _this__1158 * scaleTransform33._11 + _this__2158 * scaleTransform33._12,_this__0158 * scaleTransform33._20 + _this__1158 * scaleTransform33._21 + _this__2158 * scaleTransform33._22,_this__0258 * scaleTransform33._00 + _this__1258 * scaleTransform33._01 + _this__2258 * scaleTransform33._02,_this__0258 * scaleTransform33._10 + _this__1258 * scaleTransform33._11 + _this__2258 * scaleTransform33._12,_this__0258 * scaleTransform33._20 + _this__1258 * scaleTransform33._21 + _this__2258 * scaleTransform33._22);
		} else {
			var wid46 = Main.wid;
			var hi46 = Main.hi;
			var scaleTransform34 = Main.scaleTransform;
			var _this__0059 = 1;
			var _this__1059 = 0;
			var _this__2059 = wid46 / 2 - sv_x12 / 2;
			var _this__0159 = 0;
			var _this__1159 = 1;
			var _this__2159 = hi46 / 2 - sv_y12 / 2;
			var _this__0259 = 0;
			var _this__1259 = 0;
			var _this__2259 = 1;
			mC = new kha_math_FastMatrix3(_this__0059 * scaleTransform34._00 + _this__1059 * scaleTransform34._01 + _this__2059 * scaleTransform34._02,_this__0059 * scaleTransform34._10 + _this__1059 * scaleTransform34._11 + _this__2059 * scaleTransform34._12,_this__0059 * scaleTransform34._20 + _this__1059 * scaleTransform34._21 + _this__2059 * scaleTransform34._22,_this__0159 * scaleTransform34._00 + _this__1159 * scaleTransform34._01 + _this__2159 * scaleTransform34._02,_this__0159 * scaleTransform34._10 + _this__1159 * scaleTransform34._11 + _this__2159 * scaleTransform34._12,_this__0159 * scaleTransform34._20 + _this__1159 * scaleTransform34._21 + _this__2159 * scaleTransform34._22,_this__0259 * scaleTransform34._00 + _this__1259 * scaleTransform34._01 + _this__2259 * scaleTransform34._02,_this__0259 * scaleTransform34._10 + _this__1259 * scaleTransform34._11 + _this__2259 * scaleTransform34._12,_this__0259 * scaleTransform34._20 + _this__1259 * scaleTransform34._21 + _this__2259 * scaleTransform34._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderC * 2 + sv_x12 < wid34) {
			var wid47 = Main.wid;
			var hi47 = Main.hi;
			var scaleTransform35 = Main.scaleTransform;
			var _this__0060 = 1;
			var _this__1060 = 0;
			var _this__2060 = wid47 - sv_x12 - borderC;
			var _this__0160 = 0;
			var _this__1160 = 1;
			var _this__2160 = hi47 / 2 - sv_y12 / 2;
			var _this__0260 = 0;
			var _this__1260 = 0;
			var _this__2260 = 1;
			mC = new kha_math_FastMatrix3(_this__0060 * scaleTransform35._00 + _this__1060 * scaleTransform35._01 + _this__2060 * scaleTransform35._02,_this__0060 * scaleTransform35._10 + _this__1060 * scaleTransform35._11 + _this__2060 * scaleTransform35._12,_this__0060 * scaleTransform35._20 + _this__1060 * scaleTransform35._21 + _this__2060 * scaleTransform35._22,_this__0160 * scaleTransform35._00 + _this__1160 * scaleTransform35._01 + _this__2160 * scaleTransform35._02,_this__0160 * scaleTransform35._10 + _this__1160 * scaleTransform35._11 + _this__2160 * scaleTransform35._12,_this__0160 * scaleTransform35._20 + _this__1160 * scaleTransform35._21 + _this__2160 * scaleTransform35._22,_this__0260 * scaleTransform35._00 + _this__1260 * scaleTransform35._01 + _this__2260 * scaleTransform35._02,_this__0260 * scaleTransform35._10 + _this__1260 * scaleTransform35._11 + _this__2260 * scaleTransform35._12,_this__0260 * scaleTransform35._20 + _this__1260 * scaleTransform35._21 + _this__2260 * scaleTransform35._22);
		} else {
			var wid48 = Main.wid;
			var hi48 = Main.hi;
			var scaleTransform36 = Main.scaleTransform;
			var _this__0061 = 1;
			var _this__1061 = 0;
			var _this__2061 = wid48 / 2 - sv_x12 / 2;
			var _this__0161 = 0;
			var _this__1161 = 1;
			var _this__2161 = hi48 / 2 - sv_y12 / 2;
			var _this__0261 = 0;
			var _this__1261 = 0;
			var _this__2261 = 1;
			mC = new kha_math_FastMatrix3(_this__0061 * scaleTransform36._00 + _this__1061 * scaleTransform36._01 + _this__2061 * scaleTransform36._02,_this__0061 * scaleTransform36._10 + _this__1061 * scaleTransform36._11 + _this__2061 * scaleTransform36._12,_this__0061 * scaleTransform36._20 + _this__1061 * scaleTransform36._21 + _this__2061 * scaleTransform36._22,_this__0161 * scaleTransform36._00 + _this__1161 * scaleTransform36._01 + _this__2161 * scaleTransform36._02,_this__0161 * scaleTransform36._10 + _this__1161 * scaleTransform36._11 + _this__2161 * scaleTransform36._12,_this__0161 * scaleTransform36._20 + _this__1161 * scaleTransform36._21 + _this__2161 * scaleTransform36._22,_this__0261 * scaleTransform36._00 + _this__1261 * scaleTransform36._01 + _this__2261 * scaleTransform36._02,_this__0261 * scaleTransform36._10 + _this__1261 * scaleTransform36._11 + _this__2261 * scaleTransform36._12,_this__0261 * scaleTransform36._20 + _this__1261 * scaleTransform36._21 + _this__2261 * scaleTransform36._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderC * 2 + sv_y12 < hi34) {
			var _this__0062 = 1;
			var _this__1062 = 0;
			var _this__2062 = wid34 / 2 - sv_x12 / 2;
			var _this__0162 = 0;
			var _this__1162 = 1;
			var _this__2162 = hi34 - sv_y12 - borderC;
			var _this__0262 = 0;
			var _this__1262 = 0;
			var _this__2262 = 1;
			mC = new kha_math_FastMatrix3(_this__0062 * scaleTransform27._00 + _this__1062 * scaleTransform27._01 + _this__2062 * scaleTransform27._02,_this__0062 * scaleTransform27._10 + _this__1062 * scaleTransform27._11 + _this__2062 * scaleTransform27._12,_this__0062 * scaleTransform27._20 + _this__1062 * scaleTransform27._21 + _this__2062 * scaleTransform27._22,_this__0162 * scaleTransform27._00 + _this__1162 * scaleTransform27._01 + _this__2162 * scaleTransform27._02,_this__0162 * scaleTransform27._10 + _this__1162 * scaleTransform27._11 + _this__2162 * scaleTransform27._12,_this__0162 * scaleTransform27._20 + _this__1162 * scaleTransform27._21 + _this__2162 * scaleTransform27._22,_this__0262 * scaleTransform27._00 + _this__1262 * scaleTransform27._01 + _this__2262 * scaleTransform27._02,_this__0262 * scaleTransform27._10 + _this__1262 * scaleTransform27._11 + _this__2262 * scaleTransform27._12,_this__0262 * scaleTransform27._20 + _this__1262 * scaleTransform27._21 + _this__2262 * scaleTransform27._22);
		} else {
			var wid49 = Main.wid;
			var hi49 = Main.hi;
			var scaleTransform37 = Main.scaleTransform;
			var _this__0063 = 1;
			var _this__1063 = 0;
			var _this__2063 = wid49 / 2 - sv_x12 / 2;
			var _this__0163 = 0;
			var _this__1163 = 1;
			var _this__2163 = hi49 / 2 - sv_y12 / 2;
			var _this__0263 = 0;
			var _this__1263 = 0;
			var _this__2263 = 1;
			mC = new kha_math_FastMatrix3(_this__0063 * scaleTransform37._00 + _this__1063 * scaleTransform37._01 + _this__2063 * scaleTransform37._02,_this__0063 * scaleTransform37._10 + _this__1063 * scaleTransform37._11 + _this__2063 * scaleTransform37._12,_this__0063 * scaleTransform37._20 + _this__1063 * scaleTransform37._21 + _this__2063 * scaleTransform37._22,_this__0163 * scaleTransform37._00 + _this__1163 * scaleTransform37._01 + _this__2163 * scaleTransform37._02,_this__0163 * scaleTransform37._10 + _this__1163 * scaleTransform37._11 + _this__2163 * scaleTransform37._12,_this__0163 * scaleTransform37._20 + _this__1163 * scaleTransform37._21 + _this__2163 * scaleTransform37._22,_this__0263 * scaleTransform37._00 + _this__1263 * scaleTransform37._01 + _this__2263 * scaleTransform37._02,_this__0263 * scaleTransform37._10 + _this__1263 * scaleTransform37._11 + _this__2263 * scaleTransform37._12,_this__0263 * scaleTransform37._20 + _this__1263 * scaleTransform37._21 + _this__2263 * scaleTransform37._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderC * 2 + sv_y12 < hi34) {
			var _this__0064 = 1;
			var _this__1064 = 0;
			var _this__2064 = wid34 / 2 - sv_x12 / 2;
			var _this__0164 = 0;
			var _this__1164 = 1;
			var _this__2164 = borderC;
			var _this__0264 = 0;
			var _this__1264 = 0;
			var _this__2264 = 1;
			mC = new kha_math_FastMatrix3(_this__0064 * scaleTransform27._00 + _this__1064 * scaleTransform27._01 + _this__2064 * scaleTransform27._02,_this__0064 * scaleTransform27._10 + _this__1064 * scaleTransform27._11 + _this__2064 * scaleTransform27._12,_this__0064 * scaleTransform27._20 + _this__1064 * scaleTransform27._21 + _this__2064 * scaleTransform27._22,_this__0164 * scaleTransform27._00 + _this__1164 * scaleTransform27._01 + _this__2164 * scaleTransform27._02,_this__0164 * scaleTransform27._10 + _this__1164 * scaleTransform27._11 + _this__2164 * scaleTransform27._12,_this__0164 * scaleTransform27._20 + _this__1164 * scaleTransform27._21 + _this__2164 * scaleTransform27._22,_this__0264 * scaleTransform27._00 + _this__1264 * scaleTransform27._01 + _this__2264 * scaleTransform27._02,_this__0264 * scaleTransform27._10 + _this__1264 * scaleTransform27._11 + _this__2264 * scaleTransform27._12,_this__0264 * scaleTransform27._20 + _this__1264 * scaleTransform27._21 + _this__2264 * scaleTransform27._22);
		} else {
			var wid50 = Main.wid;
			var hi50 = Main.hi;
			var scaleTransform38 = Main.scaleTransform;
			var _this__0065 = 1;
			var _this__1065 = 0;
			var _this__2065 = wid50 / 2 - sv_x12 / 2;
			var _this__0165 = 0;
			var _this__1165 = 1;
			var _this__2165 = hi50 / 2 - sv_y12 / 2;
			var _this__0265 = 0;
			var _this__1265 = 0;
			var _this__2265 = 1;
			mC = new kha_math_FastMatrix3(_this__0065 * scaleTransform38._00 + _this__1065 * scaleTransform38._01 + _this__2065 * scaleTransform38._02,_this__0065 * scaleTransform38._10 + _this__1065 * scaleTransform38._11 + _this__2065 * scaleTransform38._12,_this__0065 * scaleTransform38._20 + _this__1065 * scaleTransform38._21 + _this__2065 * scaleTransform38._22,_this__0165 * scaleTransform38._00 + _this__1165 * scaleTransform38._01 + _this__2165 * scaleTransform38._02,_this__0165 * scaleTransform38._10 + _this__1165 * scaleTransform38._11 + _this__2165 * scaleTransform38._12,_this__0165 * scaleTransform38._20 + _this__1165 * scaleTransform38._21 + _this__2165 * scaleTransform38._22,_this__0265 * scaleTransform38._00 + _this__1265 * scaleTransform38._01 + _this__2265 * scaleTransform38._02,_this__0265 * scaleTransform38._10 + _this__1265 * scaleTransform38._11 + _this__2265 * scaleTransform38._12,_this__0265 * scaleTransform38._20 + _this__1265 * scaleTransform38._21 + _this__2265 * scaleTransform38._22);
		}
		break;
	}
	var outAB__00 = 1;
	var outAB__10 = 0;
	var outAB__20 = 0;
	var outAB__01 = 0;
	var outAB__11 = 1;
	var outAB__21 = 0;
	var outAB__02 = 0;
	var outAB__12 = 0;
	var outAB__22 = 1;
	outAB__00 = mA._00 + (mB._00 - mA._00) * tAB;
	outAB__10 = mA._10 + (mB._10 - mA._10) * tAB;
	outAB__20 = mA._20 + (mB._20 - mA._20) * tAB;
	outAB__01 = mA._01 + (mB._01 - mA._01) * tAB;
	outAB__11 = mA._11 + (mB._11 - mA._11) * tAB;
	outAB__21 = mA._21 + (mB._21 - mA._21) * tAB;
	outAB__02 = mA._02 + (mB._02 - mA._02) * tAB;
	outAB__12 = mA._12 + (mB._12 - mA._12) * tAB;
	outAB__22 = mA._22 + (mB._22 - mA._22) * tAB;
	var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
	out._00 = outAB__00 + (mC._00 - outAB__00) * tC;
	out._10 = outAB__10 + (mC._10 - outAB__10) * tC;
	out._20 = outAB__20 + (mC._20 - outAB__20) * tC;
	out._01 = outAB__01 + (mC._01 - outAB__01) * tC;
	out._11 = outAB__11 + (mC._11 - outAB__11) * tC;
	out._21 = outAB__21 + (mC._21 - outAB__21) * tC;
	out._02 = outAB__02 + (mC._02 - outAB__02) * tC;
	out._12 = outAB__12 + (mC._12 - outAB__12) * tC;
	out._22 = outAB__22 + (mC._22 - outAB__22) * tC;
	return out;
};
simpleText_AlignWindow.interpolate3 = function(mA,mB,mC,tAB,tC) {
	var outAB__00 = 1;
	var outAB__10 = 0;
	var outAB__20 = 0;
	var outAB__01 = 0;
	var outAB__11 = 1;
	var outAB__21 = 0;
	var outAB__02 = 0;
	var outAB__12 = 0;
	var outAB__22 = 1;
	outAB__00 = mA._00 + (mB._00 - mA._00) * tAB;
	outAB__10 = mA._10 + (mB._10 - mA._10) * tAB;
	outAB__20 = mA._20 + (mB._20 - mA._20) * tAB;
	outAB__01 = mA._01 + (mB._01 - mA._01) * tAB;
	outAB__11 = mA._11 + (mB._11 - mA._11) * tAB;
	outAB__21 = mA._21 + (mB._21 - mA._21) * tAB;
	outAB__02 = mA._02 + (mB._02 - mA._02) * tAB;
	outAB__12 = mA._12 + (mB._12 - mA._12) * tAB;
	outAB__22 = mA._22 + (mB._22 - mA._22) * tAB;
	var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
	out._00 = outAB__00 + (mC._00 - outAB__00) * tC;
	out._10 = outAB__10 + (mC._10 - outAB__10) * tC;
	out._20 = outAB__20 + (mC._20 - outAB__20) * tC;
	out._01 = outAB__01 + (mC._01 - outAB__01) * tC;
	out._11 = outAB__11 + (mC._11 - outAB__11) * tC;
	out._21 = outAB__21 + (mC._21 - outAB__21) * tC;
	out._02 = outAB__02 + (mC._02 - outAB__02) * tC;
	out._12 = outAB__12 + (mC._12 - outAB__12) * tC;
	out._22 = outAB__22 + (mC._22 - outAB__22) * tC;
	return out;
};
simpleText_AlignWindow.between = function(from,to,w,h,t,borderFrom,borderTo) {
	if(borderTo == null) {
		borderTo = 0;
	}
	if(borderFrom == null) {
		borderFrom = 0;
	}
	var scaleTransform = Main.scaleTransform;
	var v_x = w;
	var v_y = h;
	var w1 = scaleTransform._02 * v_x + scaleTransform._12 * v_y + scaleTransform._22;
	var x = (scaleTransform._00 * v_x + scaleTransform._10 * v_y + scaleTransform._20) / w1;
	var y = (scaleTransform._01 * v_x + scaleTransform._11 * v_y + scaleTransform._21) / w1;
	var sv_x = x;
	var sv_y = y;
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform1 = Main.scaleTransform;
	var mF;
	switch(from._hx_index) {
	case 2:case 7:
		var wid1 = Main.wid;
		var hi1 = Main.hi;
		var w2 = wid1 - borderFrom * 2;
		var h2 = hi1 - borderFrom * 2;
		var dw = w2 - w;
		var dh = h2 - h;
		var scale = dw < dh ? w2 / w : h2 / h;
		if(scale < 0) {
			scale = 0.;
		}
		var scaleTransform__00 = scale;
		var scaleTransform__10 = 0;
		var scaleTransform__20 = 0;
		var scaleTransform__01 = 0;
		var scaleTransform__11 = scale;
		var scaleTransform__21 = 0;
		var scaleTransform__02 = 0;
		var scaleTransform__12 = 0;
		var scaleTransform__22 = 1;
		var value_x = w;
		var value_y = h;
		var w3 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
		var x1 = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w3;
		var y1 = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w3;
		var sv_x1 = x1;
		var sv_y1 = y1;
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = wid1 - sv_x1 - borderFrom;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = hi1 / 2 - sv_y1 / 2;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		mF = new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
		break;
	case 0:case 5:
		var wid2 = Main.wid;
		var hi2 = Main.hi;
		var w21 = wid2 - borderFrom * 2;
		var h21 = hi2 - borderFrom * 2;
		var dw1 = w21 - w;
		var dh1 = h21 - h;
		var scale1 = dw1 < dh1 ? w21 / w : h21 / h;
		if(scale1 < 0) {
			scale1 = 0.;
		}
		var scaleTransform__001 = scale1;
		var scaleTransform__101 = 0;
		var scaleTransform__201 = 0;
		var scaleTransform__011 = 0;
		var scaleTransform__111 = scale1;
		var scaleTransform__211 = 0;
		var scaleTransform__021 = 0;
		var scaleTransform__121 = 0;
		var scaleTransform__221 = 1;
		var value_x1 = w;
		var value_y1 = h;
		var w4 = scaleTransform__021 * value_x1 + scaleTransform__121 * value_y1 + scaleTransform__221;
		var x2 = (scaleTransform__001 * value_x1 + scaleTransform__101 * value_y1 + scaleTransform__201) / w4;
		var y2 = (scaleTransform__011 * value_x1 + scaleTransform__111 * value_y1 + scaleTransform__211) / w4;
		var sv_x2 = x2;
		var sv_y2 = y2;
		var _this__001 = 1;
		var _this__101 = 0;
		var _this__201 = wid2 / 2 - sv_x2 / 2;
		var _this__011 = 0;
		var _this__111 = 1;
		var _this__211 = hi2 / 2 - sv_y2 / 2;
		var _this__021 = 0;
		var _this__121 = 0;
		var _this__221 = 1;
		mF = new kha_math_FastMatrix3(_this__001 * scaleTransform__001 + _this__101 * scaleTransform__011 + _this__201 * scaleTransform__021,_this__001 * scaleTransform__101 + _this__101 * scaleTransform__111 + _this__201 * scaleTransform__121,_this__001 * scaleTransform__201 + _this__101 * scaleTransform__211 + _this__201 * scaleTransform__221,_this__011 * scaleTransform__001 + _this__111 * scaleTransform__011 + _this__211 * scaleTransform__021,_this__011 * scaleTransform__101 + _this__111 * scaleTransform__111 + _this__211 * scaleTransform__121,_this__011 * scaleTransform__201 + _this__111 * scaleTransform__211 + _this__211 * scaleTransform__221,_this__021 * scaleTransform__001 + _this__121 * scaleTransform__011 + _this__221 * scaleTransform__021,_this__021 * scaleTransform__101 + _this__121 * scaleTransform__111 + _this__221 * scaleTransform__121,_this__021 * scaleTransform__201 + _this__121 * scaleTransform__211 + _this__221 * scaleTransform__221);
		break;
	case 1:case 6:
		var wid3 = Main.wid;
		var hi3 = Main.hi;
		var w22 = wid3 - borderFrom * 2;
		var h22 = hi3 - borderFrom * 2;
		var dw2 = w22 - w;
		var dh2 = h22 - h;
		var scale2 = dw2 < dh2 ? w22 / w : h22 / h;
		if(scale2 < 0) {
			scale2 = 0.;
		}
		var scaleTransform__002 = scale2;
		var scaleTransform__102 = 0;
		var scaleTransform__202 = 0;
		var scaleTransform__012 = 0;
		var scaleTransform__112 = scale2;
		var scaleTransform__212 = 0;
		var scaleTransform__022 = 0;
		var scaleTransform__122 = 0;
		var scaleTransform__222 = 1;
		var value_x2 = w;
		var value_y2 = h;
		var w5 = scaleTransform__022 * value_x2 + scaleTransform__122 * value_y2 + scaleTransform__222;
		var x3 = (scaleTransform__002 * value_x2 + scaleTransform__102 * value_y2 + scaleTransform__202) / w5;
		var y3 = (scaleTransform__012 * value_x2 + scaleTransform__112 * value_y2 + scaleTransform__212) / w5;
		var sv_x3 = x3;
		var sv_y3 = y3;
		var _this__002 = 1;
		var _this__102 = 0;
		var _this__202 = borderFrom;
		var _this__012 = 0;
		var _this__112 = 1;
		var _this__212 = hi3 / 2 - sv_y3 / 2;
		var _this__022 = 0;
		var _this__122 = 0;
		var _this__222 = 1;
		mF = new kha_math_FastMatrix3(_this__002 * scaleTransform__002 + _this__102 * scaleTransform__012 + _this__202 * scaleTransform__022,_this__002 * scaleTransform__102 + _this__102 * scaleTransform__112 + _this__202 * scaleTransform__122,_this__002 * scaleTransform__202 + _this__102 * scaleTransform__212 + _this__202 * scaleTransform__222,_this__012 * scaleTransform__002 + _this__112 * scaleTransform__012 + _this__212 * scaleTransform__022,_this__012 * scaleTransform__102 + _this__112 * scaleTransform__112 + _this__212 * scaleTransform__122,_this__012 * scaleTransform__202 + _this__112 * scaleTransform__212 + _this__212 * scaleTransform__222,_this__022 * scaleTransform__002 + _this__122 * scaleTransform__012 + _this__222 * scaleTransform__022,_this__022 * scaleTransform__102 + _this__122 * scaleTransform__112 + _this__222 * scaleTransform__122,_this__022 * scaleTransform__202 + _this__122 * scaleTransform__212 + _this__222 * scaleTransform__222);
		break;
	case 3:case 8:
		var wid4 = Main.wid;
		var hi4 = Main.hi;
		var w23 = wid4 - borderFrom * 2;
		var h23 = hi4 - borderFrom * 2;
		var dw3 = w23 - w;
		var dh3 = h23 - h;
		var scale3 = dw3 < dh3 ? w23 / w : h23 / h;
		if(scale3 < 0) {
			scale3 = 0.;
		}
		var scaleTransform__003 = scale3;
		var scaleTransform__103 = 0;
		var scaleTransform__203 = 0;
		var scaleTransform__013 = 0;
		var scaleTransform__113 = scale3;
		var scaleTransform__213 = 0;
		var scaleTransform__023 = 0;
		var scaleTransform__123 = 0;
		var scaleTransform__223 = 1;
		var value_x3 = w;
		var value_y3 = h;
		var w6 = scaleTransform__023 * value_x3 + scaleTransform__123 * value_y3 + scaleTransform__223;
		var x4 = (scaleTransform__003 * value_x3 + scaleTransform__103 * value_y3 + scaleTransform__203) / w6;
		var y4 = (scaleTransform__013 * value_x3 + scaleTransform__113 * value_y3 + scaleTransform__213) / w6;
		var sv_x4 = x4;
		var sv_y4 = y4;
		var _this__003 = 1;
		var _this__103 = 0;
		var _this__203 = wid4 / 2 - sv_x4 / 2;
		var _this__013 = 0;
		var _this__113 = 1;
		var _this__213 = borderFrom;
		var _this__023 = 0;
		var _this__123 = 0;
		var _this__223 = 1;
		mF = new kha_math_FastMatrix3(_this__003 * scaleTransform__003 + _this__103 * scaleTransform__013 + _this__203 * scaleTransform__023,_this__003 * scaleTransform__103 + _this__103 * scaleTransform__113 + _this__203 * scaleTransform__123,_this__003 * scaleTransform__203 + _this__103 * scaleTransform__213 + _this__203 * scaleTransform__223,_this__013 * scaleTransform__003 + _this__113 * scaleTransform__013 + _this__213 * scaleTransform__023,_this__013 * scaleTransform__103 + _this__113 * scaleTransform__113 + _this__213 * scaleTransform__123,_this__013 * scaleTransform__203 + _this__113 * scaleTransform__213 + _this__213 * scaleTransform__223,_this__023 * scaleTransform__003 + _this__123 * scaleTransform__013 + _this__223 * scaleTransform__023,_this__023 * scaleTransform__103 + _this__123 * scaleTransform__113 + _this__223 * scaleTransform__123,_this__023 * scaleTransform__203 + _this__123 * scaleTransform__213 + _this__223 * scaleTransform__223);
		break;
	case 4:case 9:
		var wid5 = Main.wid;
		var hi5 = Main.hi;
		var w24 = wid5 - borderFrom * 2;
		var h24 = hi5 - borderFrom * 2;
		var dw4 = w24 - w;
		var dh4 = h24 - h;
		var scale4 = dw4 < dh4 ? w24 / w : h24 / h;
		if(scale4 < 0) {
			scale4 = 0.;
		}
		var scaleTransform__004 = scale4;
		var scaleTransform__104 = 0;
		var scaleTransform__204 = 0;
		var scaleTransform__014 = 0;
		var scaleTransform__114 = scale4;
		var scaleTransform__214 = 0;
		var scaleTransform__024 = 0;
		var scaleTransform__124 = 0;
		var scaleTransform__224 = 1;
		var value_x4 = w;
		var value_y4 = h;
		var w7 = scaleTransform__024 * value_x4 + scaleTransform__124 * value_y4 + scaleTransform__224;
		var x5 = (scaleTransform__004 * value_x4 + scaleTransform__104 * value_y4 + scaleTransform__204) / w7;
		var y5 = (scaleTransform__014 * value_x4 + scaleTransform__114 * value_y4 + scaleTransform__214) / w7;
		var sv_x5 = x5;
		var sv_y5 = y5;
		var _this__004 = 1;
		var _this__104 = 0;
		var _this__204 = wid5 / 2 - sv_x5 / 2;
		var _this__014 = 0;
		var _this__114 = 1;
		var _this__214 = hi5 - sv_y5 - borderFrom;
		var _this__024 = 0;
		var _this__124 = 0;
		var _this__224 = 1;
		mF = new kha_math_FastMatrix3(_this__004 * scaleTransform__004 + _this__104 * scaleTransform__014 + _this__204 * scaleTransform__024,_this__004 * scaleTransform__104 + _this__104 * scaleTransform__114 + _this__204 * scaleTransform__124,_this__004 * scaleTransform__204 + _this__104 * scaleTransform__214 + _this__204 * scaleTransform__224,_this__014 * scaleTransform__004 + _this__114 * scaleTransform__014 + _this__214 * scaleTransform__024,_this__014 * scaleTransform__104 + _this__114 * scaleTransform__114 + _this__214 * scaleTransform__124,_this__014 * scaleTransform__204 + _this__114 * scaleTransform__214 + _this__214 * scaleTransform__224,_this__024 * scaleTransform__004 + _this__124 * scaleTransform__014 + _this__224 * scaleTransform__024,_this__024 * scaleTransform__104 + _this__124 * scaleTransform__114 + _this__224 * scaleTransform__124,_this__024 * scaleTransform__204 + _this__124 * scaleTransform__214 + _this__224 * scaleTransform__224);
		break;
	case 10:case 11:
		if(borderFrom * 2 + sv_x < wid) {
			var _this__005 = 1;
			var _this__105 = 0;
			var _this__205 = borderFrom;
			var _this__015 = 0;
			var _this__115 = 1;
			var _this__215 = borderFrom;
			var _this__025 = 0;
			var _this__125 = 0;
			var _this__225 = 1;
			mF = new kha_math_FastMatrix3(_this__005 * scaleTransform1._00 + _this__105 * scaleTransform1._01 + _this__205 * scaleTransform1._02,_this__005 * scaleTransform1._10 + _this__105 * scaleTransform1._11 + _this__205 * scaleTransform1._12,_this__005 * scaleTransform1._20 + _this__105 * scaleTransform1._21 + _this__205 * scaleTransform1._22,_this__015 * scaleTransform1._00 + _this__115 * scaleTransform1._01 + _this__215 * scaleTransform1._02,_this__015 * scaleTransform1._10 + _this__115 * scaleTransform1._11 + _this__215 * scaleTransform1._12,_this__015 * scaleTransform1._20 + _this__115 * scaleTransform1._21 + _this__215 * scaleTransform1._22,_this__025 * scaleTransform1._00 + _this__125 * scaleTransform1._01 + _this__225 * scaleTransform1._02,_this__025 * scaleTransform1._10 + _this__125 * scaleTransform1._11 + _this__225 * scaleTransform1._12,_this__025 * scaleTransform1._20 + _this__125 * scaleTransform1._21 + _this__225 * scaleTransform1._22);
		} else {
			var wid6 = Main.wid;
			var hi6 = Main.hi;
			var scaleTransform2 = Main.scaleTransform;
			var _this__006 = 1;
			var _this__106 = 0;
			var _this__206 = borderFrom;
			var _this__016 = 0;
			var _this__116 = 1;
			var _this__216 = hi6 / 2 - sv_y / 2;
			var _this__026 = 0;
			var _this__126 = 0;
			var _this__226 = 1;
			mF = new kha_math_FastMatrix3(_this__006 * scaleTransform2._00 + _this__106 * scaleTransform2._01 + _this__206 * scaleTransform2._02,_this__006 * scaleTransform2._10 + _this__106 * scaleTransform2._11 + _this__206 * scaleTransform2._12,_this__006 * scaleTransform2._20 + _this__106 * scaleTransform2._21 + _this__206 * scaleTransform2._22,_this__016 * scaleTransform2._00 + _this__116 * scaleTransform2._01 + _this__216 * scaleTransform2._02,_this__016 * scaleTransform2._10 + _this__116 * scaleTransform2._11 + _this__216 * scaleTransform2._12,_this__016 * scaleTransform2._20 + _this__116 * scaleTransform2._21 + _this__216 * scaleTransform2._22,_this__026 * scaleTransform2._00 + _this__126 * scaleTransform2._01 + _this__226 * scaleTransform2._02,_this__026 * scaleTransform2._10 + _this__126 * scaleTransform2._11 + _this__226 * scaleTransform2._12,_this__026 * scaleTransform2._20 + _this__126 * scaleTransform2._21 + _this__226 * scaleTransform2._22);
		}
		break;
	case 12:case 13:
		if(borderFrom * 2 + sv_x < wid) {
			var _this__007 = 1;
			var _this__107 = 0;
			var _this__207 = wid - sv_x - borderFrom;
			var _this__017 = 0;
			var _this__117 = 1;
			var _this__217 = borderFrom;
			var _this__027 = 0;
			var _this__127 = 0;
			var _this__227 = 1;
			mF = new kha_math_FastMatrix3(_this__007 * scaleTransform1._00 + _this__107 * scaleTransform1._01 + _this__207 * scaleTransform1._02,_this__007 * scaleTransform1._10 + _this__107 * scaleTransform1._11 + _this__207 * scaleTransform1._12,_this__007 * scaleTransform1._20 + _this__107 * scaleTransform1._21 + _this__207 * scaleTransform1._22,_this__017 * scaleTransform1._00 + _this__117 * scaleTransform1._01 + _this__217 * scaleTransform1._02,_this__017 * scaleTransform1._10 + _this__117 * scaleTransform1._11 + _this__217 * scaleTransform1._12,_this__017 * scaleTransform1._20 + _this__117 * scaleTransform1._21 + _this__217 * scaleTransform1._22,_this__027 * scaleTransform1._00 + _this__127 * scaleTransform1._01 + _this__227 * scaleTransform1._02,_this__027 * scaleTransform1._10 + _this__127 * scaleTransform1._11 + _this__227 * scaleTransform1._12,_this__027 * scaleTransform1._20 + _this__127 * scaleTransform1._21 + _this__227 * scaleTransform1._22);
		} else {
			var wid7 = Main.wid;
			var hi7 = Main.hi;
			var scaleTransform3 = Main.scaleTransform;
			var _this__008 = 1;
			var _this__108 = 0;
			var _this__208 = wid7 - sv_x - borderFrom;
			var _this__018 = 0;
			var _this__118 = 1;
			var _this__218 = hi7 / 2 - sv_y / 2;
			var _this__028 = 0;
			var _this__128 = 0;
			var _this__228 = 1;
			mF = new kha_math_FastMatrix3(_this__008 * scaleTransform3._00 + _this__108 * scaleTransform3._01 + _this__208 * scaleTransform3._02,_this__008 * scaleTransform3._10 + _this__108 * scaleTransform3._11 + _this__208 * scaleTransform3._12,_this__008 * scaleTransform3._20 + _this__108 * scaleTransform3._21 + _this__208 * scaleTransform3._22,_this__018 * scaleTransform3._00 + _this__118 * scaleTransform3._01 + _this__218 * scaleTransform3._02,_this__018 * scaleTransform3._10 + _this__118 * scaleTransform3._11 + _this__218 * scaleTransform3._12,_this__018 * scaleTransform3._20 + _this__118 * scaleTransform3._21 + _this__218 * scaleTransform3._22,_this__028 * scaleTransform3._00 + _this__128 * scaleTransform3._01 + _this__228 * scaleTransform3._02,_this__028 * scaleTransform3._10 + _this__128 * scaleTransform3._11 + _this__228 * scaleTransform3._12,_this__028 * scaleTransform3._20 + _this__128 * scaleTransform3._21 + _this__228 * scaleTransform3._22);
		}
		break;
	case 14:case 15:
		if(borderFrom * 2 + sv_y < hi) {
			var _this__009 = 1;
			var _this__109 = 0;
			var _this__209 = borderFrom;
			var _this__019 = 0;
			var _this__119 = 1;
			var _this__219 = hi - sv_y - borderFrom;
			var _this__029 = 0;
			var _this__129 = 0;
			var _this__229 = 1;
			mF = new kha_math_FastMatrix3(_this__009 * scaleTransform1._00 + _this__109 * scaleTransform1._01 + _this__209 * scaleTransform1._02,_this__009 * scaleTransform1._10 + _this__109 * scaleTransform1._11 + _this__209 * scaleTransform1._12,_this__009 * scaleTransform1._20 + _this__109 * scaleTransform1._21 + _this__209 * scaleTransform1._22,_this__019 * scaleTransform1._00 + _this__119 * scaleTransform1._01 + _this__219 * scaleTransform1._02,_this__019 * scaleTransform1._10 + _this__119 * scaleTransform1._11 + _this__219 * scaleTransform1._12,_this__019 * scaleTransform1._20 + _this__119 * scaleTransform1._21 + _this__219 * scaleTransform1._22,_this__029 * scaleTransform1._00 + _this__129 * scaleTransform1._01 + _this__229 * scaleTransform1._02,_this__029 * scaleTransform1._10 + _this__129 * scaleTransform1._11 + _this__229 * scaleTransform1._12,_this__029 * scaleTransform1._20 + _this__129 * scaleTransform1._21 + _this__229 * scaleTransform1._22);
		} else {
			var wid8 = Main.wid;
			var hi8 = Main.hi;
			var scaleTransform4 = Main.scaleTransform;
			var _this__0010 = 1;
			var _this__1010 = 0;
			var _this__2010 = borderFrom;
			var _this__0110 = 0;
			var _this__1110 = 1;
			var _this__2110 = hi8 / 2 - sv_y / 2;
			var _this__0210 = 0;
			var _this__1210 = 0;
			var _this__2210 = 1;
			mF = new kha_math_FastMatrix3(_this__0010 * scaleTransform4._00 + _this__1010 * scaleTransform4._01 + _this__2010 * scaleTransform4._02,_this__0010 * scaleTransform4._10 + _this__1010 * scaleTransform4._11 + _this__2010 * scaleTransform4._12,_this__0010 * scaleTransform4._20 + _this__1010 * scaleTransform4._21 + _this__2010 * scaleTransform4._22,_this__0110 * scaleTransform4._00 + _this__1110 * scaleTransform4._01 + _this__2110 * scaleTransform4._02,_this__0110 * scaleTransform4._10 + _this__1110 * scaleTransform4._11 + _this__2110 * scaleTransform4._12,_this__0110 * scaleTransform4._20 + _this__1110 * scaleTransform4._21 + _this__2110 * scaleTransform4._22,_this__0210 * scaleTransform4._00 + _this__1210 * scaleTransform4._01 + _this__2210 * scaleTransform4._02,_this__0210 * scaleTransform4._10 + _this__1210 * scaleTransform4._11 + _this__2210 * scaleTransform4._12,_this__0210 * scaleTransform4._20 + _this__1210 * scaleTransform4._21 + _this__2210 * scaleTransform4._22);
		}
		break;
	case 16:case 17:
		if(borderFrom * 2 + sv_y < hi) {
			var _this__0011 = 1;
			var _this__1011 = 0;
			var _this__2011 = wid - sv_x - borderFrom;
			var _this__0111 = 0;
			var _this__1111 = 1;
			var _this__2111 = hi - sv_y - borderFrom;
			var _this__0211 = 0;
			var _this__1211 = 0;
			var _this__2211 = 1;
			mF = new kha_math_FastMatrix3(_this__0011 * scaleTransform1._00 + _this__1011 * scaleTransform1._01 + _this__2011 * scaleTransform1._02,_this__0011 * scaleTransform1._10 + _this__1011 * scaleTransform1._11 + _this__2011 * scaleTransform1._12,_this__0011 * scaleTransform1._20 + _this__1011 * scaleTransform1._21 + _this__2011 * scaleTransform1._22,_this__0111 * scaleTransform1._00 + _this__1111 * scaleTransform1._01 + _this__2111 * scaleTransform1._02,_this__0111 * scaleTransform1._10 + _this__1111 * scaleTransform1._11 + _this__2111 * scaleTransform1._12,_this__0111 * scaleTransform1._20 + _this__1111 * scaleTransform1._21 + _this__2111 * scaleTransform1._22,_this__0211 * scaleTransform1._00 + _this__1211 * scaleTransform1._01 + _this__2211 * scaleTransform1._02,_this__0211 * scaleTransform1._10 + _this__1211 * scaleTransform1._11 + _this__2211 * scaleTransform1._12,_this__0211 * scaleTransform1._20 + _this__1211 * scaleTransform1._21 + _this__2211 * scaleTransform1._22);
		} else {
			var wid9 = Main.wid;
			var hi9 = Main.hi;
			var scaleTransform5 = Main.scaleTransform;
			var _this__0012 = 1;
			var _this__1012 = 0;
			var _this__2012 = wid9 - sv_x - borderFrom;
			var _this__0112 = 0;
			var _this__1112 = 1;
			var _this__2112 = hi9 / 2 - sv_y / 2;
			var _this__0212 = 0;
			var _this__1212 = 0;
			var _this__2212 = 1;
			mF = new kha_math_FastMatrix3(_this__0012 * scaleTransform5._00 + _this__1012 * scaleTransform5._01 + _this__2012 * scaleTransform5._02,_this__0012 * scaleTransform5._10 + _this__1012 * scaleTransform5._11 + _this__2012 * scaleTransform5._12,_this__0012 * scaleTransform5._20 + _this__1012 * scaleTransform5._21 + _this__2012 * scaleTransform5._22,_this__0112 * scaleTransform5._00 + _this__1112 * scaleTransform5._01 + _this__2112 * scaleTransform5._02,_this__0112 * scaleTransform5._10 + _this__1112 * scaleTransform5._11 + _this__2112 * scaleTransform5._12,_this__0112 * scaleTransform5._20 + _this__1112 * scaleTransform5._21 + _this__2112 * scaleTransform5._22,_this__0212 * scaleTransform5._00 + _this__1212 * scaleTransform5._01 + _this__2212 * scaleTransform5._02,_this__0212 * scaleTransform5._10 + _this__1212 * scaleTransform5._11 + _this__2212 * scaleTransform5._12,_this__0212 * scaleTransform5._20 + _this__1212 * scaleTransform5._21 + _this__2212 * scaleTransform5._22);
		}
		break;
	case 18:
		var wid10 = Main.wid;
		var hi10 = Main.hi;
		var scaleTransform6 = Main.scaleTransform;
		var _this__0013 = 1;
		var _this__1013 = 0;
		var _this__2013 = wid10 / 2 - sv_x / 2;
		var _this__0113 = 0;
		var _this__1113 = 1;
		var _this__2113 = hi10 / 2 - sv_y / 2;
		var _this__0213 = 0;
		var _this__1213 = 0;
		var _this__2213 = 1;
		mF = new kha_math_FastMatrix3(_this__0013 * scaleTransform6._00 + _this__1013 * scaleTransform6._01 + _this__2013 * scaleTransform6._02,_this__0013 * scaleTransform6._10 + _this__1013 * scaleTransform6._11 + _this__2013 * scaleTransform6._12,_this__0013 * scaleTransform6._20 + _this__1013 * scaleTransform6._21 + _this__2013 * scaleTransform6._22,_this__0113 * scaleTransform6._00 + _this__1113 * scaleTransform6._01 + _this__2113 * scaleTransform6._02,_this__0113 * scaleTransform6._10 + _this__1113 * scaleTransform6._11 + _this__2113 * scaleTransform6._12,_this__0113 * scaleTransform6._20 + _this__1113 * scaleTransform6._21 + _this__2113 * scaleTransform6._22,_this__0213 * scaleTransform6._00 + _this__1213 * scaleTransform6._01 + _this__2213 * scaleTransform6._02,_this__0213 * scaleTransform6._10 + _this__1213 * scaleTransform6._11 + _this__2213 * scaleTransform6._12,_this__0213 * scaleTransform6._20 + _this__1213 * scaleTransform6._21 + _this__2213 * scaleTransform6._22);
		break;
	case 19:case 20:case 21:
		if(borderFrom * 2 + sv_x < wid) {
			var wid11 = Main.wid;
			var hi11 = Main.hi;
			var scaleTransform7 = Main.scaleTransform;
			var _this__0014 = 1;
			var _this__1014 = 0;
			var _this__2014 = borderFrom;
			var _this__0114 = 0;
			var _this__1114 = 1;
			var _this__2114 = hi11 / 2 - sv_y / 2;
			var _this__0214 = 0;
			var _this__1214 = 0;
			var _this__2214 = 1;
			mF = new kha_math_FastMatrix3(_this__0014 * scaleTransform7._00 + _this__1014 * scaleTransform7._01 + _this__2014 * scaleTransform7._02,_this__0014 * scaleTransform7._10 + _this__1014 * scaleTransform7._11 + _this__2014 * scaleTransform7._12,_this__0014 * scaleTransform7._20 + _this__1014 * scaleTransform7._21 + _this__2014 * scaleTransform7._22,_this__0114 * scaleTransform7._00 + _this__1114 * scaleTransform7._01 + _this__2114 * scaleTransform7._02,_this__0114 * scaleTransform7._10 + _this__1114 * scaleTransform7._11 + _this__2114 * scaleTransform7._12,_this__0114 * scaleTransform7._20 + _this__1114 * scaleTransform7._21 + _this__2114 * scaleTransform7._22,_this__0214 * scaleTransform7._00 + _this__1214 * scaleTransform7._01 + _this__2214 * scaleTransform7._02,_this__0214 * scaleTransform7._10 + _this__1214 * scaleTransform7._11 + _this__2214 * scaleTransform7._12,_this__0214 * scaleTransform7._20 + _this__1214 * scaleTransform7._21 + _this__2214 * scaleTransform7._22);
		} else {
			var wid12 = Main.wid;
			var hi12 = Main.hi;
			var scaleTransform8 = Main.scaleTransform;
			var _this__0015 = 1;
			var _this__1015 = 0;
			var _this__2015 = wid12 / 2 - sv_x / 2;
			var _this__0115 = 0;
			var _this__1115 = 1;
			var _this__2115 = hi12 / 2 - sv_y / 2;
			var _this__0215 = 0;
			var _this__1215 = 0;
			var _this__2215 = 1;
			mF = new kha_math_FastMatrix3(_this__0015 * scaleTransform8._00 + _this__1015 * scaleTransform8._01 + _this__2015 * scaleTransform8._02,_this__0015 * scaleTransform8._10 + _this__1015 * scaleTransform8._11 + _this__2015 * scaleTransform8._12,_this__0015 * scaleTransform8._20 + _this__1015 * scaleTransform8._21 + _this__2015 * scaleTransform8._22,_this__0115 * scaleTransform8._00 + _this__1115 * scaleTransform8._01 + _this__2115 * scaleTransform8._02,_this__0115 * scaleTransform8._10 + _this__1115 * scaleTransform8._11 + _this__2115 * scaleTransform8._12,_this__0115 * scaleTransform8._20 + _this__1115 * scaleTransform8._21 + _this__2115 * scaleTransform8._22,_this__0215 * scaleTransform8._00 + _this__1215 * scaleTransform8._01 + _this__2215 * scaleTransform8._02,_this__0215 * scaleTransform8._10 + _this__1215 * scaleTransform8._11 + _this__2215 * scaleTransform8._12,_this__0215 * scaleTransform8._20 + _this__1215 * scaleTransform8._21 + _this__2215 * scaleTransform8._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderFrom * 2 + sv_x < wid) {
			var wid13 = Main.wid;
			var hi13 = Main.hi;
			var scaleTransform9 = Main.scaleTransform;
			var _this__0016 = 1;
			var _this__1016 = 0;
			var _this__2016 = wid13 - sv_x - borderFrom;
			var _this__0116 = 0;
			var _this__1116 = 1;
			var _this__2116 = hi13 / 2 - sv_y / 2;
			var _this__0216 = 0;
			var _this__1216 = 0;
			var _this__2216 = 1;
			mF = new kha_math_FastMatrix3(_this__0016 * scaleTransform9._00 + _this__1016 * scaleTransform9._01 + _this__2016 * scaleTransform9._02,_this__0016 * scaleTransform9._10 + _this__1016 * scaleTransform9._11 + _this__2016 * scaleTransform9._12,_this__0016 * scaleTransform9._20 + _this__1016 * scaleTransform9._21 + _this__2016 * scaleTransform9._22,_this__0116 * scaleTransform9._00 + _this__1116 * scaleTransform9._01 + _this__2116 * scaleTransform9._02,_this__0116 * scaleTransform9._10 + _this__1116 * scaleTransform9._11 + _this__2116 * scaleTransform9._12,_this__0116 * scaleTransform9._20 + _this__1116 * scaleTransform9._21 + _this__2116 * scaleTransform9._22,_this__0216 * scaleTransform9._00 + _this__1216 * scaleTransform9._01 + _this__2216 * scaleTransform9._02,_this__0216 * scaleTransform9._10 + _this__1216 * scaleTransform9._11 + _this__2216 * scaleTransform9._12,_this__0216 * scaleTransform9._20 + _this__1216 * scaleTransform9._21 + _this__2216 * scaleTransform9._22);
		} else {
			var wid14 = Main.wid;
			var hi14 = Main.hi;
			var scaleTransform10 = Main.scaleTransform;
			var _this__0017 = 1;
			var _this__1017 = 0;
			var _this__2017 = wid14 / 2 - sv_x / 2;
			var _this__0117 = 0;
			var _this__1117 = 1;
			var _this__2117 = hi14 / 2 - sv_y / 2;
			var _this__0217 = 0;
			var _this__1217 = 0;
			var _this__2217 = 1;
			mF = new kha_math_FastMatrix3(_this__0017 * scaleTransform10._00 + _this__1017 * scaleTransform10._01 + _this__2017 * scaleTransform10._02,_this__0017 * scaleTransform10._10 + _this__1017 * scaleTransform10._11 + _this__2017 * scaleTransform10._12,_this__0017 * scaleTransform10._20 + _this__1017 * scaleTransform10._21 + _this__2017 * scaleTransform10._22,_this__0117 * scaleTransform10._00 + _this__1117 * scaleTransform10._01 + _this__2117 * scaleTransform10._02,_this__0117 * scaleTransform10._10 + _this__1117 * scaleTransform10._11 + _this__2117 * scaleTransform10._12,_this__0117 * scaleTransform10._20 + _this__1117 * scaleTransform10._21 + _this__2117 * scaleTransform10._22,_this__0217 * scaleTransform10._00 + _this__1217 * scaleTransform10._01 + _this__2217 * scaleTransform10._02,_this__0217 * scaleTransform10._10 + _this__1217 * scaleTransform10._11 + _this__2217 * scaleTransform10._12,_this__0217 * scaleTransform10._20 + _this__1217 * scaleTransform10._21 + _this__2217 * scaleTransform10._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderFrom * 2 + sv_y < hi) {
			var _this__0018 = 1;
			var _this__1018 = 0;
			var _this__2018 = wid / 2 - sv_x / 2;
			var _this__0118 = 0;
			var _this__1118 = 1;
			var _this__2118 = hi - sv_y - borderFrom;
			var _this__0218 = 0;
			var _this__1218 = 0;
			var _this__2218 = 1;
			mF = new kha_math_FastMatrix3(_this__0018 * scaleTransform1._00 + _this__1018 * scaleTransform1._01 + _this__2018 * scaleTransform1._02,_this__0018 * scaleTransform1._10 + _this__1018 * scaleTransform1._11 + _this__2018 * scaleTransform1._12,_this__0018 * scaleTransform1._20 + _this__1018 * scaleTransform1._21 + _this__2018 * scaleTransform1._22,_this__0118 * scaleTransform1._00 + _this__1118 * scaleTransform1._01 + _this__2118 * scaleTransform1._02,_this__0118 * scaleTransform1._10 + _this__1118 * scaleTransform1._11 + _this__2118 * scaleTransform1._12,_this__0118 * scaleTransform1._20 + _this__1118 * scaleTransform1._21 + _this__2118 * scaleTransform1._22,_this__0218 * scaleTransform1._00 + _this__1218 * scaleTransform1._01 + _this__2218 * scaleTransform1._02,_this__0218 * scaleTransform1._10 + _this__1218 * scaleTransform1._11 + _this__2218 * scaleTransform1._12,_this__0218 * scaleTransform1._20 + _this__1218 * scaleTransform1._21 + _this__2218 * scaleTransform1._22);
		} else {
			var wid15 = Main.wid;
			var hi15 = Main.hi;
			var scaleTransform11 = Main.scaleTransform;
			var _this__0019 = 1;
			var _this__1019 = 0;
			var _this__2019 = wid15 / 2 - sv_x / 2;
			var _this__0119 = 0;
			var _this__1119 = 1;
			var _this__2119 = hi15 / 2 - sv_y / 2;
			var _this__0219 = 0;
			var _this__1219 = 0;
			var _this__2219 = 1;
			mF = new kha_math_FastMatrix3(_this__0019 * scaleTransform11._00 + _this__1019 * scaleTransform11._01 + _this__2019 * scaleTransform11._02,_this__0019 * scaleTransform11._10 + _this__1019 * scaleTransform11._11 + _this__2019 * scaleTransform11._12,_this__0019 * scaleTransform11._20 + _this__1019 * scaleTransform11._21 + _this__2019 * scaleTransform11._22,_this__0119 * scaleTransform11._00 + _this__1119 * scaleTransform11._01 + _this__2119 * scaleTransform11._02,_this__0119 * scaleTransform11._10 + _this__1119 * scaleTransform11._11 + _this__2119 * scaleTransform11._12,_this__0119 * scaleTransform11._20 + _this__1119 * scaleTransform11._21 + _this__2119 * scaleTransform11._22,_this__0219 * scaleTransform11._00 + _this__1219 * scaleTransform11._01 + _this__2219 * scaleTransform11._02,_this__0219 * scaleTransform11._10 + _this__1219 * scaleTransform11._11 + _this__2219 * scaleTransform11._12,_this__0219 * scaleTransform11._20 + _this__1219 * scaleTransform11._21 + _this__2219 * scaleTransform11._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderFrom * 2 + sv_y < hi) {
			var _this__0020 = 1;
			var _this__1020 = 0;
			var _this__2020 = wid / 2 - sv_x / 2;
			var _this__0120 = 0;
			var _this__1120 = 1;
			var _this__2120 = borderFrom;
			var _this__0220 = 0;
			var _this__1220 = 0;
			var _this__2220 = 1;
			mF = new kha_math_FastMatrix3(_this__0020 * scaleTransform1._00 + _this__1020 * scaleTransform1._01 + _this__2020 * scaleTransform1._02,_this__0020 * scaleTransform1._10 + _this__1020 * scaleTransform1._11 + _this__2020 * scaleTransform1._12,_this__0020 * scaleTransform1._20 + _this__1020 * scaleTransform1._21 + _this__2020 * scaleTransform1._22,_this__0120 * scaleTransform1._00 + _this__1120 * scaleTransform1._01 + _this__2120 * scaleTransform1._02,_this__0120 * scaleTransform1._10 + _this__1120 * scaleTransform1._11 + _this__2120 * scaleTransform1._12,_this__0120 * scaleTransform1._20 + _this__1120 * scaleTransform1._21 + _this__2120 * scaleTransform1._22,_this__0220 * scaleTransform1._00 + _this__1220 * scaleTransform1._01 + _this__2220 * scaleTransform1._02,_this__0220 * scaleTransform1._10 + _this__1220 * scaleTransform1._11 + _this__2220 * scaleTransform1._12,_this__0220 * scaleTransform1._20 + _this__1220 * scaleTransform1._21 + _this__2220 * scaleTransform1._22);
		} else {
			var wid16 = Main.wid;
			var hi16 = Main.hi;
			var scaleTransform12 = Main.scaleTransform;
			var _this__0021 = 1;
			var _this__1021 = 0;
			var _this__2021 = wid16 / 2 - sv_x / 2;
			var _this__0121 = 0;
			var _this__1121 = 1;
			var _this__2121 = hi16 / 2 - sv_y / 2;
			var _this__0221 = 0;
			var _this__1221 = 0;
			var _this__2221 = 1;
			mF = new kha_math_FastMatrix3(_this__0021 * scaleTransform12._00 + _this__1021 * scaleTransform12._01 + _this__2021 * scaleTransform12._02,_this__0021 * scaleTransform12._10 + _this__1021 * scaleTransform12._11 + _this__2021 * scaleTransform12._12,_this__0021 * scaleTransform12._20 + _this__1021 * scaleTransform12._21 + _this__2021 * scaleTransform12._22,_this__0121 * scaleTransform12._00 + _this__1121 * scaleTransform12._01 + _this__2121 * scaleTransform12._02,_this__0121 * scaleTransform12._10 + _this__1121 * scaleTransform12._11 + _this__2121 * scaleTransform12._12,_this__0121 * scaleTransform12._20 + _this__1121 * scaleTransform12._21 + _this__2121 * scaleTransform12._22,_this__0221 * scaleTransform12._00 + _this__1221 * scaleTransform12._01 + _this__2221 * scaleTransform12._02,_this__0221 * scaleTransform12._10 + _this__1221 * scaleTransform12._11 + _this__2221 * scaleTransform12._12,_this__0221 * scaleTransform12._20 + _this__1221 * scaleTransform12._21 + _this__2221 * scaleTransform12._22);
		}
		break;
	}
	var scaleTransform13 = Main.scaleTransform;
	var v_x1 = w;
	var v_y1 = h;
	var w8 = scaleTransform13._02 * v_x1 + scaleTransform13._12 * v_y1 + scaleTransform13._22;
	var x6 = (scaleTransform13._00 * v_x1 + scaleTransform13._10 * v_y1 + scaleTransform13._20) / w8;
	var y6 = (scaleTransform13._01 * v_x1 + scaleTransform13._11 * v_y1 + scaleTransform13._21) / w8;
	var sv_x6 = x6;
	var sv_y6 = y6;
	var wid17 = Main.wid;
	var hi17 = Main.hi;
	var scaleTransform14 = Main.scaleTransform;
	var mT;
	switch(to._hx_index) {
	case 2:case 7:
		var wid18 = Main.wid;
		var hi18 = Main.hi;
		var w25 = wid18 - borderTo * 2;
		var h25 = hi18 - borderTo * 2;
		var dw5 = w25 - w;
		var dh5 = h25 - h;
		var scale5 = dw5 < dh5 ? w25 / w : h25 / h;
		if(scale5 < 0) {
			scale5 = 0.;
		}
		var scaleTransform__005 = scale5;
		var scaleTransform__105 = 0;
		var scaleTransform__205 = 0;
		var scaleTransform__015 = 0;
		var scaleTransform__115 = scale5;
		var scaleTransform__215 = 0;
		var scaleTransform__025 = 0;
		var scaleTransform__125 = 0;
		var scaleTransform__225 = 1;
		var value_x5 = w;
		var value_y5 = h;
		var w9 = scaleTransform__025 * value_x5 + scaleTransform__125 * value_y5 + scaleTransform__225;
		var x7 = (scaleTransform__005 * value_x5 + scaleTransform__105 * value_y5 + scaleTransform__205) / w9;
		var y7 = (scaleTransform__015 * value_x5 + scaleTransform__115 * value_y5 + scaleTransform__215) / w9;
		var sv_x7 = x7;
		var sv_y7 = y7;
		var _this__0022 = 1;
		var _this__1022 = 0;
		var _this__2022 = wid18 - sv_x7 - borderTo;
		var _this__0122 = 0;
		var _this__1122 = 1;
		var _this__2122 = hi18 / 2 - sv_y7 / 2;
		var _this__0222 = 0;
		var _this__1222 = 0;
		var _this__2222 = 1;
		mT = new kha_math_FastMatrix3(_this__0022 * scaleTransform__005 + _this__1022 * scaleTransform__015 + _this__2022 * scaleTransform__025,_this__0022 * scaleTransform__105 + _this__1022 * scaleTransform__115 + _this__2022 * scaleTransform__125,_this__0022 * scaleTransform__205 + _this__1022 * scaleTransform__215 + _this__2022 * scaleTransform__225,_this__0122 * scaleTransform__005 + _this__1122 * scaleTransform__015 + _this__2122 * scaleTransform__025,_this__0122 * scaleTransform__105 + _this__1122 * scaleTransform__115 + _this__2122 * scaleTransform__125,_this__0122 * scaleTransform__205 + _this__1122 * scaleTransform__215 + _this__2122 * scaleTransform__225,_this__0222 * scaleTransform__005 + _this__1222 * scaleTransform__015 + _this__2222 * scaleTransform__025,_this__0222 * scaleTransform__105 + _this__1222 * scaleTransform__115 + _this__2222 * scaleTransform__125,_this__0222 * scaleTransform__205 + _this__1222 * scaleTransform__215 + _this__2222 * scaleTransform__225);
		break;
	case 0:case 5:
		var wid19 = Main.wid;
		var hi19 = Main.hi;
		var w26 = wid19 - borderTo * 2;
		var h26 = hi19 - borderTo * 2;
		var dw6 = w26 - w;
		var dh6 = h26 - h;
		var scale6 = dw6 < dh6 ? w26 / w : h26 / h;
		if(scale6 < 0) {
			scale6 = 0.;
		}
		var scaleTransform__006 = scale6;
		var scaleTransform__106 = 0;
		var scaleTransform__206 = 0;
		var scaleTransform__016 = 0;
		var scaleTransform__116 = scale6;
		var scaleTransform__216 = 0;
		var scaleTransform__026 = 0;
		var scaleTransform__126 = 0;
		var scaleTransform__226 = 1;
		var value_x6 = w;
		var value_y6 = h;
		var w10 = scaleTransform__026 * value_x6 + scaleTransform__126 * value_y6 + scaleTransform__226;
		var x8 = (scaleTransform__006 * value_x6 + scaleTransform__106 * value_y6 + scaleTransform__206) / w10;
		var y8 = (scaleTransform__016 * value_x6 + scaleTransform__116 * value_y6 + scaleTransform__216) / w10;
		var sv_x8 = x8;
		var sv_y8 = y8;
		var _this__0023 = 1;
		var _this__1023 = 0;
		var _this__2023 = wid19 / 2 - sv_x8 / 2;
		var _this__0123 = 0;
		var _this__1123 = 1;
		var _this__2123 = hi19 / 2 - sv_y8 / 2;
		var _this__0223 = 0;
		var _this__1223 = 0;
		var _this__2223 = 1;
		mT = new kha_math_FastMatrix3(_this__0023 * scaleTransform__006 + _this__1023 * scaleTransform__016 + _this__2023 * scaleTransform__026,_this__0023 * scaleTransform__106 + _this__1023 * scaleTransform__116 + _this__2023 * scaleTransform__126,_this__0023 * scaleTransform__206 + _this__1023 * scaleTransform__216 + _this__2023 * scaleTransform__226,_this__0123 * scaleTransform__006 + _this__1123 * scaleTransform__016 + _this__2123 * scaleTransform__026,_this__0123 * scaleTransform__106 + _this__1123 * scaleTransform__116 + _this__2123 * scaleTransform__126,_this__0123 * scaleTransform__206 + _this__1123 * scaleTransform__216 + _this__2123 * scaleTransform__226,_this__0223 * scaleTransform__006 + _this__1223 * scaleTransform__016 + _this__2223 * scaleTransform__026,_this__0223 * scaleTransform__106 + _this__1223 * scaleTransform__116 + _this__2223 * scaleTransform__126,_this__0223 * scaleTransform__206 + _this__1223 * scaleTransform__216 + _this__2223 * scaleTransform__226);
		break;
	case 1:case 6:
		var wid20 = Main.wid;
		var hi20 = Main.hi;
		var w27 = wid20 - borderTo * 2;
		var h27 = hi20 - borderTo * 2;
		var dw7 = w27 - w;
		var dh7 = h27 - h;
		var scale7 = dw7 < dh7 ? w27 / w : h27 / h;
		if(scale7 < 0) {
			scale7 = 0.;
		}
		var scaleTransform__007 = scale7;
		var scaleTransform__107 = 0;
		var scaleTransform__207 = 0;
		var scaleTransform__017 = 0;
		var scaleTransform__117 = scale7;
		var scaleTransform__217 = 0;
		var scaleTransform__027 = 0;
		var scaleTransform__127 = 0;
		var scaleTransform__227 = 1;
		var value_x7 = w;
		var value_y7 = h;
		var w11 = scaleTransform__027 * value_x7 + scaleTransform__127 * value_y7 + scaleTransform__227;
		var x9 = (scaleTransform__007 * value_x7 + scaleTransform__107 * value_y7 + scaleTransform__207) / w11;
		var y9 = (scaleTransform__017 * value_x7 + scaleTransform__117 * value_y7 + scaleTransform__217) / w11;
		var sv_x9 = x9;
		var sv_y9 = y9;
		var _this__0024 = 1;
		var _this__1024 = 0;
		var _this__2024 = borderTo;
		var _this__0124 = 0;
		var _this__1124 = 1;
		var _this__2124 = hi20 / 2 - sv_y9 / 2;
		var _this__0224 = 0;
		var _this__1224 = 0;
		var _this__2224 = 1;
		mT = new kha_math_FastMatrix3(_this__0024 * scaleTransform__007 + _this__1024 * scaleTransform__017 + _this__2024 * scaleTransform__027,_this__0024 * scaleTransform__107 + _this__1024 * scaleTransform__117 + _this__2024 * scaleTransform__127,_this__0024 * scaleTransform__207 + _this__1024 * scaleTransform__217 + _this__2024 * scaleTransform__227,_this__0124 * scaleTransform__007 + _this__1124 * scaleTransform__017 + _this__2124 * scaleTransform__027,_this__0124 * scaleTransform__107 + _this__1124 * scaleTransform__117 + _this__2124 * scaleTransform__127,_this__0124 * scaleTransform__207 + _this__1124 * scaleTransform__217 + _this__2124 * scaleTransform__227,_this__0224 * scaleTransform__007 + _this__1224 * scaleTransform__017 + _this__2224 * scaleTransform__027,_this__0224 * scaleTransform__107 + _this__1224 * scaleTransform__117 + _this__2224 * scaleTransform__127,_this__0224 * scaleTransform__207 + _this__1224 * scaleTransform__217 + _this__2224 * scaleTransform__227);
		break;
	case 3:case 8:
		var wid21 = Main.wid;
		var hi21 = Main.hi;
		var w28 = wid21 - borderTo * 2;
		var h28 = hi21 - borderTo * 2;
		var dw8 = w28 - w;
		var dh8 = h28 - h;
		var scale8 = dw8 < dh8 ? w28 / w : h28 / h;
		if(scale8 < 0) {
			scale8 = 0.;
		}
		var scaleTransform__008 = scale8;
		var scaleTransform__108 = 0;
		var scaleTransform__208 = 0;
		var scaleTransform__018 = 0;
		var scaleTransform__118 = scale8;
		var scaleTransform__218 = 0;
		var scaleTransform__028 = 0;
		var scaleTransform__128 = 0;
		var scaleTransform__228 = 1;
		var value_x8 = w;
		var value_y8 = h;
		var w12 = scaleTransform__028 * value_x8 + scaleTransform__128 * value_y8 + scaleTransform__228;
		var x10 = (scaleTransform__008 * value_x8 + scaleTransform__108 * value_y8 + scaleTransform__208) / w12;
		var y10 = (scaleTransform__018 * value_x8 + scaleTransform__118 * value_y8 + scaleTransform__218) / w12;
		var sv_x10 = x10;
		var sv_y10 = y10;
		var _this__0025 = 1;
		var _this__1025 = 0;
		var _this__2025 = wid21 / 2 - sv_x10 / 2;
		var _this__0125 = 0;
		var _this__1125 = 1;
		var _this__2125 = borderTo;
		var _this__0225 = 0;
		var _this__1225 = 0;
		var _this__2225 = 1;
		mT = new kha_math_FastMatrix3(_this__0025 * scaleTransform__008 + _this__1025 * scaleTransform__018 + _this__2025 * scaleTransform__028,_this__0025 * scaleTransform__108 + _this__1025 * scaleTransform__118 + _this__2025 * scaleTransform__128,_this__0025 * scaleTransform__208 + _this__1025 * scaleTransform__218 + _this__2025 * scaleTransform__228,_this__0125 * scaleTransform__008 + _this__1125 * scaleTransform__018 + _this__2125 * scaleTransform__028,_this__0125 * scaleTransform__108 + _this__1125 * scaleTransform__118 + _this__2125 * scaleTransform__128,_this__0125 * scaleTransform__208 + _this__1125 * scaleTransform__218 + _this__2125 * scaleTransform__228,_this__0225 * scaleTransform__008 + _this__1225 * scaleTransform__018 + _this__2225 * scaleTransform__028,_this__0225 * scaleTransform__108 + _this__1225 * scaleTransform__118 + _this__2225 * scaleTransform__128,_this__0225 * scaleTransform__208 + _this__1225 * scaleTransform__218 + _this__2225 * scaleTransform__228);
		break;
	case 4:case 9:
		var wid22 = Main.wid;
		var hi22 = Main.hi;
		var w29 = wid22 - borderTo * 2;
		var h29 = hi22 - borderTo * 2;
		var dw9 = w29 - w;
		var dh9 = h29 - h;
		var scale9 = dw9 < dh9 ? w29 / w : h29 / h;
		if(scale9 < 0) {
			scale9 = 0.;
		}
		var scaleTransform__009 = scale9;
		var scaleTransform__109 = 0;
		var scaleTransform__209 = 0;
		var scaleTransform__019 = 0;
		var scaleTransform__119 = scale9;
		var scaleTransform__219 = 0;
		var scaleTransform__029 = 0;
		var scaleTransform__129 = 0;
		var scaleTransform__229 = 1;
		var value_x9 = w;
		var value_y9 = h;
		var w13 = scaleTransform__029 * value_x9 + scaleTransform__129 * value_y9 + scaleTransform__229;
		var x11 = (scaleTransform__009 * value_x9 + scaleTransform__109 * value_y9 + scaleTransform__209) / w13;
		var y11 = (scaleTransform__019 * value_x9 + scaleTransform__119 * value_y9 + scaleTransform__219) / w13;
		var sv_x11 = x11;
		var sv_y11 = y11;
		var _this__0026 = 1;
		var _this__1026 = 0;
		var _this__2026 = wid22 / 2 - sv_x11 / 2;
		var _this__0126 = 0;
		var _this__1126 = 1;
		var _this__2126 = hi22 - sv_y11 - borderTo;
		var _this__0226 = 0;
		var _this__1226 = 0;
		var _this__2226 = 1;
		mT = new kha_math_FastMatrix3(_this__0026 * scaleTransform__009 + _this__1026 * scaleTransform__019 + _this__2026 * scaleTransform__029,_this__0026 * scaleTransform__109 + _this__1026 * scaleTransform__119 + _this__2026 * scaleTransform__129,_this__0026 * scaleTransform__209 + _this__1026 * scaleTransform__219 + _this__2026 * scaleTransform__229,_this__0126 * scaleTransform__009 + _this__1126 * scaleTransform__019 + _this__2126 * scaleTransform__029,_this__0126 * scaleTransform__109 + _this__1126 * scaleTransform__119 + _this__2126 * scaleTransform__129,_this__0126 * scaleTransform__209 + _this__1126 * scaleTransform__219 + _this__2126 * scaleTransform__229,_this__0226 * scaleTransform__009 + _this__1226 * scaleTransform__019 + _this__2226 * scaleTransform__029,_this__0226 * scaleTransform__109 + _this__1226 * scaleTransform__119 + _this__2226 * scaleTransform__129,_this__0226 * scaleTransform__209 + _this__1226 * scaleTransform__219 + _this__2226 * scaleTransform__229);
		break;
	case 10:case 11:
		if(borderTo * 2 + sv_x6 < wid17) {
			var _this__0027 = 1;
			var _this__1027 = 0;
			var _this__2027 = borderTo;
			var _this__0127 = 0;
			var _this__1127 = 1;
			var _this__2127 = borderTo;
			var _this__0227 = 0;
			var _this__1227 = 0;
			var _this__2227 = 1;
			mT = new kha_math_FastMatrix3(_this__0027 * scaleTransform14._00 + _this__1027 * scaleTransform14._01 + _this__2027 * scaleTransform14._02,_this__0027 * scaleTransform14._10 + _this__1027 * scaleTransform14._11 + _this__2027 * scaleTransform14._12,_this__0027 * scaleTransform14._20 + _this__1027 * scaleTransform14._21 + _this__2027 * scaleTransform14._22,_this__0127 * scaleTransform14._00 + _this__1127 * scaleTransform14._01 + _this__2127 * scaleTransform14._02,_this__0127 * scaleTransform14._10 + _this__1127 * scaleTransform14._11 + _this__2127 * scaleTransform14._12,_this__0127 * scaleTransform14._20 + _this__1127 * scaleTransform14._21 + _this__2127 * scaleTransform14._22,_this__0227 * scaleTransform14._00 + _this__1227 * scaleTransform14._01 + _this__2227 * scaleTransform14._02,_this__0227 * scaleTransform14._10 + _this__1227 * scaleTransform14._11 + _this__2227 * scaleTransform14._12,_this__0227 * scaleTransform14._20 + _this__1227 * scaleTransform14._21 + _this__2227 * scaleTransform14._22);
		} else {
			var wid23 = Main.wid;
			var hi23 = Main.hi;
			var scaleTransform15 = Main.scaleTransform;
			var _this__0028 = 1;
			var _this__1028 = 0;
			var _this__2028 = borderTo;
			var _this__0128 = 0;
			var _this__1128 = 1;
			var _this__2128 = hi23 / 2 - sv_y6 / 2;
			var _this__0228 = 0;
			var _this__1228 = 0;
			var _this__2228 = 1;
			mT = new kha_math_FastMatrix3(_this__0028 * scaleTransform15._00 + _this__1028 * scaleTransform15._01 + _this__2028 * scaleTransform15._02,_this__0028 * scaleTransform15._10 + _this__1028 * scaleTransform15._11 + _this__2028 * scaleTransform15._12,_this__0028 * scaleTransform15._20 + _this__1028 * scaleTransform15._21 + _this__2028 * scaleTransform15._22,_this__0128 * scaleTransform15._00 + _this__1128 * scaleTransform15._01 + _this__2128 * scaleTransform15._02,_this__0128 * scaleTransform15._10 + _this__1128 * scaleTransform15._11 + _this__2128 * scaleTransform15._12,_this__0128 * scaleTransform15._20 + _this__1128 * scaleTransform15._21 + _this__2128 * scaleTransform15._22,_this__0228 * scaleTransform15._00 + _this__1228 * scaleTransform15._01 + _this__2228 * scaleTransform15._02,_this__0228 * scaleTransform15._10 + _this__1228 * scaleTransform15._11 + _this__2228 * scaleTransform15._12,_this__0228 * scaleTransform15._20 + _this__1228 * scaleTransform15._21 + _this__2228 * scaleTransform15._22);
		}
		break;
	case 12:case 13:
		if(borderTo * 2 + sv_x6 < wid17) {
			var _this__0029 = 1;
			var _this__1029 = 0;
			var _this__2029 = wid17 - sv_x6 - borderTo;
			var _this__0129 = 0;
			var _this__1129 = 1;
			var _this__2129 = borderTo;
			var _this__0229 = 0;
			var _this__1229 = 0;
			var _this__2229 = 1;
			mT = new kha_math_FastMatrix3(_this__0029 * scaleTransform14._00 + _this__1029 * scaleTransform14._01 + _this__2029 * scaleTransform14._02,_this__0029 * scaleTransform14._10 + _this__1029 * scaleTransform14._11 + _this__2029 * scaleTransform14._12,_this__0029 * scaleTransform14._20 + _this__1029 * scaleTransform14._21 + _this__2029 * scaleTransform14._22,_this__0129 * scaleTransform14._00 + _this__1129 * scaleTransform14._01 + _this__2129 * scaleTransform14._02,_this__0129 * scaleTransform14._10 + _this__1129 * scaleTransform14._11 + _this__2129 * scaleTransform14._12,_this__0129 * scaleTransform14._20 + _this__1129 * scaleTransform14._21 + _this__2129 * scaleTransform14._22,_this__0229 * scaleTransform14._00 + _this__1229 * scaleTransform14._01 + _this__2229 * scaleTransform14._02,_this__0229 * scaleTransform14._10 + _this__1229 * scaleTransform14._11 + _this__2229 * scaleTransform14._12,_this__0229 * scaleTransform14._20 + _this__1229 * scaleTransform14._21 + _this__2229 * scaleTransform14._22);
		} else {
			var wid24 = Main.wid;
			var hi24 = Main.hi;
			var scaleTransform16 = Main.scaleTransform;
			var _this__0030 = 1;
			var _this__1030 = 0;
			var _this__2030 = wid24 - sv_x6 - borderTo;
			var _this__0130 = 0;
			var _this__1130 = 1;
			var _this__2130 = hi24 / 2 - sv_y6 / 2;
			var _this__0230 = 0;
			var _this__1230 = 0;
			var _this__2230 = 1;
			mT = new kha_math_FastMatrix3(_this__0030 * scaleTransform16._00 + _this__1030 * scaleTransform16._01 + _this__2030 * scaleTransform16._02,_this__0030 * scaleTransform16._10 + _this__1030 * scaleTransform16._11 + _this__2030 * scaleTransform16._12,_this__0030 * scaleTransform16._20 + _this__1030 * scaleTransform16._21 + _this__2030 * scaleTransform16._22,_this__0130 * scaleTransform16._00 + _this__1130 * scaleTransform16._01 + _this__2130 * scaleTransform16._02,_this__0130 * scaleTransform16._10 + _this__1130 * scaleTransform16._11 + _this__2130 * scaleTransform16._12,_this__0130 * scaleTransform16._20 + _this__1130 * scaleTransform16._21 + _this__2130 * scaleTransform16._22,_this__0230 * scaleTransform16._00 + _this__1230 * scaleTransform16._01 + _this__2230 * scaleTransform16._02,_this__0230 * scaleTransform16._10 + _this__1230 * scaleTransform16._11 + _this__2230 * scaleTransform16._12,_this__0230 * scaleTransform16._20 + _this__1230 * scaleTransform16._21 + _this__2230 * scaleTransform16._22);
		}
		break;
	case 14:case 15:
		if(borderTo * 2 + sv_y6 < hi17) {
			var _this__0031 = 1;
			var _this__1031 = 0;
			var _this__2031 = borderTo;
			var _this__0131 = 0;
			var _this__1131 = 1;
			var _this__2131 = hi17 - sv_y6 - borderTo;
			var _this__0231 = 0;
			var _this__1231 = 0;
			var _this__2231 = 1;
			mT = new kha_math_FastMatrix3(_this__0031 * scaleTransform14._00 + _this__1031 * scaleTransform14._01 + _this__2031 * scaleTransform14._02,_this__0031 * scaleTransform14._10 + _this__1031 * scaleTransform14._11 + _this__2031 * scaleTransform14._12,_this__0031 * scaleTransform14._20 + _this__1031 * scaleTransform14._21 + _this__2031 * scaleTransform14._22,_this__0131 * scaleTransform14._00 + _this__1131 * scaleTransform14._01 + _this__2131 * scaleTransform14._02,_this__0131 * scaleTransform14._10 + _this__1131 * scaleTransform14._11 + _this__2131 * scaleTransform14._12,_this__0131 * scaleTransform14._20 + _this__1131 * scaleTransform14._21 + _this__2131 * scaleTransform14._22,_this__0231 * scaleTransform14._00 + _this__1231 * scaleTransform14._01 + _this__2231 * scaleTransform14._02,_this__0231 * scaleTransform14._10 + _this__1231 * scaleTransform14._11 + _this__2231 * scaleTransform14._12,_this__0231 * scaleTransform14._20 + _this__1231 * scaleTransform14._21 + _this__2231 * scaleTransform14._22);
		} else {
			var wid25 = Main.wid;
			var hi25 = Main.hi;
			var scaleTransform17 = Main.scaleTransform;
			var _this__0032 = 1;
			var _this__1032 = 0;
			var _this__2032 = borderTo;
			var _this__0132 = 0;
			var _this__1132 = 1;
			var _this__2132 = hi25 / 2 - sv_y6 / 2;
			var _this__0232 = 0;
			var _this__1232 = 0;
			var _this__2232 = 1;
			mT = new kha_math_FastMatrix3(_this__0032 * scaleTransform17._00 + _this__1032 * scaleTransform17._01 + _this__2032 * scaleTransform17._02,_this__0032 * scaleTransform17._10 + _this__1032 * scaleTransform17._11 + _this__2032 * scaleTransform17._12,_this__0032 * scaleTransform17._20 + _this__1032 * scaleTransform17._21 + _this__2032 * scaleTransform17._22,_this__0132 * scaleTransform17._00 + _this__1132 * scaleTransform17._01 + _this__2132 * scaleTransform17._02,_this__0132 * scaleTransform17._10 + _this__1132 * scaleTransform17._11 + _this__2132 * scaleTransform17._12,_this__0132 * scaleTransform17._20 + _this__1132 * scaleTransform17._21 + _this__2132 * scaleTransform17._22,_this__0232 * scaleTransform17._00 + _this__1232 * scaleTransform17._01 + _this__2232 * scaleTransform17._02,_this__0232 * scaleTransform17._10 + _this__1232 * scaleTransform17._11 + _this__2232 * scaleTransform17._12,_this__0232 * scaleTransform17._20 + _this__1232 * scaleTransform17._21 + _this__2232 * scaleTransform17._22);
		}
		break;
	case 16:case 17:
		if(borderTo * 2 + sv_y6 < hi17) {
			var _this__0033 = 1;
			var _this__1033 = 0;
			var _this__2033 = wid17 - sv_x6 - borderTo;
			var _this__0133 = 0;
			var _this__1133 = 1;
			var _this__2133 = hi17 - sv_y6 - borderTo;
			var _this__0233 = 0;
			var _this__1233 = 0;
			var _this__2233 = 1;
			mT = new kha_math_FastMatrix3(_this__0033 * scaleTransform14._00 + _this__1033 * scaleTransform14._01 + _this__2033 * scaleTransform14._02,_this__0033 * scaleTransform14._10 + _this__1033 * scaleTransform14._11 + _this__2033 * scaleTransform14._12,_this__0033 * scaleTransform14._20 + _this__1033 * scaleTransform14._21 + _this__2033 * scaleTransform14._22,_this__0133 * scaleTransform14._00 + _this__1133 * scaleTransform14._01 + _this__2133 * scaleTransform14._02,_this__0133 * scaleTransform14._10 + _this__1133 * scaleTransform14._11 + _this__2133 * scaleTransform14._12,_this__0133 * scaleTransform14._20 + _this__1133 * scaleTransform14._21 + _this__2133 * scaleTransform14._22,_this__0233 * scaleTransform14._00 + _this__1233 * scaleTransform14._01 + _this__2233 * scaleTransform14._02,_this__0233 * scaleTransform14._10 + _this__1233 * scaleTransform14._11 + _this__2233 * scaleTransform14._12,_this__0233 * scaleTransform14._20 + _this__1233 * scaleTransform14._21 + _this__2233 * scaleTransform14._22);
		} else {
			var wid26 = Main.wid;
			var hi26 = Main.hi;
			var scaleTransform18 = Main.scaleTransform;
			var _this__0034 = 1;
			var _this__1034 = 0;
			var _this__2034 = wid26 - sv_x6 - borderTo;
			var _this__0134 = 0;
			var _this__1134 = 1;
			var _this__2134 = hi26 / 2 - sv_y6 / 2;
			var _this__0234 = 0;
			var _this__1234 = 0;
			var _this__2234 = 1;
			mT = new kha_math_FastMatrix3(_this__0034 * scaleTransform18._00 + _this__1034 * scaleTransform18._01 + _this__2034 * scaleTransform18._02,_this__0034 * scaleTransform18._10 + _this__1034 * scaleTransform18._11 + _this__2034 * scaleTransform18._12,_this__0034 * scaleTransform18._20 + _this__1034 * scaleTransform18._21 + _this__2034 * scaleTransform18._22,_this__0134 * scaleTransform18._00 + _this__1134 * scaleTransform18._01 + _this__2134 * scaleTransform18._02,_this__0134 * scaleTransform18._10 + _this__1134 * scaleTransform18._11 + _this__2134 * scaleTransform18._12,_this__0134 * scaleTransform18._20 + _this__1134 * scaleTransform18._21 + _this__2134 * scaleTransform18._22,_this__0234 * scaleTransform18._00 + _this__1234 * scaleTransform18._01 + _this__2234 * scaleTransform18._02,_this__0234 * scaleTransform18._10 + _this__1234 * scaleTransform18._11 + _this__2234 * scaleTransform18._12,_this__0234 * scaleTransform18._20 + _this__1234 * scaleTransform18._21 + _this__2234 * scaleTransform18._22);
		}
		break;
	case 18:
		var wid27 = Main.wid;
		var hi27 = Main.hi;
		var scaleTransform19 = Main.scaleTransform;
		var _this__0035 = 1;
		var _this__1035 = 0;
		var _this__2035 = wid27 / 2 - sv_x6 / 2;
		var _this__0135 = 0;
		var _this__1135 = 1;
		var _this__2135 = hi27 / 2 - sv_y6 / 2;
		var _this__0235 = 0;
		var _this__1235 = 0;
		var _this__2235 = 1;
		mT = new kha_math_FastMatrix3(_this__0035 * scaleTransform19._00 + _this__1035 * scaleTransform19._01 + _this__2035 * scaleTransform19._02,_this__0035 * scaleTransform19._10 + _this__1035 * scaleTransform19._11 + _this__2035 * scaleTransform19._12,_this__0035 * scaleTransform19._20 + _this__1035 * scaleTransform19._21 + _this__2035 * scaleTransform19._22,_this__0135 * scaleTransform19._00 + _this__1135 * scaleTransform19._01 + _this__2135 * scaleTransform19._02,_this__0135 * scaleTransform19._10 + _this__1135 * scaleTransform19._11 + _this__2135 * scaleTransform19._12,_this__0135 * scaleTransform19._20 + _this__1135 * scaleTransform19._21 + _this__2135 * scaleTransform19._22,_this__0235 * scaleTransform19._00 + _this__1235 * scaleTransform19._01 + _this__2235 * scaleTransform19._02,_this__0235 * scaleTransform19._10 + _this__1235 * scaleTransform19._11 + _this__2235 * scaleTransform19._12,_this__0235 * scaleTransform19._20 + _this__1235 * scaleTransform19._21 + _this__2235 * scaleTransform19._22);
		break;
	case 19:case 20:case 21:
		if(borderTo * 2 + sv_x6 < wid17) {
			var wid28 = Main.wid;
			var hi28 = Main.hi;
			var scaleTransform20 = Main.scaleTransform;
			var _this__0036 = 1;
			var _this__1036 = 0;
			var _this__2036 = borderTo;
			var _this__0136 = 0;
			var _this__1136 = 1;
			var _this__2136 = hi28 / 2 - sv_y6 / 2;
			var _this__0236 = 0;
			var _this__1236 = 0;
			var _this__2236 = 1;
			mT = new kha_math_FastMatrix3(_this__0036 * scaleTransform20._00 + _this__1036 * scaleTransform20._01 + _this__2036 * scaleTransform20._02,_this__0036 * scaleTransform20._10 + _this__1036 * scaleTransform20._11 + _this__2036 * scaleTransform20._12,_this__0036 * scaleTransform20._20 + _this__1036 * scaleTransform20._21 + _this__2036 * scaleTransform20._22,_this__0136 * scaleTransform20._00 + _this__1136 * scaleTransform20._01 + _this__2136 * scaleTransform20._02,_this__0136 * scaleTransform20._10 + _this__1136 * scaleTransform20._11 + _this__2136 * scaleTransform20._12,_this__0136 * scaleTransform20._20 + _this__1136 * scaleTransform20._21 + _this__2136 * scaleTransform20._22,_this__0236 * scaleTransform20._00 + _this__1236 * scaleTransform20._01 + _this__2236 * scaleTransform20._02,_this__0236 * scaleTransform20._10 + _this__1236 * scaleTransform20._11 + _this__2236 * scaleTransform20._12,_this__0236 * scaleTransform20._20 + _this__1236 * scaleTransform20._21 + _this__2236 * scaleTransform20._22);
		} else {
			var wid29 = Main.wid;
			var hi29 = Main.hi;
			var scaleTransform21 = Main.scaleTransform;
			var _this__0037 = 1;
			var _this__1037 = 0;
			var _this__2037 = wid29 / 2 - sv_x6 / 2;
			var _this__0137 = 0;
			var _this__1137 = 1;
			var _this__2137 = hi29 / 2 - sv_y6 / 2;
			var _this__0237 = 0;
			var _this__1237 = 0;
			var _this__2237 = 1;
			mT = new kha_math_FastMatrix3(_this__0037 * scaleTransform21._00 + _this__1037 * scaleTransform21._01 + _this__2037 * scaleTransform21._02,_this__0037 * scaleTransform21._10 + _this__1037 * scaleTransform21._11 + _this__2037 * scaleTransform21._12,_this__0037 * scaleTransform21._20 + _this__1037 * scaleTransform21._21 + _this__2037 * scaleTransform21._22,_this__0137 * scaleTransform21._00 + _this__1137 * scaleTransform21._01 + _this__2137 * scaleTransform21._02,_this__0137 * scaleTransform21._10 + _this__1137 * scaleTransform21._11 + _this__2137 * scaleTransform21._12,_this__0137 * scaleTransform21._20 + _this__1137 * scaleTransform21._21 + _this__2137 * scaleTransform21._22,_this__0237 * scaleTransform21._00 + _this__1237 * scaleTransform21._01 + _this__2237 * scaleTransform21._02,_this__0237 * scaleTransform21._10 + _this__1237 * scaleTransform21._11 + _this__2237 * scaleTransform21._12,_this__0237 * scaleTransform21._20 + _this__1237 * scaleTransform21._21 + _this__2237 * scaleTransform21._22);
		}
		break;
	case 22:case 23:case 24:
		if(borderTo * 2 + sv_x6 < wid17) {
			var wid30 = Main.wid;
			var hi30 = Main.hi;
			var scaleTransform22 = Main.scaleTransform;
			var _this__0038 = 1;
			var _this__1038 = 0;
			var _this__2038 = wid30 - sv_x6 - borderTo;
			var _this__0138 = 0;
			var _this__1138 = 1;
			var _this__2138 = hi30 / 2 - sv_y6 / 2;
			var _this__0238 = 0;
			var _this__1238 = 0;
			var _this__2238 = 1;
			mT = new kha_math_FastMatrix3(_this__0038 * scaleTransform22._00 + _this__1038 * scaleTransform22._01 + _this__2038 * scaleTransform22._02,_this__0038 * scaleTransform22._10 + _this__1038 * scaleTransform22._11 + _this__2038 * scaleTransform22._12,_this__0038 * scaleTransform22._20 + _this__1038 * scaleTransform22._21 + _this__2038 * scaleTransform22._22,_this__0138 * scaleTransform22._00 + _this__1138 * scaleTransform22._01 + _this__2138 * scaleTransform22._02,_this__0138 * scaleTransform22._10 + _this__1138 * scaleTransform22._11 + _this__2138 * scaleTransform22._12,_this__0138 * scaleTransform22._20 + _this__1138 * scaleTransform22._21 + _this__2138 * scaleTransform22._22,_this__0238 * scaleTransform22._00 + _this__1238 * scaleTransform22._01 + _this__2238 * scaleTransform22._02,_this__0238 * scaleTransform22._10 + _this__1238 * scaleTransform22._11 + _this__2238 * scaleTransform22._12,_this__0238 * scaleTransform22._20 + _this__1238 * scaleTransform22._21 + _this__2238 * scaleTransform22._22);
		} else {
			var wid31 = Main.wid;
			var hi31 = Main.hi;
			var scaleTransform23 = Main.scaleTransform;
			var _this__0039 = 1;
			var _this__1039 = 0;
			var _this__2039 = wid31 / 2 - sv_x6 / 2;
			var _this__0139 = 0;
			var _this__1139 = 1;
			var _this__2139 = hi31 / 2 - sv_y6 / 2;
			var _this__0239 = 0;
			var _this__1239 = 0;
			var _this__2239 = 1;
			mT = new kha_math_FastMatrix3(_this__0039 * scaleTransform23._00 + _this__1039 * scaleTransform23._01 + _this__2039 * scaleTransform23._02,_this__0039 * scaleTransform23._10 + _this__1039 * scaleTransform23._11 + _this__2039 * scaleTransform23._12,_this__0039 * scaleTransform23._20 + _this__1039 * scaleTransform23._21 + _this__2039 * scaleTransform23._22,_this__0139 * scaleTransform23._00 + _this__1139 * scaleTransform23._01 + _this__2139 * scaleTransform23._02,_this__0139 * scaleTransform23._10 + _this__1139 * scaleTransform23._11 + _this__2139 * scaleTransform23._12,_this__0139 * scaleTransform23._20 + _this__1139 * scaleTransform23._21 + _this__2139 * scaleTransform23._22,_this__0239 * scaleTransform23._00 + _this__1239 * scaleTransform23._01 + _this__2239 * scaleTransform23._02,_this__0239 * scaleTransform23._10 + _this__1239 * scaleTransform23._11 + _this__2239 * scaleTransform23._12,_this__0239 * scaleTransform23._20 + _this__1239 * scaleTransform23._21 + _this__2239 * scaleTransform23._22);
		}
		break;
	case 25:case 26:case 27:
		if(borderTo * 2 + sv_y6 < hi17) {
			var _this__0040 = 1;
			var _this__1040 = 0;
			var _this__2040 = wid17 / 2 - sv_x6 / 2;
			var _this__0140 = 0;
			var _this__1140 = 1;
			var _this__2140 = hi17 - sv_y6 - borderTo;
			var _this__0240 = 0;
			var _this__1240 = 0;
			var _this__2240 = 1;
			mT = new kha_math_FastMatrix3(_this__0040 * scaleTransform14._00 + _this__1040 * scaleTransform14._01 + _this__2040 * scaleTransform14._02,_this__0040 * scaleTransform14._10 + _this__1040 * scaleTransform14._11 + _this__2040 * scaleTransform14._12,_this__0040 * scaleTransform14._20 + _this__1040 * scaleTransform14._21 + _this__2040 * scaleTransform14._22,_this__0140 * scaleTransform14._00 + _this__1140 * scaleTransform14._01 + _this__2140 * scaleTransform14._02,_this__0140 * scaleTransform14._10 + _this__1140 * scaleTransform14._11 + _this__2140 * scaleTransform14._12,_this__0140 * scaleTransform14._20 + _this__1140 * scaleTransform14._21 + _this__2140 * scaleTransform14._22,_this__0240 * scaleTransform14._00 + _this__1240 * scaleTransform14._01 + _this__2240 * scaleTransform14._02,_this__0240 * scaleTransform14._10 + _this__1240 * scaleTransform14._11 + _this__2240 * scaleTransform14._12,_this__0240 * scaleTransform14._20 + _this__1240 * scaleTransform14._21 + _this__2240 * scaleTransform14._22);
		} else {
			var wid32 = Main.wid;
			var hi32 = Main.hi;
			var scaleTransform24 = Main.scaleTransform;
			var _this__0041 = 1;
			var _this__1041 = 0;
			var _this__2041 = wid32 / 2 - sv_x6 / 2;
			var _this__0141 = 0;
			var _this__1141 = 1;
			var _this__2141 = hi32 / 2 - sv_y6 / 2;
			var _this__0241 = 0;
			var _this__1241 = 0;
			var _this__2241 = 1;
			mT = new kha_math_FastMatrix3(_this__0041 * scaleTransform24._00 + _this__1041 * scaleTransform24._01 + _this__2041 * scaleTransform24._02,_this__0041 * scaleTransform24._10 + _this__1041 * scaleTransform24._11 + _this__2041 * scaleTransform24._12,_this__0041 * scaleTransform24._20 + _this__1041 * scaleTransform24._21 + _this__2041 * scaleTransform24._22,_this__0141 * scaleTransform24._00 + _this__1141 * scaleTransform24._01 + _this__2141 * scaleTransform24._02,_this__0141 * scaleTransform24._10 + _this__1141 * scaleTransform24._11 + _this__2141 * scaleTransform24._12,_this__0141 * scaleTransform24._20 + _this__1141 * scaleTransform24._21 + _this__2141 * scaleTransform24._22,_this__0241 * scaleTransform24._00 + _this__1241 * scaleTransform24._01 + _this__2241 * scaleTransform24._02,_this__0241 * scaleTransform24._10 + _this__1241 * scaleTransform24._11 + _this__2241 * scaleTransform24._12,_this__0241 * scaleTransform24._20 + _this__1241 * scaleTransform24._21 + _this__2241 * scaleTransform24._22);
		}
		break;
	case 28:case 29:case 30:
		if(borderTo * 2 + sv_y6 < hi17) {
			var _this__0042 = 1;
			var _this__1042 = 0;
			var _this__2042 = wid17 / 2 - sv_x6 / 2;
			var _this__0142 = 0;
			var _this__1142 = 1;
			var _this__2142 = borderTo;
			var _this__0242 = 0;
			var _this__1242 = 0;
			var _this__2242 = 1;
			mT = new kha_math_FastMatrix3(_this__0042 * scaleTransform14._00 + _this__1042 * scaleTransform14._01 + _this__2042 * scaleTransform14._02,_this__0042 * scaleTransform14._10 + _this__1042 * scaleTransform14._11 + _this__2042 * scaleTransform14._12,_this__0042 * scaleTransform14._20 + _this__1042 * scaleTransform14._21 + _this__2042 * scaleTransform14._22,_this__0142 * scaleTransform14._00 + _this__1142 * scaleTransform14._01 + _this__2142 * scaleTransform14._02,_this__0142 * scaleTransform14._10 + _this__1142 * scaleTransform14._11 + _this__2142 * scaleTransform14._12,_this__0142 * scaleTransform14._20 + _this__1142 * scaleTransform14._21 + _this__2142 * scaleTransform14._22,_this__0242 * scaleTransform14._00 + _this__1242 * scaleTransform14._01 + _this__2242 * scaleTransform14._02,_this__0242 * scaleTransform14._10 + _this__1242 * scaleTransform14._11 + _this__2242 * scaleTransform14._12,_this__0242 * scaleTransform14._20 + _this__1242 * scaleTransform14._21 + _this__2242 * scaleTransform14._22);
		} else {
			var wid33 = Main.wid;
			var hi33 = Main.hi;
			var scaleTransform25 = Main.scaleTransform;
			var _this__0043 = 1;
			var _this__1043 = 0;
			var _this__2043 = wid33 / 2 - sv_x6 / 2;
			var _this__0143 = 0;
			var _this__1143 = 1;
			var _this__2143 = hi33 / 2 - sv_y6 / 2;
			var _this__0243 = 0;
			var _this__1243 = 0;
			var _this__2243 = 1;
			mT = new kha_math_FastMatrix3(_this__0043 * scaleTransform25._00 + _this__1043 * scaleTransform25._01 + _this__2043 * scaleTransform25._02,_this__0043 * scaleTransform25._10 + _this__1043 * scaleTransform25._11 + _this__2043 * scaleTransform25._12,_this__0043 * scaleTransform25._20 + _this__1043 * scaleTransform25._21 + _this__2043 * scaleTransform25._22,_this__0143 * scaleTransform25._00 + _this__1143 * scaleTransform25._01 + _this__2143 * scaleTransform25._02,_this__0143 * scaleTransform25._10 + _this__1143 * scaleTransform25._11 + _this__2143 * scaleTransform25._12,_this__0143 * scaleTransform25._20 + _this__1143 * scaleTransform25._21 + _this__2143 * scaleTransform25._22,_this__0243 * scaleTransform25._00 + _this__1243 * scaleTransform25._01 + _this__2243 * scaleTransform25._02,_this__0243 * scaleTransform25._10 + _this__1243 * scaleTransform25._11 + _this__2243 * scaleTransform25._12,_this__0243 * scaleTransform25._20 + _this__1243 * scaleTransform25._21 + _this__2243 * scaleTransform25._22);
		}
		break;
	}
	var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
	out._00 = mF._00 + (mT._00 - mF._00) * t;
	out._10 = mF._10 + (mT._10 - mF._10) * t;
	out._20 = mF._20 + (mT._20 - mF._20) * t;
	out._01 = mF._01 + (mT._01 - mF._01) * t;
	out._11 = mF._11 + (mT._11 - mF._11) * t;
	out._21 = mF._21 + (mT._21 - mF._21) * t;
	out._02 = mF._02 + (mT._02 - mF._02) * t;
	out._12 = mF._12 + (mT._12 - mF._12) * t;
	out._22 = mF._22 + (mT._22 - mF._22) * t;
	var out1 = out;
	return out1;
};
simpleText_AlignWindow.interpolate = function(mF,mT,t) {
	var out = new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1);
	out._00 = mF._00 + (mT._00 - mF._00) * t;
	out._10 = mF._10 + (mT._10 - mF._10) * t;
	out._20 = mF._20 + (mT._20 - mF._20) * t;
	out._01 = mF._01 + (mT._01 - mF._01) * t;
	out._11 = mF._11 + (mT._11 - mF._11) * t;
	out._21 = mF._21 + (mT._21 - mF._21) * t;
	out._02 = mF._02 + (mT._02 - mF._02) * t;
	out._12 = mF._12 + (mT._12 - mF._12) * t;
	out._22 = mF._22 + (mT._22 - mF._22) * t;
	return out;
};
simpleText_AlignWindow.transform = function(alignment,w,h,border) {
	if(border == null) {
		border = 0;
	}
	var scaleTransform = Main.scaleTransform;
	var v_x = w;
	var v_y = h;
	var w1 = scaleTransform._02 * v_x + scaleTransform._12 * v_y + scaleTransform._22;
	var x = (scaleTransform._00 * v_x + scaleTransform._10 * v_y + scaleTransform._20) / w1;
	var y = (scaleTransform._01 * v_x + scaleTransform._11 * v_y + scaleTransform._21) / w1;
	var sv_x = x;
	var sv_y = y;
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform1 = Main.scaleTransform;
	switch(alignment._hx_index) {
	case 2:case 7:
		var wid1 = Main.wid;
		var hi1 = Main.hi;
		var w2 = wid1 - border * 2;
		var h2 = hi1 - border * 2;
		var dw = w2 - w;
		var dh = h2 - h;
		var scale = dw < dh ? w2 / w : h2 / h;
		if(scale < 0) {
			scale = 0.;
		}
		var scaleTransform__00 = scale;
		var scaleTransform__10 = 0;
		var scaleTransform__20 = 0;
		var scaleTransform__01 = 0;
		var scaleTransform__11 = scale;
		var scaleTransform__21 = 0;
		var scaleTransform__02 = 0;
		var scaleTransform__12 = 0;
		var scaleTransform__22 = 1;
		var value_x = w;
		var value_y = h;
		var w3 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
		var x1 = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w3;
		var y1 = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w3;
		var sv_x1 = x1;
		var sv_y1 = y1;
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__20 = wid1 - sv_x1 - border;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__21 = hi1 / 2 - sv_y1 / 2;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		return new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
	case 0:case 5:
		var wid2 = Main.wid;
		var hi2 = Main.hi;
		var w21 = wid2 - border * 2;
		var h21 = hi2 - border * 2;
		var dw1 = w21 - w;
		var dh1 = h21 - h;
		var scale1 = dw1 < dh1 ? w21 / w : h21 / h;
		if(scale1 < 0) {
			scale1 = 0.;
		}
		var scaleTransform__001 = scale1;
		var scaleTransform__101 = 0;
		var scaleTransform__201 = 0;
		var scaleTransform__011 = 0;
		var scaleTransform__111 = scale1;
		var scaleTransform__211 = 0;
		var scaleTransform__021 = 0;
		var scaleTransform__121 = 0;
		var scaleTransform__221 = 1;
		var value_x1 = w;
		var value_y1 = h;
		var w4 = scaleTransform__021 * value_x1 + scaleTransform__121 * value_y1 + scaleTransform__221;
		var x2 = (scaleTransform__001 * value_x1 + scaleTransform__101 * value_y1 + scaleTransform__201) / w4;
		var y2 = (scaleTransform__011 * value_x1 + scaleTransform__111 * value_y1 + scaleTransform__211) / w4;
		var sv_x2 = x2;
		var sv_y2 = y2;
		var _this__001 = 1;
		var _this__101 = 0;
		var _this__201 = wid2 / 2 - sv_x2 / 2;
		var _this__011 = 0;
		var _this__111 = 1;
		var _this__211 = hi2 / 2 - sv_y2 / 2;
		var _this__021 = 0;
		var _this__121 = 0;
		var _this__221 = 1;
		return new kha_math_FastMatrix3(_this__001 * scaleTransform__001 + _this__101 * scaleTransform__011 + _this__201 * scaleTransform__021,_this__001 * scaleTransform__101 + _this__101 * scaleTransform__111 + _this__201 * scaleTransform__121,_this__001 * scaleTransform__201 + _this__101 * scaleTransform__211 + _this__201 * scaleTransform__221,_this__011 * scaleTransform__001 + _this__111 * scaleTransform__011 + _this__211 * scaleTransform__021,_this__011 * scaleTransform__101 + _this__111 * scaleTransform__111 + _this__211 * scaleTransform__121,_this__011 * scaleTransform__201 + _this__111 * scaleTransform__211 + _this__211 * scaleTransform__221,_this__021 * scaleTransform__001 + _this__121 * scaleTransform__011 + _this__221 * scaleTransform__021,_this__021 * scaleTransform__101 + _this__121 * scaleTransform__111 + _this__221 * scaleTransform__121,_this__021 * scaleTransform__201 + _this__121 * scaleTransform__211 + _this__221 * scaleTransform__221);
	case 1:case 6:
		var wid3 = Main.wid;
		var hi3 = Main.hi;
		var w22 = wid3 - border * 2;
		var h22 = hi3 - border * 2;
		var dw2 = w22 - w;
		var dh2 = h22 - h;
		var scale2 = dw2 < dh2 ? w22 / w : h22 / h;
		if(scale2 < 0) {
			scale2 = 0.;
		}
		var scaleTransform__002 = scale2;
		var scaleTransform__102 = 0;
		var scaleTransform__202 = 0;
		var scaleTransform__012 = 0;
		var scaleTransform__112 = scale2;
		var scaleTransform__212 = 0;
		var scaleTransform__022 = 0;
		var scaleTransform__122 = 0;
		var scaleTransform__222 = 1;
		var value_x2 = w;
		var value_y2 = h;
		var w5 = scaleTransform__022 * value_x2 + scaleTransform__122 * value_y2 + scaleTransform__222;
		var x3 = (scaleTransform__002 * value_x2 + scaleTransform__102 * value_y2 + scaleTransform__202) / w5;
		var y3 = (scaleTransform__012 * value_x2 + scaleTransform__112 * value_y2 + scaleTransform__212) / w5;
		var sv_x3 = x3;
		var sv_y3 = y3;
		var _this__002 = 1;
		var _this__102 = 0;
		var _this__202 = border;
		var _this__012 = 0;
		var _this__112 = 1;
		var _this__212 = hi3 / 2 - sv_y3 / 2;
		var _this__022 = 0;
		var _this__122 = 0;
		var _this__222 = 1;
		return new kha_math_FastMatrix3(_this__002 * scaleTransform__002 + _this__102 * scaleTransform__012 + _this__202 * scaleTransform__022,_this__002 * scaleTransform__102 + _this__102 * scaleTransform__112 + _this__202 * scaleTransform__122,_this__002 * scaleTransform__202 + _this__102 * scaleTransform__212 + _this__202 * scaleTransform__222,_this__012 * scaleTransform__002 + _this__112 * scaleTransform__012 + _this__212 * scaleTransform__022,_this__012 * scaleTransform__102 + _this__112 * scaleTransform__112 + _this__212 * scaleTransform__122,_this__012 * scaleTransform__202 + _this__112 * scaleTransform__212 + _this__212 * scaleTransform__222,_this__022 * scaleTransform__002 + _this__122 * scaleTransform__012 + _this__222 * scaleTransform__022,_this__022 * scaleTransform__102 + _this__122 * scaleTransform__112 + _this__222 * scaleTransform__122,_this__022 * scaleTransform__202 + _this__122 * scaleTransform__212 + _this__222 * scaleTransform__222);
	case 3:case 8:
		var wid4 = Main.wid;
		var hi4 = Main.hi;
		var w23 = wid4 - border * 2;
		var h23 = hi4 - border * 2;
		var dw3 = w23 - w;
		var dh3 = h23 - h;
		var scale3 = dw3 < dh3 ? w23 / w : h23 / h;
		if(scale3 < 0) {
			scale3 = 0.;
		}
		var scaleTransform__003 = scale3;
		var scaleTransform__103 = 0;
		var scaleTransform__203 = 0;
		var scaleTransform__013 = 0;
		var scaleTransform__113 = scale3;
		var scaleTransform__213 = 0;
		var scaleTransform__023 = 0;
		var scaleTransform__123 = 0;
		var scaleTransform__223 = 1;
		var value_x3 = w;
		var value_y3 = h;
		var w6 = scaleTransform__023 * value_x3 + scaleTransform__123 * value_y3 + scaleTransform__223;
		var x4 = (scaleTransform__003 * value_x3 + scaleTransform__103 * value_y3 + scaleTransform__203) / w6;
		var y4 = (scaleTransform__013 * value_x3 + scaleTransform__113 * value_y3 + scaleTransform__213) / w6;
		var sv_x4 = x4;
		var sv_y4 = y4;
		var _this__003 = 1;
		var _this__103 = 0;
		var _this__203 = wid4 / 2 - sv_x4 / 2;
		var _this__013 = 0;
		var _this__113 = 1;
		var _this__213 = border;
		var _this__023 = 0;
		var _this__123 = 0;
		var _this__223 = 1;
		return new kha_math_FastMatrix3(_this__003 * scaleTransform__003 + _this__103 * scaleTransform__013 + _this__203 * scaleTransform__023,_this__003 * scaleTransform__103 + _this__103 * scaleTransform__113 + _this__203 * scaleTransform__123,_this__003 * scaleTransform__203 + _this__103 * scaleTransform__213 + _this__203 * scaleTransform__223,_this__013 * scaleTransform__003 + _this__113 * scaleTransform__013 + _this__213 * scaleTransform__023,_this__013 * scaleTransform__103 + _this__113 * scaleTransform__113 + _this__213 * scaleTransform__123,_this__013 * scaleTransform__203 + _this__113 * scaleTransform__213 + _this__213 * scaleTransform__223,_this__023 * scaleTransform__003 + _this__123 * scaleTransform__013 + _this__223 * scaleTransform__023,_this__023 * scaleTransform__103 + _this__123 * scaleTransform__113 + _this__223 * scaleTransform__123,_this__023 * scaleTransform__203 + _this__123 * scaleTransform__213 + _this__223 * scaleTransform__223);
	case 4:case 9:
		var wid5 = Main.wid;
		var hi5 = Main.hi;
		var w24 = wid5 - border * 2;
		var h24 = hi5 - border * 2;
		var dw4 = w24 - w;
		var dh4 = h24 - h;
		var scale4 = dw4 < dh4 ? w24 / w : h24 / h;
		if(scale4 < 0) {
			scale4 = 0.;
		}
		var scaleTransform__004 = scale4;
		var scaleTransform__104 = 0;
		var scaleTransform__204 = 0;
		var scaleTransform__014 = 0;
		var scaleTransform__114 = scale4;
		var scaleTransform__214 = 0;
		var scaleTransform__024 = 0;
		var scaleTransform__124 = 0;
		var scaleTransform__224 = 1;
		var value_x4 = w;
		var value_y4 = h;
		var w7 = scaleTransform__024 * value_x4 + scaleTransform__124 * value_y4 + scaleTransform__224;
		var x5 = (scaleTransform__004 * value_x4 + scaleTransform__104 * value_y4 + scaleTransform__204) / w7;
		var y5 = (scaleTransform__014 * value_x4 + scaleTransform__114 * value_y4 + scaleTransform__214) / w7;
		var sv_x5 = x5;
		var sv_y5 = y5;
		var _this__004 = 1;
		var _this__104 = 0;
		var _this__204 = wid5 / 2 - sv_x5 / 2;
		var _this__014 = 0;
		var _this__114 = 1;
		var _this__214 = hi5 - sv_y5 - border;
		var _this__024 = 0;
		var _this__124 = 0;
		var _this__224 = 1;
		return new kha_math_FastMatrix3(_this__004 * scaleTransform__004 + _this__104 * scaleTransform__014 + _this__204 * scaleTransform__024,_this__004 * scaleTransform__104 + _this__104 * scaleTransform__114 + _this__204 * scaleTransform__124,_this__004 * scaleTransform__204 + _this__104 * scaleTransform__214 + _this__204 * scaleTransform__224,_this__014 * scaleTransform__004 + _this__114 * scaleTransform__014 + _this__214 * scaleTransform__024,_this__014 * scaleTransform__104 + _this__114 * scaleTransform__114 + _this__214 * scaleTransform__124,_this__014 * scaleTransform__204 + _this__114 * scaleTransform__214 + _this__214 * scaleTransform__224,_this__024 * scaleTransform__004 + _this__124 * scaleTransform__014 + _this__224 * scaleTransform__024,_this__024 * scaleTransform__104 + _this__124 * scaleTransform__114 + _this__224 * scaleTransform__124,_this__024 * scaleTransform__204 + _this__124 * scaleTransform__214 + _this__224 * scaleTransform__224);
	case 10:case 11:
		if(border * 2 + sv_x < wid) {
			var _this__005 = 1;
			var _this__105 = 0;
			var _this__205 = border;
			var _this__015 = 0;
			var _this__115 = 1;
			var _this__215 = border;
			var _this__025 = 0;
			var _this__125 = 0;
			var _this__225 = 1;
			return new kha_math_FastMatrix3(_this__005 * scaleTransform1._00 + _this__105 * scaleTransform1._01 + _this__205 * scaleTransform1._02,_this__005 * scaleTransform1._10 + _this__105 * scaleTransform1._11 + _this__205 * scaleTransform1._12,_this__005 * scaleTransform1._20 + _this__105 * scaleTransform1._21 + _this__205 * scaleTransform1._22,_this__015 * scaleTransform1._00 + _this__115 * scaleTransform1._01 + _this__215 * scaleTransform1._02,_this__015 * scaleTransform1._10 + _this__115 * scaleTransform1._11 + _this__215 * scaleTransform1._12,_this__015 * scaleTransform1._20 + _this__115 * scaleTransform1._21 + _this__215 * scaleTransform1._22,_this__025 * scaleTransform1._00 + _this__125 * scaleTransform1._01 + _this__225 * scaleTransform1._02,_this__025 * scaleTransform1._10 + _this__125 * scaleTransform1._11 + _this__225 * scaleTransform1._12,_this__025 * scaleTransform1._20 + _this__125 * scaleTransform1._21 + _this__225 * scaleTransform1._22);
		} else {
			var wid6 = Main.wid;
			var hi6 = Main.hi;
			var scaleTransform2 = Main.scaleTransform;
			var _this__006 = 1;
			var _this__106 = 0;
			var _this__206 = border;
			var _this__016 = 0;
			var _this__116 = 1;
			var _this__216 = hi6 / 2 - sv_y / 2;
			var _this__026 = 0;
			var _this__126 = 0;
			var _this__226 = 1;
			return new kha_math_FastMatrix3(_this__006 * scaleTransform2._00 + _this__106 * scaleTransform2._01 + _this__206 * scaleTransform2._02,_this__006 * scaleTransform2._10 + _this__106 * scaleTransform2._11 + _this__206 * scaleTransform2._12,_this__006 * scaleTransform2._20 + _this__106 * scaleTransform2._21 + _this__206 * scaleTransform2._22,_this__016 * scaleTransform2._00 + _this__116 * scaleTransform2._01 + _this__216 * scaleTransform2._02,_this__016 * scaleTransform2._10 + _this__116 * scaleTransform2._11 + _this__216 * scaleTransform2._12,_this__016 * scaleTransform2._20 + _this__116 * scaleTransform2._21 + _this__216 * scaleTransform2._22,_this__026 * scaleTransform2._00 + _this__126 * scaleTransform2._01 + _this__226 * scaleTransform2._02,_this__026 * scaleTransform2._10 + _this__126 * scaleTransform2._11 + _this__226 * scaleTransform2._12,_this__026 * scaleTransform2._20 + _this__126 * scaleTransform2._21 + _this__226 * scaleTransform2._22);
		}
		break;
	case 12:case 13:
		if(border * 2 + sv_x < wid) {
			var _this__007 = 1;
			var _this__107 = 0;
			var _this__207 = wid - sv_x - border;
			var _this__017 = 0;
			var _this__117 = 1;
			var _this__217 = border;
			var _this__027 = 0;
			var _this__127 = 0;
			var _this__227 = 1;
			return new kha_math_FastMatrix3(_this__007 * scaleTransform1._00 + _this__107 * scaleTransform1._01 + _this__207 * scaleTransform1._02,_this__007 * scaleTransform1._10 + _this__107 * scaleTransform1._11 + _this__207 * scaleTransform1._12,_this__007 * scaleTransform1._20 + _this__107 * scaleTransform1._21 + _this__207 * scaleTransform1._22,_this__017 * scaleTransform1._00 + _this__117 * scaleTransform1._01 + _this__217 * scaleTransform1._02,_this__017 * scaleTransform1._10 + _this__117 * scaleTransform1._11 + _this__217 * scaleTransform1._12,_this__017 * scaleTransform1._20 + _this__117 * scaleTransform1._21 + _this__217 * scaleTransform1._22,_this__027 * scaleTransform1._00 + _this__127 * scaleTransform1._01 + _this__227 * scaleTransform1._02,_this__027 * scaleTransform1._10 + _this__127 * scaleTransform1._11 + _this__227 * scaleTransform1._12,_this__027 * scaleTransform1._20 + _this__127 * scaleTransform1._21 + _this__227 * scaleTransform1._22);
		} else {
			var wid7 = Main.wid;
			var hi7 = Main.hi;
			var scaleTransform3 = Main.scaleTransform;
			var _this__008 = 1;
			var _this__108 = 0;
			var _this__208 = wid7 - sv_x - border;
			var _this__018 = 0;
			var _this__118 = 1;
			var _this__218 = hi7 / 2 - sv_y / 2;
			var _this__028 = 0;
			var _this__128 = 0;
			var _this__228 = 1;
			return new kha_math_FastMatrix3(_this__008 * scaleTransform3._00 + _this__108 * scaleTransform3._01 + _this__208 * scaleTransform3._02,_this__008 * scaleTransform3._10 + _this__108 * scaleTransform3._11 + _this__208 * scaleTransform3._12,_this__008 * scaleTransform3._20 + _this__108 * scaleTransform3._21 + _this__208 * scaleTransform3._22,_this__018 * scaleTransform3._00 + _this__118 * scaleTransform3._01 + _this__218 * scaleTransform3._02,_this__018 * scaleTransform3._10 + _this__118 * scaleTransform3._11 + _this__218 * scaleTransform3._12,_this__018 * scaleTransform3._20 + _this__118 * scaleTransform3._21 + _this__218 * scaleTransform3._22,_this__028 * scaleTransform3._00 + _this__128 * scaleTransform3._01 + _this__228 * scaleTransform3._02,_this__028 * scaleTransform3._10 + _this__128 * scaleTransform3._11 + _this__228 * scaleTransform3._12,_this__028 * scaleTransform3._20 + _this__128 * scaleTransform3._21 + _this__228 * scaleTransform3._22);
		}
		break;
	case 14:case 15:
		if(border * 2 + sv_y < hi) {
			var _this__009 = 1;
			var _this__109 = 0;
			var _this__209 = border;
			var _this__019 = 0;
			var _this__119 = 1;
			var _this__219 = hi - sv_y - border;
			var _this__029 = 0;
			var _this__129 = 0;
			var _this__229 = 1;
			return new kha_math_FastMatrix3(_this__009 * scaleTransform1._00 + _this__109 * scaleTransform1._01 + _this__209 * scaleTransform1._02,_this__009 * scaleTransform1._10 + _this__109 * scaleTransform1._11 + _this__209 * scaleTransform1._12,_this__009 * scaleTransform1._20 + _this__109 * scaleTransform1._21 + _this__209 * scaleTransform1._22,_this__019 * scaleTransform1._00 + _this__119 * scaleTransform1._01 + _this__219 * scaleTransform1._02,_this__019 * scaleTransform1._10 + _this__119 * scaleTransform1._11 + _this__219 * scaleTransform1._12,_this__019 * scaleTransform1._20 + _this__119 * scaleTransform1._21 + _this__219 * scaleTransform1._22,_this__029 * scaleTransform1._00 + _this__129 * scaleTransform1._01 + _this__229 * scaleTransform1._02,_this__029 * scaleTransform1._10 + _this__129 * scaleTransform1._11 + _this__229 * scaleTransform1._12,_this__029 * scaleTransform1._20 + _this__129 * scaleTransform1._21 + _this__229 * scaleTransform1._22);
		} else {
			var wid8 = Main.wid;
			var hi8 = Main.hi;
			var scaleTransform4 = Main.scaleTransform;
			var _this__0010 = 1;
			var _this__1010 = 0;
			var _this__2010 = border;
			var _this__0110 = 0;
			var _this__1110 = 1;
			var _this__2110 = hi8 / 2 - sv_y / 2;
			var _this__0210 = 0;
			var _this__1210 = 0;
			var _this__2210 = 1;
			return new kha_math_FastMatrix3(_this__0010 * scaleTransform4._00 + _this__1010 * scaleTransform4._01 + _this__2010 * scaleTransform4._02,_this__0010 * scaleTransform4._10 + _this__1010 * scaleTransform4._11 + _this__2010 * scaleTransform4._12,_this__0010 * scaleTransform4._20 + _this__1010 * scaleTransform4._21 + _this__2010 * scaleTransform4._22,_this__0110 * scaleTransform4._00 + _this__1110 * scaleTransform4._01 + _this__2110 * scaleTransform4._02,_this__0110 * scaleTransform4._10 + _this__1110 * scaleTransform4._11 + _this__2110 * scaleTransform4._12,_this__0110 * scaleTransform4._20 + _this__1110 * scaleTransform4._21 + _this__2110 * scaleTransform4._22,_this__0210 * scaleTransform4._00 + _this__1210 * scaleTransform4._01 + _this__2210 * scaleTransform4._02,_this__0210 * scaleTransform4._10 + _this__1210 * scaleTransform4._11 + _this__2210 * scaleTransform4._12,_this__0210 * scaleTransform4._20 + _this__1210 * scaleTransform4._21 + _this__2210 * scaleTransform4._22);
		}
		break;
	case 16:case 17:
		if(border * 2 + sv_y < hi) {
			var _this__0011 = 1;
			var _this__1011 = 0;
			var _this__2011 = wid - sv_x - border;
			var _this__0111 = 0;
			var _this__1111 = 1;
			var _this__2111 = hi - sv_y - border;
			var _this__0211 = 0;
			var _this__1211 = 0;
			var _this__2211 = 1;
			return new kha_math_FastMatrix3(_this__0011 * scaleTransform1._00 + _this__1011 * scaleTransform1._01 + _this__2011 * scaleTransform1._02,_this__0011 * scaleTransform1._10 + _this__1011 * scaleTransform1._11 + _this__2011 * scaleTransform1._12,_this__0011 * scaleTransform1._20 + _this__1011 * scaleTransform1._21 + _this__2011 * scaleTransform1._22,_this__0111 * scaleTransform1._00 + _this__1111 * scaleTransform1._01 + _this__2111 * scaleTransform1._02,_this__0111 * scaleTransform1._10 + _this__1111 * scaleTransform1._11 + _this__2111 * scaleTransform1._12,_this__0111 * scaleTransform1._20 + _this__1111 * scaleTransform1._21 + _this__2111 * scaleTransform1._22,_this__0211 * scaleTransform1._00 + _this__1211 * scaleTransform1._01 + _this__2211 * scaleTransform1._02,_this__0211 * scaleTransform1._10 + _this__1211 * scaleTransform1._11 + _this__2211 * scaleTransform1._12,_this__0211 * scaleTransform1._20 + _this__1211 * scaleTransform1._21 + _this__2211 * scaleTransform1._22);
		} else {
			var wid9 = Main.wid;
			var hi9 = Main.hi;
			var scaleTransform5 = Main.scaleTransform;
			var _this__0012 = 1;
			var _this__1012 = 0;
			var _this__2012 = wid9 - sv_x - border;
			var _this__0112 = 0;
			var _this__1112 = 1;
			var _this__2112 = hi9 / 2 - sv_y / 2;
			var _this__0212 = 0;
			var _this__1212 = 0;
			var _this__2212 = 1;
			return new kha_math_FastMatrix3(_this__0012 * scaleTransform5._00 + _this__1012 * scaleTransform5._01 + _this__2012 * scaleTransform5._02,_this__0012 * scaleTransform5._10 + _this__1012 * scaleTransform5._11 + _this__2012 * scaleTransform5._12,_this__0012 * scaleTransform5._20 + _this__1012 * scaleTransform5._21 + _this__2012 * scaleTransform5._22,_this__0112 * scaleTransform5._00 + _this__1112 * scaleTransform5._01 + _this__2112 * scaleTransform5._02,_this__0112 * scaleTransform5._10 + _this__1112 * scaleTransform5._11 + _this__2112 * scaleTransform5._12,_this__0112 * scaleTransform5._20 + _this__1112 * scaleTransform5._21 + _this__2112 * scaleTransform5._22,_this__0212 * scaleTransform5._00 + _this__1212 * scaleTransform5._01 + _this__2212 * scaleTransform5._02,_this__0212 * scaleTransform5._10 + _this__1212 * scaleTransform5._11 + _this__2212 * scaleTransform5._12,_this__0212 * scaleTransform5._20 + _this__1212 * scaleTransform5._21 + _this__2212 * scaleTransform5._22);
		}
		break;
	case 18:
		var wid10 = Main.wid;
		var hi10 = Main.hi;
		var scaleTransform6 = Main.scaleTransform;
		var _this__0013 = 1;
		var _this__1013 = 0;
		var _this__2013 = wid10 / 2 - sv_x / 2;
		var _this__0113 = 0;
		var _this__1113 = 1;
		var _this__2113 = hi10 / 2 - sv_y / 2;
		var _this__0213 = 0;
		var _this__1213 = 0;
		var _this__2213 = 1;
		return new kha_math_FastMatrix3(_this__0013 * scaleTransform6._00 + _this__1013 * scaleTransform6._01 + _this__2013 * scaleTransform6._02,_this__0013 * scaleTransform6._10 + _this__1013 * scaleTransform6._11 + _this__2013 * scaleTransform6._12,_this__0013 * scaleTransform6._20 + _this__1013 * scaleTransform6._21 + _this__2013 * scaleTransform6._22,_this__0113 * scaleTransform6._00 + _this__1113 * scaleTransform6._01 + _this__2113 * scaleTransform6._02,_this__0113 * scaleTransform6._10 + _this__1113 * scaleTransform6._11 + _this__2113 * scaleTransform6._12,_this__0113 * scaleTransform6._20 + _this__1113 * scaleTransform6._21 + _this__2113 * scaleTransform6._22,_this__0213 * scaleTransform6._00 + _this__1213 * scaleTransform6._01 + _this__2213 * scaleTransform6._02,_this__0213 * scaleTransform6._10 + _this__1213 * scaleTransform6._11 + _this__2213 * scaleTransform6._12,_this__0213 * scaleTransform6._20 + _this__1213 * scaleTransform6._21 + _this__2213 * scaleTransform6._22);
	case 19:case 20:case 21:
		if(border * 2 + sv_x < wid) {
			var wid11 = Main.wid;
			var hi11 = Main.hi;
			var scaleTransform7 = Main.scaleTransform;
			var _this__0014 = 1;
			var _this__1014 = 0;
			var _this__2014 = border;
			var _this__0114 = 0;
			var _this__1114 = 1;
			var _this__2114 = hi11 / 2 - sv_y / 2;
			var _this__0214 = 0;
			var _this__1214 = 0;
			var _this__2214 = 1;
			return new kha_math_FastMatrix3(_this__0014 * scaleTransform7._00 + _this__1014 * scaleTransform7._01 + _this__2014 * scaleTransform7._02,_this__0014 * scaleTransform7._10 + _this__1014 * scaleTransform7._11 + _this__2014 * scaleTransform7._12,_this__0014 * scaleTransform7._20 + _this__1014 * scaleTransform7._21 + _this__2014 * scaleTransform7._22,_this__0114 * scaleTransform7._00 + _this__1114 * scaleTransform7._01 + _this__2114 * scaleTransform7._02,_this__0114 * scaleTransform7._10 + _this__1114 * scaleTransform7._11 + _this__2114 * scaleTransform7._12,_this__0114 * scaleTransform7._20 + _this__1114 * scaleTransform7._21 + _this__2114 * scaleTransform7._22,_this__0214 * scaleTransform7._00 + _this__1214 * scaleTransform7._01 + _this__2214 * scaleTransform7._02,_this__0214 * scaleTransform7._10 + _this__1214 * scaleTransform7._11 + _this__2214 * scaleTransform7._12,_this__0214 * scaleTransform7._20 + _this__1214 * scaleTransform7._21 + _this__2214 * scaleTransform7._22);
		} else {
			var wid12 = Main.wid;
			var hi12 = Main.hi;
			var scaleTransform8 = Main.scaleTransform;
			var _this__0015 = 1;
			var _this__1015 = 0;
			var _this__2015 = wid12 / 2 - sv_x / 2;
			var _this__0115 = 0;
			var _this__1115 = 1;
			var _this__2115 = hi12 / 2 - sv_y / 2;
			var _this__0215 = 0;
			var _this__1215 = 0;
			var _this__2215 = 1;
			return new kha_math_FastMatrix3(_this__0015 * scaleTransform8._00 + _this__1015 * scaleTransform8._01 + _this__2015 * scaleTransform8._02,_this__0015 * scaleTransform8._10 + _this__1015 * scaleTransform8._11 + _this__2015 * scaleTransform8._12,_this__0015 * scaleTransform8._20 + _this__1015 * scaleTransform8._21 + _this__2015 * scaleTransform8._22,_this__0115 * scaleTransform8._00 + _this__1115 * scaleTransform8._01 + _this__2115 * scaleTransform8._02,_this__0115 * scaleTransform8._10 + _this__1115 * scaleTransform8._11 + _this__2115 * scaleTransform8._12,_this__0115 * scaleTransform8._20 + _this__1115 * scaleTransform8._21 + _this__2115 * scaleTransform8._22,_this__0215 * scaleTransform8._00 + _this__1215 * scaleTransform8._01 + _this__2215 * scaleTransform8._02,_this__0215 * scaleTransform8._10 + _this__1215 * scaleTransform8._11 + _this__2215 * scaleTransform8._12,_this__0215 * scaleTransform8._20 + _this__1215 * scaleTransform8._21 + _this__2215 * scaleTransform8._22);
		}
		break;
	case 22:case 23:case 24:
		if(border * 2 + sv_x < wid) {
			var wid13 = Main.wid;
			var hi13 = Main.hi;
			var scaleTransform9 = Main.scaleTransform;
			var _this__0016 = 1;
			var _this__1016 = 0;
			var _this__2016 = wid13 - sv_x - border;
			var _this__0116 = 0;
			var _this__1116 = 1;
			var _this__2116 = hi13 / 2 - sv_y / 2;
			var _this__0216 = 0;
			var _this__1216 = 0;
			var _this__2216 = 1;
			return new kha_math_FastMatrix3(_this__0016 * scaleTransform9._00 + _this__1016 * scaleTransform9._01 + _this__2016 * scaleTransform9._02,_this__0016 * scaleTransform9._10 + _this__1016 * scaleTransform9._11 + _this__2016 * scaleTransform9._12,_this__0016 * scaleTransform9._20 + _this__1016 * scaleTransform9._21 + _this__2016 * scaleTransform9._22,_this__0116 * scaleTransform9._00 + _this__1116 * scaleTransform9._01 + _this__2116 * scaleTransform9._02,_this__0116 * scaleTransform9._10 + _this__1116 * scaleTransform9._11 + _this__2116 * scaleTransform9._12,_this__0116 * scaleTransform9._20 + _this__1116 * scaleTransform9._21 + _this__2116 * scaleTransform9._22,_this__0216 * scaleTransform9._00 + _this__1216 * scaleTransform9._01 + _this__2216 * scaleTransform9._02,_this__0216 * scaleTransform9._10 + _this__1216 * scaleTransform9._11 + _this__2216 * scaleTransform9._12,_this__0216 * scaleTransform9._20 + _this__1216 * scaleTransform9._21 + _this__2216 * scaleTransform9._22);
		} else {
			var wid14 = Main.wid;
			var hi14 = Main.hi;
			var scaleTransform10 = Main.scaleTransform;
			var _this__0017 = 1;
			var _this__1017 = 0;
			var _this__2017 = wid14 / 2 - sv_x / 2;
			var _this__0117 = 0;
			var _this__1117 = 1;
			var _this__2117 = hi14 / 2 - sv_y / 2;
			var _this__0217 = 0;
			var _this__1217 = 0;
			var _this__2217 = 1;
			return new kha_math_FastMatrix3(_this__0017 * scaleTransform10._00 + _this__1017 * scaleTransform10._01 + _this__2017 * scaleTransform10._02,_this__0017 * scaleTransform10._10 + _this__1017 * scaleTransform10._11 + _this__2017 * scaleTransform10._12,_this__0017 * scaleTransform10._20 + _this__1017 * scaleTransform10._21 + _this__2017 * scaleTransform10._22,_this__0117 * scaleTransform10._00 + _this__1117 * scaleTransform10._01 + _this__2117 * scaleTransform10._02,_this__0117 * scaleTransform10._10 + _this__1117 * scaleTransform10._11 + _this__2117 * scaleTransform10._12,_this__0117 * scaleTransform10._20 + _this__1117 * scaleTransform10._21 + _this__2117 * scaleTransform10._22,_this__0217 * scaleTransform10._00 + _this__1217 * scaleTransform10._01 + _this__2217 * scaleTransform10._02,_this__0217 * scaleTransform10._10 + _this__1217 * scaleTransform10._11 + _this__2217 * scaleTransform10._12,_this__0217 * scaleTransform10._20 + _this__1217 * scaleTransform10._21 + _this__2217 * scaleTransform10._22);
		}
		break;
	case 25:case 26:case 27:
		if(border * 2 + sv_y < hi) {
			var _this__0018 = 1;
			var _this__1018 = 0;
			var _this__2018 = wid / 2 - sv_x / 2;
			var _this__0118 = 0;
			var _this__1118 = 1;
			var _this__2118 = hi - sv_y - border;
			var _this__0218 = 0;
			var _this__1218 = 0;
			var _this__2218 = 1;
			return new kha_math_FastMatrix3(_this__0018 * scaleTransform1._00 + _this__1018 * scaleTransform1._01 + _this__2018 * scaleTransform1._02,_this__0018 * scaleTransform1._10 + _this__1018 * scaleTransform1._11 + _this__2018 * scaleTransform1._12,_this__0018 * scaleTransform1._20 + _this__1018 * scaleTransform1._21 + _this__2018 * scaleTransform1._22,_this__0118 * scaleTransform1._00 + _this__1118 * scaleTransform1._01 + _this__2118 * scaleTransform1._02,_this__0118 * scaleTransform1._10 + _this__1118 * scaleTransform1._11 + _this__2118 * scaleTransform1._12,_this__0118 * scaleTransform1._20 + _this__1118 * scaleTransform1._21 + _this__2118 * scaleTransform1._22,_this__0218 * scaleTransform1._00 + _this__1218 * scaleTransform1._01 + _this__2218 * scaleTransform1._02,_this__0218 * scaleTransform1._10 + _this__1218 * scaleTransform1._11 + _this__2218 * scaleTransform1._12,_this__0218 * scaleTransform1._20 + _this__1218 * scaleTransform1._21 + _this__2218 * scaleTransform1._22);
		} else {
			var wid15 = Main.wid;
			var hi15 = Main.hi;
			var scaleTransform11 = Main.scaleTransform;
			var _this__0019 = 1;
			var _this__1019 = 0;
			var _this__2019 = wid15 / 2 - sv_x / 2;
			var _this__0119 = 0;
			var _this__1119 = 1;
			var _this__2119 = hi15 / 2 - sv_y / 2;
			var _this__0219 = 0;
			var _this__1219 = 0;
			var _this__2219 = 1;
			return new kha_math_FastMatrix3(_this__0019 * scaleTransform11._00 + _this__1019 * scaleTransform11._01 + _this__2019 * scaleTransform11._02,_this__0019 * scaleTransform11._10 + _this__1019 * scaleTransform11._11 + _this__2019 * scaleTransform11._12,_this__0019 * scaleTransform11._20 + _this__1019 * scaleTransform11._21 + _this__2019 * scaleTransform11._22,_this__0119 * scaleTransform11._00 + _this__1119 * scaleTransform11._01 + _this__2119 * scaleTransform11._02,_this__0119 * scaleTransform11._10 + _this__1119 * scaleTransform11._11 + _this__2119 * scaleTransform11._12,_this__0119 * scaleTransform11._20 + _this__1119 * scaleTransform11._21 + _this__2119 * scaleTransform11._22,_this__0219 * scaleTransform11._00 + _this__1219 * scaleTransform11._01 + _this__2219 * scaleTransform11._02,_this__0219 * scaleTransform11._10 + _this__1219 * scaleTransform11._11 + _this__2219 * scaleTransform11._12,_this__0219 * scaleTransform11._20 + _this__1219 * scaleTransform11._21 + _this__2219 * scaleTransform11._22);
		}
		break;
	case 28:case 29:case 30:
		if(border * 2 + sv_y < hi) {
			var _this__0020 = 1;
			var _this__1020 = 0;
			var _this__2020 = wid / 2 - sv_x / 2;
			var _this__0120 = 0;
			var _this__1120 = 1;
			var _this__2120 = border;
			var _this__0220 = 0;
			var _this__1220 = 0;
			var _this__2220 = 1;
			return new kha_math_FastMatrix3(_this__0020 * scaleTransform1._00 + _this__1020 * scaleTransform1._01 + _this__2020 * scaleTransform1._02,_this__0020 * scaleTransform1._10 + _this__1020 * scaleTransform1._11 + _this__2020 * scaleTransform1._12,_this__0020 * scaleTransform1._20 + _this__1020 * scaleTransform1._21 + _this__2020 * scaleTransform1._22,_this__0120 * scaleTransform1._00 + _this__1120 * scaleTransform1._01 + _this__2120 * scaleTransform1._02,_this__0120 * scaleTransform1._10 + _this__1120 * scaleTransform1._11 + _this__2120 * scaleTransform1._12,_this__0120 * scaleTransform1._20 + _this__1120 * scaleTransform1._21 + _this__2120 * scaleTransform1._22,_this__0220 * scaleTransform1._00 + _this__1220 * scaleTransform1._01 + _this__2220 * scaleTransform1._02,_this__0220 * scaleTransform1._10 + _this__1220 * scaleTransform1._11 + _this__2220 * scaleTransform1._12,_this__0220 * scaleTransform1._20 + _this__1220 * scaleTransform1._21 + _this__2220 * scaleTransform1._22);
		} else {
			var wid16 = Main.wid;
			var hi16 = Main.hi;
			var scaleTransform12 = Main.scaleTransform;
			var _this__0021 = 1;
			var _this__1021 = 0;
			var _this__2021 = wid16 / 2 - sv_x / 2;
			var _this__0121 = 0;
			var _this__1121 = 1;
			var _this__2121 = hi16 / 2 - sv_y / 2;
			var _this__0221 = 0;
			var _this__1221 = 0;
			var _this__2221 = 1;
			return new kha_math_FastMatrix3(_this__0021 * scaleTransform12._00 + _this__1021 * scaleTransform12._01 + _this__2021 * scaleTransform12._02,_this__0021 * scaleTransform12._10 + _this__1021 * scaleTransform12._11 + _this__2021 * scaleTransform12._12,_this__0021 * scaleTransform12._20 + _this__1021 * scaleTransform12._21 + _this__2021 * scaleTransform12._22,_this__0121 * scaleTransform12._00 + _this__1121 * scaleTransform12._01 + _this__2121 * scaleTransform12._02,_this__0121 * scaleTransform12._10 + _this__1121 * scaleTransform12._11 + _this__2121 * scaleTransform12._12,_this__0121 * scaleTransform12._20 + _this__1121 * scaleTransform12._21 + _this__2121 * scaleTransform12._22,_this__0221 * scaleTransform12._00 + _this__1221 * scaleTransform12._01 + _this__2221 * scaleTransform12._02,_this__0221 * scaleTransform12._10 + _this__1221 * scaleTransform12._11 + _this__2221 * scaleTransform12._12,_this__0221 * scaleTransform12._20 + _this__1221 * scaleTransform12._21 + _this__2221 * scaleTransform12._22);
		}
		break;
	}
};
simpleText_AlignWindow.centreScaleTransform = function(w,h,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var w2 = wid - border * 2;
	var h2 = hi - border * 2;
	var dw = w2 - w;
	var dh = h2 - h;
	var scale = dw < dh ? w2 / w : h2 / h;
	if(scale < 0) {
		scale = 0.;
	}
	var scaleTransform__00 = scale;
	var scaleTransform__10 = 0;
	var scaleTransform__20 = 0;
	var scaleTransform__01 = 0;
	var scaleTransform__11 = scale;
	var scaleTransform__21 = 0;
	var scaleTransform__02 = 0;
	var scaleTransform__12 = 0;
	var scaleTransform__22 = 1;
	var value_x = w;
	var value_y = h;
	var w1 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
	var x = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w1;
	var y = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w1;
	var sv_x = x;
	var sv_y = y;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = wid / 2 - sv_x / 2;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi / 2 - sv_y / 2;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
};
simpleText_AlignWindow.leftScaleTransform = function(w,h,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var w2 = wid - border * 2;
	var h2 = hi - border * 2;
	var dw = w2 - w;
	var dh = h2 - h;
	var scale = dw < dh ? w2 / w : h2 / h;
	if(scale < 0) {
		scale = 0.;
	}
	var scaleTransform__00 = scale;
	var scaleTransform__10 = 0;
	var scaleTransform__20 = 0;
	var scaleTransform__01 = 0;
	var scaleTransform__11 = scale;
	var scaleTransform__21 = 0;
	var scaleTransform__02 = 0;
	var scaleTransform__12 = 0;
	var scaleTransform__22 = 1;
	var value_x = w;
	var value_y = h;
	var w1 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
	var x = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w1;
	var y = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w1;
	var sv_x = x;
	var sv_y = y;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = border;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi / 2 - sv_y / 2;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
};
simpleText_AlignWindow.rightScaleTransform = function(w,h,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var w2 = wid - border * 2;
	var h2 = hi - border * 2;
	var dw = w2 - w;
	var dh = h2 - h;
	var scale = dw < dh ? w2 / w : h2 / h;
	if(scale < 0) {
		scale = 0.;
	}
	var scaleTransform__00 = scale;
	var scaleTransform__10 = 0;
	var scaleTransform__20 = 0;
	var scaleTransform__01 = 0;
	var scaleTransform__11 = scale;
	var scaleTransform__21 = 0;
	var scaleTransform__02 = 0;
	var scaleTransform__12 = 0;
	var scaleTransform__22 = 1;
	var value_x = w;
	var value_y = h;
	var w1 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
	var x = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w1;
	var y = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w1;
	var sv_x = x;
	var sv_y = y;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = wid - sv_x - border;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi / 2 - sv_y / 2;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
};
simpleText_AlignWindow.topScaleTransform = function(w,h,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var w2 = wid - border * 2;
	var h2 = hi - border * 2;
	var dw = w2 - w;
	var dh = h2 - h;
	var scale = dw < dh ? w2 / w : h2 / h;
	if(scale < 0) {
		scale = 0.;
	}
	var scaleTransform__00 = scale;
	var scaleTransform__10 = 0;
	var scaleTransform__20 = 0;
	var scaleTransform__01 = 0;
	var scaleTransform__11 = scale;
	var scaleTransform__21 = 0;
	var scaleTransform__02 = 0;
	var scaleTransform__12 = 0;
	var scaleTransform__22 = 1;
	var value_x = w;
	var value_y = h;
	var w1 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
	var x = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w1;
	var y = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w1;
	var sv_x = x;
	var sv_y = y;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = wid / 2 - sv_x / 2;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = border;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
};
simpleText_AlignWindow.bottomScaleTransform = function(w,h,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var w2 = wid - border * 2;
	var h2 = hi - border * 2;
	var dw = w2 - w;
	var dh = h2 - h;
	var scale = dw < dh ? w2 / w : h2 / h;
	if(scale < 0) {
		scale = 0.;
	}
	var scaleTransform__00 = scale;
	var scaleTransform__10 = 0;
	var scaleTransform__20 = 0;
	var scaleTransform__01 = 0;
	var scaleTransform__11 = scale;
	var scaleTransform__21 = 0;
	var scaleTransform__02 = 0;
	var scaleTransform__12 = 0;
	var scaleTransform__22 = 1;
	var value_x = w;
	var value_y = h;
	var w1 = scaleTransform__02 * value_x + scaleTransform__12 * value_y + scaleTransform__22;
	var x = (scaleTransform__00 * value_x + scaleTransform__10 * value_y + scaleTransform__20) / w1;
	var y = (scaleTransform__01 * value_x + scaleTransform__11 * value_y + scaleTransform__21) / w1;
	var sv_x = x;
	var sv_y = y;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = wid / 2 - sv_x / 2;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi - sv_y - border;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform__00 + _this__10 * scaleTransform__01 + _this__20 * scaleTransform__02,_this__00 * scaleTransform__10 + _this__10 * scaleTransform__11 + _this__20 * scaleTransform__12,_this__00 * scaleTransform__20 + _this__10 * scaleTransform__21 + _this__20 * scaleTransform__22,_this__01 * scaleTransform__00 + _this__11 * scaleTransform__01 + _this__21 * scaleTransform__02,_this__01 * scaleTransform__10 + _this__11 * scaleTransform__11 + _this__21 * scaleTransform__12,_this__01 * scaleTransform__20 + _this__11 * scaleTransform__21 + _this__21 * scaleTransform__22,_this__02 * scaleTransform__00 + _this__12 * scaleTransform__01 + _this__22 * scaleTransform__02,_this__02 * scaleTransform__10 + _this__12 * scaleTransform__11 + _this__22 * scaleTransform__12,_this__02 * scaleTransform__20 + _this__12 * scaleTransform__21 + _this__22 * scaleTransform__22);
};
simpleText_AlignWindow.scaleBorderTransform = function(w,h,wid,hi,border) {
	var w2 = wid - border * 2;
	var h2 = hi - border * 2;
	var dw = w2 - w;
	var dh = h2 - h;
	var scale = dw < dh ? w2 / w : h2 / h;
	if(scale < 0) {
		scale = 0.;
	}
	return new kha_math_FastMatrix3(scale,0,0,0,scale,0,0,0,1);
};
simpleText_AlignWindow.centreTransform = function(sv) {
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform = Main.scaleTransform;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = wid / 2 - sv.x / 2;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi / 2 - sv.y / 2;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform._00 + _this__10 * scaleTransform._01 + _this__20 * scaleTransform._02,_this__00 * scaleTransform._10 + _this__10 * scaleTransform._11 + _this__20 * scaleTransform._12,_this__00 * scaleTransform._20 + _this__10 * scaleTransform._21 + _this__20 * scaleTransform._22,_this__01 * scaleTransform._00 + _this__11 * scaleTransform._01 + _this__21 * scaleTransform._02,_this__01 * scaleTransform._10 + _this__11 * scaleTransform._11 + _this__21 * scaleTransform._12,_this__01 * scaleTransform._20 + _this__11 * scaleTransform._21 + _this__21 * scaleTransform._22,_this__02 * scaleTransform._00 + _this__12 * scaleTransform._01 + _this__22 * scaleTransform._02,_this__02 * scaleTransform._10 + _this__12 * scaleTransform._11 + _this__22 * scaleTransform._12,_this__02 * scaleTransform._20 + _this__12 * scaleTransform._21 + _this__22 * scaleTransform._22);
};
simpleText_AlignWindow.scaledDim = function(w,h) {
	var scaleTransform = Main.scaleTransform;
	var v_x = w;
	var v_y = h;
	var w1 = scaleTransform._02 * v_x + scaleTransform._12 * v_y + scaleTransform._22;
	var x = (scaleTransform._00 * v_x + scaleTransform._10 * v_y + scaleTransform._20) / w1;
	var y = (scaleTransform._01 * v_x + scaleTransform._11 * v_y + scaleTransform._21) / w1;
	var sv = new kha_math_FastVector2(x,y);
	return sv;
};
simpleText_AlignWindow.centreRightTransform = function(sv,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform = Main.scaleTransform;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = wid - sv.x - border;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi / 2 - sv.y / 2;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform._00 + _this__10 * scaleTransform._01 + _this__20 * scaleTransform._02,_this__00 * scaleTransform._10 + _this__10 * scaleTransform._11 + _this__20 * scaleTransform._12,_this__00 * scaleTransform._20 + _this__10 * scaleTransform._21 + _this__20 * scaleTransform._22,_this__01 * scaleTransform._00 + _this__11 * scaleTransform._01 + _this__21 * scaleTransform._02,_this__01 * scaleTransform._10 + _this__11 * scaleTransform._11 + _this__21 * scaleTransform._12,_this__01 * scaleTransform._20 + _this__11 * scaleTransform._21 + _this__21 * scaleTransform._22,_this__02 * scaleTransform._00 + _this__12 * scaleTransform._01 + _this__22 * scaleTransform._02,_this__02 * scaleTransform._10 + _this__12 * scaleTransform._11 + _this__22 * scaleTransform._12,_this__02 * scaleTransform._20 + _this__12 * scaleTransform._21 + _this__22 * scaleTransform._22);
};
simpleText_AlignWindow.centreLeftTransform = function(sv,border) {
	var wid = Main.wid;
	var hi = Main.hi;
	var scaleTransform = Main.scaleTransform;
	var _this__00 = 1;
	var _this__10 = 0;
	var _this__20 = border;
	var _this__01 = 0;
	var _this__11 = 1;
	var _this__21 = hi / 2 - sv.y / 2;
	var _this__02 = 0;
	var _this__12 = 0;
	var _this__22 = 1;
	return new kha_math_FastMatrix3(_this__00 * scaleTransform._00 + _this__10 * scaleTransform._01 + _this__20 * scaleTransform._02,_this__00 * scaleTransform._10 + _this__10 * scaleTransform._11 + _this__20 * scaleTransform._12,_this__00 * scaleTransform._20 + _this__10 * scaleTransform._21 + _this__20 * scaleTransform._22,_this__01 * scaleTransform._00 + _this__11 * scaleTransform._01 + _this__21 * scaleTransform._02,_this__01 * scaleTransform._10 + _this__11 * scaleTransform._11 + _this__21 * scaleTransform._12,_this__01 * scaleTransform._20 + _this__11 * scaleTransform._21 + _this__21 * scaleTransform._22,_this__02 * scaleTransform._00 + _this__12 * scaleTransform._01 + _this__22 * scaleTransform._02,_this__02 * scaleTransform._10 + _this__12 * scaleTransform._11 + _this__22 * scaleTransform._12,_this__02 * scaleTransform._20 + _this__12 * scaleTransform._21 + _this__22 * scaleTransform._22);
};
var simpleText_HAlign = $hxEnums["simpleText.HAlign"] = { __ename__ : true, __constructs__ : ["LEFT","RIGHT","CENTRE","JUSTIFY"]
	,LEFT: {_hx_index:0,__enum__:"simpleText.HAlign",toString:$estr}
	,RIGHT: {_hx_index:1,__enum__:"simpleText.HAlign",toString:$estr}
	,CENTRE: {_hx_index:2,__enum__:"simpleText.HAlign",toString:$estr}
	,JUSTIFY: {_hx_index:3,__enum__:"simpleText.HAlign",toString:$estr}
};
var simpleText_Selection = $hxEnums["simpleText.Selection"] = { __ename__ : true, __constructs__ : ["CHARACTER","WORD","LINE"]
	,CHARACTER: {_hx_index:0,__enum__:"simpleText.Selection",toString:$estr}
	,WORD: {_hx_index:1,__enum__:"simpleText.Selection",toString:$estr}
	,LINE: {_hx_index:2,__enum__:"simpleText.Selection",toString:$estr}
};
var simpleText_Hit = $hxEnums["simpleText.Hit"] = { __ename__ : true, __constructs__ : ["WITHIN","CLOSE"]
	,WITHIN: {_hx_index:0,__enum__:"simpleText.Hit",toString:$estr}
	,CLOSE: {_hx_index:1,__enum__:"simpleText.Hit",toString:$estr}
};
var simpleText__$SimpleText_AbstractFontStyle_$Impl_$ = {};
$hxClasses["simpleText._SimpleText.AbstractFontStyle_Impl_"] = simpleText__$SimpleText_AbstractFontStyle_$Impl_$;
simpleText__$SimpleText_AbstractFontStyle_$Impl_$.__name__ = true;
simpleText__$SimpleText_AbstractFontStyle_$Impl_$._new = function(s) {
	var this1 = s;
	this1.dirty = true;
	var s1 = this1;
	var hi = s1.font.height(s1.size);
	s1.charHi = hi;
	s1.lineHeight = hi + s1.dAdvanceY;
	return this1;
};
simpleText__$SimpleText_AbstractFontStyle_$Impl_$.hi = function(this1) {
	var s = this1;
	var hi = s.font.height(s.size);
	s.charHi = hi;
	s.lineHeight = hi + s.dAdvanceY;
	return hi;
};
simpleText__$SimpleText_AbstractFontStyle_$Impl_$.resize = function(this1,newSize) {
	var s = this1;
	var scale = newSize / s.size;
	if(this1.size != newSize) {
		s.size = newSize;
		s.dAdvanceX *= scale;
		s.dAdvanceY *= scale;
		s.dirty = true;
	}
	return scale;
};
simpleText__$SimpleText_AbstractFontStyle_$Impl_$.originalSizeScale = function(this1,originalSize,scale) {
	var newSize = scale * originalSize | 0;
	var s = this1;
	var scale1 = newSize / s.size;
	if(this1.size != newSize) {
		s.size = newSize;
		s.dAdvanceX *= scale1;
		s.dAdvanceY *= scale1;
		s.dirty = true;
	}
	return scale1;
};
var simpleText__$SimpleText_AbstractLetter_$Impl_$ = {};
$hxClasses["simpleText._SimpleText.AbstractLetter_Impl_"] = simpleText__$SimpleText_AbstractLetter_$Impl_$;
simpleText__$SimpleText_AbstractLetter_$Impl_$.__name__ = true;
simpleText__$SimpleText_AbstractLetter_$Impl_$._new = function(l) {
	var this1 = l;
	return this1;
};
simpleText__$SimpleText_AbstractLetter_$Impl_$.withinXY = function(this1,px,py) {
	if(py > this1.y && py < this1.y + this1.height) {
		if(px > this1.x) {
			return px < this1.x + this1.width;
		} else {
			return false;
		}
	} else {
		return false;
	}
};
simpleText__$SimpleText_AbstractLetter_$Impl_$.withinX = function(this1,px) {
	if(px > this1.x) {
		return px < this1.x + this1.width;
	} else {
		return false;
	}
};
simpleText__$SimpleText_AbstractLetter_$Impl_$.withinY = function(this1,py) {
	if(py > this1.y) {
		return py < this1.y + this1.height;
	} else {
		return false;
	}
};
simpleText__$SimpleText_AbstractLetter_$Impl_$.closeY = function(this1,py,dy) {
	var uy = py + dy;
	var ly = py - dy;
	var upper = uy > this1.y && uy < this1.y + this1.height;
	var lower = ly > this1.y && ly < this1.y + this1.height;
	if(!upper) {
		return lower;
	} else {
		return true;
	}
};
simpleText__$SimpleText_AbstractLetter_$Impl_$.char = function(this1) {
	var code = this1.charCode;
	return String.fromCodePoint(code);
};
var simpleText__$SimpleText_AbstractRange_$Impl_$ = {};
$hxClasses["simpleText._SimpleText.AbstractRange_Impl_"] = simpleText__$SimpleText_AbstractRange_$Impl_$;
simpleText__$SimpleText_AbstractRange_$Impl_$.__name__ = true;
simpleText__$SimpleText_AbstractRange_$Impl_$._new = function(r) {
	var this1 = r;
	return this1;
};
simpleText__$SimpleText_AbstractRange_$Impl_$.within = function(this1,pos) {
	if(pos >= this1.begin) {
		return pos <= this1.end;
	} else {
		return false;
	}
};
simpleText__$SimpleText_AbstractRange_$Impl_$.iter = function(this1) {
	return new IntIterator(this1.begin,this1.end);
};
var simpleText__$SimpleText_SimpleText_$Impl_$ = {};
$hxClasses["simpleText._SimpleText.SimpleText_Impl_"] = simpleText__$SimpleText_SimpleText_$Impl_$;
simpleText__$SimpleText_SimpleText_$Impl_$.__name__ = true;
simpleText__$SimpleText_SimpleText_$Impl_$._new = function(f) {
	var this1 = f;
	this1.dirty = true;
	this1._tweenParam = 1.;
	return this1;
};
simpleText__$SimpleText_SimpleText_$Impl_$.animateX = function(this1,px,py,charWid,charHi) {
	var tp = this1._tweenParam;
	return (1 - tp) * this1.fx(px,py,charWid,charHi) + px * tp;
};
simpleText__$SimpleText_SimpleText_$Impl_$.animateY = function(this1,px,py,charWid,charHi) {
	var tp = this1._tweenParam;
	return (1 - tp) * this1.fy(px,py,charWid,charHi) + py * tp;
};
simpleText__$SimpleText_SimpleText_$Impl_$.get_tweenParam = function(this1) {
	return this1._tweenParam;
};
simpleText__$SimpleText_SimpleText_$Impl_$.set_tweenParam = function(this1,val) {
	this1._tweenParam = val;
	this1.dirty = true;
	return val;
};
simpleText__$SimpleText_SimpleText_$Impl_$.calculateDimensions = function(this1) {
	var f = this1;
	var s = f.fontStyle;
	var content = f.content;
	var font = s.font;
	var size = s.size;
	var spacing = s.dAdvanceX;
	var lineGap = s.dAdvanceY;
	var hi = font.height(size);
	s.charHi = hi;
	s.lineHeight = hi + lineGap;
	var len = content.length;
	var pos = 0;
	var maxW = 0.;
	var dW = 0.;
	var dy = 0.;
	var c;
	var letter = "";
	var letterW = 0.;
	var desend = false;
	f.linesWidth = [];
	f.spaces = [];
	f.scrollBreaks = [];
	var noSpaces = 0;
	var wordLen = 0;
	var dSpace = 0.;
	while(pos < len) {
		c = content.charCodeAt(pos++);
		switch(c) {
		case 10:case 13:
			if(letter == " ") {
				dW -= letterW + spacing;
			}
			if(pos != len) {
				dy += lineGap + hi;
			}
			if(dW != 0.) {
				dW -= spacing - 1;
			}
			if(dW > maxW) {
				maxW = dW;
			}
			f.linesWidth.push(dW);
			dW = 0.;
			letterW = 0.;
			if(pos != len - 1) {
				desend = false;
			}
			f.spaces.push(noSpaces);
			noSpaces = 0;
			wordLen = 0;
			dSpace = 0.;
			break;
		case 103:case 106:case 112:case 113:case 121:
			var noStop = true;
			if(f.wrapWidth != null) {
				if(dW > f.wrapWidth) {
					if(pos != len) {
						dy += lineGap + hi;
					}
					maxW = f.wrapWidth;
					f.linesWidth.push(dW - dSpace - spacing);
					dSpace = 0.;
					dW = 0.;
					letterW = 0.;
					if(pos != len - 1) {
						desend = false;
					}
					if(noSpaces > 0) {
						--noSpaces;
					}
					f.spaces.push(noSpaces);
					noSpaces = 0;
					pos -= wordLen - 1;
					f.scrollBreaks.push(pos);
					--pos;
					dW += spacing / 2;
					wordLen = 0;
					noStop = false;
				}
			}
			if(noStop) {
				letter = String.fromCodePoint(c);
				letterW = font.width(size,letter);
				dW += letterW;
				dW += spacing;
				dSpace += letterW + spacing;
				desend = true;
				++wordLen;
			}
			break;
		default:
			var noStop1 = true;
			if(f.wrapWidth != null && f.wrapWidth != 0) {
				if(dW > f.wrapWidth) {
					if(pos != len) {
						dy += lineGap + hi;
					}
					maxW = f.wrapWidth;
					f.linesWidth.push(dW - dSpace - spacing);
					dSpace = 0.;
					dW = 0.;
					letterW = 0.;
					if(pos != len - 1) {
						desend = false;
					}
					if(noSpaces > 0) {
						--noSpaces;
					}
					f.spaces.push(noSpaces);
					noSpaces = 0;
					pos -= wordLen - 1;
					f.scrollBreaks.push(pos);
					--pos;
					dW += spacing / 2;
					wordLen = 0;
					noStop1 = true;
				}
			}
			if(noStop1) {
				letter = String.fromCodePoint(c);
				if(letter == " ") {
					dSpace = 0.;
					wordLen = 0;
					++noSpaces;
				} else {
					++wordLen;
				}
				letterW = font.width(size,letter);
				dW += letterW;
				dW += spacing;
				dSpace += letterW + spacing;
			}
		}
	}
	if(letter == " ") {
		--noSpaces;
	}
	f.spaces.push(noSpaces);
	dy += hi;
	if(desend) {
		dy += hi / 6;
	}
	if(dW != 0.) {
		dW -= spacing - 1;
	}
	if(dW > maxW) {
		maxW = dW;
	}
	f.linesWidth.push(dW);
	f.width = maxW;
	f.height = dy;
	return { width : maxW, height : dy};
};
simpleText__$SimpleText_SimpleText_$Impl_$.hi = function(this1) {
	var f = this1;
	var s = this1.fontStyle;
	var hi = s.font.height(s.size);
	s.charHi = hi;
	s.lineHeight = hi + s.dAdvanceY;
	return hi;
};
simpleText__$SimpleText_SimpleText_$Impl_$.render = function(this1,g2,begin) {
	if(begin == null) {
		begin = false;
	}
	var f = this1;
	var s = f.fontStyle;
	if(s.dirty) {
		f.dirty = true;
	}
	var font = s.font;
	var size = s.size;
	var color = s.color;
	var alpha = s.alpha;
	var spacing = s.dAdvanceX;
	var lineGap = s.dAdvanceY;
	var hi = font.height(size);
	s.charHi = hi;
	s.lineHeight = hi + lineGap;
	var dx = f.x;
	var dy = f.y;
	if(begin) {
		g2.begin();
		g2.clear(0);
	}
	if(f.dirty) {
		var f1 = this1;
		var s1 = f1.fontStyle;
		var content = f1.content;
		var font1 = s1.font;
		var size1 = s1.size;
		var spacing1 = s1.dAdvanceX;
		var lineGap1 = s1.dAdvanceY;
		var hi1 = font1.height(size1);
		s1.charHi = hi1;
		s1.lineHeight = hi1 + lineGap1;
		var len = content.length;
		var pos = 0;
		var maxW = 0.;
		var dW = 0.;
		var dy1 = 0.;
		var c;
		var letter = "";
		var letterW = 0.;
		var desend = false;
		f1.linesWidth = [];
		f1.spaces = [];
		f1.scrollBreaks = [];
		var noSpaces = 0;
		var wordLen = 0;
		var dSpace = 0.;
		while(pos < len) {
			c = content.charCodeAt(pos++);
			switch(c) {
			case 10:case 13:
				if(letter == " ") {
					dW -= letterW + spacing1;
				}
				if(pos != len) {
					dy1 += lineGap1 + hi1;
				}
				if(dW != 0.) {
					dW -= spacing1 - 1;
				}
				if(dW > maxW) {
					maxW = dW;
				}
				f1.linesWidth.push(dW);
				dW = 0.;
				letterW = 0.;
				if(pos != len - 1) {
					desend = false;
				}
				f1.spaces.push(noSpaces);
				noSpaces = 0;
				wordLen = 0;
				dSpace = 0.;
				break;
			case 103:case 106:case 112:case 113:case 121:
				var noStop = true;
				if(f1.wrapWidth != null) {
					if(dW > f1.wrapWidth) {
						if(pos != len) {
							dy1 += lineGap1 + hi1;
						}
						maxW = f1.wrapWidth;
						f1.linesWidth.push(dW - dSpace - spacing1);
						dSpace = 0.;
						dW = 0.;
						letterW = 0.;
						if(pos != len - 1) {
							desend = false;
						}
						if(noSpaces > 0) {
							--noSpaces;
						}
						f1.spaces.push(noSpaces);
						noSpaces = 0;
						pos -= wordLen - 1;
						f1.scrollBreaks.push(pos);
						--pos;
						dW += spacing1 / 2;
						wordLen = 0;
						noStop = false;
					}
				}
				if(noStop) {
					letter = String.fromCodePoint(c);
					letterW = font1.width(size1,letter);
					dW += letterW;
					dW += spacing1;
					dSpace += letterW + spacing1;
					desend = true;
					++wordLen;
				}
				break;
			default:
				var noStop1 = true;
				if(f1.wrapWidth != null && f1.wrapWidth != 0) {
					if(dW > f1.wrapWidth) {
						if(pos != len) {
							dy1 += lineGap1 + hi1;
						}
						maxW = f1.wrapWidth;
						f1.linesWidth.push(dW - dSpace - spacing1);
						dSpace = 0.;
						dW = 0.;
						letterW = 0.;
						if(pos != len - 1) {
							desend = false;
						}
						if(noSpaces > 0) {
							--noSpaces;
						}
						f1.spaces.push(noSpaces);
						noSpaces = 0;
						pos -= wordLen - 1;
						f1.scrollBreaks.push(pos);
						--pos;
						dW += spacing1 / 2;
						wordLen = 0;
						noStop1 = true;
					}
				}
				if(noStop1) {
					letter = String.fromCodePoint(c);
					if(letter == " ") {
						dSpace = 0.;
						wordLen = 0;
						++noSpaces;
					} else {
						++wordLen;
					}
					letterW = font1.width(size1,letter);
					dW += letterW;
					dW += spacing1;
					dSpace += letterW + spacing1;
				}
			}
		}
		if(letter == " ") {
			--noSpaces;
		}
		f1.spaces.push(noSpaces);
		dy1 += hi1;
		if(desend) {
			dy1 += hi1 / 6;
		}
		if(dW != 0.) {
			dW -= spacing1 - 1;
		}
		if(dW > maxW) {
			maxW = dW;
		}
		f1.linesWidth.push(dW);
		f1.width = maxW;
		f1.height = dy1;
	}
	var bgAlpha = f.bgAlpha != null;
	var bgColor = f.bgColor != null;
	if(bgColor || bgAlpha) {
		if(bgAlpha) {
			g2.set_opacity(f.bgAlpha);
		}
		if(bgColor) {
			g2.set_color(f.bgColor);
		}
		g2.fillRect(dx,dy,f.width,f.height);
	}
	var lineAlpha = f.lineAlpha != null;
	var lineColor = f.lineColor != null;
	if(lineColor || lineAlpha) {
		if(lineAlpha) {
			g2.set_opacity(f.lineAlpha);
		}
		if(lineColor) {
			g2.set_color(f.lineColor);
		}
		var dy2 = dy;
		var s2 = f.fontStyle;
		var hi2 = s2.font.height(s2.size);
		s2.charHi = hi2;
		s2.lineHeight = hi2 + s2.dAdvanceY;
		var hi_ = hi2;
		var _g = 0;
		var _g1 = f.linesWidth;
		while(_g < _g1.length) {
			var dw = _g1[_g];
			++_g;
			switch(f.fontStyle.hAlign._hx_index) {
			case 0:
				g2.fillRect(dx,dy2,dw,hi_);
				break;
			case 1:
				var dw2 = f.width - dw;
				g2.fillRect(dx + dw2,dy2,f.width - dw2,hi_);
				break;
			case 2:
				var dw21 = (f.width - dw) / 2;
				g2.fillRect(dx + dw21,dy2,f.width - dw21 * 2,hi_);
				break;
			case 3:
				g2.fillRect(dx,dy2,f.width,hi_);
				break;
			}
			dy2 += f.fontStyle.lineHeight;
		}
	}
	g2.set_font(font);
	g2.set_fontSize(size);
	g2.set_opacity(alpha);
	g2.set_color(color);
	f.pos = [];
	var letter1;
	var letterW1 = 0.;
	var dW1 = 0.;
	var content1 = f.content;
	var c1;
	var len1 = content1.length;
	var pos1 = 0;
	var wid = f.width;
	var count = 0;
	var lineWid = f.linesWidth[0];
	++count;
	var breaks = 0;
	var spaceNo = 0;
	var word_i = 0;
	var px;
	var py;
	var pw;
	var ph;
	var hlx = 0;
	var hlw = 0;
	var fW;
	while(pos1 < len1) {
		if(f.scrollBreaks[breaks] - 1 == pos1 + 2) {
			++pos1;
		}
		if(f.scrollBreaks[breaks] - 1 == pos1 + 1) {
			dy += hi + lineGap;
			dW1 = 0.;
			word_i = 0;
			letterW1 = 0.;
			lineWid = f.linesWidth[count];
			spaceNo = 0;
			++count;
			++breaks;
		}
		c1 = content1.charCodeAt(pos1++);
		switch(c1) {
		case 10:case 13:
			dy += hi + lineGap;
			dW1 = 0.;
			word_i = 0;
			letterW1 = 0.;
			lineWid = f.linesWidth[count];
			spaceNo = 0;
			++count;
			break;
		default:
			if(spaceNo > f.spaces[count - 1]) {
				dy += hi + lineGap;
				dW1 = 0.;
				letterW1 = 0.;
				lineWid = f.linesWidth[count];
				spaceNo = 0;
				if(f.dirty) {
					f.pos.pop();
				}
				++count;
				--pos1;
			} else {
				dW1 += letterW1;
				letter1 = String.fromCodePoint(c1);
				if(f.showSpace) {
					if(letter1 == " ") {
						letter1 = "_";
					}
				}
				var noSpaces1 = f.spaces[count - 1];
				var dxdW = dx + dW1;
				switch(this1.fontStyle.hAlign._hx_index) {
				case 0:
					px = dxdW;
					break;
				case 1:
					px = dxdW + wid - lineWid;
					break;
				case 2:
					px = dxdW + (wid - lineWid) / 2;
					break;
				case 3:
					px = noSpaces1 == 0 ? dxdW + (wid - lineWid) / 2 : dxdW;
					break;
				}
				py = dy;
				if(letter1 == "_" || letter1 == " " || letter1 == "." || letter1 == "," || letter1 == ";" || letter1 == ";") {
					word_i = 0;
				} else {
					++word_i;
				}
				fW = font.width(size,letter1);
				if(this1.fx != null) {
					var tp = this1._tweenParam;
					px = (1 - tp) * this1.fx(px,py,hi,fW) + px * tp;
				}
				if(this1.fy != null) {
					var tp1 = this1._tweenParam;
					py = (1 - tp1) * this1.fy(px,py,hi,fW) + py * tp1;
				}
				if(f.highLight) {
					if(f.highLightRange != null) {
						var this2 = f.highLightRange;
						var doHighLight = pos1 >= this2.begin && pos1 <= this2.end;
						if(doHighLight) {
							if(f.highLightRange.begin == pos1) {
								if(f.bgHighLightAlpha != null) {
									g2.set_opacity(f.bgHighLightAlpha);
								}
								if(f.bgHighLightColor != null) {
									g2.set_color(f.bgHighLightColor);
								}
								g2.fillRect(px,py,fW,hi);
								hlx = px + fW;
							} else {
								if(f.bgHighLightAlpha != null) {
									g2.set_opacity(f.bgHighLightAlpha);
								}
								if(f.bgHighLightColor != null) {
									g2.set_color(f.bgHighLightColor);
								}
								hlw = px - hlx + fW;
								g2.fillRect(hlx,py,hlw,hi);
								hlx = px + fW;
							}
							g2.set_opacity(f.highLightAlpha);
							g2.set_color(f.highLightColor);
							g2.drawString(letter1,px,py);
						} else {
							g2.set_opacity(s.alpha);
							g2.set_color(s.color);
							g2.drawString(letter1,px,py);
						}
					} else {
						g2.drawString(letter1,px,py);
					}
				} else {
					g2.drawString(letter1,px,py);
				}
				if(f.showSpace) {
					if(letter1 == "_") {
						letter1 = " ";
					}
				}
				ph = hi;
				var temp = word_i + 47;
				if(f.dirty) {
					f.pos.push({ x : px, y : py, width : fW, height : ph, i : pos1, j : f.pos.length, charCode : temp, word_i : word_i, str : letter1});
				}
				letterW1 = fW + spacing;
				if(letter1 == " ") {
					if(s.hAlign == simpleText_HAlign.JUSTIFY) {
						letterW1 += (wid - lineWid) / f.spaces[count - 1];
					}
					++spaceNo;
				}
			}
		}
	}
	if(f.highLightRange != null) {
		g2.set_opacity(s.alpha);
		g2.set_color(s.color);
	}
	if(begin) {
		g2.end();
	}
	f.dirty = false;
	f.fontStyle.dirty = false;
	return "";
};
simpleText__$SimpleText_SimpleText_$Impl_$.alignmentX = function(this1,dxdW,wid,lineWid,noSpaces) {
	switch(this1.fontStyle.hAlign._hx_index) {
	case 0:
		return dxdW;
	case 1:
		return dxdW + wid - lineWid;
	case 2:
		return dxdW + (wid - lineWid) / 2;
	case 3:
		if(noSpaces == 0) {
			return dxdW + (wid - lineWid) / 2;
		} else {
			return dxdW;
		}
		break;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitString = function(this1,px,py,selection,hit,highlight) {
	switch(selection._hx_index) {
	case 0:
		var letter;
		switch(hit._hx_index) {
		case 0:
			var f = this1;
			var letter1 = null;
			var _g = 0;
			var _g1 = f.pos;
			while(_g < _g1.length) {
				var p = _g1[_g];
				++_g;
				if(py > p.y && py < p.y + p.height && (px > p.x && px < p.x + p.width)) {
					letter1 = p;
					break;
				}
			}
			letter = letter1;
			if(letter != null) {
				if(highlight) {
					var this2 = { begin : letter.i, end : letter.i};
					this1.highLightRange = this2;
				}
				var code = letter.charCode;
				return String.fromCodePoint(code);
			} else {
				if(highlight) {
					this1.highLightRange = null;
				}
				return "";
			}
			break;
		case 1:
			if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
				var f1 = this1;
				var s = f1.fontStyle;
				var l = f1.pos.length;
				var r;
				if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
					var begin = null;
					var end = null;
					var pos_ = f1.pos;
					var p1 = pos_[0];
					var j = l;
					var deltaY = (s.charHi + s.dAdvanceX) / 2 - 2;
					var _g2 = 0;
					var _g11 = l;
					while(_g2 < _g11) {
						var i = _g2++;
						p1 = pos_[i];
						if(j != l) {
							var uy = py + deltaY;
							var ly = py - deltaY;
							var upper = uy > p1.y && uy < p1.y + p1.height;
							var lower = ly > p1.y && ly < p1.y + p1.height;
							if(upper || lower) {
								end = p1;
							} else {
								break;
							}
						} else {
							var uy1 = py + deltaY;
							var ly1 = py - deltaY;
							var upper1 = uy1 > p1.y && uy1 < p1.y + p1.height;
							var lower1 = ly1 > p1.y && ly1 < p1.y + p1.height;
							if(upper1 || lower1) {
								begin = p1;
								j = i;
							}
						}
					}
					r = j == l ? null : { begin : begin, end : end};
				} else {
					r = null;
				}
				var range;
				if(r == null || r.begin == null || r.end == null) {
					range = null;
				} else {
					var this3 = { begin : r.begin.j, end : r.end.j};
					range = this3;
				}
				var minDistance = 100000000.;
				var cx;
				var dx;
				var selected = -1;
				var letter2;
				var pos = this1.pos;
				if(range != null) {
					var _g3 = range.begin;
					var _g12 = range.end + 1;
					while(_g3 < _g12) {
						var i1 = _g3++;
						letter2 = pos[i1];
						cx = letter2.x + letter2.width / 2;
						dx = Math.abs(cx - px);
						if(dx < minDistance) {
							minDistance = dx;
							selected = i1;
						}
					}
					letter = pos[selected];
				} else {
					letter = null;
				}
			} else {
				letter = null;
			}
			if(letter != null) {
				if(highlight) {
					var this4 = { begin : letter.i, end : letter.i};
					this1.highLightRange = this4;
				}
				return letter.str;
			} else {
				if(highlight) {
					this1.highLightRange = null;
				}
				return "";
			}
			break;
		}
		break;
	case 1:
		var r1;
		switch(hit._hx_index) {
		case 0:
			var letter3;
			if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
				var f2 = this1;
				var s1 = f2.fontStyle;
				var l1 = f2.pos.length;
				var r2;
				if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
					var begin1 = null;
					var end1 = null;
					var pos_1 = f2.pos;
					var p2 = pos_1[0];
					var j1 = l1;
					var deltaY1 = (s1.charHi + s1.dAdvanceX) / 2 - 2;
					var _g4 = 0;
					var _g13 = l1;
					while(_g4 < _g13) {
						var i2 = _g4++;
						p2 = pos_1[i2];
						if(j1 != l1) {
							var uy2 = py + deltaY1;
							var ly2 = py - deltaY1;
							var upper2 = uy2 > p2.y && uy2 < p2.y + p2.height;
							var lower2 = ly2 > p2.y && ly2 < p2.y + p2.height;
							if(upper2 || lower2) {
								end1 = p2;
							} else {
								break;
							}
						} else {
							var uy3 = py + deltaY1;
							var ly3 = py - deltaY1;
							var upper3 = uy3 > p2.y && uy3 < p2.y + p2.height;
							var lower3 = ly3 > p2.y && ly3 < p2.y + p2.height;
							if(upper3 || lower3) {
								begin1 = p2;
								j1 = i2;
							}
						}
					}
					r2 = j1 == l1 ? null : { begin : begin1, end : end1};
				} else {
					r2 = null;
				}
				var range1;
				if(r2 == null || r2.begin == null || r2.end == null) {
					range1 = null;
				} else {
					var this5 = { begin : r2.begin.j, end : r2.end.j};
					range1 = this5;
				}
				var minDistance1 = 100000000.;
				var cx1;
				var dx1;
				var selected1 = -1;
				var letter4;
				var pos1 = this1.pos;
				if(range1 != null) {
					var _g5 = range1.begin;
					var _g14 = range1.end + 1;
					while(_g5 < _g14) {
						var i3 = _g5++;
						letter4 = pos1[i3];
						cx1 = letter4.x + letter4.width / 2;
						dx1 = Math.abs(cx1 - px);
						if(dx1 < minDistance1) {
							minDistance1 = dx1;
							selected1 = i3;
						}
					}
					letter3 = pos1[selected1];
				} else {
					letter3 = null;
				}
			} else {
				letter3 = null;
			}
			var r3;
			if(letter3 != null) {
				var f3 = this1;
				var start = letter3.j;
				var end2 = start;
				var begin2 = start - letter3.word_i + 1;
				var l2 = this1.pos.length;
				var y_ = letter3.y;
				var p3;
				var _g6 = start;
				var _g15 = l2;
				while(_g6 < _g15) {
					var i4 = _g6++;
					p3 = f3.pos[i4];
					if(!(p3.word_i != 0 && p3.y == y_)) {
						end2 = i4 - 1;
						break;
					}
				}
				r3 = { begin : this1.pos[begin2], end : this1.pos[end2]};
			} else {
				r3 = null;
			}
			var f4 = this1;
			var l3 = f4.pos.length;
			var l4;
			if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
				var begin3 = null;
				var end3 = null;
				var pos_2 = f4.pos;
				var p4 = pos_2[0];
				var j2 = l3;
				var _g7 = 0;
				var _g16 = l3;
				while(_g7 < _g16) {
					var i5 = _g7++;
					p4 = pos_2[i5];
					if(j2 != l3) {
						if(py > p4.y && py < p4.y + p4.height) {
							end3 = p4;
						} else {
							break;
						}
					} else if(py > p4.y && py < p4.y + p4.height) {
						begin3 = p4;
						j2 = i5;
					}
				}
				l4 = j2 == l3 ? null : { begin : begin3, end : end3};
			} else {
				l4 = null;
			}
			r1 = l4 != null && r3 != null ? r3 : null;
			if(highlight) {
				if(r1 == null || r1.begin == null || r1.end == null) {
					this1.highLightRange = null;
				} else {
					var this6 = { begin : r1.begin.i, end : r1.end.i};
					this1.highLightRange = this6;
				}
			}
			var pos_3 = this1.pos;
			if(r1 != null) {
				if(r1.begin == null || r1.end == null) {
					return "";
				} else {
					var r_begin = r1.begin.j;
					var r_end = r1.end.j;
					var str = "";
					var _g8 = r_begin;
					var _g17 = r_end + 1;
					while(_g8 < _g17) {
						var i6 = _g8++;
						str += pos_3[i6].str;
					}
					return str;
				}
			} else {
				return "";
			}
			break;
		case 1:
			var letter5;
			if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
				var f5 = this1;
				var s2 = f5.fontStyle;
				var l5 = f5.pos.length;
				var r4;
				if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
					var begin4 = null;
					var end4 = null;
					var pos_4 = f5.pos;
					var p5 = pos_4[0];
					var j3 = l5;
					var deltaY2 = (s2.charHi + s2.dAdvanceX) / 2 - 2;
					var _g9 = 0;
					var _g18 = l5;
					while(_g9 < _g18) {
						var i7 = _g9++;
						p5 = pos_4[i7];
						if(j3 != l5) {
							var uy4 = py + deltaY2;
							var ly4 = py - deltaY2;
							var upper4 = uy4 > p5.y && uy4 < p5.y + p5.height;
							var lower4 = ly4 > p5.y && ly4 < p5.y + p5.height;
							if(upper4 || lower4) {
								end4 = p5;
							} else {
								break;
							}
						} else {
							var uy5 = py + deltaY2;
							var ly5 = py - deltaY2;
							var upper5 = uy5 > p5.y && uy5 < p5.y + p5.height;
							var lower5 = ly5 > p5.y && ly5 < p5.y + p5.height;
							if(upper5 || lower5) {
								begin4 = p5;
								j3 = i7;
							}
						}
					}
					r4 = j3 == l5 ? null : { begin : begin4, end : end4};
				} else {
					r4 = null;
				}
				var range2;
				if(r4 == null || r4.begin == null || r4.end == null) {
					range2 = null;
				} else {
					var this7 = { begin : r4.begin.j, end : r4.end.j};
					range2 = this7;
				}
				var minDistance2 = 100000000.;
				var cx2;
				var dx2;
				var selected2 = -1;
				var letter6;
				var pos2 = this1.pos;
				if(range2 != null) {
					var _g10 = range2.begin;
					var _g19 = range2.end + 1;
					while(_g10 < _g19) {
						var i8 = _g10++;
						letter6 = pos2[i8];
						cx2 = letter6.x + letter6.width / 2;
						dx2 = Math.abs(cx2 - px);
						if(dx2 < minDistance2) {
							minDistance2 = dx2;
							selected2 = i8;
						}
					}
					letter5 = pos2[selected2];
				} else {
					letter5 = null;
				}
			} else {
				letter5 = null;
			}
			if(letter5 != null) {
				var f6 = this1;
				var start1 = letter5.j;
				var end5 = start1;
				var begin5 = start1 - letter5.word_i + 1;
				var l6 = this1.pos.length;
				var y_1 = letter5.y;
				var p6;
				var _g20 = start1;
				var _g110 = l6;
				while(_g20 < _g110) {
					var i9 = _g20++;
					p6 = f6.pos[i9];
					if(!(p6.word_i != 0 && p6.y == y_1)) {
						end5 = i9 - 1;
						break;
					}
				}
				r1 = { begin : this1.pos[begin5], end : this1.pos[end5]};
			} else {
				r1 = null;
			}
			if(highlight) {
				if(r1 == null || r1.begin == null || r1.end == null) {
					this1.highLightRange = null;
				} else {
					var this8 = { begin : r1.begin.i, end : r1.end.i};
					this1.highLightRange = this8;
				}
			}
			var pos_5 = this1.pos;
			if(r1 != null) {
				if(!(r1.begin == null || r1.end == null)) {
					var r_begin1 = r1.begin.j;
					var r_end1 = r1.end.j;
					var str1 = "";
					var _g21 = r_begin1;
					var _g111 = r_end1 + 1;
					while(_g21 < _g111) {
						var i10 = _g21++;
						str1 += pos_5[i10].str;
					}
				}
			}
			return "";
		}
		break;
	case 2:
		var r5;
		switch(hit._hx_index) {
		case 0:
			var f7 = this1;
			var l7 = f7.pos.length;
			if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
				var begin6 = null;
				var end6 = null;
				var pos_6 = f7.pos;
				var p7 = pos_6[0];
				var j4 = l7;
				var _g22 = 0;
				var _g112 = l7;
				while(_g22 < _g112) {
					var i11 = _g22++;
					p7 = pos_6[i11];
					if(j4 != l7) {
						if(py > p7.y && py < p7.y + p7.height) {
							end6 = p7;
						} else {
							break;
						}
					} else if(py > p7.y && py < p7.y + p7.height) {
						begin6 = p7;
						j4 = i11;
					}
				}
				r5 = j4 == l7 ? null : { begin : begin6, end : end6};
			} else {
				r5 = null;
			}
			if(highlight) {
				if(r5 == null || r5.begin == null || r5.end == null) {
					this1.highLightRange = null;
				} else {
					var this9 = { begin : r5.begin.i, end : r5.end.i};
					this1.highLightRange = this9;
				}
			}
			var pos_7 = this1.pos;
			if(r5 != null) {
				if(r5.begin == null || r5.end == null) {
					return "";
				} else {
					var r_begin2 = r5.begin.j;
					var r_end2 = r5.end.j;
					var str2 = "";
					var _g23 = r_begin2;
					var _g113 = r_end2 + 1;
					while(_g23 < _g113) {
						var i12 = _g23++;
						str2 += pos_7[i12].str;
					}
					return str2;
				}
			} else {
				return "";
			}
			break;
		case 1:
			var f8 = this1;
			var s3 = f8.fontStyle;
			var l8 = f8.pos.length;
			if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
				var begin7 = null;
				var end7 = null;
				var pos_8 = f8.pos;
				var p8 = pos_8[0];
				var j5 = l8;
				var deltaY3 = (s3.charHi + s3.dAdvanceX) / 2 - 2;
				var _g24 = 0;
				var _g114 = l8;
				while(_g24 < _g114) {
					var i13 = _g24++;
					p8 = pos_8[i13];
					if(j5 != l8) {
						var uy6 = py + deltaY3;
						var ly6 = py - deltaY3;
						var upper6 = uy6 > p8.y && uy6 < p8.y + p8.height;
						var lower6 = ly6 > p8.y && ly6 < p8.y + p8.height;
						if(upper6 || lower6) {
							end7 = p8;
						} else {
							break;
						}
					} else {
						var uy7 = py + deltaY3;
						var ly7 = py - deltaY3;
						var upper7 = uy7 > p8.y && uy7 < p8.y + p8.height;
						var lower7 = ly7 > p8.y && ly7 < p8.y + p8.height;
						if(upper7 || lower7) {
							begin7 = p8;
							j5 = i13;
						}
					}
				}
				r5 = j5 == l8 ? null : { begin : begin7, end : end7};
			} else {
				r5 = null;
			}
			if(highlight) {
				if(r5 == null || r5.begin == null || r5.end == null) {
					this1.highLightRange = null;
				} else {
					var this10 = { begin : r5.begin.i, end : r5.end.i};
					this1.highLightRange = this10;
				}
			}
			var pos_9 = this1.pos;
			if(r5 != null) {
				if(r5.begin == null || r5.end == null) {
					return "";
				} else {
					var r_begin3 = r5.begin.j;
					var r_end3 = r5.end.j;
					var str3 = "";
					var _g25 = r_begin3;
					var _g115 = r_end3 + 1;
					while(_g25 < _g115) {
						var i14 = _g25++;
						str3 += pos_9[i14].str;
					}
					return str3;
				}
			} else {
				return "";
			}
			break;
		}
		break;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.within = function(this1,px,py) {
	if(px > this1.x && px < this1.x + this1.width && py > this1.y) {
		return py < this1.y + this1.height;
	} else {
		return false;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitLetterNear = function(this1,px,py) {
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var f = this1;
		var s = f.fontStyle;
		var l = f.pos.length;
		var r;
		if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
			var begin = null;
			var end = null;
			var pos_ = f.pos;
			var p = pos_[0];
			var j = l;
			var deltaY = (s.charHi + s.dAdvanceX) / 2 - 2;
			var _g = 0;
			var _g1 = l;
			while(_g < _g1) {
				var i = _g++;
				p = pos_[i];
				if(j != l) {
					var uy = py + deltaY;
					var ly = py - deltaY;
					var upper = uy > p.y && uy < p.y + p.height;
					var lower = ly > p.y && ly < p.y + p.height;
					if(upper || lower) {
						end = p;
					} else {
						break;
					}
				} else {
					var uy1 = py + deltaY;
					var ly1 = py - deltaY;
					var upper1 = uy1 > p.y && uy1 < p.y + p.height;
					var lower1 = ly1 > p.y && ly1 < p.y + p.height;
					if(upper1 || lower1) {
						begin = p;
						j = i;
					}
				}
			}
			r = j == l ? null : { begin : begin, end : end};
		} else {
			r = null;
		}
		var range;
		if(r == null || r.begin == null || r.end == null) {
			range = null;
		} else {
			var this2 = { begin : r.begin.j, end : r.end.j};
			range = this2;
		}
		var minDistance = 100000000.;
		var cx;
		var dx;
		var selected = -1;
		var letter;
		var pos = this1.pos;
		if(range != null) {
			var _g2 = range.begin;
			var _g11 = range.end + 1;
			while(_g2 < _g11) {
				var i1 = _g2++;
				letter = pos[i1];
				cx = letter.x + letter.width / 2;
				dx = Math.abs(cx - px);
				if(dx < minDistance) {
					minDistance = dx;
					selected = i1;
				}
			}
			return pos[selected];
		} else {
			return null;
		}
	} else {
		return null;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitLetterWithin = function(this1,px,py) {
	var f = this1;
	var letter = null;
	var _g = 0;
	var _g1 = f.pos;
	while(_g < _g1.length) {
		var p = _g1[_g];
		++_g;
		if(py > p.y && py < p.y + p.height && (px > p.x && px < p.x + p.width)) {
			letter = p;
			break;
		}
	}
	return letter;
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitWordNear = function(this1,px,py) {
	var letter;
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var f = this1;
		var s = f.fontStyle;
		var l = f.pos.length;
		var r;
		if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
			var begin = null;
			var end = null;
			var pos_ = f.pos;
			var p = pos_[0];
			var j = l;
			var deltaY = (s.charHi + s.dAdvanceX) / 2 - 2;
			var _g = 0;
			var _g1 = l;
			while(_g < _g1) {
				var i = _g++;
				p = pos_[i];
				if(j != l) {
					var uy = py + deltaY;
					var ly = py - deltaY;
					var upper = uy > p.y && uy < p.y + p.height;
					var lower = ly > p.y && ly < p.y + p.height;
					if(upper || lower) {
						end = p;
					} else {
						break;
					}
				} else {
					var uy1 = py + deltaY;
					var ly1 = py - deltaY;
					var upper1 = uy1 > p.y && uy1 < p.y + p.height;
					var lower1 = ly1 > p.y && ly1 < p.y + p.height;
					if(upper1 || lower1) {
						begin = p;
						j = i;
					}
				}
			}
			r = j == l ? null : { begin : begin, end : end};
		} else {
			r = null;
		}
		var range;
		if(r == null || r.begin == null || r.end == null) {
			range = null;
		} else {
			var this2 = { begin : r.begin.j, end : r.end.j};
			range = this2;
		}
		var minDistance = 100000000.;
		var cx;
		var dx;
		var selected = -1;
		var letter1;
		var pos = this1.pos;
		if(range != null) {
			var _g2 = range.begin;
			var _g11 = range.end + 1;
			while(_g2 < _g11) {
				var i1 = _g2++;
				letter1 = pos[i1];
				cx = letter1.x + letter1.width / 2;
				dx = Math.abs(cx - px);
				if(dx < minDistance) {
					minDistance = dx;
					selected = i1;
				}
			}
			letter = pos[selected];
		} else {
			letter = null;
		}
	} else {
		letter = null;
	}
	if(letter != null) {
		var f1 = this1;
		var start = letter.j;
		var end1 = start;
		var begin1 = start - letter.word_i + 1;
		var l1 = this1.pos.length;
		var y_ = letter.y;
		var p1;
		var _g3 = start;
		var _g12 = l1;
		while(_g3 < _g12) {
			var i2 = _g3++;
			p1 = f1.pos[i2];
			if(!(p1.word_i != 0 && p1.y == y_)) {
				end1 = i2 - 1;
				break;
			}
		}
		return { begin : this1.pos[begin1], end : this1.pos[end1]};
	} else {
		return null;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitWordWithin = function(this1,px,py) {
	var letter;
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var f = this1;
		var s = f.fontStyle;
		var l = f.pos.length;
		var r;
		if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
			var begin = null;
			var end = null;
			var pos_ = f.pos;
			var p = pos_[0];
			var j = l;
			var deltaY = (s.charHi + s.dAdvanceX) / 2 - 2;
			var _g = 0;
			var _g1 = l;
			while(_g < _g1) {
				var i = _g++;
				p = pos_[i];
				if(j != l) {
					var uy = py + deltaY;
					var ly = py - deltaY;
					var upper = uy > p.y && uy < p.y + p.height;
					var lower = ly > p.y && ly < p.y + p.height;
					if(upper || lower) {
						end = p;
					} else {
						break;
					}
				} else {
					var uy1 = py + deltaY;
					var ly1 = py - deltaY;
					var upper1 = uy1 > p.y && uy1 < p.y + p.height;
					var lower1 = ly1 > p.y && ly1 < p.y + p.height;
					if(upper1 || lower1) {
						begin = p;
						j = i;
					}
				}
			}
			r = j == l ? null : { begin : begin, end : end};
		} else {
			r = null;
		}
		var range;
		if(r == null || r.begin == null || r.end == null) {
			range = null;
		} else {
			var this2 = { begin : r.begin.j, end : r.end.j};
			range = this2;
		}
		var minDistance = 100000000.;
		var cx;
		var dx;
		var selected = -1;
		var letter1;
		var pos = this1.pos;
		if(range != null) {
			var _g2 = range.begin;
			var _g11 = range.end + 1;
			while(_g2 < _g11) {
				var i1 = _g2++;
				letter1 = pos[i1];
				cx = letter1.x + letter1.width / 2;
				dx = Math.abs(cx - px);
				if(dx < minDistance) {
					minDistance = dx;
					selected = i1;
				}
			}
			letter = pos[selected];
		} else {
			letter = null;
		}
	} else {
		letter = null;
	}
	var r1;
	if(letter != null) {
		var f1 = this1;
		var start = letter.j;
		var end1 = start;
		var begin1 = start - letter.word_i + 1;
		var l1 = this1.pos.length;
		var y_ = letter.y;
		var p1;
		var _g3 = start;
		var _g12 = l1;
		while(_g3 < _g12) {
			var i2 = _g3++;
			p1 = f1.pos[i2];
			if(!(p1.word_i != 0 && p1.y == y_)) {
				end1 = i2 - 1;
				break;
			}
		}
		r1 = { begin : this1.pos[begin1], end : this1.pos[end1]};
	} else {
		r1 = null;
	}
	var f2 = this1;
	var l2 = f2.pos.length;
	var l3;
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var begin2 = null;
		var end2 = null;
		var pos_1 = f2.pos;
		var p2 = pos_1[0];
		var j1 = l2;
		var _g4 = 0;
		var _g13 = l2;
		while(_g4 < _g13) {
			var i3 = _g4++;
			p2 = pos_1[i3];
			if(j1 != l2) {
				if(py > p2.y && py < p2.y + p2.height) {
					end2 = p2;
				} else {
					break;
				}
			} else if(py > p2.y && py < p2.y + p2.height) {
				begin2 = p2;
				j1 = i3;
			}
		}
		l3 = j1 == l2 ? null : { begin : begin2, end : end2};
	} else {
		l3 = null;
	}
	if(l3 != null && r1 != null) {
		return r1;
	} else {
		return null;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitLineNear = function(this1,px,py) {
	var f = this1;
	var s = f.fontStyle;
	var l = f.pos.length;
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var begin = null;
		var end = null;
		var pos_ = f.pos;
		var p = pos_[0];
		var j = l;
		var deltaY = (s.charHi + s.dAdvanceX) / 2 - 2;
		var _g = 0;
		var _g1 = l;
		while(_g < _g1) {
			var i = _g++;
			p = pos_[i];
			if(j != l) {
				var uy = py + deltaY;
				var ly = py - deltaY;
				var upper = uy > p.y && uy < p.y + p.height;
				var lower = ly > p.y && ly < p.y + p.height;
				if(upper || lower) {
					end = p;
				} else {
					break;
				}
			} else {
				var uy1 = py + deltaY;
				var ly1 = py - deltaY;
				var upper1 = uy1 > p.y && uy1 < p.y + p.height;
				var lower1 = ly1 > p.y && ly1 < p.y + p.height;
				if(upper1 || lower1) {
					begin = p;
					j = i;
				}
			}
		}
		if(j == l) {
			return null;
		} else {
			return { begin : begin, end : end};
		}
	} else {
		return null;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.hitLineWithin = function(this1,px,py) {
	var f = this1;
	var l = f.pos.length;
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var begin = null;
		var end = null;
		var pos_ = f.pos;
		var p = pos_[0];
		var j = l;
		var _g = 0;
		var _g1 = l;
		while(_g < _g1) {
			var i = _g++;
			p = pos_[i];
			if(j != l) {
				if(py > p.y && py < p.y + p.height) {
					end = p;
				} else {
					break;
				}
			} else if(py > p.y && py < p.y + p.height) {
				begin = p;
				j = i;
			}
		}
		if(j == l) {
			return null;
		} else {
			return { begin : begin, end : end};
		}
	} else {
		return null;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.stringFromRange = function(this1,lr) {
	var pos_ = this1.pos;
	if(lr != null) {
		if(lr.begin == null || lr.end == null) {
			return "";
		} else {
			var r_begin = lr.begin.j;
			var r_end = lr.end.j;
			var str = "";
			var _g = r_begin;
			var _g1 = r_end + 1;
			while(_g < _g1) {
				var i = _g++;
				str += pos_[i].str;
			}
			return str;
		}
	} else {
		return "";
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.nearLine = function(this1,px,py) {
	var f = this1;
	var s = f.fontStyle;
	var l = f.pos.length;
	if(px > this1.x && px < this1.x + this1.width && py > this1.y && py < this1.y + this1.height) {
		var this2 = { begin : l, end : l - 1};
		var r = this2;
		var pos_ = f.pos;
		var p = pos_[0];
		var j = l;
		var deltaY = (s.charHi + s.dAdvanceX) / 2 + 2;
		var _g = 0;
		var _g1 = l;
		while(_g < _g1) {
			var i = _g++;
			p = pos_[i];
			if(j != l) {
				var uy = py + deltaY;
				var ly = py - deltaY;
				var upper = uy > p.y && uy < p.y + p.height;
				var lower = ly > p.y && ly < p.y + p.height;
				if(upper || lower) {
					r.end = p.j;
				} else {
					break;
				}
			} else {
				var uy1 = py + deltaY;
				var ly1 = py - deltaY;
				var upper1 = uy1 > p.y && uy1 < p.y + p.height;
				var lower1 = ly1 > p.y && ly1 < p.y + p.height;
				if(upper1 || lower1) {
					r.begin = p.j;
					j = i;
				}
			}
		}
		if(j == l) {
			return null;
		} else {
			return r;
		}
	} else {
		return null;
	}
};
simpleText__$SimpleText_SimpleText_$Impl_$.toImage = function(this1) {
	var img;
	if(this1.width == 0 || this1.width == null) {
		var f = this1;
		var s = f.fontStyle;
		var content = f.content;
		var font = s.font;
		var size = s.size;
		var spacing = s.dAdvanceX;
		var lineGap = s.dAdvanceY;
		var hi = font.height(size);
		s.charHi = hi;
		s.lineHeight = hi + lineGap;
		var len = content.length;
		var pos = 0;
		var maxW = 0.;
		var dW = 0.;
		var dy = 0.;
		var c;
		var letter = "";
		var letterW = 0.;
		var desend = false;
		f.linesWidth = [];
		f.spaces = [];
		f.scrollBreaks = [];
		var noSpaces = 0;
		var wordLen = 0;
		var dSpace = 0.;
		while(pos < len) {
			c = content.charCodeAt(pos++);
			switch(c) {
			case 10:case 13:
				if(letter == " ") {
					dW -= letterW + spacing;
				}
				if(pos != len) {
					dy += lineGap + hi;
				}
				if(dW != 0.) {
					dW -= spacing - 1;
				}
				if(dW > maxW) {
					maxW = dW;
				}
				f.linesWidth.push(dW);
				dW = 0.;
				letterW = 0.;
				if(pos != len - 1) {
					desend = false;
				}
				f.spaces.push(noSpaces);
				noSpaces = 0;
				wordLen = 0;
				dSpace = 0.;
				break;
			case 103:case 106:case 112:case 113:case 121:
				var noStop = true;
				if(f.wrapWidth != null) {
					if(dW > f.wrapWidth) {
						if(pos != len) {
							dy += lineGap + hi;
						}
						maxW = f.wrapWidth;
						f.linesWidth.push(dW - dSpace - spacing);
						dSpace = 0.;
						dW = 0.;
						letterW = 0.;
						if(pos != len - 1) {
							desend = false;
						}
						if(noSpaces > 0) {
							--noSpaces;
						}
						f.spaces.push(noSpaces);
						noSpaces = 0;
						pos -= wordLen - 1;
						f.scrollBreaks.push(pos);
						--pos;
						dW += spacing / 2;
						wordLen = 0;
						noStop = false;
					}
				}
				if(noStop) {
					letter = String.fromCodePoint(c);
					letterW = font.width(size,letter);
					dW += letterW;
					dW += spacing;
					dSpace += letterW + spacing;
					desend = true;
					++wordLen;
				}
				break;
			default:
				var noStop1 = true;
				if(f.wrapWidth != null && f.wrapWidth != 0) {
					if(dW > f.wrapWidth) {
						if(pos != len) {
							dy += lineGap + hi;
						}
						maxW = f.wrapWidth;
						f.linesWidth.push(dW - dSpace - spacing);
						dSpace = 0.;
						dW = 0.;
						letterW = 0.;
						if(pos != len - 1) {
							desend = false;
						}
						if(noSpaces > 0) {
							--noSpaces;
						}
						f.spaces.push(noSpaces);
						noSpaces = 0;
						pos -= wordLen - 1;
						f.scrollBreaks.push(pos);
						--pos;
						dW += spacing / 2;
						wordLen = 0;
						noStop1 = true;
					}
				}
				if(noStop1) {
					letter = String.fromCodePoint(c);
					if(letter == " ") {
						dSpace = 0.;
						wordLen = 0;
						++noSpaces;
					} else {
						++wordLen;
					}
					letterW = font.width(size,letter);
					dW += letterW;
					dW += spacing;
					dSpace += letterW + spacing;
				}
			}
		}
		if(letter == " ") {
			--noSpaces;
		}
		f.spaces.push(noSpaces);
		dy += hi;
		if(desend) {
			dy += hi / 6;
		}
		if(dW != 0.) {
			dW -= spacing - 1;
		}
		if(dW > maxW) {
			maxW = dW;
		}
		f.linesWidth.push(dW);
		f.width = maxW;
		f.height = dy;
		var dim_width = maxW;
		var dim_height = dy;
		img = kha_Image.createRenderTarget(Math.ceil(dim_width),Math.ceil(dim_height),kha_graphics4_TextureFormat.RGBA32,1,4);
	} else {
		img = kha_Image.createRenderTarget(Math.ceil(this1.width),Math.ceil(this1.height),kha_graphics4_TextureFormat.RGBA32,1,4);
	}
	simpleText__$SimpleText_SimpleText_$Impl_$.render(this1,img.get_g2(),true);
	return img;
};
var simpleText_ScalableText = function(txt_) {
	this.fontScale = 1.;
	this.txt = txt_;
	this.origSize = this.txt.fontStyle.size;
	this.origWrapWidth = this.txt.wrapWidth;
};
$hxClasses["simpleText.ScalableText"] = simpleText_ScalableText;
simpleText_ScalableText.__name__ = true;
simpleText_ScalableText.prototype = {
	txt: null
	,fontScale: null
	,origSize: null
	,origWrapWidth: null
	,get_scale: function() {
		return this.fontScale;
	}
	,set_scale: function(val) {
		this.fontScale = val;
		var this1 = this.txt.fontStyle;
		var newSize = this.fontScale * this.origSize | 0;
		var s = this1;
		var scale = newSize / s.size;
		if(this1.size != newSize) {
			s.size = newSize;
			s.dAdvanceX *= scale;
			s.dAdvanceY *= scale;
			s.dirty = true;
		}
		if(this.txt.fontStyle.dirty) {
			this.txt.wrapWidth = this.origWrapWidth * this.fontScale;
		}
		return this.fontScale;
	}
	,get_height: function() {
		if(this.txt.height == null || this.txt.fontStyle.dirty) {
			var f = this.txt;
			var s = f.fontStyle;
			var content = f.content;
			var font = s.font;
			var size = s.size;
			var spacing = s.dAdvanceX;
			var lineGap = s.dAdvanceY;
			var hi = font.height(size);
			s.charHi = hi;
			s.lineHeight = hi + lineGap;
			var len = content.length;
			var pos = 0;
			var maxW = 0.;
			var dW = 0.;
			var dy = 0.;
			var c;
			var letter = "";
			var letterW = 0.;
			var desend = false;
			f.linesWidth = [];
			f.spaces = [];
			f.scrollBreaks = [];
			var noSpaces = 0;
			var wordLen = 0;
			var dSpace = 0.;
			while(pos < len) {
				c = content.charCodeAt(pos++);
				switch(c) {
				case 10:case 13:
					if(letter == " ") {
						dW -= letterW + spacing;
					}
					if(pos != len) {
						dy += lineGap + hi;
					}
					if(dW != 0.) {
						dW -= spacing - 1;
					}
					if(dW > maxW) {
						maxW = dW;
					}
					f.linesWidth.push(dW);
					dW = 0.;
					letterW = 0.;
					if(pos != len - 1) {
						desend = false;
					}
					f.spaces.push(noSpaces);
					noSpaces = 0;
					wordLen = 0;
					dSpace = 0.;
					break;
				case 103:case 106:case 112:case 113:case 121:
					var noStop = true;
					if(f.wrapWidth != null) {
						if(dW > f.wrapWidth) {
							if(pos != len) {
								dy += lineGap + hi;
							}
							maxW = f.wrapWidth;
							f.linesWidth.push(dW - dSpace - spacing);
							dSpace = 0.;
							dW = 0.;
							letterW = 0.;
							if(pos != len - 1) {
								desend = false;
							}
							if(noSpaces > 0) {
								--noSpaces;
							}
							f.spaces.push(noSpaces);
							noSpaces = 0;
							pos -= wordLen - 1;
							f.scrollBreaks.push(pos);
							--pos;
							dW += spacing / 2;
							wordLen = 0;
							noStop = false;
						}
					}
					if(noStop) {
						letter = String.fromCodePoint(c);
						letterW = font.width(size,letter);
						dW += letterW;
						dW += spacing;
						dSpace += letterW + spacing;
						desend = true;
						++wordLen;
					}
					break;
				default:
					var noStop1 = true;
					if(f.wrapWidth != null && f.wrapWidth != 0) {
						if(dW > f.wrapWidth) {
							if(pos != len) {
								dy += lineGap + hi;
							}
							maxW = f.wrapWidth;
							f.linesWidth.push(dW - dSpace - spacing);
							dSpace = 0.;
							dW = 0.;
							letterW = 0.;
							if(pos != len - 1) {
								desend = false;
							}
							if(noSpaces > 0) {
								--noSpaces;
							}
							f.spaces.push(noSpaces);
							noSpaces = 0;
							pos -= wordLen - 1;
							f.scrollBreaks.push(pos);
							--pos;
							dW += spacing / 2;
							wordLen = 0;
							noStop1 = true;
						}
					}
					if(noStop1) {
						letter = String.fromCodePoint(c);
						if(letter == " ") {
							dSpace = 0.;
							wordLen = 0;
							++noSpaces;
						} else {
							++wordLen;
						}
						letterW = font.width(size,letter);
						dW += letterW;
						dW += spacing;
						dSpace += letterW + spacing;
					}
				}
			}
			if(letter == " ") {
				--noSpaces;
			}
			f.spaces.push(noSpaces);
			dy += hi;
			if(desend) {
				dy += hi / 6;
			}
			if(dW != 0.) {
				dW -= spacing - 1;
			}
			if(dW > maxW) {
				maxW = dW;
			}
			f.linesWidth.push(dW);
			f.width = maxW;
			f.height = dy;
		}
		return this.txt.height;
	}
	,get_width: function() {
		if(this.txt.width == null || this.txt.fontStyle.dirty) {
			var f = this.txt;
			var s = f.fontStyle;
			var content = f.content;
			var font = s.font;
			var size = s.size;
			var spacing = s.dAdvanceX;
			var lineGap = s.dAdvanceY;
			var hi = font.height(size);
			s.charHi = hi;
			s.lineHeight = hi + lineGap;
			var len = content.length;
			var pos = 0;
			var maxW = 0.;
			var dW = 0.;
			var dy = 0.;
			var c;
			var letter = "";
			var letterW = 0.;
			var desend = false;
			f.linesWidth = [];
			f.spaces = [];
			f.scrollBreaks = [];
			var noSpaces = 0;
			var wordLen = 0;
			var dSpace = 0.;
			while(pos < len) {
				c = content.charCodeAt(pos++);
				switch(c) {
				case 10:case 13:
					if(letter == " ") {
						dW -= letterW + spacing;
					}
					if(pos != len) {
						dy += lineGap + hi;
					}
					if(dW != 0.) {
						dW -= spacing - 1;
					}
					if(dW > maxW) {
						maxW = dW;
					}
					f.linesWidth.push(dW);
					dW = 0.;
					letterW = 0.;
					if(pos != len - 1) {
						desend = false;
					}
					f.spaces.push(noSpaces);
					noSpaces = 0;
					wordLen = 0;
					dSpace = 0.;
					break;
				case 103:case 106:case 112:case 113:case 121:
					var noStop = true;
					if(f.wrapWidth != null) {
						if(dW > f.wrapWidth) {
							if(pos != len) {
								dy += lineGap + hi;
							}
							maxW = f.wrapWidth;
							f.linesWidth.push(dW - dSpace - spacing);
							dSpace = 0.;
							dW = 0.;
							letterW = 0.;
							if(pos != len - 1) {
								desend = false;
							}
							if(noSpaces > 0) {
								--noSpaces;
							}
							f.spaces.push(noSpaces);
							noSpaces = 0;
							pos -= wordLen - 1;
							f.scrollBreaks.push(pos);
							--pos;
							dW += spacing / 2;
							wordLen = 0;
							noStop = false;
						}
					}
					if(noStop) {
						letter = String.fromCodePoint(c);
						letterW = font.width(size,letter);
						dW += letterW;
						dW += spacing;
						dSpace += letterW + spacing;
						desend = true;
						++wordLen;
					}
					break;
				default:
					var noStop1 = true;
					if(f.wrapWidth != null && f.wrapWidth != 0) {
						if(dW > f.wrapWidth) {
							if(pos != len) {
								dy += lineGap + hi;
							}
							maxW = f.wrapWidth;
							f.linesWidth.push(dW - dSpace - spacing);
							dSpace = 0.;
							dW = 0.;
							letterW = 0.;
							if(pos != len - 1) {
								desend = false;
							}
							if(noSpaces > 0) {
								--noSpaces;
							}
							f.spaces.push(noSpaces);
							noSpaces = 0;
							pos -= wordLen - 1;
							f.scrollBreaks.push(pos);
							--pos;
							dW += spacing / 2;
							wordLen = 0;
							noStop1 = true;
						}
					}
					if(noStop1) {
						letter = String.fromCodePoint(c);
						if(letter == " ") {
							dSpace = 0.;
							wordLen = 0;
							++noSpaces;
						} else {
							++wordLen;
						}
						letterW = font.width(size,letter);
						dW += letterW;
						dW += spacing;
						dSpace += letterW + spacing;
					}
				}
			}
			if(letter == " ") {
				--noSpaces;
			}
			f.spaces.push(noSpaces);
			dy += hi;
			if(desend) {
				dy += hi / 6;
			}
			if(dW != 0.) {
				dW -= spacing - 1;
			}
			if(dW > maxW) {
				maxW = dW;
			}
			f.linesWidth.push(dW);
			f.width = maxW;
			f.height = dy;
		}
		return this.txt.width;
	}
	,getScaleForWidth: function(val) {
		return val / this.get_width();
	}
	,getScaleForHeight: function(val) {
		return val / this.get_height();
	}
	,__class__: simpleText_ScalableText
};
var simpleText_ScalableImage = function(img_) {
	this.color = -1;
	this.alpha = 1;
	this.y = 0;
	this.x = 0;
	this.scale = 1;
	this.img = img_;
};
$hxClasses["simpleText.ScalableImage"] = simpleText_ScalableImage;
simpleText_ScalableImage.__name__ = true;
simpleText_ScalableImage.prototype = {
	scale: null
	,x: null
	,y: null
	,alpha: null
	,img: null
	,color: null
	,get_height: function() {
		return this.img.get_height() * this.scale;
	}
	,get_width: function() {
		return this.img.get_width() * this.scale;
	}
	,render: function(g2) {
		if(this.alpha == 0) {
			return;
		}
		g2.set_opacity(this.alpha);
		g2.set_color(this.color);
		g2.drawScaledImage(this.img,this.x - this.img.get_width() * this.scale / 2,this.y - this.img.get_height() * this.scale / 2,this.img.get_width() * this.scale,this.img.get_height() * this.scale);
		g2.set_opacity(1.);
	}
	,__class__: simpleText_ScalableImage
};
function $getIterator(o) { if( o instanceof Array ) return HxOverrides.iter(o); else return o.iterator(); }
var $fid = 0;
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $fid++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$hxClasses["Math"] = Math;
if( String.fromCodePoint == null ) String.fromCodePoint = function(c) { return c < 0x10000 ? String.fromCharCode(c) : String.fromCharCode((c>>10)+0xD7C0)+String.fromCharCode((c&0x3FF)+0xDC00); }
String.prototype.__class__ = $hxClasses["String"] = String;
String.__name__ = true;
$hxClasses["Array"] = Array;
Array.__name__ = true;
Date.prototype.__class__ = $hxClasses["Date"] = Date;
Date.__name__ = "Date";
var Int = { };
var Dynamic = { };
var Float = Number;
var Bool = Boolean;
var Class = { };
var Enum = { };
haxe_ds_ObjectMap.count = 0;
var __map_reserved = {};
Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{ get : function() {
	return String(this.val);
}});
if(ArrayBuffer.prototype.slice == null) {
	ArrayBuffer.prototype.slice = js_html__$ArrayBuffer_ArrayBufferCompat.sliceImpl;
}
Main.wid = 0;
Main.hi = 0;
Main.scale = 1.;
haxe_Unserializer.DEFAULT_RESOLVER = new haxe__$Unserializer_DefaultResolver();
haxe_Unserializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe_crypto_Base64.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
haxe_crypto_Base64.BYTES = haxe_io_Bytes.ofString(haxe_crypto_Base64.CHARS);
haxe_io_FPHelper.helper = new DataView(new ArrayBuffer(8));
js_Boot.__toStr = ({ }).toString;
kha_Assets.images = new kha__$Assets_ImageList();
kha_Assets.sounds = new kha__$Assets_SoundList();
kha_Assets.blobs = new kha__$Assets_BlobList();
kha_Assets.fonts = new kha__$Assets_FontList();
kha_Assets.videos = new kha__$Assets_VideoList();
kha__$Color_Color_$Impl_$.Black = -16777216;
kha__$Color_Color_$Impl_$.White = -1;
kha__$Color_Color_$Impl_$.Red = -65536;
kha__$Color_Color_$Impl_$.Blue = -16776961;
kha__$Color_Color_$Impl_$.Green = -16711936;
kha__$Color_Color_$Impl_$.Magenta = -65281;
kha__$Color_Color_$Impl_$.Yellow = -256;
kha__$Color_Color_$Impl_$.Cyan = -16711681;
kha__$Color_Color_$Impl_$.Purple = -8388480;
kha__$Color_Color_$Impl_$.Pink = -16181;
kha__$Color_Color_$Impl_$.Orange = -23296;
kha__$Color_Color_$Impl_$.Transparent = 0;
kha__$Color_Color_$Impl_$.invMaxChannelValue = 0.00392156862745098;
kha_CompilerDefines.utf16 = "1";
kha_CompilerDefines.tweenxcore = "1";
kha_CompilerDefines.tweenx = "1";
kha_CompilerDefines["true"] = "1";
kha_CompilerDefines.trilateralXtra = "1";
kha_CompilerDefines.trilateral = "1";
kha_CompilerDefines.sys_html5 = "1";
kha_CompilerDefines.sys_g4 = "1";
kha_CompilerDefines.sys_g3 = "1";
kha_CompilerDefines.sys_g2 = "1";
kha_CompilerDefines.sys_g1 = "1";
kha_CompilerDefines.sys_a2 = "1";
kha_CompilerDefines.sys_a1 = "1";
kha_CompilerDefines["source-header"] = "Generated by Haxe 4.0.0-preview.5";
kha_CompilerDefines.script_name = "kha";
kha_CompilerDefines.poly2trihx = "1";
kha_CompilerDefines.kha_webgl = "1";
kha_CompilerDefines.kha_version = "1810";
kha_CompilerDefines.kha_js = "1";
kha_CompilerDefines.kha_html5_js = "1";
kha_CompilerDefines.kha_html5 = "1";
kha_CompilerDefines.kha_g4 = "1";
kha_CompilerDefines.kha_g3 = "1";
kha_CompilerDefines.kha_g2 = "1";
kha_CompilerDefines.kha_g1 = "1";
kha_CompilerDefines.kha_a2 = "1";
kha_CompilerDefines.kha_a1 = "1";
kha_CompilerDefines.kha = "1";
kha_CompilerDefines.js_es5 = "1";
kha_CompilerDefines.js_es = "5";
kha_CompilerDefines["js-es5"] = "1";
kha_CompilerDefines.js = "1";
kha_CompilerDefines.hxPolyK = "1";
kha_CompilerDefines.hxGeomAlgo = "1";
kha_CompilerDefines.haxe_ver = "4.000";
kha_CompilerDefines.haxe3 = "1";
kha_CompilerDefines.dce = "std";
kha_CompilerDefines.canvas_id = "khanvas";
kha_Display.instance = new kha_Display();
kha_Scheduler.timeWarpSaveTime = 10.0;
kha_Scheduler.DIF_COUNT = 3;
kha_Scheduler.maxframetime = 0.5;
kha_Scheduler.startTime = 0;
kha_Shaders.painter_colored_fragData0 = "s198:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdmFyeWluZyBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9GcmFnRGF0YVswXSA9IGZyYWdtZW50Q29sb3I7Cn0KCg";
kha_Shaders.painter_colored_fragData1 = "s192:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp2YXJ5aW5nIHZlYzQgZnJhZ21lbnRDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX0ZyYWdEYXRhWzBdID0gZnJhZ21lbnRDb2xvcjsKfQoK";
kha_Shaders.painter_colored_fragData2 = "s223:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwppbiBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBGcmFnQ29sb3IgPSBmcmFnbWVudENvbG9yOwp9Cgo";
kha_Shaders.painter_colored_vertData0 = "s331:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgZnJhZ21lbnRDb2xvcjsKYXR0cmlidXRlIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";
kha_Shaders.painter_colored_vertData1 = "s374:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzQgZnJhZ21lbnRDb2xvcjsKYXR0cmlidXRlIG1lZGl1bXAgdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg";
kha_Shaders.painter_colored_vertData2 = "s311:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgZnJhZ21lbnRDb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";
kha_Shaders.painter_image_fragData0 = "s471:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKdmFyeWluZyBoaWdocCB2ZWMyIHRleENvb3JkOwp2YXJ5aW5nIGhpZ2hwIHZlYzQgY29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZTJEKHRleCwgdGV4Q29vcmQpICogY29sb3I7CiAgICBoaWdocCB2ZWMzIF8zMiA9IHRleGNvbG9yLnh5eiAqIGNvbG9yLnc7CiAgICB0ZXhjb2xvciA9IHZlYzQoXzMyLngsIF8zMi55LCBfMzIueiwgdGV4Y29sb3Iudyk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHRleGNvbG9yOwp9Cgo";
kha_Shaders.painter_image_fragData1 = "s444:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIHRleDsKCnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGNvbG9yOwoKdm9pZCBtYWluKCkKewogICAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUyRCh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB0ZXhjb2xvcjsKfQoK";
kha_Shaders.painter_image_fragData2 = "s487:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKaW4gaGlnaHAgdmVjMiB0ZXhDb29yZDsKaW4gaGlnaHAgdmVjNCBjb2xvcjsKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwoKdm9pZCBtYWluKCkKewogICAgaGlnaHAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUodGV4LCB0ZXhDb29yZCkgKiBjb2xvcjsKICAgIGhpZ2hwIHZlYzMgXzMyID0gdGV4Y29sb3IueHl6ICogY29sb3IudzsKICAgIHRleGNvbG9yID0gdmVjNChfMzIueCwgXzMyLnksIF8zMi56LCB0ZXhjb2xvci53KTsKICAgIEZyYWdDb2xvciA9IHRleGNvbG9yOwp9Cgo";
kha_Shaders.painter_image_vertData0 = "s415:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgY29sb3I7CmF0dHJpYnV0ZSB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";
kha_Shaders.painter_image_vertData1 = "s479:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4UG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWM0IGNvbG9yOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";
kha_Shaders.painter_image_vertData2 = "s380:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK";
kha_Shaders.painter_text_fragData0 = "s351:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKdmFyeWluZyBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7CnZhcnlpbmcgaGlnaHAgdmVjMiB0ZXhDb29yZDsKCnZvaWQgbWFpbigpCnsKICAgIGdsX0ZyYWdEYXRhWzBdID0gdmVjNChmcmFnbWVudENvbG9yLnh5eiwgdGV4dHVyZTJEKHRleCwgdGV4Q29vcmQpLnggKiBmcmFnbWVudENvbG9yLncpOwp9Cgo";
kha_Shaders.painter_text_fragData1 = "s340:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIHRleDsKCnZhcnlpbmcgdmVjNCBmcmFnbWVudENvbG9yOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9GcmFnRGF0YVswXSA9IHZlYzQoZnJhZ21lbnRDb2xvci54eXosIHRleHR1cmUyRCh0ZXgsIHRleENvb3JkKS54ICogZnJhZ21lbnRDb2xvci53KTsKfQoK";
kha_Shaders.painter_text_fragData2 = "s367:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwppbiBoaWdocCB2ZWM0IGZyYWdtZW50Q29sb3I7CmluIGhpZ2hwIHZlYzIgdGV4Q29vcmQ7Cgp2b2lkIG1haW4oKQp7CiAgICBGcmFnQ29sb3IgPSB2ZWM0KGZyYWdtZW50Q29sb3IueHl6LCB0ZXh0dXJlKHRleCwgdGV4Q29vcmQpLnggKiBmcmFnbWVudENvbG9yLncpOwp9Cgo";
kha_Shaders.painter_text_vertData0 = "s436:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgZnJhZ21lbnRDb2xvcjsKYXR0cmlidXRlIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgdGV4Q29vcmQgPSB0ZXhQb3NpdGlvbjsKICAgIGZyYWdtZW50Q29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK";
kha_Shaders.painter_text_vertData1 = "s500:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4UG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWM0IGZyYWdtZW50Q29sb3I7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzQgdmVydGV4Q29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBnbF9Qb3NpdGlvbiA9IHByb2plY3Rpb25NYXRyaXggKiB2ZWM0KHZlcnRleFBvc2l0aW9uLCAxLjApOwogICAgdGV4Q29vcmQgPSB0ZXhQb3NpdGlvbjsKICAgIGZyYWdtZW50Q29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK";
kha_Shaders.painter_text_vertData2 = "s402:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBmcmFnbWVudENvbG9yOwppbiB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBmcmFnbWVudENvbG9yID0gdmVydGV4Q29sb3I7Cn0KCg";
kha_Shaders.painter_video_fragData0 = "s471:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKdmFyeWluZyBoaWdocCB2ZWMyIHRleENvb3JkOwp2YXJ5aW5nIGhpZ2hwIHZlYzQgY29sb3I7Cgp2b2lkIG1haW4oKQp7CiAgICBoaWdocCB2ZWM0IHRleGNvbG9yID0gdGV4dHVyZTJEKHRleCwgdGV4Q29vcmQpICogY29sb3I7CiAgICBoaWdocCB2ZWMzIF8zMiA9IHRleGNvbG9yLnh5eiAqIGNvbG9yLnc7CiAgICB0ZXhjb2xvciA9IHZlYzQoXzMyLngsIF8zMi55LCBfMzIueiwgdGV4Y29sb3Iudyk7CiAgICBnbF9GcmFnRGF0YVswXSA9IHRleGNvbG9yOwp9Cgo";
kha_Shaders.painter_video_fragData1 = "s444:I3ZlcnNpb24gMTAwCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gbWVkaXVtcCBpbnQ7Cgp1bmlmb3JtIG1lZGl1bXAgc2FtcGxlcjJEIHRleDsKCnZhcnlpbmcgdmVjMiB0ZXhDb29yZDsKdmFyeWluZyB2ZWM0IGNvbG9yOwoKdm9pZCBtYWluKCkKewogICAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUyRCh0ZXgsIHRleENvb3JkKSAqIGNvbG9yOwogICAgdmVjMyBfMzIgPSB0ZXhjb2xvci54eXogKiBjb2xvci53OwogICAgdGV4Y29sb3IgPSB2ZWM0KF8zMi54LCBfMzIueSwgXzMyLnosIHRleGNvbG9yLncpOwogICAgZ2xfRnJhZ0RhdGFbMF0gPSB0ZXhjb2xvcjsKfQoK";
kha_Shaders.painter_video_fragData2 = "s487:I3ZlcnNpb24gMzAwIGVzCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwpwcmVjaXNpb24gaGlnaHAgaW50OwoKdW5pZm9ybSBoaWdocCBzYW1wbGVyMkQgdGV4OwoKaW4gaGlnaHAgdmVjMiB0ZXhDb29yZDsKaW4gaGlnaHAgdmVjNCBjb2xvcjsKb3V0IGhpZ2hwIHZlYzQgRnJhZ0NvbG9yOwoKdm9pZCBtYWluKCkKewogICAgaGlnaHAgdmVjNCB0ZXhjb2xvciA9IHRleHR1cmUodGV4LCB0ZXhDb29yZCkgKiBjb2xvcjsKICAgIGhpZ2hwIHZlYzMgXzMyID0gdGV4Y29sb3IueHl6ICogY29sb3IudzsKICAgIHRleGNvbG9yID0gdmVjNChfMzIueCwgXzMyLnksIF8zMi56LCB0ZXhjb2xvci53KTsKICAgIEZyYWdDb2xvciA9IHRleGNvbG9yOwp9Cgo";
kha_Shaders.painter_video_vertData0 = "s415:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmF0dHJpYnV0ZSB2ZWMzIHZlcnRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSB2ZWMyIHRleFBvc2l0aW9uOwp2YXJ5aW5nIHZlYzQgY29sb3I7CmF0dHJpYnV0ZSB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";
kha_Shaders.painter_video_vertData1 = "s479:I3ZlcnNpb24gMTAwCgp1bmlmb3JtIG1lZGl1bXAgbWF0NCBwcm9qZWN0aW9uTWF0cml4OwoKYXR0cmlidXRlIG1lZGl1bXAgdmVjMyB2ZXJ0ZXhQb3NpdGlvbjsKdmFyeWluZyBtZWRpdW1wIHZlYzIgdGV4Q29vcmQ7CmF0dHJpYnV0ZSBtZWRpdW1wIHZlYzIgdGV4UG9zaXRpb247CnZhcnlpbmcgbWVkaXVtcCB2ZWM0IGNvbG9yOwphdHRyaWJ1dGUgbWVkaXVtcCB2ZWM0IHZlcnRleENvbG9yOwoKdm9pZCBtYWluKCkKewogICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogdmVjNCh2ZXJ0ZXhQb3NpdGlvbiwgMS4wKTsKICAgIHRleENvb3JkID0gdGV4UG9zaXRpb247CiAgICBjb2xvciA9IHZlcnRleENvbG9yOwp9Cgo";
kha_Shaders.painter_video_vertData2 = "s380:I3ZlcnNpb24gMzAwIGVzCgp1bmlmb3JtIG1hdDQgcHJvamVjdGlvbk1hdHJpeDsKCmluIHZlYzMgdmVydGV4UG9zaXRpb247Cm91dCB2ZWMyIHRleENvb3JkOwppbiB2ZWMyIHRleFBvc2l0aW9uOwpvdXQgdmVjNCBjb2xvcjsKaW4gdmVjNCB2ZXJ0ZXhDb2xvcjsKCnZvaWQgbWFpbigpCnsKICAgIGdsX1Bvc2l0aW9uID0gcHJvamVjdGlvbk1hdHJpeCAqIHZlYzQodmVydGV4UG9zaXRpb24sIDEuMCk7CiAgICB0ZXhDb29yZCA9IHRleFBvc2l0aW9uOwogICAgY29sb3IgPSB2ZXJ0ZXhDb2xvcjsKfQoK";
kha_System.renderListeners = [];
kha_System.foregroundListeners = [];
kha_System.resumeListeners = [];
kha_System.pauseListeners = [];
kha_System.backgroundListeners = [];
kha_System.shutdownListeners = [];
kha_System.dropFilesListeners = [];
kha_SystemImpl.mobile = false;
kha_SystemImpl.ios = false;
kha_SystemImpl.mobileAudioPlaying = false;
kha_SystemImpl.chrome = false;
kha_SystemImpl.firefox = false;
kha_SystemImpl.ie = false;
kha_SystemImpl.insideInputEvent = false;
kha_SystemImpl.maxGamepads = 4;
kha_SystemImpl.leftMouseCtrlDown = false;
kha_SystemImpl.minimumScroll = 999;
kha_SystemImpl.lastFirstTouchX = 0;
kha_SystemImpl.lastFirstTouchY = 0;
kha_SystemImpl.iosSoundEnabled = false;
kha_SystemImpl.soundEnabled = false;
kha_SystemImpl.iosTouchs = [];
kha_WebGLImage.GL_RGBA16F = 34842;
kha_WebGLImage.GL_RGBA32F = 34836;
kha_WebGLImage.GL_R16F = 33325;
kha_WebGLImage.GL_R32F = 33326;
kha_WebGLImage.GL_RED = 6403;
kha_WebGLImage.GL_DEPTH_COMPONENT24 = 33190;
kha_WebGLImage.GL_DEPTH24_STENCIL8 = 35056;
kha_WebGLImage.GL_DEPTH32F_STENCIL8 = 36013;
kha_Window.windows = [];
kha__$WindowOptions_WindowFeatures_$Impl_$.None = 0;
kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureResizable = 1;
kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureMinimizable = 2;
kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureMaximizable = 4;
kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureBorderless = 8;
kha__$WindowOptions_WindowFeatures_$Impl_$.FeatureOnTop = 16;
kha_audio2_Audio1.channelCount = 16;
kha_audio2_ogg_tools_Crc32.POLY = 79764919;
kha_audio2_ogg_vorbis_VorbisDecodeState.INVALID_BITS = -1;
kha_audio2_ogg_vorbis_VorbisTools.EOP = -1;
kha_audio2_ogg_vorbis_VorbisTools.M__PI = 3.14159265358979323846264;
kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_NUMER = 32;
kha_audio2_ogg_vorbis_VorbisTools.DIVTAB_DENOM = 64;
kha_audio2_ogg_vorbis_VorbisTools.INVERSE_DB_TABLE = [1.0649863e-07,1.1341951e-07,1.2079015e-07,1.2863978e-07,1.3699951e-07,1.4590251e-07,1.5538408e-07,1.6548181e-07,1.7623575e-07,1.8768855e-07,1.9988561e-07,2.1287530e-07,2.2670913e-07,2.4144197e-07,2.5713223e-07,2.7384213e-07,2.9163793e-07,3.1059021e-07,3.3077411e-07,3.5226968e-07,3.7516214e-07,3.9954229e-07,4.2550680e-07,4.5315863e-07,4.8260743e-07,5.1396998e-07,5.4737065e-07,5.8294187e-07,6.2082472e-07,6.6116941e-07,7.0413592e-07,7.4989464e-07,7.9862701e-07,8.5052630e-07,9.0579828e-07,9.6466216e-07,1.0273513e-06,1.0941144e-06,1.1652161e-06,1.2409384e-06,1.3215816e-06,1.4074654e-06,1.4989305e-06,1.5963394e-06,1.7000785e-06,1.8105592e-06,1.9282195e-06,2.0535261e-06,2.1869758e-06,2.3290978e-06,2.4804557e-06,2.6416497e-06,2.8133190e-06,2.9961443e-06,3.1908506e-06,3.3982101e-06,3.6190449e-06,3.8542308e-06,4.1047004e-06,4.3714470e-06,4.6555282e-06,4.9580707e-06,5.2802740e-06,5.6234160e-06,5.9888572e-06,6.3780469e-06,6.7925283e-06,7.2339451e-06,7.7040476e-06,8.2047000e-06,8.7378876e-06,9.3057248e-06,9.9104632e-06,1.0554501e-05,1.1240392e-05,1.1970856e-05,1.2748789e-05,1.3577278e-05,1.4459606e-05,1.5399272e-05,1.6400004e-05,1.7465768e-05,1.8600792e-05,1.9809576e-05,2.1096914e-05,2.2467911e-05,2.3928002e-05,2.5482978e-05,2.7139006e-05,2.8902651e-05,3.0780908e-05,3.2781225e-05,3.4911534e-05,3.7180282e-05,3.9596466e-05,4.2169667e-05,4.4910090e-05,4.7828601e-05,5.0936773e-05,5.4246931e-05,5.7772202e-05,6.1526565e-05,6.5524908e-05,6.9783085e-05,7.4317983e-05,7.9147585e-05,8.4291040e-05,8.9768747e-05,9.5602426e-05,0.00010181521,0.00010843174,0.00011547824,0.00012298267,0.00013097477,0.00013948625,0.00014855085,0.00015820453,0.00016848555,0.00017943469,0.00019109536,0.00020351382,0.00021673929,0.00023082423,0.00024582449,0.00026179955,0.00027881276,0.00029693158,0.00031622787,0.00033677814,0.00035866388,0.00038197188,0.00040679456,0.00043323036,0.00046138411,0.00049136745,0.00052329927,0.00055730621,0.00059352311,0.00063209358,0.00067317058,0.00071691700,0.00076350630,0.00081312324,0.00086596457,0.00092223983,0.00098217216,0.0010459992,0.0011139742,0.0011863665,0.0012634633,0.0013455702,0.0014330129,0.0015261382,0.0016253153,0.0017309374,0.0018434235,0.0019632195,0.0020908006,0.0022266726,0.0023713743,0.0025254795,0.0026895994,0.0028643847,0.0030505286,0.0032487691,0.0034598925,0.0036847358,0.0039241906,0.0041792066,0.0044507950,0.0047400328,0.0050480668,0.0053761186,0.0057254891,0.0060975636,0.0064938176,0.0069158225,0.0073652516,0.0078438871,0.0083536271,0.0088964928,0.009474637,0.010090352,0.010746080,0.011444421,0.012188144,0.012980198,0.013823725,0.014722068,0.015678791,0.016697687,0.017782797,0.018938423,0.020169149,0.021479854,0.022875735,0.024362330,0.025945531,0.027631618,0.029427276,0.031339626,0.033376252,0.035545228,0.037855157,0.040315199,0.042935108,0.045725273,0.048696758,0.051861348,0.055231591,0.058820850,0.062643361,0.066714279,0.071049749,0.075666962,0.080584227,0.085821044,0.091398179,0.097337747,0.10366330,0.11039993,0.11757434,0.12521498,0.13335215,0.14201813,0.15124727,0.16107617,0.17154380,0.18269168,0.19456402,0.20720788,0.22067342,0.23501402,0.25028656,0.26655159,0.28387361,0.30232132,0.32196786,0.34289114,0.36517414,0.38890521,0.41417847,0.44109412,0.46975890,0.50028648,0.53279791,0.56742212,0.60429640,0.64356699,0.68538959,0.72993007,0.77736504,0.82788260,0.88168307,0.9389798,1.0];
kha_audio2_ogg_vorbis_data_Codebook.NO_CODE = 255;
kha_audio2_ogg_vorbis_data_Codebook.delay = 0;
kha_audio2_ogg_vorbis_data_Header.PACKET_ID = 1;
kha_audio2_ogg_vorbis_data_Header.PACKET_COMMENT = 3;
kha_audio2_ogg_vorbis_data_Header.PACKET_SETUP = 5;
kha_audio2_ogg_vorbis_data_PageFlag.CONTINUED_PACKET = 1;
kha_audio2_ogg_vorbis_data_PageFlag.FIRST_PAGE = 2;
kha_audio2_ogg_vorbis_data_PageFlag.LAST_PAGE = 4;
kha_audio2_ogg_vorbis_data_Setting.MAX_CHANNELS = 16;
kha_audio2_ogg_vorbis_data_Setting.PUSHDATA_CRC_COUNT = 4;
kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_LENGTH = 10;
kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_SIZE = 1024;
kha_audio2_ogg_vorbis_data_Setting.FAST_HUFFMAN_TABLE_MASK = 1023;
kha_graphics2_Graphics.fontGlyphs = (function($this) {
	var $r;
	var _g = [];
	{
		var _g1 = 32;
		while(_g1 < 256) {
			var i = _g1++;
			_g.push(i);
		}
	}
	$r = _g;
	return $r;
}(this));
kha_graphics2_truetype_StbTruetype.STBTT_vmove = 1;
kha_graphics2_truetype_StbTruetype.STBTT_vline = 2;
kha_graphics2_truetype_StbTruetype.STBTT_vcurve = 3;
kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_DONTCARE = 0;
kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_BOLD = 1;
kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_ITALIC = 2;
kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_UNDERSCORE = 4;
kha_graphics2_truetype_StbTruetype.STBTT_MACSTYLE_NONE = 8;
kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_UNICODE = 0;
kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MAC = 1;
kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_ISO = 2;
kha_graphics2_truetype_StbTruetype.STBTT_PLATFORM_ID_MICROSOFT = 3;
kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_0 = 0;
kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_1_1 = 1;
kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_ISO_10646 = 2;
kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_BMP = 3;
kha_graphics2_truetype_StbTruetype.STBTT_UNICODE_EID_UNICODE_2_0_FULL = 4;
kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SYMBOL = 0;
kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_BMP = 1;
kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_SHIFTJIS = 2;
kha_graphics2_truetype_StbTruetype.STBTT_MS_EID_UNICODE_FULL = 10;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ROMAN = 0;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_ARABIC = 4;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_JAPANESE = 1;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_HEBREW = 5;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_CHINESE_TRAD = 2;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_GREEK = 6;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_KOREAN = 3;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_EID_RUSSIAN = 7;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ENGLISH = 1033;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_ITALIAN = 1040;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_CHINESE = 2052;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_JAPANESE = 1041;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_DUTCH = 1043;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_KOREAN = 1042;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_FRENCH = 1036;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_RUSSIAN = 1049;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_GERMAN = 1031;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SPANISH = 1033;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_HEBREW = 1037;
kha_graphics2_truetype_StbTruetype.STBTT_MS_LANG_SWEDISH = 1053;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ENGLISH = 0;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_JAPANESE = 11;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ARABIC = 12;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_KOREAN = 23;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_DUTCH = 4;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_RUSSIAN = 32;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_FRENCH = 1;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SPANISH = 6;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_GERMAN = 2;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_SWEDISH = 5;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_HEBREW = 10;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_SIMPLIFIED = 33;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_ITALIAN = 3;
kha_graphics2_truetype_StbTruetype.STBTT_MAC_LANG_CHINESE_TRAD = 19;
kha_graphics2_truetype_StbTruetype.STBTT_MAX_OVERSAMPLE = 8;
kha_graphics2_truetype_StbTruetype.STBTT_RASTERIZER_VERSION = 2;
kha_graphics4_CubeMap.GL_RGBA16F = 34842;
kha_graphics4_CubeMap.GL_RGBA32F = 34836;
kha_graphics4_CubeMap.GL_R16F = 33325;
kha_graphics4_CubeMap.GL_R32F = 33326;
kha_graphics4_CubeMap.GL_DEPTH_COMPONENT24 = 33190;
kha_graphics4_CubeMap.GL_DEPTH24_STENCIL8 = 35056;
kha_graphics4_CubeMap.GL_DEPTH32F_STENCIL8 = 36013;
kha_graphics4_ImageShaderPainter.bufferSize = 1500;
kha_graphics4_ImageShaderPainter.vertexSize = 9;
kha_graphics4_ColoredShaderPainter.bufferSize = 100;
kha_graphics4_ColoredShaderPainter.triangleBufferSize = 100;
kha_graphics4_TextShaderPainter.bufferSize = 100;
kha_input_Gamepad.__meta__ = { statics : { sendConnectEvent : { input : null}, sendDisconnectEvent : { input : null}}, fields : { sendAxisEvent : { input : null}, sendButtonEvent : { input : null}}};
kha_input_Gamepad.instances = [];
kha_input_Gamepad.connectListeners = [];
kha_input_Gamepad.disconnectListeners = [];
kha_input_Keyboard.__meta__ = { fields : { sendDownEvent : { input : null}, sendUpEvent : { input : null}, sendPressEvent : { input : null}}};
kha_input_Mouse.__meta__ = { fields : { sendLeaveEvent : { input : null}, sendDownEvent : { input : null}, sendUpEvent : { input : null}, sendMoveEvent : { input : null}, sendWheelEvent : { input : null}}};
kha_input_Sensor.accelerometer = new kha_input_Sensor();
kha_input_Sensor.gyroscope = new kha_input_Sensor();
kha_internal_BytesBlob.bufferSize = 2000;
kha_internal_HdrFormat.radiancePattern = new EReg("#\\?RADIANCE","i");
kha_internal_HdrFormat.commentPattern = new EReg("#.*","i");
kha_internal_HdrFormat.gammaPattern = new EReg("GAMMA=","i");
kha_internal_HdrFormat.exposurePattern = new EReg("EXPOSURE=\\s*([0-9]*[.][0-9]*)","i");
kha_internal_HdrFormat.formatPattern = new EReg("FORMAT=32-bit_rle_rgbe","i");
kha_internal_HdrFormat.widthHeightPattern = new EReg("-Y ([0-9]+) \\+X ([0-9]+)","i");
kha_js_AEAudioChannel.todo = [];
kha_js_Sound.loading = [];
kha_math_FastMatrix3.width = 3;
kha_math_FastMatrix3.height = 3;
kha_math_FastMatrix4.width = 4;
kha_math_FastMatrix4.height = 4;
kha_math_Matrix3.width = 3;
kha_math_Matrix3.height = 3;
kha_math_Matrix4.width = 4;
kha_math_Matrix4.height = 4;
kha_math_Quaternion.AXIS_X = 0;
kha_math_Quaternion.AXIS_Y = 1;
kha_math_Quaternion.AXIS_Z = 2;
kha_network_ControllerBuilder.nextId = 0;
kha_network_Session.START = 0;
kha_network_Session.ENTITY_UPDATES = 1;
kha_network_Session.CONTROLLER_UPDATES = 2;
kha_network_Session.REMOTE_CALL = 3;
kha_network_Session.PING = 4;
kha_network_Session.SESSION_ERROR = 5;
kha_network_Session.PLAYER_UPDATES = 6;
kha_network_Session.RPC_SERVER = 0;
kha_network_Session.RPC_ALL = 1;
kha_network_SyncBuilder.nextId = 0;
kha_network_SyncBuilder.objects = [];
Main.main();
})(typeof exports != "undefined" ? exports : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
